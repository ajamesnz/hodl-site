(()=>{var LF=Object.defineProperty;var UF=(Tn,Mn,je)=>Mn in Tn?LF(Tn,Mn,{enumerable:!0,configurable:!0,writable:!0,value:je}):Tn[Mn]=je;var MF=(Tn,Mn)=>()=>(Mn||Tn((Mn={exports:{}}).exports,Mn),Mn.exports);var W=(Tn,Mn,je)=>UF(Tn,typeof Mn!="symbol"?Mn+"":Mn,je);var VF=MF(($a,ja)=>{try{let Tn=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},Mn=new Tn.Error().stack;Mn&&(Tn._sentryDebugIds=Tn._sentryDebugIds||{},Tn._sentryDebugIds[Mn]="012e6d01-f0ab-4b7e-941e-66f8dae10ac0",Tn._sentryDebugIdIdentifier="sentry-dbid-012e6d01-f0ab-4b7e-941e-66f8dae10ac0")}catch{}{let Tn=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};Tn.SENTRY_RELEASE={id:"6.24.2"}}(()=>{var Tn={38507:(z,M,A)=>{"use strict";var R=A(94479),N=A(91473);function U(C){return C instanceof $||C instanceof Error&&C.name==="TRPCClientError"}function O(C){return N.isObject(C)&&N.isObject(C.error)&&typeof C.error.code=="number"&&typeof C.error.message=="string"}class $ extends Error{static from(B,S={}){const F=B;return U(F)?(S.meta&&(F.meta={...F.meta,...S.meta}),F):O(F)?new $(F.error.message,{...S,result:F}):F instanceof Error?new $(F.message,{...S,cause:R.getCauseFromUnknown(F)}):new $("Unknown error",{...S,cause:F})}constructor(B,S){const F=S?.cause;super(B,{cause:F}),this.meta=S?.meta,this.cause=F,this.shape=S?.result?.error,this.data=S?.result?.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,$.prototype)}}M.TRPCClientError=$},2131:(z,M,A)=>{"use strict";var R=A(33067),N=A(91473),U=A(38507),O=A(34948);const $=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function C(j){let G=null,ue=null;const se=()=>{clearTimeout(ue),ue=null,G=null};function Y(J){const te=[[]];let ne=0;for(;;){const be=J[ne];if(!be)break;const ke=te[te.length-1];if(be.aborted){be.reject?.(new Error("Aborted")),ne++;continue}if(j.validate(ke.concat(be).map(We=>We.key))){ke.push(be),ne++;continue}if(ke.length===0){be.reject?.(new Error("Input is too big for a single dispatch")),ne++;continue}te.push([])}return te}function X(){const J=Y(G);se();for(const te of J){if(!te.length)continue;const ne={items:te,cancel:$};for(const We of te)We.batch=ne;const be=(We,Ye)=>{const et=ne.items[We];et.resolve?.(Ye),et.batch=null,et.reject=null,et.resolve=null},{promise:ke,cancel:Oe}=j.fetch(ne.items.map(We=>We.key),be);ne.cancel=Oe,ke.then(We=>{for(let Ye=0;Ye<We.length;Ye++){const et=We[Ye];be(Ye,et)}for(const Ye of ne.items)Ye.reject?.(new Error("Missing result")),Ye.batch=null}).catch(We=>{for(const Ye of ne.items)Ye.reject?.(We),Ye.batch=null})}}function ie(J){const te={aborted:!1,key:J,batch:null,resolve:$,reject:$},ne=new Promise((ke,Oe)=>{te.reject=Oe,te.resolve=ke,G||(G=[]),G.push(te)});return ue||(ue=setTimeout(X)),{promise:ne,cancel:()=>{te.aborted=!0,te.batch?.items.every(ke=>ke.aborted)&&(te.batch.cancel(),te.batch=null)}}}return{load:ie}}function B(j){return function(ue){const se=O.resolveHTTPLinkOptions(ue),Y=ue.maxURLLength??1/0;return X=>{const ie=ke=>{const Oe=Ye=>{if(Y===1/0)return!0;const et=Ye.map(Pe=>Pe.path).join(","),K=Ye.map(Pe=>Pe.input);return O.getUrl({...se,runtime:X,type:ke,path:et,inputs:K}).length<=Y},We=j({...se,runtime:X,type:ke,opts:ue});return{validate:Oe,fetch:We}},J=C(ie("query")),te=C(ie("mutation")),ne=C(ie("subscription")),be={query:J,subscription:ne,mutation:te};return({op:ke})=>R.observable(Oe=>{const We=be[ke.type],{promise:Ye,cancel:et}=We.load(ke);let K;return Ye.then(Te=>{K=Te;const Pe=N.transformResult(Te.json,X);if(!Pe.ok){Oe.error(U.TRPCClientError.from(Pe.error,{meta:Te.meta}));return}Oe.next({context:Te.meta,result:Pe.result}),Oe.complete()}).catch(Te=>{Oe.error(U.TRPCClientError.from(Te,{meta:K?.meta}))}),()=>{et()}})}}}const F=B(j=>G=>{const ue=G.map(ie=>ie.path).join(","),se=G.map(ie=>ie.input),{promise:Y,cancel:X}=O.jsonHttpRequester({...j,path:ue,inputs:se,headers(){return j.opts.headers?typeof j.opts.headers=="function"?j.opts.headers({opList:G}):j.opts.headers:{}}});return{promise:Y.then(ie=>(Array.isArray(ie.json)?ie.json:G.map(()=>ie.json)).map(ne=>({meta:ie.meta,json:ne}))),cancel:X}});M.createHTTPBatchLink=B,M.httpBatchLink=F},34948:(z,M,A)=>{"use strict";var R=A(38507);const N=Y=>typeof Y=="function";function U(Y){if(Y)return Y;if(typeof window<"u"&&N(window.fetch))return window.fetch;if(typeof globalThis<"u"&&N(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}function O(Y){return Y||(typeof window<"u"&&window.AbortController?window.AbortController:typeof globalThis<"u"&&globalThis.AbortController?globalThis.AbortController:null)}function $(Y){return{url:Y.url.toString().replace(/\/$/,""),fetch:Y.fetch,AbortController:O(Y.AbortController)}}function C(Y){const X={};for(let ie=0;ie<Y.length;ie++){const J=Y[ie];X[ie]=J}return X}const B={query:"GET",mutation:"POST"};function S(Y){return"input"in Y?Y.runtime.transformer.serialize(Y.input):C(Y.inputs.map(X=>Y.runtime.transformer.serialize(X)))}const F=Y=>{let X=Y.url+"/"+Y.path;const ie=[];if("inputs"in Y&&ie.push("batch=1"),Y.type==="query"){const J=S(Y);J!==void 0&&ie.push(`input=${encodeURIComponent(JSON.stringify(J))}`)}return ie.length&&(X+="?"+ie.join("&")),X},j=Y=>{if(Y.type==="query")return;const X=S(Y);return X!==void 0?JSON.stringify(X):void 0},G=Y=>se({...Y,contentTypeHeader:"application/json",getUrl:F,getBody:j});async function ue(Y,X){const ie=Y.getUrl(Y),J=Y.getBody(Y),{type:te}=Y,ne=await Y.headers();/* istanbul ignore if -- @preserve */if(te==="subscription")throw new Error("Subscriptions should use wsLink");const be={...Y.contentTypeHeader?{"content-type":Y.contentTypeHeader}:{},...Y.batchModeHeader?{"trpc-batch-mode":Y.batchModeHeader}:{},...ne};return U(Y.fetch)(ie,{method:B[te],signal:X?.signal,body:J,headers:be})}function se(Y){const X=Y.AbortController?new Y.AbortController:null,ie={};let J=!1;return{promise:new Promise((be,ke)=>{ue(Y,X).then(Oe=>(ie.response=Oe,J=!0,Oe.json())).then(Oe=>{ie.responseJSON=Oe,be({json:Oe,meta:ie})}).catch(Oe=>{J=!0,ke(R.TRPCClientError.from(Oe,{meta:ie}))})}),cancel:()=>{J||X?.abort()}}}M.fetchHTTPResponse=ue,M.getBody=j,M.getFetch=U,M.getUrl=F,M.httpRequest=se,M.jsonHttpRequester=G,M.resolveHTTPLinkOptions=$},83931:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var R=A(33067),N=A(85031),U=A(38507),O=A(94479),$=A(34948),C=A(2131),B=A(32805),S=A(36937),F=A(88819);A(91473);class j{$request({type:Re,input:de,path:he,context:He={}}){return N.createChain({links:this.links,op:{id:++this.requestId,type:Re,path:he,input:de,context:He}}).pipe(R.share())}requestAsPromise(Re){const de=this.$request(Re),{promise:he,abort:He}=R.observableToPromise(de);return new Promise(($e,tt)=>{Re.signal?.addEventListener("abort",He),he.then(Tt=>{$e(Tt.result.data)}).catch(Tt=>{tt(U.TRPCClientError.from(Tt))})})}query(Re,de,he){return this.requestAsPromise({type:"query",path:Re,input:de,context:he?.context,signal:he?.signal})}mutation(Re,de,he){return this.requestAsPromise({type:"mutation",path:Re,input:de,context:he?.context,signal:he?.signal})}subscription(Re,de,he){return this.$request({type:"subscription",path:Re,input:de,context:he?.context}).subscribe({next(Je){Je.result.type==="started"?he.onStarted?.():Je.result.type==="stopped"?he.onStopped?.():he.onData?.(Je.result.data)},error(Je){he.onError?.(Je)},complete(){he.onComplete?.()}})}constructor(Re){this.requestId=0;const de=(()=>{const he=Re.transformer;return he?"input"in he?Re.transformer:{input:he,output:he}:{input:{serialize:He=>He,deserialize:He=>He},output:{serialize:He=>He,deserialize:He=>He}}})();this.runtime={transformer:{serialize:he=>de.input.serialize(he),deserialize:he=>de.output.deserialize(he)},combinedTransformer:de},this.links=Re.links.map(he=>he(this.runtime))}}function G(Ce){return new j(Ce)}function ue(Ce){return new j(Ce)}const se={query:"query",mutate:"mutation",subscribe:"subscription"},Y=Ce=>se[Ce];function X(Ce){return O.createFlatProxy(Re=>Ce.hasOwnProperty(Re)?Ce[Re]:Re==="__untypedClient"?Ce:O.createRecursiveProxy(({path:de,args:he})=>{const He=[Re,...de],Je=Y(He.pop()),$e=He.join(".");return Ce[Je]($e,...he)}))}function ie(Ce){const Re=new j(Ce);return X(Re)}function J(Ce){return Ce.__untypedClient}function te(Ce){if(Ce)return Ce;if(typeof window<"u"&&window.TextDecoder)return new window.TextDecoder;if(typeof globalThis<"u"&&globalThis.TextDecoder)return new globalThis.TextDecoder;throw new Error("No TextDecoder implementation found")}async function ne(Ce){const Re=Ce.parse??JSON.parse,de=he=>{if(Ce.signal?.aborted||!he||he==="}")return;const He=he.indexOf(":"),Je=he.substring(2,He-1),$e=he.substring(He+1);Ce.onSingle(Number(Je),Re($e))};await be(Ce.readableStream,de,Ce.textDecoder)}async function be(Ce,Re,de){let he="";const He=Je=>{const tt=de.decode(Je).split(`
`);if(tt.length===1)he+=tt[0];else if(tt.length>1){Re(he+tt[0]);for(let Tt=1;Tt<tt.length-1;Tt++)Re(tt[Tt]);he=tt[tt.length-1]}};"getReader"in Ce?await Oe(Ce,He):await ke(Ce,He),Re(he)}function ke(Ce,Re){return new Promise(de=>{Ce.on("data",Re),Ce.on("end",de)})}async function Oe(Ce,Re){const de=Ce.getReader();let he=await de.read();for(;!he.done;)Re(he.value),he=await de.read()}const We=(Ce,Re)=>{const de=Ce.AbortController?new Ce.AbortController:null,he=$.fetchHTTPResponse({...Ce,contentTypeHeader:"application/json",batchModeHeader:"stream",getUrl:$.getUrl,getBody:$.getBody},de),He=()=>de?.abort(),Je=he.then(async $e=>{if(!$e.body)throw new Error("Received response without body");const tt={response:$e};return ne({readableStream:$e.body,onSingle:Re,parse:Tt=>({json:JSON.parse(Tt),meta:tt}),signal:de?.signal,textDecoder:Ce.textDecoder})});return{cancel:He,promise:Je}},Ye=Ce=>{const Re=te(Ce.opts.textDecoder);return(de,he)=>{const He=de.map(Tt=>Tt.path).join(","),Je=de.map(Tt=>Tt.input),{cancel:$e,promise:tt}=We({...Ce,textDecoder:Re,path:He,inputs:Je,headers(){return Ce.opts.headers?typeof Ce.opts.headers=="function"?Ce.opts.headers({opList:de}):Ce.opts.headers:{}}},(Tt,ut)=>{he(Tt,ut)});return{promise:tt.then(()=>[]),cancel:$e}}},et=C.createHTTPBatchLink(Ye),K=Ce=>{if("input"in Ce){if(!(Ce.input instanceof FormData))throw new Error("Input is not FormData");return Ce.input}},Te=Ce=>{if(Ce.type!=="mutation")throw new Error("We only handle mutations with formdata");return $.httpRequest({...Ce,getUrl(){return`${Ce.url}/${Ce.path}`},getBody:K})},Pe=B.httpLinkFactory({requester:Te});M.splitLink=N.splitLink,M.TRPCClientError=U.TRPCClientError,M.getFetch=$.getFetch,M.httpBatchLink=C.httpBatchLink,M.httpLink=B.httpLink,M.httpLinkFactory=B.httpLinkFactory,M.loggerLink=S.loggerLink,M.createWSClient=F.createWSClient,M.wsLink=F.wsLink,M.TRPCUntypedClient=j,M.clientCallTypeToProcedureType=Y,M.createTRPCClient=ue,M.createTRPCClientProxy=X,M.createTRPCProxyClient=ie,M.createTRPCUntypedClient=G,M.experimental_formDataLink=Pe,M.getUntypedClient=J,M.unstable_httpBatchStreamLink=et},32805:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var R=A(33067),N=A(91473),U=A(38507),O=A(34948);A(94479);function $(B){return S=>{const F=O.resolveHTTPLinkOptions(S);return j=>({op:G})=>R.observable(ue=>{const{path:se,input:Y,type:X}=G,{promise:ie,cancel:J}=B.requester({...F,runtime:j,type:X,path:se,input:Y,headers(){return S.headers?typeof S.headers=="function"?S.headers({op:G}):S.headers:{}}});let te;return ie.then(ne=>{te=ne.meta;const be=N.transformResult(ne.json,j);if(!be.ok){ue.error(U.TRPCClientError.from(be.error,{meta:te}));return}ue.next({context:ne.meta,result:be.result}),ue.complete()}).catch(ne=>{ue.error(U.TRPCClientError.from(ne,{meta:te}))}),()=>{J()}})}}const C=$({requester:O.jsonHttpRequester});M.httpLink=C,M.httpLinkFactory=$},36937:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var R=A(33067);function N(B){return typeof FormData>"u"?!1:B instanceof FormData}const U={css:{query:["72e3ff","3fb0d8"],mutation:["c5a3fc","904dfc"],subscription:["ff49e1","d83fbe"]},ansi:{regular:{query:["\x1B[30;46m","\x1B[97;46m"],mutation:["\x1B[30;45m","\x1B[97;45m"],subscription:["\x1B[30;42m","\x1B[97;42m"]},bold:{query:["\x1B[1;30;46m","\x1B[1;97;46m"],mutation:["\x1B[1;30;45m","\x1B[1;97;45m"],subscription:["\x1B[1;30;42m","\x1B[1;97;42m"]}}};function O(B){const{direction:S,type:F,path:j,id:G,input:ue}=B,se=[],Y=[];if(B.colorMode==="ansi"){const[te,ne]=U.ansi.regular[F],[be,ke]=U.ansi.bold[F];return se.push(S==="up"?te:ne,S==="up"?">>":"<<",F,S==="up"?be:ke,`#${G}`,j,"\x1B[0m"),S==="up"?Y.push({input:B.input}):Y.push({input:B.input,result:"result"in B.result?B.result.result:B.result,elapsedMs:B.elapsedMs}),{parts:se,args:Y}}const[X,ie]=U.css[F],J=`
    background-color: #${S==="up"?X:ie}; 
    color: ${S==="up"?"black":"white"};
    padding: 2px;
  `;return se.push("%c",S==="up"?">>":"<<",F,`#${G}`,`%c${j}%c`,"%O"),Y.push(J,`${J}; font-weight: bold;`,`${J}; font-weight: normal;`),S==="up"?Y.push({input:ue,context:B.context}):Y.push({input:ue,result:B.result,elapsedMs:B.elapsedMs,context:B.context}),{parts:se,args:Y}}const $=({c:B=console,colorMode:S="css"})=>F=>{const j=F.input,G=N(j)?Object.fromEntries(j):j,{parts:ue,args:se}=O({...F,colorMode:S,input:G}),Y=F.direction==="down"&&F.result&&(F.result instanceof Error||"error"in F.result.result)?"error":"log";B[Y].apply(null,[ue.join(" ")].concat(se))};function C(B={}){const{enabled:S=()=>!0}=B,F=B.colorMode??(typeof window>"u"?"ansi":"css"),{logger:j=$({c:B.console,colorMode:F})}=B;return()=>({op:G,next:ue})=>R.observable(se=>{S({...G,direction:"up"})&&j({...G,direction:"up"});const Y=Date.now();function X(ie){const J=Date.now()-Y;S({...G,direction:"down",result:ie})&&j({...G,direction:"down",elapsedMs:J,result:ie})}return ue(G).pipe(R.tap({next(ie){X(ie)},error(ie){X(ie)}})).subscribe(se)})}M.loggerLink=C},88819:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var R=A(33067),N=A(91473),U=A(38507);A(94479);/* istanbul ignore next -- @preserve */const O=S=>S===0?0:Math.min(1e3*2**S,3e4);function $(S){const{url:F,WebSocket:j=WebSocket,retryDelayMs:G=O,onOpen:ue,onClose:se}=S;/* istanbul ignore next -- @preserve */if(!j)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");let Y=[];const X=Object.create(null);let ie=0,J=null,te=null,ne=Pe(),be="connecting";function ke(){be!=="open"||J||(J=setTimeout(()=>{J=null,Y.length===1?ne.send(JSON.stringify(Y.pop())):ne.send(JSON.stringify(Y)),Y=[]}))}function Oe(){if(te!==null||be==="closed")return;const Re=G(ie++);Ye(Re)}function We(){be="connecting";const Re=ne;ne=Pe(),et(Re)}function Ye(Re){te||(be="connecting",te=setTimeout(We,Re))}function et(Re){Object.values(X).some(he=>he.ws===Re)||Re.close()}function K(){Object.values(X).forEach(Re=>{Re.type==="subscription"&&Re.callbacks.complete()})}function Te(Re){Y.some(de=>de.id===Re.op.id)||Ce(Re.op,Re.callbacks)}function Pe(){const Re=typeof F=="function"?F():F,de=new j(Re);clearTimeout(te),te=null,de.addEventListener("open",()=>{/* istanbul ignore next -- @preserve */de===ne&&(ie=0,be="open",ue?.(),ke())}),de.addEventListener("error",()=>{de===ne&&Oe()});const he=Je=>{if(Je.method==="reconnect"&&de===ne){be==="open"&&se?.(),We();for(const $e of Object.values(X))$e.type==="subscription"&&Te($e)}},He=Je=>{const $e=Je.id!==null&&X[Je.id];if($e){if($e.callbacks.next?.(Je),$e.ws!==ne&&de===ne){const tt=$e.ws;$e.ws=ne,et(tt)}"result"in Je&&Je.result.type==="stopped"&&de===ne&&$e.callbacks.complete()}};return de.addEventListener("message",({data:Je})=>{const $e=JSON.parse(Je);"method"in $e?he($e):He($e),(de!==ne||be==="closed")&&et(de)}),de.addEventListener("close",({code:Je})=>{be==="open"&&se?.({code:Je}),ne===de&&Oe();for(const[$e,tt]of Object.entries(X))if(tt.ws===de){if(be==="closed"){delete X[$e],tt.callbacks.complete?.();continue}tt.type==="subscription"?Te(tt):(delete X[$e],tt.callbacks.error?.(U.TRPCClientError.from(new C("WebSocket closed prematurely"))))}}),de}function Ce(Re,de){const{type:he,input:He,path:Je,id:$e}=Re,tt={id:$e,method:he,params:{input:He,path:Je}};return X[$e]={ws:ne,type:he,callbacks:de,op:Re},Y.push(tt),ke(),()=>{const Tt=X[$e]?.callbacks;delete X[$e],Y=Y.filter(ut=>ut.id!==$e),Tt?.complete?.(),ne.readyState===j.OPEN&&Re.type==="subscription"&&(Y.push({id:$e,method:"subscription.stop"}),ke())}}return{close:()=>{be="closed",se?.(),K(),et(ne),clearTimeout(te),te=null},request:Ce,getConnection(){return ne}}}class C extends Error{constructor(F){super(F),this.name="TRPCWebSocketClosedError",Object.setPrototypeOf(this,C.prototype)}}function B(S){return F=>{const{client:j}=S;return({op:G})=>R.observable(ue=>{const{type:se,path:Y,id:X,context:ie}=G,J=F.transformer.serialize(G.input),te=j.request({type:se,path:Y,input:J,id:X,context:ie},{error(ne){ue.error(ne),te()},complete(){ue.complete()},next(ne){const be=N.transformResult(ne,F);if(!be.ok){ue.error(U.TRPCClientError.from(be.error));return}ue.next({result:be.result}),G.type!=="subscription"&&(te(),ue.complete())}});return()=>{te()}})}}M.createWSClient=$,M.wsLink=B},85031:(z,M,A)=>{"use strict";var R=A(33067);function N($){return R.observable(C=>{function B(F=0,j=$.op){const G=$.links[F];if(!G)throw new Error("No more links to execute - did you forget to add an ending link?");return G({op:j,next(se){return B(F+1,se)}})}return B().subscribe(C)})}function U($){return Array.isArray($)?$:[$]}function O($){return C=>{const B=U($.true).map(F=>F(C)),S=U($.false).map(F=>F(C));return F=>R.observable(j=>{const G=$.condition(F.op)?B:S;return N({op:F.op,links:G}).subscribe(j)})}}M.createChain=N,M.splitLink=O},91473:(z,M)=>{"use strict";function A(O){return!!O&&!Array.isArray(O)&&typeof O=="object"}function R(O,$){if("error"in O){const B=$.transformer.deserialize(O.error);return{ok:!1,error:{...O,error:B}}}return{ok:!0,result:{...O.result,...(!O.result.type||O.result.type==="data")&&{type:"data",data:$.transformer.deserialize(O.result.data)}}}}class N extends Error{constructor(){super("Unable to transform response from server")}}function U(O,$){let C;try{C=R(O,$)}catch{throw new N}if(!C.ok&&(!A(C.error.error)||typeof C.error.error.code!="number"))throw new N;if(C.ok&&!A(C.result))throw new N;return C}M.isObject=A,M.transformResult=U},25929:(z,M)=>{"use strict";function A(U){const O=Object.create(null);for(const $ in U){const C=U[$];O[C]=$}return O}const R={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},N=A(R);M.TRPC_ERROR_CODES_BY_KEY=R,M.TRPC_ERROR_CODES_BY_NUMBER=N,M.invert=A},4891:(z,M)=>{"use strict";function A(U){return!!U&&!Array.isArray(U)&&typeof U=="object"}class R extends Error{}function N(U){if(U instanceof Error)return U;const O=typeof U;if(!(O==="undefined"||O==="function"||U===null)){if(O!=="object")return new Error(String(U));if(A(U)){const $=new R;for(const C in U)$[C]=U[C];return $}}}M.getCauseFromUnknown=N},96282:(z,M,A)=>{"use strict";var R=A(25929);const N=R.invert(R.TRPC_ERROR_CODES_BY_KEY),U={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,FORBIDDEN:403,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501};function O(G){return U[G]??500}function $(G){const ue=Array.isArray(G)?G:[G],se=new Set(ue.map(X=>{if("error"in X){const ie=X.error.data;if(typeof ie.httpStatus=="number")return ie.httpStatus;const J=N[X.error.code];return O(J)}return 200}));return se.size!==1?207:se.values().next().value}function C(G){return O(G.code)}const B=()=>{};function S(G,ue){return new Proxy(B,{get(Y,X){if(!(typeof X!="string"||X==="then"))return S(G,[...ue,X])},apply(Y,X,ie){const J=ue[ue.length-1]==="apply";return G({args:J?ie.length>=2?ie[1]:[]:ie,path:J?ue.slice(0,-1):ue})}})}const F=G=>S(G,[]),j=G=>new Proxy(B,{get(ue,se){if(!(typeof se!="string"||se==="then"))return G(se)}});M.TRPC_ERROR_CODES_BY_NUMBER=N,M.createFlatProxy=j,M.createRecursiveProxy=F,M.getHTTPStatusCode=$,M.getHTTPStatusCodeFromError=C},97003:(z,M)=>{"use strict";function A(O){return O}function R(O){return O.length===0?A:O.length===1?O[0]:function(C){return O.reduce((B,S)=>S(B),C)}}function N(O){return typeof O=="object"&&O!==null&&"subscribe"in O}function U(O){const $={subscribe(C){let B=null,S=!1,F=!1,j=!1;function G(){if(B===null){j=!0;return}F||(F=!0,typeof B=="function"?B():B&&B.unsubscribe())}return B=O({next(ue){S||C.next?.(ue)},error(ue){S||(S=!0,C.error?.(ue),G())},complete(){S||(S=!0,C.complete?.(),G())}}),j&&G(),{unsubscribe:G}},pipe(...C){return R(C)($)}};return $}M.isObservable=N,M.observable=U},33067:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var R=A(97003);function N(B){return S=>{let F=0,j=null;const G=[];function ue(){j||(j=S.subscribe({next(Y){for(const X of G)X.next?.(Y)},error(Y){for(const X of G)X.error?.(Y)},complete(){for(const Y of G)Y.complete?.()}}))}function se(){if(F===0&&j){const Y=j;j=null,Y.unsubscribe()}}return{subscribe(Y){return F++,G.push(Y),ue(),{unsubscribe(){F--,se();const X=G.findIndex(ie=>ie===Y);X>-1&&G.splice(X,1)}}}}}}function U(B){return S=>({subscribe(F){let j=0;return S.subscribe({next(ue){F.next?.(B(ue,j++))},error(ue){F.error?.(ue)},complete(){F.complete?.()}})}})}function O(B){return S=>({subscribe(F){return S.subscribe({next(j){B.next?.(j),F.next?.(j)},error(j){B.error?.(j),F.error?.(j)},complete(){B.complete?.(),F.complete?.()}})}})}class $ extends Error{constructor(S){super(S),this.name="ObservableAbortError",Object.setPrototypeOf(this,$.prototype)}}function C(B){let S;return{promise:new Promise((j,G)=>{let ue=!1;function se(){ue||(ue=!0,G(new $("This operation was aborted.")),Y.unsubscribe())}const Y=B.subscribe({next(X){ue=!0,j(X),se()},error(X){ue=!0,G(X),se()},complete(){ue=!0,se()}});S=se}),abort:S}}M.isObservable=R.isObservable,M.observable=R.observable,M.map=U,M.observableToPromise=C,M.share=N,M.tap=O},94479:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var R=A(96282),N=A(94043),U=A(4891);A(25929),M.createFlatProxy=R.createFlatProxy,M.createRecursiveProxy=R.createRecursiveProxy,M.getErrorShape=N.getErrorShape,M.transformTRPCResponse=N.transformTRPCResponse,M.getCauseFromUnknown=U.getCauseFromUnknown},94043:(z,M,A)=>{"use strict";var R=A(96282),N=A(25929);function U(C){const{path:B,error:S,config:F}=C,{code:j}=C.error,G={message:S.message,code:N.TRPC_ERROR_CODES_BY_KEY[j],data:{code:j,httpStatus:R.getHTTPStatusCodeFromError(S)}};return F.isDev&&typeof C.error.stack=="string"&&(G.data.stack=C.error.stack),typeof B=="string"&&(G.data.path=B),F.errorFormatter({...C,shape:G})}function O(C,B){return"error"in B?{...B,error:C.transformer.output.serialize(B.error)}:"data"in B.result?{...B,result:{...B.result,data:C.transformer.output.serialize(B.result.data)}}:B}function $(C,B){return Array.isArray(B)?B.map(S=>O(C,S)):O(C,B)}M.getErrorShape=U,M.transformTRPCResponse=$},47040:(z,M,A)=>{"use strict";A.d(M,{L:()=>N,l:()=>R});const R={english:{title:"English",code:"en",translationKey:"languages.english",browserLanguage:"en"},chinese:{title:"\u4E2D\u6587",code:"zh_CN",translationKey:"languages.chinese",browserLanguage:"zh-CN"},russian:{title:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",code:"ru",translationKey:"languages.russian",browserLanguage:"ru"},turkish:{title:"T\xFCrk\xE7e",code:"tr",translationKey:"languages.turkish",browserLanguage:"tr"},ukrainian:{title:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",code:"uk",translationKey:"languages.ukrainian",browserLanguage:"uk"},vietnamese:{title:"Ti\u1EBFng Vi\u1EC7t",code:"vi",translationKey:"languages.vietnamese",browserLanguage:"vi"}},N="english"},84933:(z,M)=>{"use strict";M.byteLength=B,M.toByteArray=F,M.fromByteArray=ue;for(var A=[],R=[],N=typeof Uint8Array<"u"?Uint8Array:Array,U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=0,$=U.length;O<$;++O)A[O]=U[O],R[U.charCodeAt(O)]=O;R[45]=62,R[95]=63;function C(se){var Y=se.length;if(Y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var X=se.indexOf("=");X===-1&&(X=Y);var ie=X===Y?0:4-X%4;return[X,ie]}function B(se){var Y=C(se),X=Y[0],ie=Y[1];return(X+ie)*3/4-ie}function S(se,Y,X){return(Y+X)*3/4-X}function F(se){var Y,X=C(se),ie=X[0],J=X[1],te=new N(S(se,ie,J)),ne=0,be=J>0?ie-4:ie,ke;for(ke=0;ke<be;ke+=4)Y=R[se.charCodeAt(ke)]<<18|R[se.charCodeAt(ke+1)]<<12|R[se.charCodeAt(ke+2)]<<6|R[se.charCodeAt(ke+3)],te[ne++]=Y>>16&255,te[ne++]=Y>>8&255,te[ne++]=Y&255;return J===2&&(Y=R[se.charCodeAt(ke)]<<2|R[se.charCodeAt(ke+1)]>>4,te[ne++]=Y&255),J===1&&(Y=R[se.charCodeAt(ke)]<<10|R[se.charCodeAt(ke+1)]<<4|R[se.charCodeAt(ke+2)]>>2,te[ne++]=Y>>8&255,te[ne++]=Y&255),te}function j(se){return A[se>>18&63]+A[se>>12&63]+A[se>>6&63]+A[se&63]}function G(se,Y,X){for(var ie,J=[],te=Y;te<X;te+=3)ie=(se[te]<<16&16711680)+(se[te+1]<<8&65280)+(se[te+2]&255),J.push(j(ie));return J.join("")}function ue(se){for(var Y,X=se.length,ie=X%3,J=[],te=16383,ne=0,be=X-ie;ne<be;ne+=te)J.push(G(se,ne,ne+te>be?be:ne+te));return ie===1?(Y=se[X-1],J.push(A[Y>>2]+A[Y<<4&63]+"==")):ie===2&&(Y=(se[X-2]<<8)+se[X-1],J.push(A[Y>>10]+A[Y>>4&63]+A[Y<<2&63]+"=")),J.join("")}},36533:(z,M,A)=>{"use strict";var R;/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const N=A(84933),U=A(63328),O=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;M.hp=S,R=ne,M.IS=50;const $=2147483647;R=$,S.TYPED_ARRAY_SUPPORT=C(),!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{const V=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(V,w),V.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});function B(V){if(V>$)throw new RangeError('The value "'+V+'" is invalid for option "size"');const w=new Uint8Array(V);return Object.setPrototypeOf(w,S.prototype),w}function S(V,w,E){if(typeof V=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ue(V)}return F(V,w,E)}S.poolSize=8192;function F(V,w,E){if(typeof V=="string")return se(V,w);if(ArrayBuffer.isView(V))return X(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(Vn(V,ArrayBuffer)||V&&Vn(V.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Vn(V,SharedArrayBuffer)||V&&Vn(V.buffer,SharedArrayBuffer)))return ie(V,w,E);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const q=V.valueOf&&V.valueOf();if(q!=null&&q!==V)return S.from(q,w,E);const ae=J(V);if(ae)return ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return S.from(V[Symbol.toPrimitive]("string"),w,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}S.from=function(V,w,E){return F(V,w,E)},Object.setPrototypeOf(S.prototype,Uint8Array.prototype),Object.setPrototypeOf(S,Uint8Array);function j(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function G(V,w,E){return j(V),V<=0?B(V):w!==void 0?typeof E=="string"?B(V).fill(w,E):B(V).fill(w):B(V)}S.alloc=function(V,w,E){return G(V,w,E)};function ue(V){return j(V),B(V<0?0:te(V)|0)}S.allocUnsafe=function(V){return ue(V)},S.allocUnsafeSlow=function(V){return ue(V)};function se(V,w){if((typeof w!="string"||w==="")&&(w="utf8"),!S.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const E=be(V,w)|0;let q=B(E);const ae=q.write(V,w);return ae!==E&&(q=q.slice(0,ae)),q}function Y(V){const w=V.length<0?0:te(V.length)|0,E=B(w);for(let q=0;q<w;q+=1)E[q]=V[q]&255;return E}function X(V){if(Vn(V,Uint8Array)){const w=new Uint8Array(V);return ie(w.buffer,w.byteOffset,w.byteLength)}return Y(V)}function ie(V,w,E){if(w<0||V.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<w+(E||0))throw new RangeError('"length" is outside of buffer bounds');let q;return w===void 0&&E===void 0?q=new Uint8Array(V):E===void 0?q=new Uint8Array(V,w):q=new Uint8Array(V,w,E),Object.setPrototypeOf(q,S.prototype),q}function J(V){if(S.isBuffer(V)){const w=te(V.length)|0,E=B(w);return E.length===0||V.copy(E,0,0,w),E}if(V.length!==void 0)return typeof V.length!="number"||ls(V.length)?B(0):Y(V);if(V.type==="Buffer"&&Array.isArray(V.data))return Y(V.data)}function te(V){if(V>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return V|0}function ne(V){return+V!=V&&(V=0),S.alloc(+V)}S.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==S.prototype},S.compare=function(w,E){if(Vn(w,Uint8Array)&&(w=S.from(w,w.offset,w.byteLength)),Vn(E,Uint8Array)&&(E=S.from(E,E.offset,E.byteLength)),!S.isBuffer(w)||!S.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===E)return 0;let q=w.length,ae=E.length;for(let fe=0,Ae=Math.min(q,ae);fe<Ae;++fe)if(w[fe]!==E[fe]){q=w[fe],ae=E[fe];break}return q<ae?-1:ae<q?1:0},S.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(w,E){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return S.alloc(0);let q;if(E===void 0)for(E=0,q=0;q<w.length;++q)E+=w[q].length;const ae=S.allocUnsafe(E);let fe=0;for(q=0;q<w.length;++q){let Ae=w[q];if(Vn(Ae,Uint8Array))fe+Ae.length>ae.length?(S.isBuffer(Ae)||(Ae=S.from(Ae)),Ae.copy(ae,fe)):Uint8Array.prototype.set.call(ae,Ae,fe);else if(S.isBuffer(Ae))Ae.copy(ae,fe);else throw new TypeError('"list" argument must be an Array of Buffers');fe+=Ae.length}return ae};function be(V,w){if(S.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||Vn(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);const E=V.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&E===0)return 0;let ae=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return Cr(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return Ir(V).length;default:if(ae)return q?-1:Cr(V).length;w=(""+w).toLowerCase(),ae=!0}}S.byteLength=be;function ke(V,w,E){let q=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,w>>>=0,E<=w))return"";for(V||(V="utf8");;)switch(V){case"hex":return tt(this,w,E);case"utf8":case"utf-8":return de(this,w,E);case"ascii":return Je(this,w,E);case"latin1":case"binary":return $e(this,w,E);case"base64":return Re(this,w,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tt(this,w,E);default:if(q)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),q=!0}}S.prototype._isBuffer=!0;function Oe(V,w,E){const q=V[w];V[w]=V[E],V[E]=q}S.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<w;E+=2)Oe(this,E,E+1);return this},S.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<w;E+=4)Oe(this,E,E+3),Oe(this,E+1,E+2);return this},S.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<w;E+=8)Oe(this,E,E+7),Oe(this,E+1,E+6),Oe(this,E+2,E+5),Oe(this,E+3,E+4);return this},S.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?de(this,0,w):ke.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(w){if(!S.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:S.compare(this,w)===0},S.prototype.inspect=function(){let w="";const E=M.IS;return w=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(w+=" ... "),"<Buffer "+w+">"},O&&(S.prototype[O]=S.prototype.inspect),S.prototype.compare=function(w,E,q,ae,fe){if(Vn(w,Uint8Array)&&(w=S.from(w,w.offset,w.byteLength)),!S.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(E===void 0&&(E=0),q===void 0&&(q=w?w.length:0),ae===void 0&&(ae=0),fe===void 0&&(fe=this.length),E<0||q>w.length||ae<0||fe>this.length)throw new RangeError("out of range index");if(ae>=fe&&E>=q)return 0;if(ae>=fe)return-1;if(E>=q)return 1;if(E>>>=0,q>>>=0,ae>>>=0,fe>>>=0,this===w)return 0;let Ae=fe-ae,st=q-E;const xt=Math.min(Ae,st),Bt=this.slice(ae,fe),jt=w.slice(E,q);for(let At=0;At<xt;++At)if(Bt[At]!==jt[At]){Ae=Bt[At],st=jt[At];break}return Ae<st?-1:st<Ae?1:0};function We(V,w,E,q,ae){if(V.length===0)return-1;if(typeof E=="string"?(q=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,ls(E)&&(E=ae?0:V.length-1),E<0&&(E=V.length+E),E>=V.length){if(ae)return-1;E=V.length-1}else if(E<0)if(ae)E=0;else return-1;if(typeof w=="string"&&(w=S.from(w,q)),S.isBuffer(w))return w.length===0?-1:Ye(V,w,E,q,ae);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?ae?Uint8Array.prototype.indexOf.call(V,w,E):Uint8Array.prototype.lastIndexOf.call(V,w,E):Ye(V,[w],E,q,ae);throw new TypeError("val must be string, number or Buffer")}function Ye(V,w,E,q,ae){let fe=1,Ae=V.length,st=w.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(V.length<2||w.length<2)return-1;fe=2,Ae/=2,st/=2,E/=2}function xt(jt,At){return fe===1?jt[At]:jt.readUInt16BE(At*fe)}let Bt;if(ae){let jt=-1;for(Bt=E;Bt<Ae;Bt++)if(xt(V,Bt)===xt(w,jt===-1?0:Bt-jt)){if(jt===-1&&(jt=Bt),Bt-jt+1===st)return jt*fe}else jt!==-1&&(Bt-=Bt-jt),jt=-1}else for(E+st>Ae&&(E=Ae-st),Bt=E;Bt>=0;Bt--){let jt=!0;for(let At=0;At<st;At++)if(xt(V,Bt+At)!==xt(w,At)){jt=!1;break}if(jt)return Bt}return-1}S.prototype.includes=function(w,E,q){return this.indexOf(w,E,q)!==-1},S.prototype.indexOf=function(w,E,q){return We(this,w,E,q,!0)},S.prototype.lastIndexOf=function(w,E,q){return We(this,w,E,q,!1)};function et(V,w,E,q){E=Number(E)||0;const ae=V.length-E;q?(q=Number(q),q>ae&&(q=ae)):q=ae;const fe=w.length;q>fe/2&&(q=fe/2);let Ae;for(Ae=0;Ae<q;++Ae){const st=parseInt(w.substr(Ae*2,2),16);if(ls(st))return Ae;V[E+Ae]=st}return Ae}function K(V,w,E,q){return us(Cr(w,V.length-E),V,E,q)}function Te(V,w,E,q){return us(Ka(w),V,E,q)}function Pe(V,w,E,q){return us(Ir(w),V,E,q)}function Ce(V,w,E,q){return us(Ns(w,V.length-E),V,E,q)}S.prototype.write=function(w,E,q,ae){if(E===void 0)ae="utf8",q=this.length,E=0;else if(q===void 0&&typeof E=="string")ae=E,q=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(q)?(q=q>>>0,ae===void 0&&(ae="utf8")):(ae=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const fe=this.length-E;if((q===void 0||q>fe)&&(q=fe),w.length>0&&(q<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");ae||(ae="utf8");let Ae=!1;for(;;)switch(ae){case"hex":return et(this,w,E,q);case"utf8":case"utf-8":return K(this,w,E,q);case"ascii":case"latin1":case"binary":return Te(this,w,E,q);case"base64":return Pe(this,w,E,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,w,E,q);default:if(Ae)throw new TypeError("Unknown encoding: "+ae);ae=(""+ae).toLowerCase(),Ae=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Re(V,w,E){return w===0&&E===V.length?N.fromByteArray(V):N.fromByteArray(V.slice(w,E))}function de(V,w,E){E=Math.min(V.length,E);const q=[];let ae=w;for(;ae<E;){const fe=V[ae];let Ae=null,st=fe>239?4:fe>223?3:fe>191?2:1;if(ae+st<=E){let xt,Bt,jt,At;switch(st){case 1:fe<128&&(Ae=fe);break;case 2:xt=V[ae+1],(xt&192)===128&&(At=(fe&31)<<6|xt&63,At>127&&(Ae=At));break;case 3:xt=V[ae+1],Bt=V[ae+2],(xt&192)===128&&(Bt&192)===128&&(At=(fe&15)<<12|(xt&63)<<6|Bt&63,At>2047&&(At<55296||At>57343)&&(Ae=At));break;case 4:xt=V[ae+1],Bt=V[ae+2],jt=V[ae+3],(xt&192)===128&&(Bt&192)===128&&(jt&192)===128&&(At=(fe&15)<<18|(xt&63)<<12|(Bt&63)<<6|jt&63,At>65535&&At<1114112&&(Ae=At))}}Ae===null?(Ae=65533,st=1):Ae>65535&&(Ae-=65536,q.push(Ae>>>10&1023|55296),Ae=56320|Ae&1023),q.push(Ae),ae+=st}return He(q)}const he=4096;function He(V){const w=V.length;if(w<=he)return String.fromCharCode.apply(String,V);let E="",q=0;for(;q<w;)E+=String.fromCharCode.apply(String,V.slice(q,q+=he));return E}function Je(V,w,E){let q="";E=Math.min(V.length,E);for(let ae=w;ae<E;++ae)q+=String.fromCharCode(V[ae]&127);return q}function $e(V,w,E){let q="";E=Math.min(V.length,E);for(let ae=w;ae<E;++ae)q+=String.fromCharCode(V[ae]);return q}function tt(V,w,E){const q=V.length;(!w||w<0)&&(w=0),(!E||E<0||E>q)&&(E=q);let ae="";for(let fe=w;fe<E;++fe)ae+=Or[V[fe]];return ae}function Tt(V,w,E){const q=V.slice(w,E);let ae="";for(let fe=0;fe<q.length-1;fe+=2)ae+=String.fromCharCode(q[fe]+q[fe+1]*256);return ae}S.prototype.slice=function(w,E){const q=this.length;w=~~w,E=E===void 0?q:~~E,w<0?(w+=q,w<0&&(w=0)):w>q&&(w=q),E<0?(E+=q,E<0&&(E=0)):E>q&&(E=q),E<w&&(E=w);const ae=this.subarray(w,E);return Object.setPrototypeOf(ae,S.prototype),ae};function ut(V,w,E){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+w>E)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUintLE=S.prototype.readUIntLE=function(w,E,q){w=w>>>0,E=E>>>0,q||ut(w,E,this.length);let ae=this[w],fe=1,Ae=0;for(;++Ae<E&&(fe*=256);)ae+=this[w+Ae]*fe;return ae},S.prototype.readUintBE=S.prototype.readUIntBE=function(w,E,q){w=w>>>0,E=E>>>0,q||ut(w,E,this.length);let ae=this[w+--E],fe=1;for(;E>0&&(fe*=256);)ae+=this[w+--E]*fe;return ae},S.prototype.readUint8=S.prototype.readUInt8=function(w,E){return w=w>>>0,E||ut(w,1,this.length),this[w]},S.prototype.readUint16LE=S.prototype.readUInt16LE=function(w,E){return w=w>>>0,E||ut(w,2,this.length),this[w]|this[w+1]<<8},S.prototype.readUint16BE=S.prototype.readUInt16BE=function(w,E){return w=w>>>0,E||ut(w,2,this.length),this[w]<<8|this[w+1]},S.prototype.readUint32LE=S.prototype.readUInt32LE=function(w,E){return w=w>>>0,E||ut(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},S.prototype.readUint32BE=S.prototype.readUInt32BE=function(w,E){return w=w>>>0,E||ut(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},S.prototype.readBigUInt64LE=an(function(w){w=w>>>0,ga(w,"offset");const E=this[w],q=this[w+7];(E===void 0||q===void 0)&&An(w,this.length-8);const ae=E+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,fe=this[++w]+this[++w]*2**8+this[++w]*2**16+q*2**24;return BigInt(ae)+(BigInt(fe)<<BigInt(32))}),S.prototype.readBigUInt64BE=an(function(w){w=w>>>0,ga(w,"offset");const E=this[w],q=this[w+7];(E===void 0||q===void 0)&&An(w,this.length-8);const ae=E*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],fe=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+q;return(BigInt(ae)<<BigInt(32))+BigInt(fe)}),S.prototype.readIntLE=function(w,E,q){w=w>>>0,E=E>>>0,q||ut(w,E,this.length);let ae=this[w],fe=1,Ae=0;for(;++Ae<E&&(fe*=256);)ae+=this[w+Ae]*fe;return fe*=128,ae>=fe&&(ae-=Math.pow(2,8*E)),ae},S.prototype.readIntBE=function(w,E,q){w=w>>>0,E=E>>>0,q||ut(w,E,this.length);let ae=E,fe=1,Ae=this[w+--ae];for(;ae>0&&(fe*=256);)Ae+=this[w+--ae]*fe;return fe*=128,Ae>=fe&&(Ae-=Math.pow(2,8*E)),Ae},S.prototype.readInt8=function(w,E){return w=w>>>0,E||ut(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},S.prototype.readInt16LE=function(w,E){w=w>>>0,E||ut(w,2,this.length);const q=this[w]|this[w+1]<<8;return q&32768?q|4294901760:q},S.prototype.readInt16BE=function(w,E){w=w>>>0,E||ut(w,2,this.length);const q=this[w+1]|this[w]<<8;return q&32768?q|4294901760:q},S.prototype.readInt32LE=function(w,E){return w=w>>>0,E||ut(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},S.prototype.readInt32BE=function(w,E){return w=w>>>0,E||ut(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},S.prototype.readBigInt64LE=an(function(w){w=w>>>0,ga(w,"offset");const E=this[w],q=this[w+7];(E===void 0||q===void 0)&&An(w,this.length-8);const ae=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(q<<24);return(BigInt(ae)<<BigInt(32))+BigInt(E+this[++w]*256+this[++w]*65536+this[++w]*16777216)}),S.prototype.readBigInt64BE=an(function(w){w=w>>>0,ga(w,"offset");const E=this[w],q=this[w+7];(E===void 0||q===void 0)&&An(w,this.length-8);const ae=(E<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(ae)<<BigInt(32))+BigInt(this[++w]*16777216+this[++w]*65536+this[++w]*256+q)}),S.prototype.readFloatLE=function(w,E){return w=w>>>0,E||ut(w,4,this.length),U.read(this,w,!0,23,4)},S.prototype.readFloatBE=function(w,E){return w=w>>>0,E||ut(w,4,this.length),U.read(this,w,!1,23,4)},S.prototype.readDoubleLE=function(w,E){return w=w>>>0,E||ut(w,8,this.length),U.read(this,w,!0,52,8)},S.prototype.readDoubleBE=function(w,E){return w=w>>>0,E||ut(w,8,this.length),U.read(this,w,!1,52,8)};function Jt(V,w,E,q,ae,fe){if(!S.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>ae||w<fe)throw new RangeError('"value" argument is out of bounds');if(E+q>V.length)throw new RangeError("Index out of range")}S.prototype.writeUintLE=S.prototype.writeUIntLE=function(w,E,q,ae){if(w=+w,E=E>>>0,q=q>>>0,!ae){const st=Math.pow(2,8*q)-1;Jt(this,w,E,q,st,0)}let fe=1,Ae=0;for(this[E]=w&255;++Ae<q&&(fe*=256);)this[E+Ae]=w/fe&255;return E+q},S.prototype.writeUintBE=S.prototype.writeUIntBE=function(w,E,q,ae){if(w=+w,E=E>>>0,q=q>>>0,!ae){const st=Math.pow(2,8*q)-1;Jt(this,w,E,q,st,0)}let fe=q-1,Ae=1;for(this[E+fe]=w&255;--fe>=0&&(Ae*=256);)this[E+fe]=w/Ae&255;return E+q},S.prototype.writeUint8=S.prototype.writeUInt8=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,1,255,0),this[E]=w&255,E+1},S.prototype.writeUint16LE=S.prototype.writeUInt16LE=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,2,65535,0),this[E]=w&255,this[E+1]=w>>>8,E+2},S.prototype.writeUint16BE=S.prototype.writeUInt16BE=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,2,65535,0),this[E]=w>>>8,this[E+1]=w&255,E+2},S.prototype.writeUint32LE=S.prototype.writeUInt32LE=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,4,4294967295,0),this[E+3]=w>>>24,this[E+2]=w>>>16,this[E+1]=w>>>8,this[E]=w&255,E+4},S.prototype.writeUint32BE=S.prototype.writeUInt32BE=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,4,4294967295,0),this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=w&255,E+4};function lt(V,w,E,q,ae){za(w,q,ae,V,E,7);let fe=Number(w&BigInt(4294967295));V[E++]=fe,fe=fe>>8,V[E++]=fe,fe=fe>>8,V[E++]=fe,fe=fe>>8,V[E++]=fe;let Ae=Number(w>>BigInt(32)&BigInt(4294967295));return V[E++]=Ae,Ae=Ae>>8,V[E++]=Ae,Ae=Ae>>8,V[E++]=Ae,Ae=Ae>>8,V[E++]=Ae,E}function mt(V,w,E,q,ae){za(w,q,ae,V,E,7);let fe=Number(w&BigInt(4294967295));V[E+7]=fe,fe=fe>>8,V[E+6]=fe,fe=fe>>8,V[E+5]=fe,fe=fe>>8,V[E+4]=fe;let Ae=Number(w>>BigInt(32)&BigInt(4294967295));return V[E+3]=Ae,Ae=Ae>>8,V[E+2]=Ae,Ae=Ae>>8,V[E+1]=Ae,Ae=Ae>>8,V[E]=Ae,E+8}S.prototype.writeBigUInt64LE=an(function(w,E=0){return lt(this,w,E,BigInt(0),BigInt("0xffffffffffffffff"))}),S.prototype.writeBigUInt64BE=an(function(w,E=0){return mt(this,w,E,BigInt(0),BigInt("0xffffffffffffffff"))}),S.prototype.writeIntLE=function(w,E,q,ae){if(w=+w,E=E>>>0,!ae){const xt=Math.pow(2,8*q-1);Jt(this,w,E,q,xt-1,-xt)}let fe=0,Ae=1,st=0;for(this[E]=w&255;++fe<q&&(Ae*=256);)w<0&&st===0&&this[E+fe-1]!==0&&(st=1),this[E+fe]=(w/Ae>>0)-st&255;return E+q},S.prototype.writeIntBE=function(w,E,q,ae){if(w=+w,E=E>>>0,!ae){const xt=Math.pow(2,8*q-1);Jt(this,w,E,q,xt-1,-xt)}let fe=q-1,Ae=1,st=0;for(this[E+fe]=w&255;--fe>=0&&(Ae*=256);)w<0&&st===0&&this[E+fe+1]!==0&&(st=1),this[E+fe]=(w/Ae>>0)-st&255;return E+q},S.prototype.writeInt8=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,1,127,-128),w<0&&(w=255+w+1),this[E]=w&255,E+1},S.prototype.writeInt16LE=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,2,32767,-32768),this[E]=w&255,this[E+1]=w>>>8,E+2},S.prototype.writeInt16BE=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,2,32767,-32768),this[E]=w>>>8,this[E+1]=w&255,E+2},S.prototype.writeInt32LE=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,4,2147483647,-2147483648),this[E]=w&255,this[E+1]=w>>>8,this[E+2]=w>>>16,this[E+3]=w>>>24,E+4},S.prototype.writeInt32BE=function(w,E,q){return w=+w,E=E>>>0,q||Jt(this,w,E,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=w&255,E+4},S.prototype.writeBigInt64LE=an(function(w,E=0){return lt(this,w,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),S.prototype.writeBigInt64BE=an(function(w,E=0){return mt(this,w,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function sn(V,w,E,q,ae,fe){if(E+q>V.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Wn(V,w,E,q,ae){return w=+w,E=E>>>0,ae||sn(V,w,E,4,34028234663852886e22,-34028234663852886e22),U.write(V,w,E,q,23,4),E+4}S.prototype.writeFloatLE=function(w,E,q){return Wn(this,w,E,!0,q)},S.prototype.writeFloatBE=function(w,E,q){return Wn(this,w,E,!1,q)};function pa(V,w,E,q,ae){return w=+w,E=E>>>0,ae||sn(V,w,E,8,17976931348623157e292,-17976931348623157e292),U.write(V,w,E,q,52,8),E+8}S.prototype.writeDoubleLE=function(w,E,q){return pa(this,w,E,!0,q)},S.prototype.writeDoubleBE=function(w,E,q){return pa(this,w,E,!1,q)},S.prototype.copy=function(w,E,q,ae){if(!S.isBuffer(w))throw new TypeError("argument should be a Buffer");if(q||(q=0),!ae&&ae!==0&&(ae=this.length),E>=w.length&&(E=w.length),E||(E=0),ae>0&&ae<q&&(ae=q),ae===q||w.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("sourceEnd out of bounds");ae>this.length&&(ae=this.length),w.length-E<ae-q&&(ae=w.length-E+q);const fe=ae-q;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,q,ae):Uint8Array.prototype.set.call(w,this.subarray(q,ae),E),fe},S.prototype.fill=function(w,E,q,ae){if(typeof w=="string"){if(typeof E=="string"?(ae=E,E=0,q=this.length):typeof q=="string"&&(ae=q,q=this.length),ae!==void 0&&typeof ae!="string")throw new TypeError("encoding must be a string");if(typeof ae=="string"&&!S.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);if(w.length===1){const Ae=w.charCodeAt(0);(ae==="utf8"&&Ae<128||ae==="latin1")&&(w=Ae)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(E<0||this.length<E||this.length<q)throw new RangeError("Out of range index");if(q<=E)return this;E=E>>>0,q=q===void 0?this.length:q>>>0,w||(w=0);let fe;if(typeof w=="number")for(fe=E;fe<q;++fe)this[fe]=w;else{const Ae=S.isBuffer(w)?w:S.from(w,ae),st=Ae.length;if(st===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(fe=0;fe<q-E;++fe)this[fe+E]=Ae[fe%st]}return this};const gr={};function Za(V,w,E){gr[V]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${V}]`,this.stack,delete this.name}get code(){return V}set code(ae){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ae,writable:!0})}toString(){return`${this.name} [${V}]: ${this.message}`}}}Za("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?`${V} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Za("ERR_INVALID_ARG_TYPE",function(V,w){return`The "${V}" argument must be of type number. Received type ${typeof w}`},TypeError),Za("ERR_OUT_OF_RANGE",function(V,w,E){let q=`The value of "${V}" is out of range.`,ae=E;return Number.isInteger(E)&&Math.abs(E)>4294967296?ae=xn(String(E)):typeof E=="bigint"&&(ae=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(ae=xn(ae)),ae+="n"),q+=` It must be ${w}. Received ${ae}`,q},RangeError);function xn(V){let w="",E=V.length;const q=V[0]==="-"?1:0;for(;E>=q+4;E-=3)w=`_${V.slice(E-3,E)}${w}`;return`${V.slice(0,E)}${w}`}function Ko(V,w,E){ga(w,"offset"),(V[w]===void 0||V[w+E]===void 0)&&An(w,V.length-(E+1))}function za(V,w,E,q,ae,fe){if(V>E||V<w){const Ae=typeof w=="bigint"?"n":"";let st;throw fe>3?w===0||w===BigInt(0)?st=`>= 0${Ae} and < 2${Ae} ** ${(fe+1)*8}${Ae}`:st=`>= -(2${Ae} ** ${(fe+1)*8-1}${Ae}) and < 2 ** ${(fe+1)*8-1}${Ae}`:st=`>= ${w}${Ae} and <= ${E}${Ae}`,new gr.ERR_OUT_OF_RANGE("value",st,V)}Ko(q,ae,fe)}function ga(V,w){if(typeof V!="number")throw new gr.ERR_INVALID_ARG_TYPE(w,"number",V)}function An(V,w,E){throw Math.floor(V)!==V?(ga(V,E),new gr.ERR_OUT_OF_RANGE(E||"offset","an integer",V)):w<0?new gr.ERR_BUFFER_OUT_OF_BOUNDS:new gr.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${w}`,V)}const lu=/[^+/0-9A-Za-z-_]/g;function cs(V){if(V=V.split("=")[0],V=V.trim().replace(lu,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function Cr(V,w){w=w||1/0;let E;const q=V.length;let ae=null;const fe=[];for(let Ae=0;Ae<q;++Ae){if(E=V.charCodeAt(Ae),E>55295&&E<57344){if(!ae){if(E>56319){(w-=3)>-1&&fe.push(239,191,189);continue}else if(Ae+1===q){(w-=3)>-1&&fe.push(239,191,189);continue}ae=E;continue}if(E<56320){(w-=3)>-1&&fe.push(239,191,189),ae=E;continue}E=(ae-55296<<10|E-56320)+65536}else ae&&(w-=3)>-1&&fe.push(239,191,189);if(ae=null,E<128){if((w-=1)<0)break;fe.push(E)}else if(E<2048){if((w-=2)<0)break;fe.push(E>>6|192,E&63|128)}else if(E<65536){if((w-=3)<0)break;fe.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((w-=4)<0)break;fe.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return fe}function Ka(V){const w=[];for(let E=0;E<V.length;++E)w.push(V.charCodeAt(E)&255);return w}function Ns(V,w){let E,q,ae;const fe=[];for(let Ae=0;Ae<V.length&&!((w-=2)<0);++Ae)E=V.charCodeAt(Ae),q=E>>8,ae=E%256,fe.push(ae),fe.push(q);return fe}function Ir(V){return N.toByteArray(cs(V))}function us(V,w,E,q){let ae;for(ae=0;ae<q&&!(ae+E>=w.length||ae>=V.length);++ae)w[ae+E]=V[ae];return ae}function Vn(V,w){return V instanceof w||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===w.name}function ls(V){return V!==V}const Or=function(){const V="0123456789abcdef",w=new Array(256);for(let E=0;E<16;++E){const q=E*16;for(let ae=0;ae<16;++ae)w[q+ae]=V[E]+V[ae]}return w}();function an(V){return typeof BigInt>"u"?Zi:V}function Zi(){throw new Error("BigInt not supported")}},19757:(z,M,A)=>{"use strict";var R=A(67016),N=A(19632),U=A(79197),O=A(87303),$=A(26781),C=z.exports=function(B,S){var F,j,G,ue,se;return arguments.length<2||typeof B!="string"?(ue=S,S=B,B=null):ue=arguments[2],R(B)?(F=$.call(B,"c"),j=$.call(B,"e"),G=$.call(B,"w")):(F=G=!0,j=!1),se={value:S,configurable:F,enumerable:j,writable:G},ue?U(O(ue),se):se};C.gs=function(B,S,F){var j,G,ue,se;return typeof B!="string"?(ue=F,F=S,S=B,B=null):ue=arguments[3],R(S)?N(S)?R(F)?N(F)||(ue=F,F=void 0):F=void 0:(ue=S,S=F=void 0):S=void 0,R(B)?(j=$.call(B,"c"),G=$.call(B,"e")):(j=!0,G=!1),se={get:S,set:F,configurable:j,enumerable:G},ue?U(O(ue),se):se}},69759:(z,M,A)=>{"use strict";var R=A(92582),N=A(48036),U=A(89273),O=Array.prototype.indexOf,$=Object.prototype.hasOwnProperty,C=Math.abs,B=Math.floor;z.exports=function(S){var F,j,G,ue;if(!R(S))return O.apply(this,arguments);for(j=N(U(this).length),G=arguments[1],isNaN(G)?G=0:G>=0?G=B(G):G=N(this.length)-B(C(G)),F=G;F<j;++F)if($.call(this,F)&&(ue=this[F],R(ue)))return F;return-1}},41386:(z,M,A)=>{"use strict";z.exports=A(19585)()?Array.from:A(7789)},19585:z=>{"use strict";z.exports=function(){var M=Array.from,A,R;return typeof M!="function"?!1:(A=["raz","dwa"],R=M(A),!!(R&&R!==A&&R[1]==="dwa"))}},7789:(z,M,A)=>{"use strict";var R=A(36176).iterator,N=A(15119),U=A(41147),O=A(48036),$=A(11166),C=A(89273),B=A(42095),S=A(88479),F=Array.isArray,j=Function.prototype.call,G={configurable:!0,enumerable:!0,writable:!0,value:null},ue=Object.defineProperty;z.exports=function(se){var Y=arguments[1],X=arguments[2],ie,J,te,ne,be,ke,Oe,We,Ye,et;if(se=Object(C(se)),B(Y)&&$(Y),!this||this===Array||!U(this)){if(!Y){if(N(se))return be=se.length,be!==1?Array.apply(null,se):(ne=new Array(1),ne[0]=se[0],ne);if(F(se)){for(ne=new Array(be=se.length),J=0;J<be;++J)ne[J]=se[J];return ne}}ne=[]}else ie=this;if(!F(se)){if((Ye=se[R])!==void 0){for(Oe=$(Ye).call(se),ie&&(ne=new ie),We=Oe.next(),J=0;!We.done;)et=Y?j.call(Y,X,We.value,J):We.value,ie?(G.value=et,ue(ne,J,G)):ne[J]=et,We=Oe.next(),++J;be=J}else if(S(se)){for(be=se.length,ie&&(ne=new ie),J=0,te=0;J<be;++J)et=se[J],J+1<be&&(ke=et.charCodeAt(0),ke>=55296&&ke<=56319&&(et+=se[++J])),et=Y?j.call(Y,X,et,te):et,ie?(G.value=et,ue(ne,te,G)):ne[te]=et,++te;be=te}}if(be===void 0)for(be=O(se.length),ie&&(ne=new ie(be)),J=0;J<be;++J)et=Y?j.call(Y,X,se[J],J):se[J],ie?(G.value=et,ue(ne,J,G)):ne[J]=et;return ie&&(G.value=null,ne.length=be),ne}},78948:(z,M,A)=>{"use strict";var R=A(41386),N=Array.isArray;z.exports=function(U){return N(U)?U:R(U)}},58563:(z,M,A)=>{"use strict";var R=A(79197),N=A(99927),U=A(42095),O=Error.captureStackTrace;z.exports=function($){var C=new Error($),B=arguments[1],S=arguments[2];return U(S)||N(B)&&(S=B,B=null),U(S)&&R(C,S),U(B)&&(C.code=B),O&&O(C,z.exports),C}},5715:(z,M,A)=>{"use strict";var R=A(48036),N=function(B,S){return S},U,O,$,C;try{Object.defineProperty(N,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch{}N.length===1?(U={configurable:!0,writable:!1,enumerable:!1},O=Object.defineProperty,z.exports=function(B,S){return S=R(S),B.length===S?B:(U.value=S,O(B,"length",U))}):(C=A(22982),$=function(){var B=[];return function(S){var F,j=0;if(B[S])return B[S];for(F=[];S--;)F.push("a"+(++j).toString(36));return new Function("fn","return function ("+F.join(", ")+") { return fn.apply(this, arguments); };")}}(),z.exports=function(B,S){var F;if(S=R(S),B.length===S)return B;F=$(S)(B);try{C(F,B)}catch{}return F})},15119:z=>{"use strict";var M=Object.prototype.toString,A=M.call(function(){return arguments}());z.exports=function(R){return M.call(R)===A}},41147:z=>{"use strict";var M=Object.prototype.toString,A=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);z.exports=function(R){return typeof R=="function"&&A(M.call(R))}},71306:z=>{"use strict";z.exports=function(){}},19102:(z,M,A)=>{"use strict";z.exports=A(82997)()?Math.sign:A(23849)},82997:z=>{"use strict";z.exports=function(){var M=Math.sign;return typeof M!="function"?!1:M(10)===1&&M(-20)===-1}},23849:z=>{"use strict";z.exports=function(M){return M=Number(M),isNaN(M)||M===0?M:M>0?1:-1}},92582:(z,M,A)=>{"use strict";z.exports=A(67565)()?Number.isNaN:A(59393)},67565:z=>{"use strict";z.exports=function(){var M=Number.isNaN;return typeof M!="function"?!1:!M({})&&M(NaN)&&!M(34)}},59393:z=>{"use strict";z.exports=function(M){return M!==M}},27243:(z,M,A)=>{"use strict";var R=A(19102),N=Math.abs,U=Math.floor;z.exports=function(O){return isNaN(O)?0:(O=Number(O),O===0||!isFinite(O)?O:R(O)*U(N(O)))}},48036:(z,M,A)=>{"use strict";var R=A(27243),N=Math.max;z.exports=function(U){return N(0,R(U))}},11682:(z,M,A)=>{"use strict";var R=A(11166),N=A(89273),U=Function.prototype.bind,O=Function.prototype.call,$=Object.keys,C=Object.prototype.propertyIsEnumerable;z.exports=function(B,S){return function(F,j){var G,ue=arguments[2],se=arguments[3];return F=Object(N(F)),R(j),G=$(F),se&&G.sort(typeof se=="function"?U.call(se,F):void 0),typeof B!="function"&&(B=G[B]),O.call(B,G,function(Y,X){return C.call(F,Y)?O.call(j,ue,F[Y],Y,F,X):S})}}},79197:(z,M,A)=>{"use strict";z.exports=A(73380)()?Object.assign:A(55480)},73380:z=>{"use strict";z.exports=function(){var M=Object.assign,A;return typeof M!="function"?!1:(A={foo:"raz"},M(A,{bar:"dwa"},{trzy:"trzy"}),A.foo+A.bar+A.trzy==="razdwatrzy")}},55480:(z,M,A)=>{"use strict";var R=A(24232),N=A(89273),U=Math.max;z.exports=function(O,$){var C,B,S=U(arguments.length,2),F;for(O=Object(N(O)),F=function(j){try{O[j]=$[j]}catch(G){C||(C=G)}},B=1;B<S;++B)$=arguments[B],R($).forEach(F);if(C!==void 0)throw C;return O}},40676:(z,M,A)=>{"use strict";z.exports=A(11682)("forEach")},75860:z=>{"use strict";z.exports=function(M){return typeof M=="function"}},99927:(z,M,A)=>{"use strict";var R=A(42095),N={function:!0,object:!0};z.exports=function(U){return R(U)&&N[typeof U]||!1}},42095:(z,M,A)=>{"use strict";var R=A(71306)();z.exports=function(N){return N!==R&&N!==null}},24232:(z,M,A)=>{"use strict";z.exports=A(19183)()?Object.keys:A(79991)},19183:z=>{"use strict";z.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},79991:(z,M,A)=>{"use strict";var R=A(42095),N=Object.keys;z.exports=function(U){return N(R(U)?Object(U):U)}},1381:(z,M,A)=>{"use strict";var R=A(11166),N=A(40676),U=Function.prototype.call;z.exports=function(O,$){var C={},B=arguments[2];return R($),N(O,function(S,F,j,G){C[F]=U.call($,B,S,F,j,G)}),C}},22982:(z,M,A)=>{"use strict";var R=A(89273),N=Object.defineProperty,U=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,$=Object.getOwnPropertySymbols;z.exports=function(C,B){var S,F=Object(R(B));if(C=Object(R(C)),O(F).forEach(function(j){try{N(C,j,U(B,j))}catch(G){S=G}}),typeof $=="function"&&$(F).forEach(function(j){try{N(C,j,U(B,j))}catch(G){S=G}}),S!==void 0)throw S;return C}},87303:(z,M,A)=>{"use strict";var R=A(42095),N=Array.prototype.forEach,U=Object.create,O=function($,C){var B;for(B in $)C[B]=$[B]};z.exports=function($){var C=U(null);return N.call(arguments,function(B){R(B)&&O(Object(B),C)}),C}},90583:z=>{"use strict";var M=Array.prototype.forEach,A=Object.create;z.exports=function(R){var N=A(null);return M.call(arguments,function(U){N[U]=!0}),N}},11166:z=>{"use strict";z.exports=function(M){if(typeof M!="function")throw new TypeError(M+" is not a function");return M}},89273:(z,M,A)=>{"use strict";var R=A(42095);z.exports=function(N){if(!R(N))throw new TypeError("Cannot use null or undefined");return N}},19921:(z,M,A)=>{"use strict";var R=A(89273),N=A(33809);z.exports=function(U){return N(R(U))}},33809:(z,M,A)=>{"use strict";var R=A(75860);z.exports=function(N){try{return N&&R(N.toString)?N.toString():String(N)}catch{throw new TypeError("Passed argument cannot be stringifed")}}},50602:(z,M,A)=>{"use strict";var R=A(75860);z.exports=function(N){try{return N&&R(N.toString)?N.toString():String(N)}catch{return"<Non-coercible to string value>"}}},26781:(z,M,A)=>{"use strict";z.exports=A(66532)()?String.prototype.contains:A(78744)},66532:z=>{"use strict";var M="razdwatrzy";z.exports=function(){return typeof M.contains!="function"?!1:M.contains("dwa")===!0&&M.contains("foo")===!1}},78744:z=>{"use strict";var M=String.prototype.indexOf;z.exports=function(A){return M.call(this,A,arguments[1])>-1}},88479:z=>{"use strict";var M=Object.prototype.toString,A=M.call("");z.exports=function(R){return typeof R=="string"||R&&typeof R=="object"&&(R instanceof String||M.call(R)===A)||!1}},31389:(z,M,A)=>{"use strict";var R=A(50602),N=/[\n\r\u2028\u2029]/g;z.exports=function(U){var O=R(U);return O.length>100&&(O=O.slice(0,99)+"\u2026"),O=O.replace(N,function($){return JSON.stringify($).slice(1,-1)}),O}},36176:(z,M,A)=>{"use strict";z.exports=A(94535)()?A(45567).Symbol:A(82625)},94535:(z,M,A)=>{"use strict";var R=A(45567),N={object:!0,symbol:!0};z.exports=function(){var U=R.Symbol,O;if(typeof U!="function")return!1;O=U("test symbol");try{String(O)}catch{return!1}return!(!N[typeof U.iterator]||!N[typeof U.toPrimitive]||!N[typeof U.toStringTag])}},89179:z=>{"use strict";z.exports=function(M){return M?typeof M=="symbol"?!0:!M.constructor||M.constructor.name!=="Symbol"?!1:M[M.constructor.toStringTag]==="Symbol":!1}},5577:(z,M,A)=>{"use strict";var R=A(19757),N=Object.create,U=Object.defineProperty,O=Object.prototype,$=N(null);z.exports=function(C){for(var B=0,S,F;$[C+(B||"")];)++B;return C+=B||"",$[C]=!0,S="@@"+C,U(O,S,R.gs(null,function(j){F||(F=!0,U(this,S,R(j)),F=!1)})),S}},49449:(z,M,A)=>{"use strict";var R=A(19757),N=A(45567).Symbol;z.exports=function(U){return Object.defineProperties(U,{hasInstance:R("",N&&N.hasInstance||U("hasInstance")),isConcatSpreadable:R("",N&&N.isConcatSpreadable||U("isConcatSpreadable")),iterator:R("",N&&N.iterator||U("iterator")),match:R("",N&&N.match||U("match")),replace:R("",N&&N.replace||U("replace")),search:R("",N&&N.search||U("search")),species:R("",N&&N.species||U("species")),split:R("",N&&N.split||U("split")),toPrimitive:R("",N&&N.toPrimitive||U("toPrimitive")),toStringTag:R("",N&&N.toStringTag||U("toStringTag")),unscopables:R("",N&&N.unscopables||U("unscopables"))})}},68826:(z,M,A)=>{"use strict";var R=A(19757),N=A(67973),U=Object.create(null);z.exports=function(O){return Object.defineProperties(O,{for:R(function($){return U[$]?U[$]:U[$]=O(String($))}),keyFor:R(function($){var C;N($);for(C in U)if(U[C]===$)return C})})}},82625:(z,M,A)=>{"use strict";var R=A(19757),N=A(67973),U=A(45567).Symbol,O=A(5577),$=A(49449),C=A(68826),B=Object.create,S=Object.defineProperties,F=Object.defineProperty,j,G,ue;if(typeof U=="function")try{String(U()),ue=!0}catch{}else U=null;G=function(Y){if(this instanceof G)throw new TypeError("Symbol is not a constructor");return j(Y)},z.exports=j=function se(Y){var X;if(this instanceof se)throw new TypeError("Symbol is not a constructor");return ue?U(Y):(X=B(G.prototype),Y=Y===void 0?"":String(Y),S(X,{__description__:R("",Y),__name__:R("",O(Y))}))},$(j),C(j),S(G.prototype,{constructor:R(j),toString:R("",function(){return this.__name__})}),S(j.prototype,{toString:R(function(){return"Symbol ("+N(this).__description__+")"}),valueOf:R(function(){return N(this)})}),F(j.prototype,j.toPrimitive,R("",function(){var se=N(this);return typeof se=="symbol"?se:se.toString()})),F(j.prototype,j.toStringTag,R("c","Symbol")),F(G.prototype,j.toStringTag,R("c",j.prototype[j.toStringTag])),F(G.prototype,j.toPrimitive,R("c",j.prototype[j.toPrimitive]))},67973:(z,M,A)=>{"use strict";var R=A(89179);z.exports=function(N){if(!R(N))throw new TypeError(N+" is not a symbol");return N}},50514:(z,M,A)=>{"use strict";var R=A(19757),N=A(11166),U=Function.prototype.apply,O=Function.prototype.call,$=Object.create,C=Object.defineProperty,B=Object.defineProperties,S=Object.prototype.hasOwnProperty,F={configurable:!0,enumerable:!1,writable:!0},j,G,ue,se,Y,X,ie;j=function(J,te){var ne;return N(te),S.call(this,"__ee__")?ne=this.__ee__:(ne=F.value=$(null),C(this,"__ee__",F),F.value=null),ne[J]?typeof ne[J]=="object"?ne[J].push(te):ne[J]=[ne[J],te]:ne[J]=te,this},G=function(J,te){var ne,be;return N(te),be=this,j.call(this,J,ne=function(){ue.call(be,J,ne),U.call(te,this,arguments)}),ne.__eeOnceListener__=te,this},ue=function(J,te){var ne,be,ke,Oe;if(N(te),!S.call(this,"__ee__"))return this;if(ne=this.__ee__,!ne[J])return this;if(be=ne[J],typeof be=="object")for(Oe=0;ke=be[Oe];++Oe)(ke===te||ke.__eeOnceListener__===te)&&(be.length===2?ne[J]=be[Oe?0:1]:be.splice(Oe,1));else(be===te||be.__eeOnceListener__===te)&&delete ne[J];return this},se=function(J){var te,ne,be,ke,Oe;if(S.call(this,"__ee__")&&(ke=this.__ee__[J],!!ke))if(typeof ke=="object"){for(ne=arguments.length,Oe=new Array(ne-1),te=1;te<ne;++te)Oe[te-1]=arguments[te];for(ke=ke.slice(),te=0;be=ke[te];++te)U.call(be,this,Oe)}else switch(arguments.length){case 1:O.call(ke,this);break;case 2:O.call(ke,this,arguments[1]);break;case 3:O.call(ke,this,arguments[1],arguments[2]);break;default:for(ne=arguments.length,Oe=new Array(ne-1),te=1;te<ne;++te)Oe[te-1]=arguments[te];U.call(ke,this,Oe)}},Y={on:j,once:G,off:ue,emit:se},X={on:R(j),once:R(G),off:R(ue),emit:R(se)},ie=B({},X),z.exports=M=function(J){return J==null?$(ie):B(Object(J),X)},M.methods=Y},81553:z=>{var M=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};z.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return M()}try{return __global__||M()}finally{delete Object.prototype.__global__}}()},45567:(z,M,A)=>{"use strict";z.exports=A(73542)()?globalThis:A(81553)},73542:z=>{"use strict";z.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},63328:(z,M)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */M.read=function(A,R,N,U,O){var $,C,B=O*8-U-1,S=(1<<B)-1,F=S>>1,j=-7,G=N?O-1:0,ue=N?-1:1,se=A[R+G];for(G+=ue,$=se&(1<<-j)-1,se>>=-j,j+=B;j>0;$=$*256+A[R+G],G+=ue,j-=8);for(C=$&(1<<-j)-1,$>>=-j,j+=U;j>0;C=C*256+A[R+G],G+=ue,j-=8);if($===0)$=1-F;else{if($===S)return C?NaN:(se?-1:1)*(1/0);C=C+Math.pow(2,U),$=$-F}return(se?-1:1)*C*Math.pow(2,$-U)},M.write=function(A,R,N,U,O,$){var C,B,S,F=$*8-O-1,j=(1<<F)-1,G=j>>1,ue=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,se=U?0:$-1,Y=U?1:-1,X=R<0||R===0&&1/R<0?1:0;for(R=Math.abs(R),isNaN(R)||R===1/0?(B=isNaN(R)?1:0,C=j):(C=Math.floor(Math.log(R)/Math.LN2),R*(S=Math.pow(2,-C))<1&&(C--,S*=2),C+G>=1?R+=ue/S:R+=ue*Math.pow(2,1-G),R*S>=2&&(C++,S/=2),C+G>=j?(B=0,C=j):C+G>=1?(B=(R*S-1)*Math.pow(2,O),C=C+G):(B=R*Math.pow(2,G-1)*Math.pow(2,O),C=0));O>=8;A[N+se]=B&255,se+=Y,B/=256,O-=8);for(C=C<<O|B,F+=O;F>0;A[N+se]=C&255,se+=Y,C/=256,F-=8);A[N+se-Y]|=X*128}},15480:z=>{z.exports=M,z.exports.default=M;function M(A){return!!A&&(typeof A=="object"||typeof A=="function")&&typeof A.then=="function"}},29969:(z,M,A)=>{A(49047),z.exports=self.fetch.bind(self)},25705:(z,M,A)=>{"use strict";var R=A(48036),N=Object.create,U=Object.prototype.hasOwnProperty;z.exports=function(O){var $=0,C=1,B=N(null),S=N(null),F=0,j;return O=R(O),{hit:function(G){var ue=S[G],se=++F;if(B[se]=G,S[G]=se,!ue)return++$,$<=O?void 0:(G=B[C],j(G),G);if(delete B[ue],C===ue)for(;!U.call(B,++C););},delete:j=function(G){var ue=S[G];if(ue&&(delete B[ue],delete S[G],--$,C===ue)){if(!$){F=0,C=1;return}for(;!U.call(B,++C););}},clear:function(){$=0,C=1,B=N(null),S=N(null),F=0}}}},99492:(z,M,A)=>{"use strict";var R=A(41386),N=A(1381),U=A(22982),O=A(5715),$=A(8988),C=Array.prototype.slice,B=Function.prototype.apply,S=Object.create;A(63321).async=function(F,j){var G=S(null),ue=S(null),se=j.memoized,Y=j.original,X,ie,J;j.memoized=O(function(te){var ne=arguments,be=ne[ne.length-1];return typeof be=="function"&&(X=be,ne=C.call(ne,0,-1)),se.apply(ie=this,J=ne)},se);try{U(j.memoized,se)}catch{}j.on("get",function(te){var ne,be,ke;if(X){if(G[te]){typeof G[te]=="function"?G[te]=[G[te],X]:G[te].push(X),X=null;return}ne=X,be=ie,ke=J,X=ie=J=null,$(function(){var Oe;hasOwnProperty.call(ue,te)?(Oe=ue[te],j.emit("getasync",te,ke,be),B.call(ne,Oe.context,Oe.args)):(X=ne,ie=be,J=ke,se.apply(be,ke))})}}),j.original=function(){var te,ne,be,ke;return X?(te=R(arguments),ne=function Oe(We){var Ye,et,K=Oe.id;if(K==null){$(B.bind(Oe,this,arguments));return}if(delete Oe.id,Ye=G[K],delete G[K],!!Ye)return et=R(arguments),j.has(K)&&(We?j.delete(K):(ue[K]={context:this,args:et},j.emit("setasync",K,typeof Ye=="function"?1:Ye.length))),typeof Ye=="function"?ke=B.call(Ye,this,et):Ye.forEach(function(Te){ke=B.call(Te,this,et)},this),ke},be=X,X=ie=J=null,te.push(ne),ke=B.call(Y,this,te),ne.cb=be,X=ne,ke):B.call(Y,this,arguments)},j.on("set",function(te){if(!X){j.delete(te);return}G[te]?typeof G[te]=="function"?G[te]=[G[te],X.cb]:G[te].push(X.cb):G[te]=X.cb,delete X.cb,X.id=te,X=null}),j.on("delete",function(te){var ne;hasOwnProperty.call(G,te)||ue[te]&&(ne=ue[te],delete ue[te],j.emit("deleteasync",te,C.call(ne.args,1)))}),j.on("clear",function(){var te=ue;ue=S(null),j.emit("clearasync",N(te,function(ne){return C.call(ne.args,1)}))})}},94105:(z,M,A)=>{"use strict";var R=A(11166),N=A(40676),U=A(63321),O=Function.prototype.apply;U.dispose=function($,C,B){var S;if(R($),B.async&&U.async||B.promise&&U.promise){C.on("deleteasync",S=function(F,j){O.call($,null,j)}),C.on("clearasync",function(F){N(F,function(j,G){S(G,j)})});return}C.on("delete",S=function(F,j){$(j)}),C.on("clear",function(F){N(F,function(j,G){S(G,j)})})}},80892:(z,M,A)=>{"use strict";var R=A(41386),N=A(40676),U=A(8988),O=A(15480),$=A(43949),C=A(63321),B=Function.prototype,S=Math.max,F=Math.min,j=Object.create;C.maxAge=function(G,ue,se){var Y,X,ie,J;G=$(G),G&&(Y=j(null),X=se.async&&C.async||se.promise&&C.promise?"async":"",ue.on("set"+X,function(te){Y[te]=setTimeout(function(){ue.delete(te)},G),typeof Y[te].unref=="function"&&Y[te].unref(),J&&(J[te]&&J[te]!=="nextTick"&&clearTimeout(J[te]),J[te]=setTimeout(function(){delete J[te]},ie),typeof J[te].unref=="function"&&J[te].unref())}),ue.on("delete"+X,function(te){clearTimeout(Y[te]),delete Y[te],J&&(J[te]!=="nextTick"&&clearTimeout(J[te]),delete J[te])}),se.preFetch&&(se.preFetch===!0||isNaN(se.preFetch)?ie=.333:ie=S(F(Number(se.preFetch),1),0),ie&&(J={},ie=(1-ie)*G,ue.on("get"+X,function(te,ne,be){J[te]||(J[te]="nextTick",U(function(){var ke;J[te]==="nextTick"&&(delete J[te],ue.delete(te),se.async&&(ne=R(ne),ne.push(B)),ke=ue.memoized.apply(be,ne),se.promise&&O(ke)&&(typeof ke.done=="function"?ke.done(B,B):ke.then(B,B)))}))}))),ue.on("clear"+X,function(){N(Y,function(te){clearTimeout(te)}),Y={},J&&(N(J,function(te){te!=="nextTick"&&clearTimeout(te)}),J={})}))}},80762:(z,M,A)=>{"use strict";var R=A(48036),N=A(25705),U=A(63321);U.max=function(O,$,C){var B,S,F;O=R(O),O&&(S=N(O),B=C.async&&U.async||C.promise&&U.promise?"async":"",$.on("set"+B,F=function(j){j=S.hit(j),j!==void 0&&$.delete(j)}),$.on("get"+B,F),$.on("delete"+B,S.delete),$.on("clear"+B,S.clear))}},48973:(z,M,A)=>{"use strict";var R=A(1381),N=A(90583),U=A(19921),O=A(31389),$=A(15480),C=A(8988),B=Object.create,S=N("then","then:finally","done","done:finally");A(63321).promise=function(F,j){var G=B(null),ue=B(null),se=B(null);if(F===!0)F=null;else if(F=U(F),!S[F])throw new TypeError("'"+O(F)+"' is not valid promise mode");j.on("set",function(Y,X,ie){var J=!1;if(!$(ie)){ue[Y]=ie,j.emit("setasync",Y,1);return}G[Y]=1,se[Y]=ie;var te=function(Oe){var We=G[Y];if(J)throw new Error(`Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)
Consider to rely on 'then' or 'done' mode instead.`);We&&(delete G[Y],ue[Y]=Oe,j.emit("setasync",Y,We))},ne=function(){J=!0,G[Y]&&(delete G[Y],delete se[Y],j.delete(Y))},be=F;if(be||(be="then"),be==="then"){var ke=function(){C(ne)};ie=ie.then(function(Oe){C(te.bind(this,Oe))},ke),typeof ie.finally=="function"&&ie.finally(ke)}else if(be==="done"){if(typeof ie.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");ie.done(te,ne)}else if(be==="done:finally"){if(typeof ie.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if(typeof ie.finally!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");ie.done(te),ie.finally(ne)}}),j.on("get",function(Y,X,ie){var J;if(G[Y]){++G[Y];return}J=se[Y];var te=function(){j.emit("getasync",Y,X,ie)};$(J)?typeof J.done=="function"?J.done(te):J.then(function(){C(te)}):te()}),j.on("delete",function(Y){if(delete se[Y],G[Y]){delete G[Y];return}if(hasOwnProperty.call(ue,Y)){var X=ue[Y];delete ue[Y],j.emit("deleteasync",Y,[X])}}),j.on("clear",function(){var Y=ue;ue=B(null),G=B(null),se=B(null),j.emit("clearasync",R(Y,function(X){return[X]}))})}},69024:(z,M,A)=>{"use strict";var R=A(19757),N=A(63321),U=Object.create,O=Object.defineProperties;N.refCounter=function($,C,B){var S,F;S=U(null),F=B.async&&N.async||B.promise&&N.promise?"async":"",C.on("set"+F,function(j,G){S[j]=G||1}),C.on("get"+F,function(j){++S[j]}),C.on("delete"+F,function(j){delete S[j]}),C.on("clear"+F,function(){S={}}),O(C.memoized,{deleteRef:R(function(){var j=C.get(arguments);return j===null||!S[j]?null:--S[j]?!1:(C.delete(j),!0)}),getRefCount:R(function(){var j=C.get(arguments);return j===null||!S[j]?0:S[j]})})}},21956:(z,M,A)=>{"use strict";var R=A(87303),N=A(2305),U=A(79976);z.exports=function(O){var $=R(arguments[1]),C;return $.normalizer||(C=$.length=N($.length,O.length,$.async),C!==0&&($.primitive?C===!1?$.normalizer=A(20090):C>1&&($.normalizer=A(59848)(C)):C===!1?$.normalizer=A(51147)():C===1?$.normalizer=A(29041)():$.normalizer=A(64212)(C))),$.async&&A(99492),$.promise&&A(48973),$.dispose&&A(94105),$.maxAge&&A(80892),$.max&&A(80762),$.refCounter&&A(69024),U(O,$)}},27739:(z,M,A)=>{"use strict";var R=A(58563),N=A(5715),U=A(19757),O=A(50514).methods,$=A(86445),C=A(41226),B=Function.prototype.apply,S=Function.prototype.call,F=Object.create,j=Object.defineProperties,G=O.on,ue=O.emit;z.exports=function(se,Y,X){var ie=F(null),J,te,ne,be,ke,Oe,We,Ye,et,K,Te,Pe,Ce,Re,de;return Y!==!1?te=Y:isNaN(se.length)?te=1:te=se.length,X.normalizer&&(K=C(X.normalizer),ne=K.get,be=K.set,ke=K.delete,Oe=K.clear),X.resolvers!=null&&(de=$(X.resolvers)),ne?Re=N(function(he){var He,Je,$e=arguments;if(de&&($e=de($e)),He=ne($e),He!==null&&hasOwnProperty.call(ie,He))return Te&&J.emit("get",He,$e,this),ie[He];if($e.length===1?Je=S.call(se,this,$e[0]):Je=B.call(se,this,$e),He===null){if(He=ne($e),He!==null)throw R("Circular invocation","CIRCULAR_INVOCATION");He=be($e)}else if(hasOwnProperty.call(ie,He))throw R("Circular invocation","CIRCULAR_INVOCATION");return ie[He]=Je,Pe&&J.emit("set",He,null,Je),Je},te):Y===0?Re=function(){var he;if(hasOwnProperty.call(ie,"data"))return Te&&J.emit("get","data",arguments,this),ie.data;if(arguments.length?he=B.call(se,this,arguments):he=S.call(se,this),hasOwnProperty.call(ie,"data"))throw R("Circular invocation","CIRCULAR_INVOCATION");return ie.data=he,Pe&&J.emit("set","data",null,he),he}:Re=function(he){var He,Je=arguments,$e;if(de&&(Je=de(arguments)),$e=String(Je[0]),hasOwnProperty.call(ie,$e))return Te&&J.emit("get",$e,Je,this),ie[$e];if(Je.length===1?He=S.call(se,this,Je[0]):He=B.call(se,this,Je),hasOwnProperty.call(ie,$e))throw R("Circular invocation","CIRCULAR_INVOCATION");return ie[$e]=He,Pe&&J.emit("set",$e,null,He),He},J={original:se,memoized:Re,profileName:X.profileName,get:function(he){return de&&(he=de(he)),ne?ne(he):String(he[0])},has:function(he){return hasOwnProperty.call(ie,he)},delete:function(he){var He;hasOwnProperty.call(ie,he)&&(ke&&ke(he),He=ie[he],delete ie[he],Ce&&J.emit("delete",he,He))},clear:function(){var he=ie;Oe&&Oe(),ie=F(null),J.emit("clear",he)},on:function(he,He){return he==="get"?Te=!0:he==="set"?Pe=!0:he==="delete"&&(Ce=!0),G.call(this,he,He)},emit:ue,updateEnv:function(){se=J.original}},ne?We=N(function(he){var He,Je=arguments;de&&(Je=de(Je)),He=ne(Je),He!==null&&J.delete(He)},te):Y===0?We=function(){return J.delete("data")}:We=function(he){return de&&(he=de(arguments)[0]),J.delete(he)},Ye=N(function(){var he,He=arguments;return Y===0?ie.data:(de&&(He=de(He)),ne?he=ne(He):he=String(He[0]),ie[he])}),et=N(function(){var he,He=arguments;return Y===0?J.has("data"):(de&&(He=de(He)),ne?he=ne(He):he=String(He[0]),he===null?!1:J.has(he))}),j(Re,{__memoized__:U(!0),delete:U(We),clear:U(J.clear),_get:U(Ye),_has:U(et)}),J}},63321:()=>{"use strict"},2305:(z,M,A)=>{"use strict";var R=A(48036);z.exports=function(N,U,O){var $;return isNaN(N)?($=U,$>=0?O&&$?$-1:$:1):N===!1?!1:R(N)}},41226:(z,M,A)=>{"use strict";var R=A(11166);z.exports=function(N){var U;return typeof N=="function"?{set:N,get:N}:(U={get:R(N.get)},N.set!==void 0?(U.set=R(N.set),N.delete&&(U.delete=R(N.delete)),N.clear&&(U.clear=R(N.clear)),U):(U.set=U.get,U))}},86445:(z,M,A)=>{"use strict";var R=A(78948),N=A(42095),U=A(11166),O=Array.prototype.slice,$;$=function(C){return this.map(function(B,S){return B?B(C[S]):C[S]}).concat(O.call(C,this.length))},z.exports=function(C){return C=R(C),C.forEach(function(B){N(B)&&U(B)}),$.bind(C)}},29041:(z,M,A)=>{"use strict";var R=A(69759);z.exports=function(){var N=0,U=[],O=[];return{get:function($){var C=R.call(U,$[0]);return C===-1?null:O[C]},set:function($){return U.push($[0]),O.push(++N),N},delete:function($){var C=R.call(O,$);C!==-1&&(U.splice(C,1),O.splice(C,1))},clear:function(){U=[],O=[]}}}},64212:(z,M,A)=>{"use strict";var R=A(69759),N=Object.create;z.exports=function(U){var O=0,$=[[],[]],C=N(null);return{get:function(B){for(var S=0,F=$,j;S<U-1;){if(j=R.call(F[0],B[S]),j===-1)return null;F=F[1][j],++S}return j=R.call(F[0],B[S]),j===-1?null:F[1][j]||null},set:function(B){for(var S=0,F=$,j;S<U-1;)j=R.call(F[0],B[S]),j===-1&&(j=F[0].push(B[S])-1,F[1].push([[],[]])),F=F[1][j],++S;return j=R.call(F[0],B[S]),j===-1&&(j=F[0].push(B[S])-1),F[1][j]=++O,C[O]=B,O},delete:function(B){for(var S=0,F=$,j,G=[],ue=C[B];S<U-1;){if(j=R.call(F[0],ue[S]),j===-1)return;G.push(F,j),F=F[1][j],++S}if(j=R.call(F[0],ue[S]),j!==-1){for(B=F[1][j],F[0].splice(j,1),F[1].splice(j,1);!F[0].length&&G.length;)j=G.pop(),F=G.pop(),F[0].splice(j,1),F[1].splice(j,1);delete C[B]}},clear:function(){$=[[],[]],C=N(null)}}}},59848:z=>{"use strict";z.exports=function(M){return M?function(A){for(var R=String(A[0]),N=0,U=M;--U;)R+=""+A[++N];return R}:function(){return""}}},51147:(z,M,A)=>{"use strict";var R=A(69759),N=Object.create;z.exports=function(){var U=0,O=[],$=N(null);return{get:function(C){var B=0,S=O,F,j=C.length;if(j===0)return S[j]||null;if(S=S[j]){for(;B<j-1;){if(F=R.call(S[0],C[B]),F===-1)return null;S=S[1][F],++B}return F=R.call(S[0],C[B]),F===-1?null:S[1][F]||null}return null},set:function(C){var B=0,S=O,F,j=C.length;if(j===0)S[j]=++U;else{for(S[j]||(S[j]=[[],[]]),S=S[j];B<j-1;)F=R.call(S[0],C[B]),F===-1&&(F=S[0].push(C[B])-1,S[1].push([[],[]])),S=S[1][F],++B;F=R.call(S[0],C[B]),F===-1&&(F=S[0].push(C[B])-1),S[1][F]=++U}return $[U]=C,U},delete:function(C){var B=0,S=O,F,j=$[C],G=j.length,ue=[];if(G===0)delete S[G];else if(S=S[G]){for(;B<G-1;){if(F=R.call(S[0],j[B]),F===-1)return;ue.push(S,F),S=S[1][F],++B}if(F=R.call(S[0],j[B]),F===-1)return;for(C=S[1][F],S[0].splice(F,1),S[1].splice(F,1);!S[0].length&&ue.length;)F=ue.pop(),S=ue.pop(),S[0].splice(F,1),S[1].splice(F,1)}delete $[C]},clear:function(){O=[],$=N(null)}}}},20090:z=>{"use strict";z.exports=function(M){var A,R,N=M.length;if(!N)return"";for(A=String(M[R=0]);--N;)A+=""+M[++R];return A}},79976:(z,M,A)=>{"use strict";var R=A(11166),N=A(40676),U=A(63321),O=A(27739),$=A(2305);z.exports=function C(B){var S,F,j;if(R(B),S=Object(arguments[1]),S.async&&S.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(B,"__memoized__")&&!S.force?B:(F=$(S.length,B.length,S.async&&U.async),j=O(B,F,S),N(U,function(G,ue){S[ue]&&G(S[ue],j,S)}),C.__profiler__&&C.__profiler__(j),j.updateEnv(),j.memoized)}},8988:z=>{"use strict";var M=function(R){if(typeof R!="function")throw new TypeError(R+" is not a function");return R},A=function(R){var N=document.createTextNode(""),U,O,$=0;return new R(function(){var C;if(U)O&&(U=O.concat(U));else{if(!O)return;U=O}if(O=U,U=null,typeof O=="function"){C=O,O=null,C();return}for(N.data=$=++$%2;O;)C=O.shift(),O.length||(O=null),C()}).observe(N,{characterData:!0}),function(C){if(M(C),U){typeof U=="function"?U=[U,C]:U.push(C);return}U=C,N.data=$=++$%2}};z.exports=function(){if(typeof process=="object"&&process&&typeof process.nextTick=="function")return process.nextTick;if(typeof queueMicrotask=="function")return function(R){queueMicrotask(M(R))};if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return A(MutationObserver);if(typeof WebKitMutationObserver=="function")return A(WebKitMutationObserver)}return typeof setImmediate=="function"?function(R){setImmediate(M(R))}:typeof setTimeout=="function"||typeof setTimeout=="object"?function(R){setTimeout(M(R),0)}:null}()},31181:z=>{"use strict";z.exports=2147483647},43949:(z,M,A)=>{"use strict";var R=A(48036),N=A(31181);z.exports=function(U){if(U=R(U),U>N)throw new TypeError(U+" exceeds maximum possible timeout");return U}},51383:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.chromeLink=void 0;const R=A(62958),N=U=>(0,R.createBaseLink)({postMessage(O){U.port.postMessage(O)},addMessageListener(O){U.port.onMessage.addListener(O)},removeMessageListener(O){U.port.onMessage.removeListener(O)},addCloseListener(O){U.port.onDisconnect.addListener(O)},removeCloseListener(O){U.port.onDisconnect.removeListener(O)}});M.chromeLink=N},6201:function(z,M,A){"use strict";var R=this&&this.__createBinding||(Object.create?function(U,O,$,C){C===void 0&&(C=$);var B=Object.getOwnPropertyDescriptor(O,$);(!B||("get"in B?!O.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return O[$]}}),Object.defineProperty(U,C,B)}:function(U,O,$,C){C===void 0&&(C=$),U[C]=O[$]}),N=this&&this.__exportStar||function(U,O){for(var $ in U)$!=="default"&&!Object.prototype.hasOwnProperty.call(O,$)&&R(O,U,$)};Object.defineProperty(M,"__esModule",{value:!0}),N(A(51383),M),N(A(40649),M),N(A(88059),M)},62958:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.createBaseLink=void 0;const R=A(83931),N=A(33067),U=A(95402),O=$=>C=>({op:B})=>(0,N.observable)(S=>{const F=[],{id:j,type:G,path:ue}=B;try{const se=C.transformer.serialize(B.input),Y=()=>{S.error(new R.TRPCClientError("Port disconnected prematurely"))};$.addCloseListener(Y),F.push(()=>$.removeCloseListener(Y));const X=ie=>{if(!(0,U.isTRPCResponse)(ie))return;const{trpc:J}=ie;if(j===J.id){if("error"in J)return S.error(R.TRPCClientError.from(J));S.next({result:Object.assign(Object.assign({},J.result),(!J.result.type||J.result.type==="data")&&{type:"data",data:C.transformer.deserialize(J.result.data)})}),(G!=="subscription"||J.result.type==="stopped")&&S.complete()}};$.addMessageListener(X),F.push(()=>$.removeMessageListener(X)),$.postMessage({trpc:{id:j,jsonrpc:void 0,method:G,params:{path:ue,input:se}}})}catch(se){S.error(new R.TRPCClientError(se instanceof Error?se.message:"Unknown error"))}return()=>{G==="subscription"&&$.postMessage({trpc:{id:j,jsonrpc:void 0,method:"subscription.stop"}}),F.forEach(se=>se())}});M.createBaseLink=O},88059:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.popupLink=void 0;const R=A(76913),N=A(62958),U=O=>{const $=new Map,C=new Set;let B=null;async function S(F){if(!B||B.closed){B=O.createPopup(),await Promise.race([new Promise(j=>{var G;try{(G=B?.addEventListener)===null||G===void 0||G.call(B,"load",j)}catch{}}),new Promise(j=>{F.addEventListener("message",G=>{G.data===R.TRPC_BROWSER_LOADED_EVENT&&j()})}),new Promise(j=>{console.warn("Could not detect if popup loading succeeded after 15s timeout, continuing anyway"),setTimeout(j,15e3)})]);try{if(!B.addEventListener)throw new Error("popupWindow.addEventListener is not a function");B.addEventListener("beforeunload",()=>{B=null})}catch{const G=setInterval(()=>{B&&B.closed&&(B=null,C.forEach(ue=>{ue()}),clearInterval(G))},1e3)}}return B}return(0,N.createBaseLink)({async postMessage(F){return(await S(O.listenWindow)).postMessage(F,{targetOrigin:O.postOrigin})},addMessageListener(F){const j=G=>{F(G.data)};$.set(F,j),O.listenWindow.addEventListener("message",j)},removeMessageListener(F){const j=$.get(F);j&&O.listenWindow.removeEventListener("message",j)},addCloseListener(F){O.listenWindow.addEventListener("beforeunload",F),C.add(F)},removeCloseListener(F){O.listenWindow.removeEventListener("beforeunload",F),C.delete(F)}})};M.popupLink=U},40649:(z,M,A)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.windowLink=void 0;const R=A(62958),N=U=>{var O;const $=new Map,C=U.window,B=(O=U.postWindow)!==null&&O!==void 0?O:C;return(0,R.createBaseLink)({postMessage(S){B.postMessage(S,{targetOrigin:U.postOrigin})},addMessageListener(S){const F=j=>{S(j.data)};$.set(S,F),C.addEventListener("message",F)},removeMessageListener(S){const F=$.get(S);F&&C.removeEventListener("message",F)},addCloseListener(S){C.addEventListener("beforeunload",S)},removeCloseListener(S){C.removeEventListener("beforeunload",S)}})};M.windowLink=N},76913:(z,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.TRPC_BROWSER_LOADED_EVENT=void 0,M.TRPC_BROWSER_LOADED_EVENT="TRPC_BROWSER::POPUP_LOADED"},95402:(z,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.isTRPCRequestWithId=M.isTRPCRequest=M.isTRPCResponse=M.isTRPCMessage=void 0;function A(B){return typeof B=="object"&&B!==null&&!Array.isArray(B)}function R(B){return B==null}function N(B){return!!(A(B)&&"trpc"in B&&A(B.trpc))}M.isTRPCMessage=N;function U(B){return N(B)&&"id"in B.trpc&&!R(B.trpc.id)}function O(B){return U(B)&&("error"in B.trpc||"result"in B.trpc)}M.isTRPCResponse=O;function $(B){return U(B)&&"method"in B.trpc}M.isTRPCRequest=$;function C(B){return $(B)&&U(B)}M.isTRPCRequestWithId=C},28313:(z,M,A)=>{"use strict";var R=A(24921);z.exports=function(N){if(typeof N!="function"||!hasOwnProperty.call(N,"length"))return!1;try{if(typeof N.length!="number"||typeof N.call!="function"||typeof N.apply!="function")return!1}catch{return!1}return!R(N)}},41720:(z,M,A)=>{"use strict";var R=A(67016),N={object:!0,function:!0,undefined:!0};z.exports=function(U){return R(U)?hasOwnProperty.call(N,typeof U):!1}},19632:(z,M,A)=>{"use strict";var R=A(28313),N=/^\s*class[\s{/}]/,U=Function.prototype.toString;z.exports=function(O){return!(!R(O)||N.test(U.call(O)))}},24921:(z,M,A)=>{"use strict";var R=A(41720);z.exports=function(N){if(!R(N))return!1;try{return N.constructor?N.constructor.prototype===N:!1}catch{return!1}}},67016:z=>{"use strict";var M=void 0;z.exports=function(A){return A!==M&&A!==null}},62797:function(z,M,A){var R,N;(function(U,O,$){z.exports?z.exports=$():(R=$,N=typeof R=="function"?R.call(M,A,M,z):R,N!==void 0&&(z.exports=N))})("urljoin",this,function(){function U(O){var $=[];if(O.length===0)return"";if(typeof O[0]!="string")throw new TypeError("Url must be a string. Received "+O[0]);if(O[0].match(/^[^/:]+:\/*$/)&&O.length>1){var C=O.shift();O[0]=C+O[0]}O[0].match(/^file:\/\/\//)?O[0]=O[0].replace(/^([^/:]+):\/*/,"$1:///"):O[0]=O[0].replace(/^([^/:]+):\/*/,"$1://");for(var B=0;B<O.length;B++){var S=O[B];if(typeof S!="string")throw new TypeError("Url must be a string. Received "+S);S!==""&&(B>0&&(S=S.replace(/^[\/]+/,"")),B<O.length-1?S=S.replace(/[\/]+$/,""):S=S.replace(/[\/]+$/,"/"),$.push(S))}var F=$.join("/");F=F.replace(/\/(\?|&|#[^!])/g,"$1");var j=F.split("?");return F=j.shift()+(j.length>0?"?":"")+j.join("&"),F}return function(){var O;return typeof arguments[0]=="object"?O=arguments[0]:O=[].slice.call(arguments),U(O)}})},49047:(z,M,A)=>{"use strict";A.r(M),A.d(M,{DOMException:()=>Ye,Headers:()=>F,Request:()=>ne,Response:()=>Oe,fetch:()=>et});var R=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof A.g<"u"&&A.g||{},N={searchParams:"URLSearchParams"in R,iterable:"Symbol"in R&&"iterator"in Symbol,blob:"FileReader"in R&&"Blob"in R&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in R,arrayBuffer:"ArrayBuffer"in R};function U(K){return K&&DataView.prototype.isPrototypeOf(K)}if(N.arrayBuffer)var O=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],$=ArrayBuffer.isView||function(K){return K&&O.indexOf(Object.prototype.toString.call(K))>-1};function C(K){if(typeof K!="string"&&(K=String(K)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(K)||K==="")throw new TypeError('Invalid character in header field name: "'+K+'"');return K.toLowerCase()}function B(K){return typeof K!="string"&&(K=String(K)),K}function S(K){var Te={next:function(){var Pe=K.shift();return{done:Pe===void 0,value:Pe}}};return N.iterable&&(Te[Symbol.iterator]=function(){return Te}),Te}function F(K){this.map={},K instanceof F?K.forEach(function(Te,Pe){this.append(Pe,Te)},this):Array.isArray(K)?K.forEach(function(Te){if(Te.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+Te.length);this.append(Te[0],Te[1])},this):K&&Object.getOwnPropertyNames(K).forEach(function(Te){this.append(Te,K[Te])},this)}F.prototype.append=function(K,Te){K=C(K),Te=B(Te);var Pe=this.map[K];this.map[K]=Pe?Pe+", "+Te:Te},F.prototype.delete=function(K){delete this.map[C(K)]},F.prototype.get=function(K){return K=C(K),this.has(K)?this.map[K]:null},F.prototype.has=function(K){return this.map.hasOwnProperty(C(K))},F.prototype.set=function(K,Te){this.map[C(K)]=B(Te)},F.prototype.forEach=function(K,Te){for(var Pe in this.map)this.map.hasOwnProperty(Pe)&&K.call(Te,this.map[Pe],Pe,this)},F.prototype.keys=function(){var K=[];return this.forEach(function(Te,Pe){K.push(Pe)}),S(K)},F.prototype.values=function(){var K=[];return this.forEach(function(Te){K.push(Te)}),S(K)},F.prototype.entries=function(){var K=[];return this.forEach(function(Te,Pe){K.push([Pe,Te])}),S(K)},N.iterable&&(F.prototype[Symbol.iterator]=F.prototype.entries);function j(K){if(!K._noBody){if(K.bodyUsed)return Promise.reject(new TypeError("Already read"));K.bodyUsed=!0}}function G(K){return new Promise(function(Te,Pe){K.onload=function(){Te(K.result)},K.onerror=function(){Pe(K.error)}})}function ue(K){var Te=new FileReader,Pe=G(Te);return Te.readAsArrayBuffer(K),Pe}function se(K){var Te=new FileReader,Pe=G(Te),Ce=/charset=([A-Za-z0-9_-]+)/.exec(K.type),Re=Ce?Ce[1]:"utf-8";return Te.readAsText(K,Re),Pe}function Y(K){for(var Te=new Uint8Array(K),Pe=new Array(Te.length),Ce=0;Ce<Te.length;Ce++)Pe[Ce]=String.fromCharCode(Te[Ce]);return Pe.join("")}function X(K){if(K.slice)return K.slice(0);var Te=new Uint8Array(K.byteLength);return Te.set(new Uint8Array(K)),Te.buffer}function ie(){return this.bodyUsed=!1,this._initBody=function(K){this.bodyUsed=this.bodyUsed,this._bodyInit=K,K?typeof K=="string"?this._bodyText=K:N.blob&&Blob.prototype.isPrototypeOf(K)?this._bodyBlob=K:N.formData&&FormData.prototype.isPrototypeOf(K)?this._bodyFormData=K:N.searchParams&&URLSearchParams.prototype.isPrototypeOf(K)?this._bodyText=K.toString():N.arrayBuffer&&N.blob&&U(K)?(this._bodyArrayBuffer=X(K.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):N.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(K)||$(K))?this._bodyArrayBuffer=X(K):this._bodyText=K=Object.prototype.toString.call(K):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof K=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):N.searchParams&&URLSearchParams.prototype.isPrototypeOf(K)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},N.blob&&(this.blob=function(){var K=j(this);if(K)return K;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var K=j(this);return K||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(N.blob)return this.blob().then(ue);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var K=j(this);if(K)return K;if(this._bodyBlob)return se(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},N.formData&&(this.formData=function(){return this.text().then(be)}),this.json=function(){return this.text().then(JSON.parse)},this}var J=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function te(K){var Te=K.toUpperCase();return J.indexOf(Te)>-1?Te:K}function ne(K,Te){if(!(this instanceof ne))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');Te=Te||{};var Pe=Te.body;if(K instanceof ne){if(K.bodyUsed)throw new TypeError("Already read");this.url=K.url,this.credentials=K.credentials,Te.headers||(this.headers=new F(K.headers)),this.method=K.method,this.mode=K.mode,this.signal=K.signal,!Pe&&K._bodyInit!=null&&(Pe=K._bodyInit,K.bodyUsed=!0)}else this.url=String(K);if(this.credentials=Te.credentials||this.credentials||"same-origin",(Te.headers||!this.headers)&&(this.headers=new F(Te.headers)),this.method=te(Te.method||this.method||"GET"),this.mode=Te.mode||this.mode||null,this.signal=Te.signal||this.signal||function(){if("AbortController"in R){var de=new AbortController;return de.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Pe)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Pe),(this.method==="GET"||this.method==="HEAD")&&(Te.cache==="no-store"||Te.cache==="no-cache")){var Ce=/([?&])_=[^&]*/;if(Ce.test(this.url))this.url=this.url.replace(Ce,"$1_="+new Date().getTime());else{var Re=/\?/;this.url+=(Re.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}ne.prototype.clone=function(){return new ne(this,{body:this._bodyInit})};function be(K){var Te=new FormData;return K.trim().split("&").forEach(function(Pe){if(Pe){var Ce=Pe.split("="),Re=Ce.shift().replace(/\+/g," "),de=Ce.join("=").replace(/\+/g," ");Te.append(decodeURIComponent(Re),decodeURIComponent(de))}}),Te}function ke(K){var Te=new F,Pe=K.replace(/\r?\n[\t ]+/g," ");return Pe.split("\r").map(function(Ce){return Ce.indexOf(`
`)===0?Ce.substr(1,Ce.length):Ce}).forEach(function(Ce){var Re=Ce.split(":"),de=Re.shift().trim();if(de){var he=Re.join(":").trim();try{Te.append(de,he)}catch(He){console.warn("Response "+He.message)}}}),Te}ie.call(ne.prototype);function Oe(K,Te){if(!(this instanceof Oe))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(Te||(Te={}),this.type="default",this.status=Te.status===void 0?200:Te.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=Te.statusText===void 0?"":""+Te.statusText,this.headers=new F(Te.headers),this.url=Te.url||"",this._initBody(K)}ie.call(Oe.prototype),Oe.prototype.clone=function(){return new Oe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new F(this.headers),url:this.url})},Oe.error=function(){var K=new Oe(null,{status:200,statusText:""});return K.ok=!1,K.status=0,K.type="error",K};var We=[301,302,303,307,308];Oe.redirect=function(K,Te){if(We.indexOf(Te)===-1)throw new RangeError("Invalid status code");return new Oe(null,{status:Te,headers:{location:K}})};var Ye=R.DOMException;try{new Ye}catch{Ye=function(Te,Pe){this.message=Te,this.name=Pe;var Ce=Error(Te);this.stack=Ce.stack},Ye.prototype=Object.create(Error.prototype),Ye.prototype.constructor=Ye}function et(K,Te){return new Promise(function(Pe,Ce){var Re=new ne(K,Te);if(Re.signal&&Re.signal.aborted)return Ce(new Ye("Aborted","AbortError"));var de=new XMLHttpRequest;function he(){de.abort()}de.onload=function(){var $e={statusText:de.statusText,headers:ke(de.getAllResponseHeaders()||"")};Re.url.indexOf("file://")===0&&(de.status<200||de.status>599)?$e.status=200:$e.status=de.status,$e.url="responseURL"in de?de.responseURL:$e.headers.get("X-Request-URL");var tt="response"in de?de.response:de.responseText;setTimeout(function(){Pe(new Oe(tt,$e))},0)},de.onerror=function(){setTimeout(function(){Ce(new TypeError("Network request failed"))},0)},de.ontimeout=function(){setTimeout(function(){Ce(new TypeError("Network request timed out"))},0)},de.onabort=function(){setTimeout(function(){Ce(new Ye("Aborted","AbortError"))},0)};function He($e){try{return $e===""&&R.location.href?R.location.href:$e}catch{return $e}}if(de.open(Re.method,He(Re.url),!0),Re.credentials==="include"?de.withCredentials=!0:Re.credentials==="omit"&&(de.withCredentials=!1),"responseType"in de&&(N.blob?de.responseType="blob":N.arrayBuffer&&(de.responseType="arraybuffer")),Te&&typeof Te.headers=="object"&&!(Te.headers instanceof F||R.Headers&&Te.headers instanceof R.Headers)){var Je=[];Object.getOwnPropertyNames(Te.headers).forEach(function($e){Je.push(C($e)),de.setRequestHeader($e,B(Te.headers[$e]))}),Re.headers.forEach(function($e,tt){Je.indexOf(tt)===-1&&de.setRequestHeader(tt,$e)})}else Re.headers.forEach(function($e,tt){de.setRequestHeader(tt,$e)});Re.signal&&(Re.signal.addEventListener("abort",he),de.onreadystatechange=function(){de.readyState===4&&Re.signal.removeEventListener("abort",he)}),de.send(typeof Re._bodyInit>"u"?null:Re._bodyInit)})}et.polyfill=!0,R.fetch||(R.fetch=et,R.Headers=F,R.Request=ne,R.Response=Oe)},2187:(z,M,A)=>{"use strict";A.d(M,{DX:()=>R,Sc:()=>Ja,X7:()=>Qa,qd:()=>Xa});function R(D){return D=D||new Map,{all:D,on(y,v){const P=D.get(y);P?P.push(v):D.set(y,[v])},off(y,v){const P=D.get(y);P&&(v?P.splice(P.indexOf(v)>>>0,1):D.set(y,[]))},emit(y,v){let P=D?.get(y);P&&P.slice().map(H=>{H(v)}),P=D.get("*"),P&&P.slice().forEach(H=>{H(y,v)})}}}var N;(function(D){D.assertEqual=H=>H;function y(H){}D.assertIs=y;function v(H){throw new Error}D.assertNever=v,D.arrayToEnum=H=>{const xe={};for(const ve of H)xe[ve]=ve;return xe},D.getValidEnumValues=H=>{const xe=D.objectKeys(H).filter(we=>typeof H[H[we]]!="number"),ve={};for(const we of xe)ve[we]=H[we];return D.objectValues(ve)},D.objectValues=H=>D.objectKeys(H).map(function(xe){return H[xe]}),D.objectKeys=typeof Object.keys=="function"?H=>Object.keys(H):H=>{const xe=[];for(const ve in H)Object.prototype.hasOwnProperty.call(H,ve)&&xe.push(ve);return xe},D.find=(H,xe)=>{for(const ve of H)if(xe(ve))return ve},D.isInteger=typeof Number.isInteger=="function"?H=>Number.isInteger(H):H=>typeof H=="number"&&isFinite(H)&&Math.floor(H)===H;function P(H,xe=" | "){return H.map(ve=>typeof ve=="string"?`'${ve}'`:ve).join(xe)}D.joinValues=P,D.jsonStringifyReplacer=(H,xe)=>typeof xe=="bigint"?xe.toString():xe})(N||(N={}));var U;(function(D){D.mergeShapes=(y,v)=>({...y,...v})})(U||(U={}));const O=N.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$=D=>{switch(typeof D){case"undefined":return O.undefined;case"string":return O.string;case"number":return isNaN(D)?O.nan:O.number;case"boolean":return O.boolean;case"function":return O.function;case"bigint":return O.bigint;case"symbol":return O.symbol;case"object":return Array.isArray(D)?O.array:D===null?O.null:D.then&&typeof D.then=="function"&&D.catch&&typeof D.catch=="function"?O.promise:typeof Map<"u"&&D instanceof Map?O.map:typeof Set<"u"&&D instanceof Set?O.set:typeof Date<"u"&&D instanceof Date?O.date:O.object;default:return O.unknown}},C=N.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),B=D=>JSON.stringify(D,null,2).replace(/"([^"]+)":/g,"$1:");class S extends Error{constructor(y){super(),this.issues=[],this.addIssue=P=>{this.issues=[...this.issues,P]},this.addIssues=(P=[])=>{this.issues=[...this.issues,...P]};const v=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,v):this.__proto__=v,this.name="ZodError",this.issues=y}get errors(){return this.issues}format(y){const v=y||function(xe){return xe.message},P={_errors:[]},H=xe=>{for(const ve of xe.issues)if(ve.code==="invalid_union")ve.unionErrors.map(H);else if(ve.code==="invalid_return_type")H(ve.returnTypeError);else if(ve.code==="invalid_arguments")H(ve.argumentsError);else if(ve.path.length===0)P._errors.push(v(ve));else{let we=P,Fe=0;for(;Fe<ve.path.length;){const Xe=ve.path[Fe];Fe===ve.path.length-1?(we[Xe]=we[Xe]||{_errors:[]},we[Xe]._errors.push(v(ve))):we[Xe]=we[Xe]||{_errors:[]},we=we[Xe],Fe++}}};return H(this),P}static assert(y){if(!(y instanceof S))throw new Error(`Not a ZodError: ${y}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,N.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(y=v=>v.message){const v={},P=[];for(const H of this.issues)H.path.length>0?(v[H.path[0]]=v[H.path[0]]||[],v[H.path[0]].push(y(H))):P.push(y(H));return{formErrors:P,fieldErrors:v}}get formErrors(){return this.flatten()}}S.create=D=>new S(D);const F=(D,y)=>{let v;switch(D.code){case C.invalid_type:D.received===O.undefined?v="Required":v=`Expected ${D.expected}, received ${D.received}`;break;case C.invalid_literal:v=`Invalid literal value, expected ${JSON.stringify(D.expected,N.jsonStringifyReplacer)}`;break;case C.unrecognized_keys:v=`Unrecognized key(s) in object: ${N.joinValues(D.keys,", ")}`;break;case C.invalid_union:v="Invalid input";break;case C.invalid_union_discriminator:v=`Invalid discriminator value. Expected ${N.joinValues(D.options)}`;break;case C.invalid_enum_value:v=`Invalid enum value. Expected ${N.joinValues(D.options)}, received '${D.received}'`;break;case C.invalid_arguments:v="Invalid function arguments";break;case C.invalid_return_type:v="Invalid function return type";break;case C.invalid_date:v="Invalid date";break;case C.invalid_string:typeof D.validation=="object"?"includes"in D.validation?(v=`Invalid input: must include "${D.validation.includes}"`,typeof D.validation.position=="number"&&(v=`${v} at one or more positions greater than or equal to ${D.validation.position}`)):"startsWith"in D.validation?v=`Invalid input: must start with "${D.validation.startsWith}"`:"endsWith"in D.validation?v=`Invalid input: must end with "${D.validation.endsWith}"`:N.assertNever(D.validation):D.validation!=="regex"?v=`Invalid ${D.validation}`:v="Invalid";break;case C.too_small:D.type==="array"?v=`Array must contain ${D.exact?"exactly":D.inclusive?"at least":"more than"} ${D.minimum} element(s)`:D.type==="string"?v=`String must contain ${D.exact?"exactly":D.inclusive?"at least":"over"} ${D.minimum} character(s)`:D.type==="number"?v=`Number must be ${D.exact?"exactly equal to ":D.inclusive?"greater than or equal to ":"greater than "}${D.minimum}`:D.type==="date"?v=`Date must be ${D.exact?"exactly equal to ":D.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(D.minimum))}`:v="Invalid input";break;case C.too_big:D.type==="array"?v=`Array must contain ${D.exact?"exactly":D.inclusive?"at most":"less than"} ${D.maximum} element(s)`:D.type==="string"?v=`String must contain ${D.exact?"exactly":D.inclusive?"at most":"under"} ${D.maximum} character(s)`:D.type==="number"?v=`Number must be ${D.exact?"exactly":D.inclusive?"less than or equal to":"less than"} ${D.maximum}`:D.type==="bigint"?v=`BigInt must be ${D.exact?"exactly":D.inclusive?"less than or equal to":"less than"} ${D.maximum}`:D.type==="date"?v=`Date must be ${D.exact?"exactly":D.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(D.maximum))}`:v="Invalid input";break;case C.custom:v="Invalid input";break;case C.invalid_intersection_types:v="Intersection results could not be merged";break;case C.not_multiple_of:v=`Number must be a multiple of ${D.multipleOf}`;break;case C.not_finite:v="Number must be finite";break;default:v=y.defaultError,N.assertNever(D)}return{message:v}};let j=F;function G(D){j=D}function ue(){return j}const se=D=>{const{data:y,path:v,errorMaps:P,issueData:H}=D,xe=[...v,...H.path||[]],ve={...H,path:xe};if(H.message!==void 0)return{...H,path:xe,message:H.message};let we="";const Fe=P.filter(Xe=>!!Xe).slice().reverse();for(const Xe of Fe)we=Xe(ve,{data:y,defaultError:we}).message;return{...H,path:xe,message:we}},Y=[];function X(D,y){const v=ue(),P=se({issueData:y,data:D.data,path:D.path,errorMaps:[D.common.contextualErrorMap,D.schemaErrorMap,v,v===F?void 0:F].filter(H=>!!H)});D.common.issues.push(P)}class ie{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(y,v){const P=[];for(const H of v){if(H.status==="aborted")return J;H.status==="dirty"&&y.dirty(),P.push(H.value)}return{status:y.value,value:P}}static async mergeObjectAsync(y,v){const P=[];for(const H of v){const xe=await H.key,ve=await H.value;P.push({key:xe,value:ve})}return ie.mergeObjectSync(y,P)}static mergeObjectSync(y,v){const P={};for(const H of v){const{key:xe,value:ve}=H;if(xe.status==="aborted"||ve.status==="aborted")return J;xe.status==="dirty"&&y.dirty(),ve.status==="dirty"&&y.dirty(),xe.value!=="__proto__"&&(typeof ve.value<"u"||H.alwaysSet)&&(P[xe.value]=ve.value)}return{status:y.value,value:P}}}const J=Object.freeze({status:"aborted"}),te=D=>({status:"dirty",value:D}),ne=D=>({status:"valid",value:D}),be=D=>D.status==="aborted",ke=D=>D.status==="dirty",Oe=D=>D.status==="valid",We=D=>typeof Promise<"u"&&D instanceof Promise;function Ye(D,y,v,P){if(typeof y=="function"?D!==y||!P:!y.has(D))throw new TypeError("Cannot read private member from an object whose class did not declare it");return y.get(D)}function et(D,y,v,P,H){if(typeof y=="function"?D!==y||!H:!y.has(D))throw new TypeError("Cannot write private member to an object whose class did not declare it");return y.set(D,v),v}var K;(function(D){D.errToObj=y=>typeof y=="string"?{message:y}:y||{},D.toString=y=>typeof y=="string"?y:y?.message})(K||(K={}));var Te,Pe;class Ce{constructor(y,v,P,H){this._cachedPath=[],this.parent=y,this.data=v,this._path=P,this._key=H}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Re=(D,y)=>{if(Oe(y))return{success:!0,data:y.value};if(!D.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const v=new S(D.common.issues);return this._error=v,this._error}}};function de(D){if(!D)return{};const{errorMap:y,invalid_type_error:v,required_error:P,description:H}=D;if(y&&(v||P))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return y?{errorMap:y,description:H}:{errorMap:(xe,ve)=>{var we,Fe;const{message:Xe}=D;return xe.code==="invalid_enum_value"?{message:Xe??ve.defaultError}:typeof ve.data>"u"?{message:(we=Xe??P)!==null&&we!==void 0?we:ve.defaultError}:xe.code!=="invalid_type"?{message:ve.defaultError}:{message:(Fe=Xe??v)!==null&&Fe!==void 0?Fe:ve.defaultError}},description:H}}class he{constructor(y){this.spa=this.safeParseAsync,this._def=y,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(y){return $(y.data)}_getOrReturnCtx(y,v){return v||{common:y.parent.common,data:y.data,parsedType:$(y.data),schemaErrorMap:this._def.errorMap,path:y.path,parent:y.parent}}_processInputParams(y){return{status:new ie,ctx:{common:y.parent.common,data:y.data,parsedType:$(y.data),schemaErrorMap:this._def.errorMap,path:y.path,parent:y.parent}}}_parseSync(y){const v=this._parse(y);if(We(v))throw new Error("Synchronous parse encountered promise.");return v}_parseAsync(y){const v=this._parse(y);return Promise.resolve(v)}parse(y,v){const P=this.safeParse(y,v);if(P.success)return P.data;throw P.error}safeParse(y,v){var P;const H={common:{issues:[],async:(P=v?.async)!==null&&P!==void 0?P:!1,contextualErrorMap:v?.errorMap},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:y,parsedType:$(y)},xe=this._parseSync({data:y,path:H.path,parent:H});return Re(H,xe)}async parseAsync(y,v){const P=await this.safeParseAsync(y,v);if(P.success)return P.data;throw P.error}async safeParseAsync(y,v){const P={common:{issues:[],contextualErrorMap:v?.errorMap,async:!0},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:y,parsedType:$(y)},H=this._parse({data:y,path:P.path,parent:P}),xe=await(We(H)?H:Promise.resolve(H));return Re(P,xe)}refine(y,v){const P=H=>typeof v=="string"||typeof v>"u"?{message:v}:typeof v=="function"?v(H):v;return this._refinement((H,xe)=>{const ve=y(H),we=()=>xe.addIssue({code:C.custom,...P(H)});return typeof Promise<"u"&&ve instanceof Promise?ve.then(Fe=>Fe?!0:(we(),!1)):ve?!0:(we(),!1)})}refinement(y,v){return this._refinement((P,H)=>y(P)?!0:(H.addIssue(typeof v=="function"?v(P,H):v),!1))}_refinement(y){return new Wr({schema:this,typeName:rt.ZodEffects,effect:{type:"refinement",refinement:y}})}superRefine(y){return this._refinement(y)}optional(){return qn.create(this,this._def)}nullable(){return Bs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return V.create(this,this._def)}promise(){return Ki.create(this,this._def)}or(y){return q.create([this,y],this._def)}and(y){return st.create(this,y,this._def)}transform(y){return new Wr({...de(this._def),schema:this,typeName:rt.ZodEffects,effect:{type:"transform",transform:y}})}default(y){const v=typeof y=="function"?y:()=>y;return new Wa({...de(this._def),innerType:this,defaultValue:v,typeName:rt.ZodDefault})}brand(){return new Yo({typeName:rt.ZodBranded,type:this,...de(this._def)})}catch(y){const v=typeof y=="function"?y:()=>y;return new Wi({...de(this._def),innerType:this,catchValue:v,typeName:rt.ZodCatch})}describe(y){const v=this.constructor;return new v({...this._def,description:y})}pipe(y){return Xo.create(this,y)}readonly(){return Ga.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const He=/^c[^\s-]{8,}$/i,Je=/^[0-9a-z]+$/,$e=/^[0-9A-HJKMNP-TV-Z]{26}$/,tt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Tt=/^[a-z0-9_-]{21}$/i,ut=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Jt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let mt;const sn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wn=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,pa=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,gr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Za=new RegExp(`^${gr}$`);function xn(D){let y="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return D.precision?y=`${y}\\.\\d{${D.precision}}`:D.precision==null&&(y=`${y}(\\.\\d+)?`),y}function Ko(D){return new RegExp(`^${xn(D)}$`)}function za(D){let y=`${gr}T${xn(D)}`;const v=[];return v.push(D.local?"Z?":"Z"),D.offset&&v.push("([+-]\\d{2}:?\\d{2})"),y=`${y}(${v.join("|")})`,new RegExp(`^${y}$`)}function ga(D,y){return!!((y==="v4"||!y)&&sn.test(D)||(y==="v6"||!y)&&Wn.test(D))}class An extends he{_parse(y){if(this._def.coerce&&(y.data=String(y.data)),this._getType(y)!==O.string){const H=this._getOrReturnCtx(y);return X(H,{code:C.invalid_type,expected:O.string,received:H.parsedType}),J}const v=new ie;let P;for(const H of this._def.checks)if(H.kind==="min")y.data.length<H.value&&(P=this._getOrReturnCtx(y,P),X(P,{code:C.too_small,minimum:H.value,type:"string",inclusive:!0,exact:!1,message:H.message}),v.dirty());else if(H.kind==="max")y.data.length>H.value&&(P=this._getOrReturnCtx(y,P),X(P,{code:C.too_big,maximum:H.value,type:"string",inclusive:!0,exact:!1,message:H.message}),v.dirty());else if(H.kind==="length"){const xe=y.data.length>H.value,ve=y.data.length<H.value;(xe||ve)&&(P=this._getOrReturnCtx(y,P),xe?X(P,{code:C.too_big,maximum:H.value,type:"string",inclusive:!0,exact:!0,message:H.message}):ve&&X(P,{code:C.too_small,minimum:H.value,type:"string",inclusive:!0,exact:!0,message:H.message}),v.dirty())}else if(H.kind==="email")Jt.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"email",code:C.invalid_string,message:H.message}),v.dirty());else if(H.kind==="emoji")mt||(mt=new RegExp(lt,"u")),mt.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"emoji",code:C.invalid_string,message:H.message}),v.dirty());else if(H.kind==="uuid")tt.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"uuid",code:C.invalid_string,message:H.message}),v.dirty());else if(H.kind==="nanoid")Tt.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"nanoid",code:C.invalid_string,message:H.message}),v.dirty());else if(H.kind==="cuid")He.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"cuid",code:C.invalid_string,message:H.message}),v.dirty());else if(H.kind==="cuid2")Je.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"cuid2",code:C.invalid_string,message:H.message}),v.dirty());else if(H.kind==="ulid")$e.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"ulid",code:C.invalid_string,message:H.message}),v.dirty());else if(H.kind==="url")try{new URL(y.data)}catch{P=this._getOrReturnCtx(y,P),X(P,{validation:"url",code:C.invalid_string,message:H.message}),v.dirty()}else H.kind==="regex"?(H.regex.lastIndex=0,H.regex.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"regex",code:C.invalid_string,message:H.message}),v.dirty())):H.kind==="trim"?y.data=y.data.trim():H.kind==="includes"?y.data.includes(H.value,H.position)||(P=this._getOrReturnCtx(y,P),X(P,{code:C.invalid_string,validation:{includes:H.value,position:H.position},message:H.message}),v.dirty()):H.kind==="toLowerCase"?y.data=y.data.toLowerCase():H.kind==="toUpperCase"?y.data=y.data.toUpperCase():H.kind==="startsWith"?y.data.startsWith(H.value)||(P=this._getOrReturnCtx(y,P),X(P,{code:C.invalid_string,validation:{startsWith:H.value},message:H.message}),v.dirty()):H.kind==="endsWith"?y.data.endsWith(H.value)||(P=this._getOrReturnCtx(y,P),X(P,{code:C.invalid_string,validation:{endsWith:H.value},message:H.message}),v.dirty()):H.kind==="datetime"?za(H).test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{code:C.invalid_string,validation:"datetime",message:H.message}),v.dirty()):H.kind==="date"?Za.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{code:C.invalid_string,validation:"date",message:H.message}),v.dirty()):H.kind==="time"?Ko(H).test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{code:C.invalid_string,validation:"time",message:H.message}),v.dirty()):H.kind==="duration"?ut.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"duration",code:C.invalid_string,message:H.message}),v.dirty()):H.kind==="ip"?ga(y.data,H.version)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"ip",code:C.invalid_string,message:H.message}),v.dirty()):H.kind==="base64"?pa.test(y.data)||(P=this._getOrReturnCtx(y,P),X(P,{validation:"base64",code:C.invalid_string,message:H.message}),v.dirty()):N.assertNever(H);return{status:v.value,value:y.data}}_regex(y,v,P){return this.refinement(H=>y.test(H),{validation:v,code:C.invalid_string,...K.errToObj(P)})}_addCheck(y){return new An({...this._def,checks:[...this._def.checks,y]})}email(y){return this._addCheck({kind:"email",...K.errToObj(y)})}url(y){return this._addCheck({kind:"url",...K.errToObj(y)})}emoji(y){return this._addCheck({kind:"emoji",...K.errToObj(y)})}uuid(y){return this._addCheck({kind:"uuid",...K.errToObj(y)})}nanoid(y){return this._addCheck({kind:"nanoid",...K.errToObj(y)})}cuid(y){return this._addCheck({kind:"cuid",...K.errToObj(y)})}cuid2(y){return this._addCheck({kind:"cuid2",...K.errToObj(y)})}ulid(y){return this._addCheck({kind:"ulid",...K.errToObj(y)})}base64(y){return this._addCheck({kind:"base64",...K.errToObj(y)})}ip(y){return this._addCheck({kind:"ip",...K.errToObj(y)})}datetime(y){var v,P;return typeof y=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:y}):this._addCheck({kind:"datetime",precision:typeof y?.precision>"u"?null:y?.precision,offset:(v=y?.offset)!==null&&v!==void 0?v:!1,local:(P=y?.local)!==null&&P!==void 0?P:!1,...K.errToObj(y?.message)})}date(y){return this._addCheck({kind:"date",message:y})}time(y){return typeof y=="string"?this._addCheck({kind:"time",precision:null,message:y}):this._addCheck({kind:"time",precision:typeof y?.precision>"u"?null:y?.precision,...K.errToObj(y?.message)})}duration(y){return this._addCheck({kind:"duration",...K.errToObj(y)})}regex(y,v){return this._addCheck({kind:"regex",regex:y,...K.errToObj(v)})}includes(y,v){return this._addCheck({kind:"includes",value:y,position:v?.position,...K.errToObj(v?.message)})}startsWith(y,v){return this._addCheck({kind:"startsWith",value:y,...K.errToObj(v)})}endsWith(y,v){return this._addCheck({kind:"endsWith",value:y,...K.errToObj(v)})}min(y,v){return this._addCheck({kind:"min",value:y,...K.errToObj(v)})}max(y,v){return this._addCheck({kind:"max",value:y,...K.errToObj(v)})}length(y,v){return this._addCheck({kind:"length",value:y,...K.errToObj(v)})}nonempty(y){return this.min(1,K.errToObj(y))}trim(){return new An({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new An({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new An({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(y=>y.kind==="datetime")}get isDate(){return!!this._def.checks.find(y=>y.kind==="date")}get isTime(){return!!this._def.checks.find(y=>y.kind==="time")}get isDuration(){return!!this._def.checks.find(y=>y.kind==="duration")}get isEmail(){return!!this._def.checks.find(y=>y.kind==="email")}get isURL(){return!!this._def.checks.find(y=>y.kind==="url")}get isEmoji(){return!!this._def.checks.find(y=>y.kind==="emoji")}get isUUID(){return!!this._def.checks.find(y=>y.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(y=>y.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(y=>y.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(y=>y.kind==="cuid2")}get isULID(){return!!this._def.checks.find(y=>y.kind==="ulid")}get isIP(){return!!this._def.checks.find(y=>y.kind==="ip")}get isBase64(){return!!this._def.checks.find(y=>y.kind==="base64")}get minLength(){let y=null;for(const v of this._def.checks)v.kind==="min"&&(y===null||v.value>y)&&(y=v.value);return y}get maxLength(){let y=null;for(const v of this._def.checks)v.kind==="max"&&(y===null||v.value<y)&&(y=v.value);return y}}An.create=D=>{var y;return new An({checks:[],typeName:rt.ZodString,coerce:(y=D?.coerce)!==null&&y!==void 0?y:!1,...de(D)})};function lu(D,y){const v=(D.toString().split(".")[1]||"").length,P=(y.toString().split(".")[1]||"").length,H=v>P?v:P,xe=parseInt(D.toFixed(H).replace(".","")),ve=parseInt(y.toFixed(H).replace(".",""));return xe%ve/Math.pow(10,H)}class cs extends he{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(y){if(this._def.coerce&&(y.data=Number(y.data)),this._getType(y)!==O.number){const H=this._getOrReturnCtx(y);return X(H,{code:C.invalid_type,expected:O.number,received:H.parsedType}),J}let v;const P=new ie;for(const H of this._def.checks)H.kind==="int"?N.isInteger(y.data)||(v=this._getOrReturnCtx(y,v),X(v,{code:C.invalid_type,expected:"integer",received:"float",message:H.message}),P.dirty()):H.kind==="min"?(H.inclusive?y.data<H.value:y.data<=H.value)&&(v=this._getOrReturnCtx(y,v),X(v,{code:C.too_small,minimum:H.value,type:"number",inclusive:H.inclusive,exact:!1,message:H.message}),P.dirty()):H.kind==="max"?(H.inclusive?y.data>H.value:y.data>=H.value)&&(v=this._getOrReturnCtx(y,v),X(v,{code:C.too_big,maximum:H.value,type:"number",inclusive:H.inclusive,exact:!1,message:H.message}),P.dirty()):H.kind==="multipleOf"?lu(y.data,H.value)!==0&&(v=this._getOrReturnCtx(y,v),X(v,{code:C.not_multiple_of,multipleOf:H.value,message:H.message}),P.dirty()):H.kind==="finite"?Number.isFinite(y.data)||(v=this._getOrReturnCtx(y,v),X(v,{code:C.not_finite,message:H.message}),P.dirty()):N.assertNever(H);return{status:P.value,value:y.data}}gte(y,v){return this.setLimit("min",y,!0,K.toString(v))}gt(y,v){return this.setLimit("min",y,!1,K.toString(v))}lte(y,v){return this.setLimit("max",y,!0,K.toString(v))}lt(y,v){return this.setLimit("max",y,!1,K.toString(v))}setLimit(y,v,P,H){return new cs({...this._def,checks:[...this._def.checks,{kind:y,value:v,inclusive:P,message:K.toString(H)}]})}_addCheck(y){return new cs({...this._def,checks:[...this._def.checks,y]})}int(y){return this._addCheck({kind:"int",message:K.toString(y)})}positive(y){return this._addCheck({kind:"min",value:0,inclusive:!1,message:K.toString(y)})}negative(y){return this._addCheck({kind:"max",value:0,inclusive:!1,message:K.toString(y)})}nonpositive(y){return this._addCheck({kind:"max",value:0,inclusive:!0,message:K.toString(y)})}nonnegative(y){return this._addCheck({kind:"min",value:0,inclusive:!0,message:K.toString(y)})}multipleOf(y,v){return this._addCheck({kind:"multipleOf",value:y,message:K.toString(v)})}finite(y){return this._addCheck({kind:"finite",message:K.toString(y)})}safe(y){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:K.toString(y)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:K.toString(y)})}get minValue(){let y=null;for(const v of this._def.checks)v.kind==="min"&&(y===null||v.value>y)&&(y=v.value);return y}get maxValue(){let y=null;for(const v of this._def.checks)v.kind==="max"&&(y===null||v.value<y)&&(y=v.value);return y}get isInt(){return!!this._def.checks.find(y=>y.kind==="int"||y.kind==="multipleOf"&&N.isInteger(y.value))}get isFinite(){let y=null,v=null;for(const P of this._def.checks){if(P.kind==="finite"||P.kind==="int"||P.kind==="multipleOf")return!0;P.kind==="min"?(v===null||P.value>v)&&(v=P.value):P.kind==="max"&&(y===null||P.value<y)&&(y=P.value)}return Number.isFinite(v)&&Number.isFinite(y)}}cs.create=D=>new cs({checks:[],typeName:rt.ZodNumber,coerce:D?.coerce||!1,...de(D)});class Cr extends he{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(y){if(this._def.coerce&&(y.data=BigInt(y.data)),this._getType(y)!==O.bigint){const H=this._getOrReturnCtx(y);return X(H,{code:C.invalid_type,expected:O.bigint,received:H.parsedType}),J}let v;const P=new ie;for(const H of this._def.checks)H.kind==="min"?(H.inclusive?y.data<H.value:y.data<=H.value)&&(v=this._getOrReturnCtx(y,v),X(v,{code:C.too_small,type:"bigint",minimum:H.value,inclusive:H.inclusive,message:H.message}),P.dirty()):H.kind==="max"?(H.inclusive?y.data>H.value:y.data>=H.value)&&(v=this._getOrReturnCtx(y,v),X(v,{code:C.too_big,type:"bigint",maximum:H.value,inclusive:H.inclusive,message:H.message}),P.dirty()):H.kind==="multipleOf"?y.data%H.value!==BigInt(0)&&(v=this._getOrReturnCtx(y,v),X(v,{code:C.not_multiple_of,multipleOf:H.value,message:H.message}),P.dirty()):N.assertNever(H);return{status:P.value,value:y.data}}gte(y,v){return this.setLimit("min",y,!0,K.toString(v))}gt(y,v){return this.setLimit("min",y,!1,K.toString(v))}lte(y,v){return this.setLimit("max",y,!0,K.toString(v))}lt(y,v){return this.setLimit("max",y,!1,K.toString(v))}setLimit(y,v,P,H){return new Cr({...this._def,checks:[...this._def.checks,{kind:y,value:v,inclusive:P,message:K.toString(H)}]})}_addCheck(y){return new Cr({...this._def,checks:[...this._def.checks,y]})}positive(y){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:K.toString(y)})}negative(y){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:K.toString(y)})}nonpositive(y){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:K.toString(y)})}nonnegative(y){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:K.toString(y)})}multipleOf(y,v){return this._addCheck({kind:"multipleOf",value:y,message:K.toString(v)})}get minValue(){let y=null;for(const v of this._def.checks)v.kind==="min"&&(y===null||v.value>y)&&(y=v.value);return y}get maxValue(){let y=null;for(const v of this._def.checks)v.kind==="max"&&(y===null||v.value<y)&&(y=v.value);return y}}Cr.create=D=>{var y;return new Cr({checks:[],typeName:rt.ZodBigInt,coerce:(y=D?.coerce)!==null&&y!==void 0?y:!1,...de(D)})};class Ka extends he{_parse(y){if(this._def.coerce&&(y.data=!!y.data),this._getType(y)!==O.boolean){const v=this._getOrReturnCtx(y);return X(v,{code:C.invalid_type,expected:O.boolean,received:v.parsedType}),J}return ne(y.data)}}Ka.create=D=>new Ka({typeName:rt.ZodBoolean,coerce:D?.coerce||!1,...de(D)});class Ns extends he{_parse(y){if(this._def.coerce&&(y.data=new Date(y.data)),this._getType(y)!==O.date){const H=this._getOrReturnCtx(y);return X(H,{code:C.invalid_type,expected:O.date,received:H.parsedType}),J}if(isNaN(y.data.getTime())){const H=this._getOrReturnCtx(y);return X(H,{code:C.invalid_date}),J}const v=new ie;let P;for(const H of this._def.checks)H.kind==="min"?y.data.getTime()<H.value&&(P=this._getOrReturnCtx(y,P),X(P,{code:C.too_small,message:H.message,inclusive:!0,exact:!1,minimum:H.value,type:"date"}),v.dirty()):H.kind==="max"?y.data.getTime()>H.value&&(P=this._getOrReturnCtx(y,P),X(P,{code:C.too_big,message:H.message,inclusive:!0,exact:!1,maximum:H.value,type:"date"}),v.dirty()):N.assertNever(H);return{status:v.value,value:new Date(y.data.getTime())}}_addCheck(y){return new Ns({...this._def,checks:[...this._def.checks,y]})}min(y,v){return this._addCheck({kind:"min",value:y.getTime(),message:K.toString(v)})}max(y,v){return this._addCheck({kind:"max",value:y.getTime(),message:K.toString(v)})}get minDate(){let y=null;for(const v of this._def.checks)v.kind==="min"&&(y===null||v.value>y)&&(y=v.value);return y!=null?new Date(y):null}get maxDate(){let y=null;for(const v of this._def.checks)v.kind==="max"&&(y===null||v.value<y)&&(y=v.value);return y!=null?new Date(y):null}}Ns.create=D=>new Ns({checks:[],coerce:D?.coerce||!1,typeName:rt.ZodDate,...de(D)});class Ir extends he{_parse(y){if(this._getType(y)!==O.symbol){const v=this._getOrReturnCtx(y);return X(v,{code:C.invalid_type,expected:O.symbol,received:v.parsedType}),J}return ne(y.data)}}Ir.create=D=>new Ir({typeName:rt.ZodSymbol,...de(D)});class us extends he{_parse(y){if(this._getType(y)!==O.undefined){const v=this._getOrReturnCtx(y);return X(v,{code:C.invalid_type,expected:O.undefined,received:v.parsedType}),J}return ne(y.data)}}us.create=D=>new us({typeName:rt.ZodUndefined,...de(D)});class Vn extends he{_parse(y){if(this._getType(y)!==O.null){const v=this._getOrReturnCtx(y);return X(v,{code:C.invalid_type,expected:O.null,received:v.parsedType}),J}return ne(y.data)}}Vn.create=D=>new Vn({typeName:rt.ZodNull,...de(D)});class ls extends he{constructor(){super(...arguments),this._any=!0}_parse(y){return ne(y.data)}}ls.create=D=>new ls({typeName:rt.ZodAny,...de(D)});class Or extends he{constructor(){super(...arguments),this._unknown=!0}_parse(y){return ne(y.data)}}Or.create=D=>new Or({typeName:rt.ZodUnknown,...de(D)});class an extends he{_parse(y){const v=this._getOrReturnCtx(y);return X(v,{code:C.invalid_type,expected:O.never,received:v.parsedType}),J}}an.create=D=>new an({typeName:rt.ZodNever,...de(D)});class Zi extends he{_parse(y){if(this._getType(y)!==O.undefined){const v=this._getOrReturnCtx(y);return X(v,{code:C.invalid_type,expected:O.void,received:v.parsedType}),J}return ne(y.data)}}Zi.create=D=>new Zi({typeName:rt.ZodVoid,...de(D)});class V extends he{_parse(y){const{ctx:v,status:P}=this._processInputParams(y),H=this._def;if(v.parsedType!==O.array)return X(v,{code:C.invalid_type,expected:O.array,received:v.parsedType}),J;if(H.exactLength!==null){const ve=v.data.length>H.exactLength.value,we=v.data.length<H.exactLength.value;(ve||we)&&(X(v,{code:ve?C.too_big:C.too_small,minimum:we?H.exactLength.value:void 0,maximum:ve?H.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:H.exactLength.message}),P.dirty())}if(H.minLength!==null&&v.data.length<H.minLength.value&&(X(v,{code:C.too_small,minimum:H.minLength.value,type:"array",inclusive:!0,exact:!1,message:H.minLength.message}),P.dirty()),H.maxLength!==null&&v.data.length>H.maxLength.value&&(X(v,{code:C.too_big,maximum:H.maxLength.value,type:"array",inclusive:!0,exact:!1,message:H.maxLength.message}),P.dirty()),v.common.async)return Promise.all([...v.data].map((ve,we)=>H.type._parseAsync(new Ce(v,ve,v.path,we)))).then(ve=>ie.mergeArray(P,ve));const xe=[...v.data].map((ve,we)=>H.type._parseSync(new Ce(v,ve,v.path,we)));return ie.mergeArray(P,xe)}get element(){return this._def.type}min(y,v){return new V({...this._def,minLength:{value:y,message:K.toString(v)}})}max(y,v){return new V({...this._def,maxLength:{value:y,message:K.toString(v)}})}length(y,v){return new V({...this._def,exactLength:{value:y,message:K.toString(v)}})}nonempty(y){return this.min(1,y)}}V.create=(D,y)=>new V({type:D,minLength:null,maxLength:null,exactLength:null,typeName:rt.ZodArray,...de(y)});function w(D){if(D instanceof E){const y={};for(const v in D.shape){const P=D.shape[v];y[v]=qn.create(w(P))}return new E({...D._def,shape:()=>y})}else return D instanceof V?new V({...D._def,type:w(D.element)}):D instanceof qn?qn.create(w(D.unwrap())):D instanceof Bs?Bs.create(w(D.unwrap())):D instanceof xt?xt.create(D.items.map(y=>w(y))):D}class E extends he{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const y=this._def.shape(),v=N.objectKeys(y);return this._cached={shape:y,keys:v}}_parse(y){if(this._getType(y)!==O.object){const Fe=this._getOrReturnCtx(y);return X(Fe,{code:C.invalid_type,expected:O.object,received:Fe.parsedType}),J}const{status:v,ctx:P}=this._processInputParams(y),{shape:H,keys:xe}=this._getCached(),ve=[];if(!(this._def.catchall instanceof an&&this._def.unknownKeys==="strip"))for(const Fe in P.data)xe.includes(Fe)||ve.push(Fe);const we=[];for(const Fe of xe){const Xe=H[Fe],Zt=P.data[Fe];we.push({key:{status:"valid",value:Fe},value:Xe._parse(new Ce(P,Zt,P.path,Fe)),alwaysSet:Fe in P.data})}if(this._def.catchall instanceof an){const Fe=this._def.unknownKeys;if(Fe==="passthrough")for(const Xe of ve)we.push({key:{status:"valid",value:Xe},value:{status:"valid",value:P.data[Xe]}});else if(Fe==="strict")ve.length>0&&(X(P,{code:C.unrecognized_keys,keys:ve}),v.dirty());else if(Fe!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const Fe=this._def.catchall;for(const Xe of ve){const Zt=P.data[Xe];we.push({key:{status:"valid",value:Xe},value:Fe._parse(new Ce(P,Zt,P.path,Xe)),alwaysSet:Xe in P.data})}}return P.common.async?Promise.resolve().then(async()=>{const Fe=[];for(const Xe of we){const Zt=await Xe.key,Gr=await Xe.value;Fe.push({key:Zt,value:Gr,alwaysSet:Xe.alwaysSet})}return Fe}).then(Fe=>ie.mergeObjectSync(v,Fe)):ie.mergeObjectSync(v,we)}get shape(){return this._def.shape()}strict(y){return K.errToObj,new E({...this._def,unknownKeys:"strict",...y!==void 0?{errorMap:(v,P)=>{var H,xe,ve,we;const Fe=(ve=(xe=(H=this._def).errorMap)===null||xe===void 0?void 0:xe.call(H,v,P).message)!==null&&ve!==void 0?ve:P.defaultError;return v.code==="unrecognized_keys"?{message:(we=K.errToObj(y).message)!==null&&we!==void 0?we:Fe}:{message:Fe}}}:{}})}strip(){return new E({...this._def,unknownKeys:"strip"})}passthrough(){return new E({...this._def,unknownKeys:"passthrough"})}extend(y){return new E({...this._def,shape:()=>({...this._def.shape(),...y})})}merge(y){return new E({unknownKeys:y._def.unknownKeys,catchall:y._def.catchall,shape:()=>({...this._def.shape(),...y._def.shape()}),typeName:rt.ZodObject})}setKey(y,v){return this.augment({[y]:v})}catchall(y){return new E({...this._def,catchall:y})}pick(y){const v={};return N.objectKeys(y).forEach(P=>{y[P]&&this.shape[P]&&(v[P]=this.shape[P])}),new E({...this._def,shape:()=>v})}omit(y){const v={};return N.objectKeys(this.shape).forEach(P=>{y[P]||(v[P]=this.shape[P])}),new E({...this._def,shape:()=>v})}deepPartial(){return w(this)}partial(y){const v={};return N.objectKeys(this.shape).forEach(P=>{const H=this.shape[P];y&&!y[P]?v[P]=H:v[P]=H.optional()}),new E({...this._def,shape:()=>v})}required(y){const v={};return N.objectKeys(this.shape).forEach(P=>{if(y&&!y[P])v[P]=this.shape[P];else{let H=this.shape[P];for(;H instanceof qn;)H=H._def.innerType;v[P]=H}}),new E({...this._def,shape:()=>v})}keyof(){return du(N.objectKeys(this.shape))}}E.create=(D,y)=>new E({shape:()=>D,unknownKeys:"strip",catchall:an.create(),typeName:rt.ZodObject,...de(y)}),E.strictCreate=(D,y)=>new E({shape:()=>D,unknownKeys:"strict",catchall:an.create(),typeName:rt.ZodObject,...de(y)}),E.lazycreate=(D,y)=>new E({shape:D,unknownKeys:"strip",catchall:an.create(),typeName:rt.ZodObject,...de(y)});class q extends he{_parse(y){const{ctx:v}=this._processInputParams(y),P=this._def.options;function H(xe){for(const we of xe)if(we.result.status==="valid")return we.result;for(const we of xe)if(we.result.status==="dirty")return v.common.issues.push(...we.ctx.common.issues),we.result;const ve=xe.map(we=>new S(we.ctx.common.issues));return X(v,{code:C.invalid_union,unionErrors:ve}),J}if(v.common.async)return Promise.all(P.map(async xe=>{const ve={...v,common:{...v.common,issues:[]},parent:null};return{result:await xe._parseAsync({data:v.data,path:v.path,parent:ve}),ctx:ve}})).then(H);{let xe;const ve=[];for(const Fe of P){const Xe={...v,common:{...v.common,issues:[]},parent:null},Zt=Fe._parseSync({data:v.data,path:v.path,parent:Xe});if(Zt.status==="valid")return Zt;Zt.status==="dirty"&&!xe&&(xe={result:Zt,ctx:Xe}),Xe.common.issues.length&&ve.push(Xe.common.issues)}if(xe)return v.common.issues.push(...xe.ctx.common.issues),xe.result;const we=ve.map(Fe=>new S(Fe));return X(v,{code:C.invalid_union,unionErrors:we}),J}}get options(){return this._def.options}}q.create=(D,y)=>new q({options:D,typeName:rt.ZodUnion,...de(y)});const ae=D=>D instanceof Wo?ae(D.schema):D instanceof Wr?ae(D.innerType()):D instanceof Rs?[D.value]:D instanceof ma?D.options:D instanceof qo?N.objectValues(D.enum):D instanceof Wa?ae(D._def.innerType):D instanceof us?[void 0]:D instanceof Vn?[null]:D instanceof qn?[void 0,...ae(D.unwrap())]:D instanceof Bs?[null,...ae(D.unwrap())]:D instanceof Yo||D instanceof Ga?ae(D.unwrap()):D instanceof Wi?ae(D._def.innerType):[];class fe extends he{_parse(y){const{ctx:v}=this._processInputParams(y);if(v.parsedType!==O.object)return X(v,{code:C.invalid_type,expected:O.object,received:v.parsedType}),J;const P=this.discriminator,H=v.data[P],xe=this.optionsMap.get(H);return xe?v.common.async?xe._parseAsync({data:v.data,path:v.path,parent:v}):xe._parseSync({data:v.data,path:v.path,parent:v}):(X(v,{code:C.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[P]}),J)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(y,v,P){const H=new Map;for(const xe of v){const ve=ae(xe.shape[y]);if(!ve.length)throw new Error(`A discriminator value for key \`${y}\` could not be extracted from all schema options`);for(const we of ve){if(H.has(we))throw new Error(`Discriminator property ${String(y)} has duplicate value ${String(we)}`);H.set(we,xe)}}return new fe({typeName:rt.ZodDiscriminatedUnion,discriminator:y,options:v,optionsMap:H,...de(P)})}}function Ae(D,y){const v=$(D),P=$(y);if(D===y)return{valid:!0,data:D};if(v===O.object&&P===O.object){const H=N.objectKeys(y),xe=N.objectKeys(D).filter(we=>H.indexOf(we)!==-1),ve={...D,...y};for(const we of xe){const Fe=Ae(D[we],y[we]);if(!Fe.valid)return{valid:!1};ve[we]=Fe.data}return{valid:!0,data:ve}}else if(v===O.array&&P===O.array){if(D.length!==y.length)return{valid:!1};const H=[];for(let xe=0;xe<D.length;xe++){const ve=D[xe],we=y[xe],Fe=Ae(ve,we);if(!Fe.valid)return{valid:!1};H.push(Fe.data)}return{valid:!0,data:H}}else return v===O.date&&P===O.date&&+D==+y?{valid:!0,data:D}:{valid:!1}}class st extends he{_parse(y){const{status:v,ctx:P}=this._processInputParams(y),H=(xe,ve)=>{if(be(xe)||be(ve))return J;const we=Ae(xe.value,ve.value);return we.valid?((ke(xe)||ke(ve))&&v.dirty(),{status:v.value,value:we.data}):(X(P,{code:C.invalid_intersection_types}),J)};return P.common.async?Promise.all([this._def.left._parseAsync({data:P.data,path:P.path,parent:P}),this._def.right._parseAsync({data:P.data,path:P.path,parent:P})]).then(([xe,ve])=>H(xe,ve)):H(this._def.left._parseSync({data:P.data,path:P.path,parent:P}),this._def.right._parseSync({data:P.data,path:P.path,parent:P}))}}st.create=(D,y,v)=>new st({left:D,right:y,typeName:rt.ZodIntersection,...de(v)});class xt extends he{_parse(y){const{status:v,ctx:P}=this._processInputParams(y);if(P.parsedType!==O.array)return X(P,{code:C.invalid_type,expected:O.array,received:P.parsedType}),J;if(P.data.length<this._def.items.length)return X(P,{code:C.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),J;!this._def.rest&&P.data.length>this._def.items.length&&(X(P,{code:C.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v.dirty());const H=[...P.data].map((xe,ve)=>{const we=this._def.items[ve]||this._def.rest;return we?we._parse(new Ce(P,xe,P.path,ve)):null}).filter(xe=>!!xe);return P.common.async?Promise.all(H).then(xe=>ie.mergeArray(v,xe)):ie.mergeArray(v,H)}get items(){return this._def.items}rest(y){return new xt({...this._def,rest:y})}}xt.create=(D,y)=>{if(!Array.isArray(D))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xt({items:D,typeName:rt.ZodTuple,rest:null,...de(y)})};class Bt extends he{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(y){const{status:v,ctx:P}=this._processInputParams(y);if(P.parsedType!==O.object)return X(P,{code:C.invalid_type,expected:O.object,received:P.parsedType}),J;const H=[],xe=this._def.keyType,ve=this._def.valueType;for(const we in P.data)H.push({key:xe._parse(new Ce(P,we,P.path,we)),value:ve._parse(new Ce(P,P.data[we],P.path,we)),alwaysSet:we in P.data});return P.common.async?ie.mergeObjectAsync(v,H):ie.mergeObjectSync(v,H)}get element(){return this._def.valueType}static create(y,v,P){return v instanceof he?new Bt({keyType:y,valueType:v,typeName:rt.ZodRecord,...de(P)}):new Bt({keyType:An.create(),valueType:y,typeName:rt.ZodRecord,...de(v)})}}class jt extends he{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(y){const{status:v,ctx:P}=this._processInputParams(y);if(P.parsedType!==O.map)return X(P,{code:C.invalid_type,expected:O.map,received:P.parsedType}),J;const H=this._def.keyType,xe=this._def.valueType,ve=[...P.data.entries()].map(([we,Fe],Xe)=>({key:H._parse(new Ce(P,we,P.path,[Xe,"key"])),value:xe._parse(new Ce(P,Fe,P.path,[Xe,"value"]))}));if(P.common.async){const we=new Map;return Promise.resolve().then(async()=>{for(const Fe of ve){const Xe=await Fe.key,Zt=await Fe.value;if(Xe.status==="aborted"||Zt.status==="aborted")return J;(Xe.status==="dirty"||Zt.status==="dirty")&&v.dirty(),we.set(Xe.value,Zt.value)}return{status:v.value,value:we}})}else{const we=new Map;for(const Fe of ve){const Xe=Fe.key,Zt=Fe.value;if(Xe.status==="aborted"||Zt.status==="aborted")return J;(Xe.status==="dirty"||Zt.status==="dirty")&&v.dirty(),we.set(Xe.value,Zt.value)}return{status:v.value,value:we}}}}jt.create=(D,y,v)=>new jt({valueType:y,keyType:D,typeName:rt.ZodMap,...de(v)});class At extends he{_parse(y){const{status:v,ctx:P}=this._processInputParams(y);if(P.parsedType!==O.set)return X(P,{code:C.invalid_type,expected:O.set,received:P.parsedType}),J;const H=this._def;H.minSize!==null&&P.data.size<H.minSize.value&&(X(P,{code:C.too_small,minimum:H.minSize.value,type:"set",inclusive:!0,exact:!1,message:H.minSize.message}),v.dirty()),H.maxSize!==null&&P.data.size>H.maxSize.value&&(X(P,{code:C.too_big,maximum:H.maxSize.value,type:"set",inclusive:!0,exact:!1,message:H.maxSize.message}),v.dirty());const xe=this._def.valueType;function ve(Fe){const Xe=new Set;for(const Zt of Fe){if(Zt.status==="aborted")return J;Zt.status==="dirty"&&v.dirty(),Xe.add(Zt.value)}return{status:v.value,value:Xe}}const we=[...P.data.values()].map((Fe,Xe)=>xe._parse(new Ce(P,Fe,P.path,Xe)));return P.common.async?Promise.all(we).then(Fe=>ve(Fe)):ve(we)}min(y,v){return new At({...this._def,minSize:{value:y,message:K.toString(v)}})}max(y,v){return new At({...this._def,maxSize:{value:y,message:K.toString(v)}})}size(y,v){return this.min(y,v).max(y,v)}nonempty(y){return this.min(1,y)}}At.create=(D,y)=>new At({valueType:D,minSize:null,maxSize:null,typeName:rt.ZodSet,...de(y)});class zi extends he{constructor(){super(...arguments),this.validate=this.implement}_parse(y){const{ctx:v}=this._processInputParams(y);if(v.parsedType!==O.function)return X(v,{code:C.invalid_type,expected:O.function,received:v.parsedType}),J;function P(we,Fe){return se({data:we,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,ue(),F].filter(Xe=>!!Xe),issueData:{code:C.invalid_arguments,argumentsError:Fe}})}function H(we,Fe){return se({data:we,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,ue(),F].filter(Xe=>!!Xe),issueData:{code:C.invalid_return_type,returnTypeError:Fe}})}const xe={errorMap:v.common.contextualErrorMap},ve=v.data;if(this._def.returns instanceof Ki){const we=this;return ne(async function(...Fe){const Xe=new S([]),Zt=await we._def.args.parseAsync(Fe,xe).catch(ei=>{throw Xe.addIssue(P(Fe,ei)),Xe}),Gr=await Reflect.apply(ve,this,Zt);return await we._def.returns._def.type.parseAsync(Gr,xe).catch(ei=>{throw Xe.addIssue(H(Gr,ei)),Xe})})}else{const we=this;return ne(function(...Fe){const Xe=we._def.args.safeParse(Fe,xe);if(!Xe.success)throw new S([P(Fe,Xe.error)]);const Zt=Reflect.apply(ve,this,Xe.data),Gr=we._def.returns.safeParse(Zt,xe);if(!Gr.success)throw new S([H(Zt,Gr.error)]);return Gr.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...y){return new zi({...this._def,args:xt.create(y).rest(Or.create())})}returns(y){return new zi({...this._def,returns:y})}implement(y){return this.parse(y)}strictImplement(y){return this.parse(y)}static create(y,v,P){return new zi({args:y||xt.create([]).rest(Or.create()),returns:v||Or.create(),typeName:rt.ZodFunction,...de(P)})}}class Wo extends he{get schema(){return this._def.getter()}_parse(y){const{ctx:v}=this._processInputParams(y);return this._def.getter()._parse({data:v.data,path:v.path,parent:v})}}Wo.create=(D,y)=>new Wo({getter:D,typeName:rt.ZodLazy,...de(y)});class Rs extends he{_parse(y){if(y.data!==this._def.value){const v=this._getOrReturnCtx(y);return X(v,{received:v.data,code:C.invalid_literal,expected:this._def.value}),J}return{status:"valid",value:y.data}}get value(){return this._def.value}}Rs.create=(D,y)=>new Rs({value:D,typeName:rt.ZodLiteral,...de(y)});function du(D,y){return new ma({values:D,typeName:rt.ZodEnum,...de(y)})}class ma extends he{constructor(){super(...arguments),Te.set(this,void 0)}_parse(y){if(typeof y.data!="string"){const v=this._getOrReturnCtx(y),P=this._def.values;return X(v,{expected:N.joinValues(P),received:v.parsedType,code:C.invalid_type}),J}if(Ye(this,Te)||et(this,Te,new Set(this._def.values)),!Ye(this,Te).has(y.data)){const v=this._getOrReturnCtx(y),P=this._def.values;return X(v,{received:v.data,code:C.invalid_enum_value,options:P}),J}return ne(y.data)}get options(){return this._def.values}get enum(){const y={};for(const v of this._def.values)y[v]=v;return y}get Values(){const y={};for(const v of this._def.values)y[v]=v;return y}get Enum(){const y={};for(const v of this._def.values)y[v]=v;return y}extract(y,v=this._def){return ma.create(y,{...this._def,...v})}exclude(y,v=this._def){return ma.create(this.options.filter(P=>!y.includes(P)),{...this._def,...v})}}Te=new WeakMap,ma.create=du;class qo extends he{constructor(){super(...arguments),Pe.set(this,void 0)}_parse(y){const v=N.getValidEnumValues(this._def.values),P=this._getOrReturnCtx(y);if(P.parsedType!==O.string&&P.parsedType!==O.number){const H=N.objectValues(v);return X(P,{expected:N.joinValues(H),received:P.parsedType,code:C.invalid_type}),J}if(Ye(this,Pe)||et(this,Pe,new Set(N.getValidEnumValues(this._def.values))),!Ye(this,Pe).has(y.data)){const H=N.objectValues(v);return X(P,{received:P.data,code:C.invalid_enum_value,options:H}),J}return ne(y.data)}get enum(){return this._def.values}}Pe=new WeakMap,qo.create=(D,y)=>new qo({values:D,typeName:rt.ZodNativeEnum,...de(y)});class Ki extends he{unwrap(){return this._def.type}_parse(y){const{ctx:v}=this._processInputParams(y);if(v.parsedType!==O.promise&&v.common.async===!1)return X(v,{code:C.invalid_type,expected:O.promise,received:v.parsedType}),J;const P=v.parsedType===O.promise?v.data:Promise.resolve(v.data);return ne(P.then(H=>this._def.type.parseAsync(H,{path:v.path,errorMap:v.common.contextualErrorMap})))}}Ki.create=(D,y)=>new Ki({type:D,typeName:rt.ZodPromise,...de(y)});class Wr extends he{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(y){const{status:v,ctx:P}=this._processInputParams(y),H=this._def.effect||null,xe={addIssue:ve=>{X(P,ve),ve.fatal?v.abort():v.dirty()},get path(){return P.path}};if(xe.addIssue=xe.addIssue.bind(xe),H.type==="preprocess"){const ve=H.transform(P.data,xe);if(P.common.async)return Promise.resolve(ve).then(async we=>{if(v.value==="aborted")return J;const Fe=await this._def.schema._parseAsync({data:we,path:P.path,parent:P});return Fe.status==="aborted"?J:Fe.status==="dirty"||v.value==="dirty"?te(Fe.value):Fe});{if(v.value==="aborted")return J;const we=this._def.schema._parseSync({data:ve,path:P.path,parent:P});return we.status==="aborted"?J:we.status==="dirty"||v.value==="dirty"?te(we.value):we}}if(H.type==="refinement"){const ve=we=>{const Fe=H.refinement(we,xe);if(P.common.async)return Promise.resolve(Fe);if(Fe instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return we};if(P.common.async===!1){const we=this._def.schema._parseSync({data:P.data,path:P.path,parent:P});return we.status==="aborted"?J:(we.status==="dirty"&&v.dirty(),ve(we.value),{status:v.value,value:we.value})}else return this._def.schema._parseAsync({data:P.data,path:P.path,parent:P}).then(we=>we.status==="aborted"?J:(we.status==="dirty"&&v.dirty(),ve(we.value).then(()=>({status:v.value,value:we.value}))))}if(H.type==="transform")if(P.common.async===!1){const ve=this._def.schema._parseSync({data:P.data,path:P.path,parent:P});if(!Oe(ve))return ve;const we=H.transform(ve.value,xe);if(we instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:v.value,value:we}}else return this._def.schema._parseAsync({data:P.data,path:P.path,parent:P}).then(ve=>Oe(ve)?Promise.resolve(H.transform(ve.value,xe)).then(we=>({status:v.value,value:we})):ve);N.assertNever(H)}}Wr.create=(D,y,v)=>new Wr({schema:D,typeName:rt.ZodEffects,effect:y,...de(v)}),Wr.createWithPreprocess=(D,y,v)=>new Wr({schema:y,effect:{type:"preprocess",transform:D},typeName:rt.ZodEffects,...de(v)});class qn extends he{_parse(y){return this._getType(y)===O.undefined?ne(void 0):this._def.innerType._parse(y)}unwrap(){return this._def.innerType}}qn.create=(D,y)=>new qn({innerType:D,typeName:rt.ZodOptional,...de(y)});class Bs extends he{_parse(y){return this._getType(y)===O.null?ne(null):this._def.innerType._parse(y)}unwrap(){return this._def.innerType}}Bs.create=(D,y)=>new Bs({innerType:D,typeName:rt.ZodNullable,...de(y)});class Wa extends he{_parse(y){const{ctx:v}=this._processInputParams(y);let P=v.data;return v.parsedType===O.undefined&&(P=this._def.defaultValue()),this._def.innerType._parse({data:P,path:v.path,parent:v})}removeDefault(){return this._def.innerType}}Wa.create=(D,y)=>new Wa({innerType:D,typeName:rt.ZodDefault,defaultValue:typeof y.default=="function"?y.default:()=>y.default,...de(y)});class Wi extends he{_parse(y){const{ctx:v}=this._processInputParams(y),P={...v,common:{...v.common,issues:[]}},H=this._def.innerType._parse({data:P.data,path:P.path,parent:{...P}});return We(H)?H.then(xe=>({status:"valid",value:xe.status==="valid"?xe.value:this._def.catchValue({get error(){return new S(P.common.issues)},input:P.data})})):{status:"valid",value:H.status==="valid"?H.value:this._def.catchValue({get error(){return new S(P.common.issues)},input:P.data})}}removeCatch(){return this._def.innerType}}Wi.create=(D,y)=>new Wi({innerType:D,typeName:rt.ZodCatch,catchValue:typeof y.catch=="function"?y.catch:()=>y.catch,...de(y)});class Go extends he{_parse(y){if(this._getType(y)!==O.nan){const v=this._getOrReturnCtx(y);return X(v,{code:C.invalid_type,expected:O.nan,received:v.parsedType}),J}return{status:"valid",value:y.data}}}Go.create=D=>new Go({typeName:rt.ZodNaN,...de(D)});const qa=Symbol("zod_brand");class Yo extends he{_parse(y){const{ctx:v}=this._processInputParams(y),P=v.data;return this._def.type._parse({data:P,path:v.path,parent:v})}unwrap(){return this._def.type}}class Xo extends he{_parse(y){const{status:v,ctx:P}=this._processInputParams(y);if(P.common.async)return(async()=>{const H=await this._def.in._parseAsync({data:P.data,path:P.path,parent:P});return H.status==="aborted"?J:H.status==="dirty"?(v.dirty(),te(H.value)):this._def.out._parseAsync({data:H.value,path:P.path,parent:P})})();{const H=this._def.in._parseSync({data:P.data,path:P.path,parent:P});return H.status==="aborted"?J:H.status==="dirty"?(v.dirty(),{status:"dirty",value:H.value}):this._def.out._parseSync({data:H.value,path:P.path,parent:P})}}static create(y,v){return new Xo({in:y,out:v,typeName:rt.ZodPipeline})}}class Ga extends he{_parse(y){const v=this._def.innerType._parse(y),P=H=>(Oe(H)&&(H.value=Object.freeze(H.value)),H);return We(v)?v.then(H=>P(H)):P(v)}unwrap(){return this._def.innerType}}Ga.create=(D,y)=>new Ga({innerType:D,typeName:rt.ZodReadonly,...de(y)});function Zd(D,y={},v){return D?ls.create().superRefine((P,H)=>{var xe,ve;if(!D(P)){const we=typeof y=="function"?y(P):typeof y=="string"?{message:y}:y,Fe=(ve=(xe=we.fatal)!==null&&xe!==void 0?xe:v)!==null&&ve!==void 0?ve:!0,Xe=typeof we=="string"?{message:we}:we;H.addIssue({code:"custom",...Xe,fatal:Fe})}}):ls.create()}const Lp={object:E.lazycreate};var rt;(function(D){D.ZodString="ZodString",D.ZodNumber="ZodNumber",D.ZodNaN="ZodNaN",D.ZodBigInt="ZodBigInt",D.ZodBoolean="ZodBoolean",D.ZodDate="ZodDate",D.ZodSymbol="ZodSymbol",D.ZodUndefined="ZodUndefined",D.ZodNull="ZodNull",D.ZodAny="ZodAny",D.ZodUnknown="ZodUnknown",D.ZodNever="ZodNever",D.ZodVoid="ZodVoid",D.ZodArray="ZodArray",D.ZodObject="ZodObject",D.ZodUnion="ZodUnion",D.ZodDiscriminatedUnion="ZodDiscriminatedUnion",D.ZodIntersection="ZodIntersection",D.ZodTuple="ZodTuple",D.ZodRecord="ZodRecord",D.ZodMap="ZodMap",D.ZodSet="ZodSet",D.ZodFunction="ZodFunction",D.ZodLazy="ZodLazy",D.ZodLiteral="ZodLiteral",D.ZodEnum="ZodEnum",D.ZodEffects="ZodEffects",D.ZodNativeEnum="ZodNativeEnum",D.ZodOptional="ZodOptional",D.ZodNullable="ZodNullable",D.ZodDefault="ZodDefault",D.ZodCatch="ZodCatch",D.ZodPromise="ZodPromise",D.ZodBranded="ZodBranded",D.ZodPipeline="ZodPipeline",D.ZodReadonly="ZodReadonly"})(rt||(rt={}));const Up=(D,y={message:`Input not instance of ${D.name}`})=>Zd(v=>v instanceof D,y),fu=An.create,zd=cs.create,Ab=Go.create,Mp=Cr.create,hu=Ka.create,Vp=Ns.create,pu=Ir.create,Fp=us.create,Hp=Vn.create,Jo=ls.create,$p=Or.create,Qo=an.create,ec=Zi.create,jp=V.create,Zp=E.create,gu=E.strictCreate,Kd=q.create,zp=fe.create,Kp=st.create,Wp=xt.create,Wd=Bt.create,qp=jt.create,qd=At.create,Gp=zi.create,Yp=Wo.create,Xp=Rs.create,Jp=ma.create,mu=qo.create,Qp=Ki.create,_u=Wr.create,yu=qn.create,eg=Bs.create,bu=Wr.createWithPreprocess,tg=Xo.create;var Be=Object.freeze({__proto__:null,defaultErrorMap:F,setErrorMap:G,getErrorMap:ue,makeIssue:se,EMPTY_PATH:Y,addIssueToContext:X,ParseStatus:ie,INVALID:J,DIRTY:te,OK:ne,isAborted:be,isDirty:ke,isValid:Oe,isAsync:We,get util(){return N},get objectUtil(){return U},ZodParsedType:O,getParsedType:$,ZodType:he,datetimeRegex:za,ZodString:An,ZodNumber:cs,ZodBigInt:Cr,ZodBoolean:Ka,ZodDate:Ns,ZodSymbol:Ir,ZodUndefined:us,ZodNull:Vn,ZodAny:ls,ZodUnknown:Or,ZodNever:an,ZodVoid:Zi,ZodArray:V,ZodObject:E,ZodUnion:q,ZodDiscriminatedUnion:fe,ZodIntersection:st,ZodTuple:xt,ZodRecord:Bt,ZodMap:jt,ZodSet:At,ZodFunction:zi,ZodLazy:Wo,ZodLiteral:Rs,ZodEnum:ma,ZodNativeEnum:qo,ZodPromise:Ki,ZodEffects:Wr,ZodTransformer:Wr,ZodOptional:qn,ZodNullable:Bs,ZodDefault:Wa,ZodCatch:Wi,ZodNaN:Go,BRAND:qa,ZodBranded:Yo,ZodPipeline:Xo,ZodReadonly:Ga,custom:Zd,Schema:he,ZodSchema:he,late:Lp,get ZodFirstPartyTypeKind(){return rt},coerce:{string:D=>An.create({...D,coerce:!0}),number:D=>cs.create({...D,coerce:!0}),boolean:D=>Ka.create({...D,coerce:!0}),bigint:D=>Cr.create({...D,coerce:!0}),date:D=>Ns.create({...D,coerce:!0})},any:Jo,array:jp,bigint:Mp,boolean:hu,date:Vp,discriminatedUnion:zp,effect:_u,enum:Jp,function:Gp,instanceof:Up,intersection:Kp,lazy:Yp,literal:Xp,map:qp,nan:Ab,nativeEnum:mu,never:Qo,null:Hp,nullable:eg,number:zd,object:Zp,oboolean:()=>hu().optional(),onumber:()=>zd().optional(),optional:yu,ostring:()=>fu().optional(),pipeline:tg,preprocess:bu,promise:Qp,record:Wd,set:qd,strictObject:gu,string:fu,symbol:pu,transformer:_u,tuple:Wp,undefined:Fp,union:Kd,unknown:$p,void:ec,NEVER:J,ZodIssueCode:C,quotelessJson:B,ZodError:S});const Gd=/^0x[0-9a-f]+$/i,Yd=/^\d+$/,wu=Be.string().min(1,"The short string cannot be empty").max(31,"The short string cannot exceed 31 characters").refine(D=>!Gd.test(D),"The shortString should not be a hex string").refine(D=>!Yd.test(D),"The shortString should not be an integer string"),mr=Be.union([Be.string().regex(Gd,"Only hex, integers and bigint are supported in calldata"),Be.string().regex(Yd,"Only hex, integers and bigint are supported in calldata"),wu,Be.number().int("Only hex, integers and bigint are supported in calldata"),Be.bigint()]),_a=Be.object({contractAddress:Be.string(),entrypoint:Be.string(),calldata:Be.array(mr.or(Be.array(mr))).optional()}),Ya=Be.array(_a).nonempty(),ng=Be.object({types:Be.record(Be.array(Be.union([Be.object({name:Be.string(),type:Be.literal("merkletree"),contains:Be.string()}),Be.object({name:Be.string(),type:Be.literal("enum"),contains:Be.string()}),Be.object({name:Be.string(),type:Be.string()})]))),primaryType:Be.string(),domain:Be.record(Be.unknown()),message:Be.record(Be.unknown())}),ds=Be.object({type:Be.literal("ERC20"),options:Be.object({address:Be.string(),symbol:Be.string().optional(),decimals:Be.number().optional(),image:Be.string().optional(),name:Be.string().optional()})}),Xa=Be.union([Be.object({id:Be.string(),chain_id:Be.string(),chain_name:Be.string(),rpc_urls:Be.array(Be.string()).optional(),native_currency:ds.optional(),block_explorer_url:Be.array(Be.string()).optional()}),Be.object({id:Be.string(),chainId:Be.string(),chainName:Be.string(),rpcUrls:Be.array(Be.string()).optional(),nativeCurrency:ds.optional(),blockExplorerUrl:Be.array(Be.string()).optional()}).transform(D=>({id:D.id,chain_id:D.chainId,chain_name:D.chainName,rpc_urls:D.rpcUrls,native_currency:D.nativeCurrency,block_explorer_url:D.blockExplorerUrl}))]),Ja={enable:Be.tuple([Be.object({starknetVersion:Be.union([Be.literal("v3"),Be.literal("v4"),Be.literal("v5")]).optional()}).optional()]).or(Be.tuple([])),addStarknetChain:Be.tuple([Xa]),switchStarknetChain:Be.tuple([Be.object({chainId:Be.string()})]),watchAsset:Be.tuple([ds]),requestAccounts:Be.tuple([Be.object({silent_mode:Be.boolean().optional()})]),execute:Be.tuple([Ya.or(_a),Be.object({nonce:mr.optional(),maxFee:mr.optional(),version:mr.optional()}).optional()]),signMessage:Be.tuple([ng])},Nb={execute:Be.tuple([Ya.or(_a),Be.object({nonce:mr.optional(),maxFee:mr.optional(),version:mr.optional()}).optional()]).or(Be.tuple([Ya.or(_a),Be.array(Be.any()).optional(),Be.object({nonce:mr.optional(),maxFee:mr.optional(),version:mr.optional()}).optional()]))},qr=Be.object({contract_address:Be.string(),entry_point:Be.string(),calldata:Be.array(mr).optional()}).transform(({contract_address:D,entry_point:y,calldata:v})=>({contractAddress:D,entrypoint:y,calldata:v||[]})),Qa=Be.array(qr).nonempty(),tc={ZERO:0,ONE:1},Ds=Be.object({address:Be.string(),class_hash:Be.string(),salt:Be.string(),calldata:Be.array(Be.string()),sigdata:Be.array(Be.string()).optional(),version:Be.nativeEnum(tc)})},4261:(z,M,A)=>{"use strict";A.d(M,{A:()=>J});function R(){this.__data__=[],this.size=0}const N=R;var U=A(44336);function O(te,ne){for(var be=te.length;be--;)if((0,U.A)(te[be][0],ne))return be;return-1}const $=O;var C=Array.prototype,B=C.splice;function S(te){var ne=this.__data__,be=$(ne,te);if(be<0)return!1;var ke=ne.length-1;return be==ke?ne.pop():B.call(ne,be,1),--this.size,!0}const F=S;function j(te){var ne=this.__data__,be=$(ne,te);return be<0?void 0:ne[be][1]}const G=j;function ue(te){return $(this.__data__,te)>-1}const se=ue;function Y(te,ne){var be=this.__data__,ke=$(be,te);return ke<0?(++this.size,be.push([te,ne])):be[ke][1]=ne,this}const X=Y;function ie(te){var ne=-1,be=te==null?0:te.length;for(this.clear();++ne<be;){var ke=te[ne];this.set(ke[0],ke[1])}}ie.prototype.clear=N,ie.prototype.delete=F,ie.prototype.get=G,ie.prototype.has=se,ie.prototype.set=X;const J=ie},62615:(z,M,A)=>{"use strict";A.d(M,{A:()=>O});var R=A(9130),N=A(83077),U=(0,R.A)(N.A,"Map");const O=U},94794:(z,M,A)=>{"use strict";A.d(M,{A:()=>Jt});var R=A(9130),N=(0,R.A)(Object,"create");const U=N;function O(){this.__data__=U?U(null):{},this.size=0}const $=O;function C(lt){var mt=this.has(lt)&&delete this.__data__[lt];return this.size-=mt?1:0,mt}const B=C;var S="__lodash_hash_undefined__",F=Object.prototype,j=F.hasOwnProperty;function G(lt){var mt=this.__data__;if(U){var sn=mt[lt];return sn===S?void 0:sn}return j.call(mt,lt)?mt[lt]:void 0}const ue=G;var se=Object.prototype,Y=se.hasOwnProperty;function X(lt){var mt=this.__data__;return U?mt[lt]!==void 0:Y.call(mt,lt)}const ie=X;var J="__lodash_hash_undefined__";function te(lt,mt){var sn=this.__data__;return this.size+=this.has(lt)?0:1,sn[lt]=U&&mt===void 0?J:mt,this}const ne=te;function be(lt){var mt=-1,sn=lt==null?0:lt.length;for(this.clear();++mt<sn;){var Wn=lt[mt];this.set(Wn[0],Wn[1])}}be.prototype.clear=$,be.prototype.delete=B,be.prototype.get=ue,be.prototype.has=ie,be.prototype.set=ne;const ke=be;var Oe=A(4261),We=A(62615);function Ye(){this.size=0,this.__data__={hash:new ke,map:new(We.A||Oe.A),string:new ke}}const et=Ye;function K(lt){var mt=typeof lt;return mt=="string"||mt=="number"||mt=="symbol"||mt=="boolean"?lt!=="__proto__":lt===null}const Te=K;function Pe(lt,mt){var sn=lt.__data__;return Te(mt)?sn[typeof mt=="string"?"string":"hash"]:sn.map}const Ce=Pe;function Re(lt){var mt=Ce(this,lt).delete(lt);return this.size-=mt?1:0,mt}const de=Re;function he(lt){return Ce(this,lt).get(lt)}const He=he;function Je(lt){return Ce(this,lt).has(lt)}const $e=Je;function tt(lt,mt){var sn=Ce(this,lt),Wn=sn.size;return sn.set(lt,mt),this.size+=sn.size==Wn?0:1,this}const Tt=tt;function ut(lt){var mt=-1,sn=lt==null?0:lt.length;for(this.clear();++mt<sn;){var Wn=lt[mt];this.set(Wn[0],Wn[1])}}ut.prototype.clear=et,ut.prototype.delete=de,ut.prototype.get=He,ut.prototype.has=$e,ut.prototype.set=Tt;const Jt=ut},24633:(z,M,A)=>{"use strict";A.d(M,{A:()=>U});var R=A(83077),N=R.A.Symbol;const U=N},8801:(z,M,A)=>{"use strict";A.d(M,{A:()=>G});function R(ue,se){for(var Y=-1,X=Array(ue);++Y<ue;)X[Y]=se(Y);return X}const N=R;var U=A(80703),O=A(91689),$=A(83032),C=A(19329),B=A(52789),S=Object.prototype,F=S.hasOwnProperty;function j(ue,se){var Y=(0,O.A)(ue),X=!Y&&(0,U.A)(ue),ie=!Y&&!X&&(0,$.A)(ue),J=!Y&&!X&&!ie&&(0,B.A)(ue),te=Y||X||ie||J,ne=te?N(ue.length,String):[],be=ne.length;for(var ke in ue)(se||F.call(ue,ke))&&!(te&&(ke=="length"||ie&&(ke=="offset"||ke=="parent")||J&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||(0,C.A)(ke,be)))&&ne.push(ke);return ne}const G=j},30828:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});function R(U,O){for(var $=-1,C=U==null?0:U.length,B=Array(C);++$<C;)B[$]=O(U[$],$,U);return B}const N=R},84855:(z,M,A)=>{"use strict";A.d(M,{A:()=>ie});var R=A(24633),N=Object.prototype,U=N.hasOwnProperty,O=N.toString,$=R.A?R.A.toStringTag:void 0;function C(J){var te=U.call(J,$),ne=J[$];try{J[$]=void 0;var be=!0}catch{}var ke=O.call(J);return be&&(te?J[$]=ne:delete J[$]),ke}const B=C;var S=Object.prototype,F=S.toString;function j(J){return F.call(J)}const G=j;var ue="[object Null]",se="[object Undefined]",Y=R.A?R.A.toStringTag:void 0;function X(J){return J==null?J===void 0?se:ue:Y&&Y in Object(J)?B(J):G(J)}const ie=X},75101:(z,M,A)=>{"use strict";A.d(M,{A:()=>S});var R=A(23759),N=A(54327),U=(0,N.A)(Object.keys,Object);const O=U;var $=Object.prototype,C=$.hasOwnProperty;function B(F){if(!(0,R.A)(F))return O(F);var j=[];for(var G in Object(F))C.call(F,G)&&G!="constructor"&&j.push(G);return j}const S=B},34573:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});function R(U){return function(O){return U(O)}}const N=R},71428:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});function R(U,O){var $=-1,C=U.length;for(O||(O=Array(C));++$<C;)O[$]=U[$];return O}const N=R},42752:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});var R=typeof global=="object"&&global&&global.Object===Object&&global;const N=R},9130:(z,M,A)=>{"use strict";A.d(M,{A:()=>Oe});var R=A(96770),N=A(83077),U=N.A["__core-js_shared__"];const O=U;var $=function(){var We=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return We?"Symbol(src)_1."+We:""}();function C(We){return!!$&&$ in We}const B=C;var S=A(20997),F=A(51465),j=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,ue=Function.prototype,se=Object.prototype,Y=ue.toString,X=se.hasOwnProperty,ie=RegExp("^"+Y.call(X).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function J(We){if(!(0,S.A)(We)||B(We))return!1;var Ye=(0,R.A)(We)?ie:G;return Ye.test((0,F.A)(We))}const te=J;function ne(We,Ye){return We?.[Ye]}const be=ne;function ke(We,Ye){var et=be(We,Ye);return te(et)?et:void 0}const Oe=ke},19329:(z,M,A)=>{"use strict";A.d(M,{A:()=>O});var R=9007199254740991,N=/^(?:0|[1-9]\d*)$/;function U($,C){var B=typeof $;return C=C??R,!!C&&(B=="number"||B!="symbol"&&N.test($))&&$>-1&&$%1==0&&$<C}const O=U},23759:(z,M,A)=>{"use strict";A.d(M,{A:()=>U});var R=Object.prototype;function N(O){var $=O&&O.constructor,C=typeof $=="function"&&$.prototype||R;return O===C}const U=N},43985:(z,M,A)=>{"use strict";A.d(M,{A:()=>B});var R=A(42752),N=typeof $a=="object"&&$a&&!$a.nodeType&&$a,U=N&&typeof ja=="object"&&ja&&!ja.nodeType&&ja,O=U&&U.exports===N,$=O&&R.A.process,C=function(){try{var S=U&&U.require&&U.require("util").types;return S||$&&$.binding&&$.binding("util")}catch{}}();const B=C},54327:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});function R(U,O){return function($){return U(O($))}}const N=R},83077:(z,M,A)=>{"use strict";A.d(M,{A:()=>O});var R=A(42752),N=typeof self=="object"&&self&&self.Object===Object&&self,U=R.A||N||Function("return this")();const O=U},51465:(z,M,A)=>{"use strict";A.d(M,{A:()=>O});var R=Function.prototype,N=R.toString;function U($){if($!=null){try{return N.call($)}catch{}try{return $+""}catch{}}return""}const O=U},44336:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});function R(U,O){return U===O||U!==U&&O!==O}const N=R},80703:(z,M,A)=>{"use strict";A.d(M,{A:()=>j});var R=A(84855),N=A(45074),U="[object Arguments]";function O(G){return(0,N.A)(G)&&(0,R.A)(G)==U}const $=O;var C=Object.prototype,B=C.hasOwnProperty,S=C.propertyIsEnumerable,F=$(function(){return arguments}())?$:function(G){return(0,N.A)(G)&&B.call(G,"callee")&&!S.call(G,"callee")};const j=F},91689:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});var R=Array.isArray;const N=R},16566:(z,M,A)=>{"use strict";A.d(M,{A:()=>O});var R=A(96770),N=A(67246);function U($){return $!=null&&(0,N.A)($.length)&&!(0,R.A)($)}const O=U},83032:(z,M,A)=>{"use strict";A.d(M,{A:()=>j});var R=A(83077);function N(){return!1}const U=N;var O=typeof $a=="object"&&$a&&!$a.nodeType&&$a,$=O&&typeof ja=="object"&&ja&&!ja.nodeType&&ja,C=$&&$.exports===O,B=C?R.A.Buffer:void 0,S=B?B.isBuffer:void 0,F=S||U;const j=F},96770:(z,M,A)=>{"use strict";A.d(M,{A:()=>S});var R=A(84855),N=A(20997),U="[object AsyncFunction]",O="[object Function]",$="[object GeneratorFunction]",C="[object Proxy]";function B(F){if(!(0,N.A)(F))return!1;var j=(0,R.A)(F);return j==O||j==$||j==U||j==C}const S=B},67246:(z,M,A)=>{"use strict";A.d(M,{A:()=>U});var R=9007199254740991;function N(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=R}const U=N},20997:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});function R(U){var O=typeof U;return U!=null&&(O=="object"||O=="function")}const N=R},45074:(z,M,A)=>{"use strict";A.d(M,{A:()=>N});function R(U){return U!=null&&typeof U=="object"}const N=R},52789:(z,M,A)=>{"use strict";A.d(M,{A:()=>$e});var R=A(84855),N=A(67246),U=A(45074),O="[object Arguments]",$="[object Array]",C="[object Boolean]",B="[object Date]",S="[object Error]",F="[object Function]",j="[object Map]",G="[object Number]",ue="[object Object]",se="[object RegExp]",Y="[object Set]",X="[object String]",ie="[object WeakMap]",J="[object ArrayBuffer]",te="[object DataView]",ne="[object Float32Array]",be="[object Float64Array]",ke="[object Int8Array]",Oe="[object Int16Array]",We="[object Int32Array]",Ye="[object Uint8Array]",et="[object Uint8ClampedArray]",K="[object Uint16Array]",Te="[object Uint32Array]",Pe={};Pe[ne]=Pe[be]=Pe[ke]=Pe[Oe]=Pe[We]=Pe[Ye]=Pe[et]=Pe[K]=Pe[Te]=!0,Pe[O]=Pe[$]=Pe[J]=Pe[C]=Pe[te]=Pe[B]=Pe[S]=Pe[F]=Pe[j]=Pe[G]=Pe[ue]=Pe[se]=Pe[Y]=Pe[X]=Pe[ie]=!1;function Ce(tt){return(0,U.A)(tt)&&(0,N.A)(tt.length)&&!!Pe[(0,R.A)(tt)]}const Re=Ce;var de=A(34573),he=A(43985),He=he.A&&he.A.isTypedArray,Je=He?(0,de.A)(He):Re;const $e=Je},47686:(z,M,A)=>{"use strict";A.d(M,{A:()=>$});var R=A(8801),N=A(75101),U=A(16566);function O(C){return(0,U.A)(C)?(0,R.A)(C):(0,N.A)(C)}const $=O},95056:(z,M,A)=>{"use strict";A.d(M,{A:()=>O});var R=A(94794),N="Expected a function";function U($,C){if(typeof $!="function"||C!=null&&typeof C!="function")throw new TypeError(N);var B=function(){var S=arguments,F=C?C.apply(this,S):S[0],j=B.cache;if(j.has(F))return j.get(F);var G=$.apply(this,S);return B.cache=j.set(F,G)||j,G};return B.cache=new(U.Cache||R.A),B}U.Cache=R.A;const O=U}},Mn={};function je(z){var M=Mn[z];if(M!==void 0)return M.exports;var A=Mn[z]={exports:{}};return Tn[z].call(A.exports,A,A.exports,je),A.exports}je.m=Tn,je.n=z=>{var M=z&&z.__esModule?()=>z.default:()=>z;return je.d(M,{a:M}),M},je.d=(z,M)=>{for(var A in M)je.o(M,A)&&!je.o(z,A)&&Object.defineProperty(z,A,{enumerable:!0,get:M[A]})},je.f={},je.e=z=>Promise.all(Object.keys(je.f).reduce((M,A)=>(je.f[A](z,M),M),[])),je.u=z=>""+z+".js",je.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),je.o=(z,M)=>Object.prototype.hasOwnProperty.call(z,M),(()=>{var z={},M="@argent-x/extension:";je.l=(A,R,N,U)=>{if(z[A]){z[A].push(R);return}var O,$;if(N!==void 0)for(var C=document.getElementsByTagName("script"),B=0;B<C.length;B++){var S=C[B];if(S.getAttribute("src")==A||S.getAttribute("data-webpack")==M+N){O=S;break}}O||($=!0,O=document.createElement("script"),O.charset="utf-8",O.timeout=120,je.nc&&O.setAttribute("nonce",je.nc),O.setAttribute("data-webpack",M+N),O.src=A),z[A]=[R];var F=(G,ue)=>{O.onerror=O.onload=null,clearTimeout(j);var se=z[A];if(delete z[A],O.parentNode&&O.parentNode.removeChild(O),se&&se.forEach(Y=>Y(ue)),G)return G(ue)},j=setTimeout(F.bind(null,void 0,{type:"timeout",target:O}),12e4);O.onerror=F.bind(null,O.onerror),O.onload=F.bind(null,O.onload),$&&document.head.appendChild(O)}})(),je.r=z=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})},je.j=727,(()=>{var z;je.g.importScripts&&(z=je.g.location+"");var M=je.g.document;if(!z&&M&&(M.currentScript&&M.currentScript.tagName.toUpperCase()==="SCRIPT"&&(z=M.currentScript.src),!z)){var A=M.getElementsByTagName("script");if(A.length)for(var R=A.length-1;R>-1&&(!z||!/^http(s?):/.test(z));)z=A[R--].src}if(!z)throw new Error("Automatic publicPath is not supported in this browser");z=z.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),je.p=z})(),(()=>{var z={727:0};je.f.j=(R,N)=>{var U=je.o(z,R)?z[R]:void 0;if(U!==0)if(U)N.push(U[2]);else{var O=new Promise((S,F)=>U=z[R]=[S,F]);N.push(U[2]=O);var $=je.p+je.u(R),C=new Error,B=S=>{if(je.o(z,R)&&(U=z[R],U!==0&&(z[R]=void 0),U)){var F=S&&(S.type==="load"?"missing":S.type),j=S&&S.target&&S.target.src;C.message="Loading chunk "+R+` failed.
(`+F+": "+j+")",C.name="ChunkLoadError",C.type=F,C.request=j,U[1](C)}};je.l($,B,"chunk-"+R,R)}};var M=(R,N)=>{var[U,O,$]=N,C,B,S=0;if(U.some(j=>z[j]!==0)){for(C in O)je.o(O,C)&&(je.m[C]=O[C]);if($)var F=$(je)}for(R&&R(N);S<U.length;S++)B=U[S],je.o(z,B)&&z[B]&&z[B][0](),z[B]=0},A=self.webpackChunk_argent_x_extension=self.webpackChunk_argent_x_extension||[];A.forEach(M.bind(null,0)),A.push=M.bind(null,A.push.bind(A))})();var FF={};(()=>{"use strict";var As,Ss,ks,Cs;var z={};je.r(z);var M={};je.r(M);var A={};je.r(A),je.d(A,{EBlockTag:()=>ne,EDAMode:()=>ke,EDataAvailabilityMode:()=>be,ESimulationFlag:()=>X,ETransactionExecutionStatus:()=>te,ETransactionFinalityStatus:()=>J,ETransactionStatus:()=>ie,ETransactionType:()=>Y,ETransactionVersion:()=>Oe,ETransactionVersion2:()=>We,ETransactionVersion3:()=>Ye,Errors:()=>z,SPEC:()=>M});var R={};je.r(R),je.d(R,{Permission:()=>et,TypedDataRevision:()=>K});var N={};je.r(N),je.d(N,{API:()=>A,EBlockTag:()=>ne,EDAMode:()=>ke,EDataAvailabilityMode:()=>be,ESimulationFlag:()=>X,ETransactionExecutionStatus:()=>te,ETransactionFinalityStatus:()=>J,ETransactionStatus:()=>ie,ETransactionType:()=>Y,ETransactionVersion:()=>Oe,ETransactionVersion2:()=>We,ETransactionVersion3:()=>Ye,Errors:()=>z,Permission:()=>et,SPEC:()=>M,TypedDataRevision:()=>K,WALLET_API:()=>R});var U={};je.r(U),je.d(U,{aK:()=>qi,e8:()=>Ja,DO:()=>Xa,dJ:()=>Rb,OG:()=>Xd,My:()=>qr,Ph:()=>v,lX:()=>P,Id:()=>Fe,fg:()=>Db,qj:()=>we,aT:()=>y,ME:()=>tc,r4:()=>ei,aY:()=>ds,x:()=>sg,lq:()=>H,z:()=>xe,zW:()=>Qa,IV:()=>ve,Q5:()=>Eu});var O={};je.r(O),je.d(O,{poseidon:()=>aw,splitConstants:()=>iO,validateOpts:()=>sw});var $={};je.r($),je.d($,{DER:()=>fs,SWUFpSqrtRatio:()=>pw,mapToCurveSimpleSWU:()=>hO,weierstrass:()=>_g,weierstrassPoints:()=>hw});var C={};je.r(C),je.d(C,{CURVE:()=>_O,Fp251:()=>kw,MAX_VALUE:()=>Yi,ProjectivePoint:()=>oc,Signature:()=>Ls,_poseidonMDS:()=>Cw,_starkCurve:()=>gO,computeHashOnElements:()=>xO,ethSigToPrivate:()=>yO,getAccountPath:()=>wO,getPublicKey:()=>af,getSharedSecret:()=>mO,getStarkKey:()=>ku,grindKey:()=>xw,keccak:()=>sr,normalizePrivateKey:()=>sf,pedersen:()=>Us,poseidonBasic:()=>Tg,poseidonCreate:()=>kO,poseidonHash:()=>cf,poseidonHashFunc:()=>CO,poseidonHashMany:()=>Ct,poseidonHashSingle:()=>IO,poseidonSmall:()=>Iu,sign:()=>yg,utils:()=>Su,verify:()=>bg});var B={};je.r(B),je.d(B,{OG:()=>Yh,My:()=>Ri,Ph:()=>pr,lX:()=>Jy,Id:()=>qc,fg:()=>_k,qj:()=>rs,aT:()=>Bi,ME:()=>Gh,aY:()=>ua,lq:()=>Wc,z:()=>Qy,IV:()=>e0,Q5:()=>yd});var S={};je.r(S),je.d(S,{poseidon:()=>Hk,splitConstants:()=>AU,validateOpts:()=>Fk});var F={};je.r(F),je.d(F,{DER:()=>Ua,SWUFpSqrtRatio:()=>Kk,mapToCurveSimpleSWU:()=>RU,weierstrass:()=>zk,weierstrassPoints:()=>Zk});var j={};je.r(j),je.d(j,{CURVE:()=>LU,Fp251:()=>iC,MAX_VALUE:()=>Mo,ProjectivePoint:()=>Xc,Signature:()=>np,_poseidonMDS:()=>oC,_starkCurve:()=>BU,computeHashOnElements:()=>jU,ethSigToPrivate:()=>UU,getAccountPath:()=>VU,getPublicKey:()=>Qk,getSharedSecret:()=>DU,getStarkKey:()=>g0,grindKey:()=>rC,keccak:()=>Jc,pedersen:()=>Ad,poseidonBasic:()=>y0,poseidonCreate:()=>KU,poseidonHash:()=>b0,poseidonHashFunc:()=>WU,poseidonHashMany:()=>Ma,poseidonHashSingle:()=>qU,poseidonSmall:()=>Sd,sign:()=>Td,utils:()=>h0,verify:()=>PU});const G=e=>{};var ue=je(21956),se=je.n(ue);const Y={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},X={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},ie={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},J={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},te={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},ne={LATEST:"latest",PENDING:"pending"},be={L1:"L1",L2:"L2"},ke={L1:0,L2:1},Oe={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},We={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},Ye={V3:"0x3",F3:"0x100000000000000000000000000000003"},et={ACCOUNTS:"accounts"},K={ACTIVE:"1",LEGACY:"0"};/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Te(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Pe(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function Ce(e){if(typeof e!="function")throw new Error("function expected");return!0}function Re(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function de(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}const he=null;function He(e){if(!Array.isArray(e))throw new Error("array expected")}function Je(e,t){if(!Pe(!0,t))throw new Error(`${e}: array of strings expected`)}function $e(e,t){if(!Pe(!1,t))throw new Error(`${e}: array of numbers expected`)}function tt(...e){const t=i=>i,n=(i,o)=>u=>i(o(u)),r=e.map(i=>i.encode).reduceRight(n,t),s=e.map(i=>i.decode).reduce(n,t);return{encode:r,decode:s}}function Tt(e){const t=typeof e=="string"?e.split(""):e,n=t.length;Je("alphabet",t);const r=new Map(t.map((s,i)=>[s,i]));return{encode:s=>(He(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${e}`);return t[i]})),decode:s=>(He(s),s.map(i=>{Re("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${e}`);return o}))}}function ut(e=""){return Re("join",e),{encode:t=>(Je("join.decode",t),t.join(e)),decode:t=>(Re("join.decode",t),t.split(e))}}function Jt(e,t="="){return de(e),Re("padding",t),{encode(n){for(Je("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){Je("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function lt(e){return Ce(e),{encode:t=>t,decode:t=>e(t)}}function mt(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(He(e),!e.length)return[];let r=0;const s=[],i=Array.from(e,u=>{if(de(u),u<0||u>=t)throw new Error(`invalid integer: ${u}`);return u}),o=i.length;for(;;){let u=0,l=!0;for(let d=r;d<o;d++){const f=i[d],g=t*u,_=g+f;if(!Number.isSafeInteger(_)||g/t!==u||_-f!==g)throw new Error("convertRadix: carry overflow");const b=_/n;u=_%n;const T=Math.floor(b);if(i[d]=T,!Number.isSafeInteger(T)||T*n+u!==_)throw new Error("convertRadix: carry overflow");if(l)T?l=!1:r=d;else continue}if(s.push(u),l)break}for(let u=0;u<e.length-1&&e[u]===0;u++)s.push(0);return s.reverse()}const sn=(e,t)=>t===0?e:sn(t,e%t),Wn=(e,t)=>e+(t-sn(e,t)),pa=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function gr(e,t,n,r){if(He(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Wn(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Wn(t,n)}`);let s=0,i=0;const o=pa[t],u=pa[n]-1,l=[];for(const d of e){if(de(d),d>=o)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(s=s<<t|d,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)l.push((s>>i-n&u)>>>0);const f=pa[i];if(f===void 0)throw new Error("invalid carry");s&=f-1}if(s=s<<n-i&u,!r&&i>=t)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&l.push(s>>>0),l}function Za(e){de(e);const t=2**8;return{encode:n=>{if(!Te(n))throw new Error("radix.encode input should be Uint8Array");return mt(Array.from(n),t,e)},decode:n=>($e("radix.decode",n),Uint8Array.from(mt(n,e,t)))}}function xn(e,t=!1){if(de(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Wn(8,e)>32||Wn(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Te(n))throw new Error("radix2.encode input should be Uint8Array");return gr(Array.from(n),8,e,!t)},decode:n=>($e("radix2.decode",n),Uint8Array.from(gr(n,e,8,t)))}}function Ko(e){return Ce(e),function(...t){try{return e.apply(null,t)}catch{}}}function za(e,t){return de(e),Ce(t),{encode(n){if(!Te(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),s=new Uint8Array(n.length+e);return s.set(n),s.set(r,n.length),s},decode(n){if(!Te(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),s=n.slice(-e),i=t(r).slice(0,e);for(let o=0;o<e;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return r}}}const ga={alphabet:Tt,chain:tt,checksum:za,convertRadix:mt,convertRadix2:gr,radix:Za,radix2:xn,join:ut,padding:Jt},An=tt(xn(4),Tt("0123456789ABCDEF"),ut("")),lu=tt(xn(5),Tt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Jt(5),ut("")),cs=tt(xn(5),Tt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ut("")),Cr=tt(xn(5),Tt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Jt(5),ut("")),Ka=tt(xn(5),Tt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ut("")),Ns=tt(xn(5),Tt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ut(""),lt(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Ir=tt(xn(6),Tt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Jt(6),ut("")),us=tt(xn(6),Tt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ut("")),Vn=tt(xn(6),Tt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Jt(6),ut("")),ls=tt(xn(6),Tt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ut("")),Or=e=>tt(Za(58),Tt(e),ut("")),an=Or("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Zi=Or("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),V=Or("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),w=[0,2,3,5,6,7,9,10,11],E={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=an.encode(r).padStart(w[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),s=w.indexOf(r.length),i=an.decode(r);for(let o=0;o<i.length-s;o++)if(i[o]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-s)))}return Uint8Array.from(t)}},q=e=>tt(za(4,t=>e(e(t))),an),ae=null,fe=tt(Tt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ut("")),Ae=[996825010,642813549,513874426,1027748829,705979059];function st(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Ae.length;r++)(t>>r&1)===1&&(n^=Ae[r]);return n}function xt(e,t,n=1){const r=e.length;let s=1;for(let i=0;i<r;i++){const o=e.charCodeAt(i);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);s=st(s)^o>>5}s=st(s);for(let i=0;i<r;i++)s=st(s)^e.charCodeAt(i)&31;for(let i of t)s=st(s)^i;for(let i=0;i<6;i++)s=st(s);return s^=n,fe.encode(gr([s%pa[30]],30,5,!1))}function Bt(e){const t=e==="bech32"?1:734539939,n=xn(5),r=n.decode,s=n.encode,i=Ko(r);function o(g,_,b=90){Re("bech32.encode prefix",g),Te(_)&&(_=Array.from(_)),$e("bech32.encode",_);const T=g.length;if(T===0)throw new TypeError(`Invalid prefix length ${T}`);const I=T+7+_.length;if(b!==!1&&I>b)throw new TypeError(`Length ${I} exceeds limit ${b}`);const k=g.toLowerCase(),Z=xt(k,_,t);return`${k}1${fe.encode(_)}${Z}`}function u(g,_=90){Re("bech32.decode input",g);const b=g.length;if(b<8||_!==!1&&b>_)throw new TypeError(`invalid string length: ${b} (${g}). Expected (8..${_})`);const T=g.toLowerCase();if(g!==T&&g!==g.toUpperCase())throw new Error("String must be lowercase or uppercase");const I=T.lastIndexOf("1");if(I===0||I===-1)throw new Error('Letter "1" must be present between prefix and data only');const k=T.slice(0,I),Z=T.slice(I+1);if(Z.length<6)throw new Error("Data must be at least 6 characters long");const Q=fe.decode(Z).slice(0,-6),ee=xt(k,Q,t);if(!Z.endsWith(ee))throw new Error(`Invalid checksum in ${g}: expected "${ee}"`);return{prefix:k,words:Q}}const l=Ko(u);function d(g){const{prefix:_,words:b}=u(g,!1);return{prefix:_,words:b,bytes:r(b)}}function f(g,_){return o(g,s(_))}return{encode:o,decode:u,encodeFromBytes:f,decodeToBytes:d,decodeUnsafe:l,fromWords:r,fromWordsUnsafe:i,toWords:s}}const jt=Bt("bech32"),At=Bt("bech32m"),Rs={utf8:{encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},hex:tt(xn(4),Tt("0123456789abcdef"),ut(""),lt(e=>{if(typeof e!="string"||e.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),base16:An,base32:lu,base64:Ir,base64url:Vn,base58:an,base58xmr:E},du="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",ma=(e,t)=>{if(typeof e!="string"||!Rs.hasOwnProperty(e))throw new TypeError(du);if(!Te(t))throw new TypeError("bytesToString() expects Uint8Array");return Rs[e].encode(t)},qo=null,Ki=(e,t)=>{if(!Rs.hasOwnProperty(e))throw new TypeError(du);if(typeof t!="string")throw new TypeError("stringToBytes() expects string");return Rs[e].decode(t)},Wr=null;function qn(e){return Bs.test(e)}const Bs=/^-?[0-9]+$/;function Wa(e){return Wi.test(e)}const Wi=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function Go(e,t){const n=Number.parseFloat(e),r=String(n),s=Ga(e),i=Ga(r);return!!(s===i||t?.approx===!0&&!qn(e)&&i.length>=14&&s.startsWith(i.substring(0,14)))}let qa=function(e){return e.underflow="underflow",e.overflow="overflow",e.truncate_integer="truncate_integer",e.truncate_float="truncate_float",e}({});function Yo(e){if(Go(e,{approx:!1}))return;if(qn(e))return qa.truncate_integer;const t=Number.parseFloat(e);return Number.isFinite(t)?t===0?qa.underflow:qa.truncate_float:qa.overflow}function Xo(e,t){const n=Number.parseFloat(e),r=Yo(e);if(t?.approx===!0?r&&r!==qa.truncate_float:r){const s=r?.replace(/_\w+$/,"");throw new Error(`Cannot safely convert to number: the value '${e}' would ${s} and become ${n}`)}return n}function Ga(e){return e.replace(Zd,"").replace(rt,"").replace(Up,"").replace(Lp,"")}const Zd=/[eE][+-]?\d+$/,Lp=/^-?(0*)?/,rt=/\./,Up=/0+$/;class fu{constructor(t){W(this,"isLosslessNumber",!0);if(!Wa(t))throw new Error(`Invalid number (value: "${t}")`);this.value=t}valueOf(){const t=Yo(this.value);if(t===void 0||t===qa.truncate_float)return Number.parseFloat(this.value);if(qn(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function zd(e){return e&&typeof e=="object"&&e.isLosslessNumber===!0||!1}function Ab(e){if(extractSignificantDigits(String(e)).length>15)throw new Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${e})`);if(Number.isNaN(e))throw new Error("Invalid number: NaN");if(!Number.isFinite(e))throw new Error(`Invalid number: ${e}`);return new fu(String(e))}function Mp(e){return new fu(e)}function hu(e){return qn(e)?BigInt(e):Number.parseFloat(e)}function Vp(e,t){return pu({"":e},"",e,t)}function pu(e,t,n,r){return Array.isArray(n)?r.call(e,t,Hp(n,r)):n&&typeof n=="object"&&!zd(n)?r.call(e,t,Fp(n,r)):r.call(e,t,n)}function Fp(e,t){for(const n of Object.keys(e)){const r=pu(e,n,e[n],t);r!==void 0?e[n]=r:delete e[n]}return e}function Hp(e,t){for(let n=0;n<e.length;n++)e[n]=pu(e,String(n),e[n],t);return e}function Jo(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mp,r=0;const s=u();return T(s),k(),t?Vp(s,t):s;function i(){if(e.charCodeAt(r)===Wp){r++,d();const le={};let ce=!0;for(;r<e.length&&e.charCodeAt(r)!==Wd;){ce?ce=!1:(_(),d());const ye=r,De=f();if(De===void 0){ee();return}d(),b();const Ke=u();if(Ke===void 0){Ie();return}Object.prototype.hasOwnProperty.call(le,De)&&!gu(Ke,le[De])&&re(De,ye+1),le[De]=Ke}return e.charCodeAt(r)!==Wd&&Se(),r++,le}}function o(){if(e.charCodeAt(r)===qp){r++,d();const le=[];let ce=!0;for(;r<e.length&&e.charCodeAt(r)!==qd;){ce?ce=!1:_();const ye=u();I(ye),le.push(ye)}return e.charCodeAt(r)!==qd&&me(),r++,le}}function u(){d();const le=f()??g()??i()??o()??l("true",!0)??l("false",!1)??l("null",null);return d(),le}function l(le,ce){if(e.slice(r,r+le.length)===le)return r+=le.length,ce}function d(){for(;$p(e.charCodeAt(r));)r++}function f(){if(e.charCodeAt(r)===mu){r++;let le="";for(;r<e.length&&e.charCodeAt(r)!==mu;){if(e.charCodeAt(r)===Kp){const ce=e[r+1],ye=zp[ce];ye!==void 0?(le+=ye,r++):ce==="u"?Qo(e.charCodeAt(r+2))&&Qo(e.charCodeAt(r+3))&&Qo(e.charCodeAt(r+4))&&Qo(e.charCodeAt(r+5))?(le+=String.fromCharCode(Number.parseInt(e.slice(r+2,r+6),16)),r+=5):Ne(r):Ee(r)}else Zp(e.charCodeAt(r))?le+=e[r]:oe(e[r]);r++}return Q(),r++,le}}function g(){const le=r;if(e.charCodeAt(r)===_u&&(r++,Z(le)),e.charCodeAt(r)===yu)r++;else if(jp(e.charCodeAt(r)))for(r++;ec(e.charCodeAt(r));)r++;if(e.charCodeAt(r)===Sb)for(r++,Z(le);ec(e.charCodeAt(r));)r++;if(e.charCodeAt(r)===Be||e.charCodeAt(r)===Ob)for(r++,(e.charCodeAt(r)===_u||e.charCodeAt(r)===Qp)&&r++,Z(le);ec(e.charCodeAt(r));)r++;if(r>le)return n(e.slice(le,r))}function _(){if(e.charCodeAt(r)!==tg)throw new SyntaxError(`Comma ',' expected after value ${Qe()}`);r++}function b(){if(e.charCodeAt(r)!==kb)throw new SyntaxError(`Colon ':' expected after property name ${Qe()}`);r++}function T(le){if(le===void 0)throw new SyntaxError(`JSON value expected ${Qe()}`)}function I(le){if(le===void 0)throw new SyntaxError(`Array item expected ${Qe()}`)}function k(){if(r<e.length)throw new SyntaxError(`Expected end of input ${Qe()}`)}function Z(le){if(!ec(e.charCodeAt(r))){const ce=e.slice(le,r);throw new SyntaxError(`Invalid number '${ce}', expecting a digit ${Qe()}`)}}function Q(){if(e.charCodeAt(r)!==mu)throw new SyntaxError(`End of string '"' expected ${Qe()}`)}function ee(){throw new SyntaxError(`Quoted object key expected ${Qe()}`)}function re(le,ce){throw new SyntaxError(`Duplicate key '${le}' encountered at position ${ce}`)}function Se(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${Qe()}`)}function me(){throw new SyntaxError(`Array item or end of array ']' expected ${Qe()}`)}function oe(le){throw new SyntaxError(`Invalid character '${le}' ${_e()}`)}function Ee(le){const ce=e.slice(le,le+2);throw new SyntaxError(`Invalid escape character '${ce}' ${_e()}`)}function Ie(){throw new SyntaxError(`Object value expected after ':' ${_e()}`)}function Ne(le){const ce=e.slice(le,le+6);throw new SyntaxError(`Invalid unicode character '${ce}' ${_e()}`)}function _e(){return`at position ${r}`}function Ve(){return r<e.length?`but got '${e[r]}'`:"but reached end of input"}function Qe(){return`${Ve()} ${_e()}`}}function $p(e){return e===Gp||e===Yp||e===Xp||e===Jp}function Qo(e){return e>=yu&&e<=bu||e>=Cb&&e<=Gd||e>=Ib&&e<=Yd}function ec(e){return e>=yu&&e<=bu}function jp(e){return e>=eg&&e<=bu}function Zp(e){return e>=32&&e<=1114111}function gu(e,t){return e===t?!0:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((n,r)=>gu(n,t[r])):Kd(e)&&Kd(t)?[...new Set([...Object.keys(e),...Object.keys(t)])].every(r=>gu(e[r],t[r])):!1}function Kd(e){return typeof e=="object"&&e!==null}const zp={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Kp=92,Wp=123,Wd=125,qp=91,qd=93,Gp=32,Yp=10,Xp=9,Jp=13,mu=34,Qp=43,_u=45,yu=48,eg=49,bu=57,tg=44,Sb=46,kb=58,Cb=65,Ib=97,Ob=69,Be=101,Gd=70,Yd=102;function wu(e,t,n,r){const s=mr(n),i=typeof t=="function"?t.call({"":e},"",e):e;return o(i,"");function o(f,g){if(Array.isArray(r)){const _=r.find(b=>b.test(f));if(_){const b=_.stringify(f);if(typeof b!="string"||!Wa(b))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${b})`);return b}}if(typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f===null||f instanceof Date||f instanceof Boolean||f instanceof Number||f instanceof String)return JSON.stringify(f);if(f?.isLosslessNumber||typeof f=="bigint")return f.toString();if(Array.isArray(f))return u(f,g);if(f&&typeof f=="object")return l(f,g)}function u(f,g){if(f.length===0)return"[]";const _=s?g+s:void 0;let b=s?`[
`:"[";for(let T=0;T<f.length;T++){const I=typeof t=="function"?t.call(f,String(T),f[T]):f[T];s&&(b+=_),typeof I<"u"&&typeof I!="function"?b+=o(I,_):b+="null",T<f.length-1&&(b+=s?`,
`:",")}return b+=s?`
${g}]`:"]",b}function l(f,g){if(typeof f.toJSON=="function")return wu(f.toJSON(),t,n,void 0);const _=Array.isArray(t)?t.map(String):Object.keys(f);if(_.length===0)return"{}";const b=s?g+s:void 0;let T=!0,I=s?`{
`:"{";for(const k of _){const Z=typeof t=="function"?t.call(f,k,f[k]):f[k];if(d(k,Z)){T?T=!1:I+=s?`,
`:",";const Q=JSON.stringify(k);I+=s?`${b+Q}: `:`${Q}:`,I+=o(Z,b)}}return I+=s?`
${g}}`:"}",I}function d(f,g){return typeof g<"u"&&typeof g!="function"&&typeof g!="symbol"}}function mr(e){if(typeof e=="number")return" ".repeat(e);if(typeof e=="string"&&e!=="")return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _a=BigInt(0),Ya=BigInt(1),ng=BigInt(2);function ds(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Xa(e){if(!ds(e))throw new Error("Uint8Array expected")}function Ja(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const Nb=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function qr(e){Xa(e);let t="";for(let n=0;n<e.length;n++)t+=Nb[e[n]];return t}function Qa(e){const t=e.toString(16);return t.length&1?"0"+t:t}function tc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?_a:BigInt("0x"+e)}const Ds={_0:48,_9:57,A:65,F:70,a:97,f:102};function D(e){if(e>=Ds._0&&e<=Ds._9)return e-Ds._0;if(e>=Ds.A&&e<=Ds.F)return e-(Ds.A-10);if(e>=Ds.a&&e<=Ds.f)return e-(Ds.a-10)}function y(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=D(e.charCodeAt(i)),u=D(e.charCodeAt(i+1));if(o===void 0||u===void 0){const l=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[s]=o*16+u}return r}function v(e){return tc(qr(e))}function P(e){return Xa(e),tc(qr(Uint8Array.from(e).reverse()))}function H(e,t){return y(e.toString(16).padStart(t*2,"0"))}function xe(e,t){return H(e,t).reverse()}function ve(e){return y(Qa(e))}function we(e,t,n){let r;if(typeof t=="string")try{r=y(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(ds(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function Fe(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Xa(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}function Xe(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function Zt(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const Gr=e=>typeof e=="bigint"&&_a<=e;function ei(e,t,n){return Gr(e)&&Gr(t)&&Gr(n)&&t<=e&&e<n}function qi(e,t,n,r){if(!ei(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Rb(e){let t;for(t=0;e>_a;e>>=Ya,t+=1);return t}function HF(e,t){return e>>BigInt(t)&Ya}function $F(e,t,n){return e|(n?Ya:_a)<<BigInt(t)}const Xd=e=>(ng<<BigInt(e-1))-Ya,rg=e=>new Uint8Array(e),Bb=e=>Uint8Array.from(e);function Db(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=rg(e),s=rg(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},u=(...g)=>n(s,r,...g),l=(g=rg())=>{s=u(Bb([0]),g),r=u(),g.length!==0&&(s=u(Bb([1]),g),r=u())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const _=[];for(;g<t;){r=u();const b=r.slice();_.push(b),g+=r.length}return Fe(..._)};return(g,_)=>{o(),l(g);let b;for(;!(b=_(d()));)l();return o(),b}}const yI={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ds(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Eu(e,t,n={}){const r=(s,i,o)=>{const u=yI[i];if(typeof u!="function")throw new Error("invalid validator function");const l=e[s];if(!(o&&l===void 0)&&!u(l,e))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+l)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}const jF=()=>{throw new Error("not implemented")};function sg(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const i=e(n,...r);return t.set(n,i),i}}function vu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function bI(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function nc(e,...t){if(!bI(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Pb(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");vu(e.outputLen),vu(e.blockLen)}function Gi(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ag(e,t){nc(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ZF={number:vu,bytes:nc,hash:Pb,exists:Gi,output:ag},zF=null,rc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function KF(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}const WF=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),wI=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),ig=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ps=(e,t)=>e<<32-t|e>>>t,qF=(e,t)=>e<<t|e>>>32-t>>>0,Lb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,EI=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,GF=null;function Ub(e){for(let t=0;t<e.length;t++)e[t]=EI(e[t])}const vI=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function YF(e){abytes(e);let t="";for(let n=0;n<e.length;n++)t+=vI[e[n]];return t}const ya={_0:48,_9:57,A:65,F:70,a:97,f:102};function Mb(e){if(e>=ya._0&&e<=ya._9)return e-ya._0;if(e>=ya.A&&e<=ya.F)return e-(ya.A-10);if(e>=ya.a&&e<=ya.f)return e-(ya.a-10)}function XF(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Mb(e.charCodeAt(i)),u=Mb(e.charCodeAt(i+1));if(o===void 0||u===void 0){const l=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[s]=o*16+u}return r}const TI=async()=>{};async function JF(e,t,n){let r=Date.now();for(let s=0;s<e;s++){n(s);const i=Date.now()-r;i>=0&&i<t||(await TI(),r+=i)}}function Vb(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function sc(e){return typeof e=="string"&&(e=Vb(e)),nc(e),e}function xI(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];nc(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}class og{clone(){return this._cloneInto()}}function QF(e,t){if(t!==void 0&&{}.toString.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function Fb(e){const t=r=>e().update(sc(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function eH(e){const t=(r,s)=>e(s).update(sc(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function tH(e){const t=(r,s)=>e(s).update(sc(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function AI(e=32){if(rc&&typeof rc.getRandomValues=="function")return rc.getRandomValues(new Uint8Array(e));if(rc&&typeof rc.randomBytes=="function")return rc.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function SI(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),u=Number(n&i),l=r?4:0,d=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+d,u,r)}const kI=(e,t,n)=>e&t^~e&n,CI=(e,t,n)=>e&t^e&n^t&n;class II extends og{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ig(this.buffer)}update(t){Gi(this);const{view:n,buffer:r,blockLen:s}=this;t=sc(t);const i=t.length;for(let o=0;o<i;){const u=Math.min(s-this.pos,i-o);if(u===s){const l=ig(t);for(;s<=i-o;o+=s)this.process(l,o);continue}r.set(t.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Gi(this),ag(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)n[g]=0;SI(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=ig(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=l/4,f=this.get();if(d>f.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)u.setUint32(4*g,f[g],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:u}=this;return t.length=s,t.pos=u,t.finished=i,t.destroyed=o,s%n&&t.buffer.set(r),t}}const OI=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ti=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ni=new Uint32Array(64);class Hb extends II{constructor(){super(64,32,8,!1),this.A=ti[0]|0,this.B=ti[1]|0,this.C=ti[2]|0,this.D=ti[3]|0,this.E=ti[4]|0,this.F=ti[5]|0,this.G=ti[6]|0,this.H=ti[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:o,G:u,H:l}=this;return[t,n,r,s,i,o,u,l]}set(t,n,r,s,i,o,u,l){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=u|0,this.H=l|0}process(t,n){for(let g=0;g<16;g++,n+=4)ni[g]=t.getUint32(n,!1);for(let g=16;g<64;g++){const _=ni[g-15],b=ni[g-2],T=Ps(_,7)^Ps(_,18)^_>>>3,I=Ps(b,17)^Ps(b,19)^b>>>10;ni[g]=I+ni[g-7]+T+ni[g-16]|0}let{A:r,B:s,C:i,D:o,E:u,F:l,G:d,H:f}=this;for(let g=0;g<64;g++){const _=Ps(u,6)^Ps(u,11)^Ps(u,25),b=f+_+kI(u,l,d)+OI[g]+ni[g]|0,I=(Ps(r,2)^Ps(r,13)^Ps(r,22))+CI(r,s,i)|0;f=d,d=l,l=u,u=o+b|0,o=i,i=s,s=r,r=b+I|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,u=u+this.E|0,l=l+this.F|0,d=d+this.G|0,f=f+this.H|0,this.set(r,s,i,o,u,l,d,f)}roundClean(){ni.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class nH extends Hb{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ac=Fb(()=>new Hb),rH=null,Jd=BigInt(2**32-1),cg=BigInt(32);function $b(e,t=!1){return t?{h:Number(e&Jd),l:Number(e>>cg&Jd)}:{h:Number(e>>cg&Jd)|0,l:Number(e&Jd)|0}}function jb(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=$b(e[s],t);[n[s],r[s]]=[i,o]}return[n,r]}const NI=(e,t)=>BigInt(e>>>0)<<cg|BigInt(t>>>0),RI=(e,t,n)=>e>>>n,BI=(e,t,n)=>e<<32-n|t>>>n,DI=(e,t,n)=>e>>>n|t<<32-n,PI=(e,t,n)=>e<<32-n|t>>>n,LI=(e,t,n)=>e<<64-n|t>>>n-32,UI=(e,t,n)=>e>>>n-32|t<<64-n,MI=(e,t)=>t,VI=(e,t)=>e,Zb=(e,t,n)=>e<<n|t>>>32-n,zb=(e,t,n)=>t<<n|e>>>32-n,Kb=(e,t,n)=>t<<n-32|e>>>64-n,Wb=(e,t,n)=>e<<n-32|t>>>64-n;function FI(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const lH={fromBig:$b,split:jb,toBig:NI,shrSH:RI,shrSL:BI,rotrSH:DI,rotrSL:PI,rotrBH:LI,rotrBL:UI,rotr32H:MI,rotr32L:VI,rotlSH:Zb,rotlSL:zb,rotlBH:Kb,rotlBL:Wb,add:FI,add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,add5H:(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,add5L:(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0)},dH=null,qb=[],Gb=[],Yb=[],HI=BigInt(0),Tu=BigInt(1),$I=BigInt(2),jI=BigInt(7),ZI=BigInt(256),zI=BigInt(113);for(let e=0,t=Tu,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],qb.push(2*(5*r+n)),Gb.push((e+1)*(e+2)/2%64);let s=HI;for(let i=0;i<7;i++)t=(t<<Tu^(t>>jI)*zI)%ZI,t&$I&&(s^=Tu<<(Tu<<BigInt(i))-Tu);Yb.push(s)}const[KI,WI]=jb(Yb,!0),Xb=(e,t,n)=>n>32?Kb(e,t,n):Zb(e,t,n),Jb=(e,t,n)=>n>32?Wb(e,t,n):zb(e,t,n);function qI(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const u=(o+8)%10,l=(o+2)%10,d=n[l],f=n[l+1],g=Xb(d,f,1)^n[u],_=Jb(d,f,1)^n[u+1];for(let b=0;b<50;b+=10)e[o+b]^=g,e[o+b+1]^=_}let s=e[2],i=e[3];for(let o=0;o<24;o++){const u=Gb[o],l=Xb(s,i,u),d=Jb(s,i,u),f=qb[o];s=e[f],i=e[f+1],e[f]=l,e[f+1]=d}for(let o=0;o<50;o+=10){for(let u=0;u<10;u++)n[u]=e[o+u];for(let u=0;u<10;u++)e[o+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=KI[r],e[1]^=WI[r]}n.fill(0)}class Qd extends og{constructor(t,n,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,vu(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=wI(this.state)}keccak(){Lb||Ub(this.state32),qI(this.state32,this.rounds),Lb||Ub(this.state32),this.posOut=0,this.pos=0}update(t){Gi(this);const{blockLen:n,state:r}=this;t=sc(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let u=0;u<o;u++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Gi(this,!1),nc(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return vu(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ag(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Qd(n,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const GI=(e,t,n)=>Fb(()=>new Qd(t,e,n)),fH=null,hH=null,pH=null,gH=null,mH=null,ug=GI(1,136,256/8),_H=null,yH=null,bH=(e,t,n)=>wrapXOFConstructorWithOpts((r={})=>new Qd(t,e,r.dkLen===void 0?n:r.dkLen,!0)),wH=null,EH=null;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sn=BigInt(0),Kt=BigInt(1),ri=BigInt(2),YI=BigInt(3),lg=BigInt(4),Qb=BigInt(5),ew=BigInt(8),XI=BigInt(9),JI=BigInt(16);function kn(e,t){const n=e%t;return n>=Sn?n:t+n}function QI(e,t,n){if(t<Sn)throw new Error("invalid exponent, negatives unsupported");if(n<=Sn)throw new Error("invalid modulus");if(n===Kt)return Sn;let r=Kt;for(;t>Sn;)t&Kt&&(r=r*e%n),e=e*e%n,t>>=Kt;return r}function Yr(e,t,n){let r=e;for(;t-- >Sn;)r*=r,r%=n;return r}function xu(e,t){if(e===Sn)throw new Error("invert: expected non-zero number");if(t<=Sn)throw new Error("invert: expected positive modulus, got "+t);let n=kn(e,t),r=t,s=Sn,i=Kt,o=Kt,u=Sn;for(;n!==Sn;){const d=r/n,f=r%n,g=s-o*d,_=i-u*d;r=n,n=f,s=o,i=u,o=g,u=_}if(r!==Kt)throw new Error("invert: does not exist");return kn(s,t)}function eO(e){const t=(e-Kt)/ri;let n,r,s;for(n=e-Kt,r=0;n%ri===Sn;n/=ri,r++);for(s=ri;s<e&&QI(s,t,e)!==e-Kt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(e+Kt)/lg;return function(l,d){const f=l.pow(d,o);if(!l.eql(l.sqr(f),d))throw new Error("Cannot find square root");return f}}const i=(n+Kt)/ri;return function(u,l){if(u.pow(l,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let d=r,f=u.pow(u.mul(u.ONE,s),n),g=u.pow(l,i),_=u.pow(l,n);for(;!u.eql(_,u.ONE);){if(u.eql(_,u.ZERO))return u.ZERO;let b=1;for(let I=u.sqr(_);b<d&&!u.eql(I,u.ONE);b++)I=u.sqr(I);const T=u.pow(f,Kt<<BigInt(d-b-1));f=u.sqr(T),g=u.mul(g,T),_=u.mul(_,f),d=b}return g}}function tO(e){if(e%lg===YI){const t=(e+Kt)/lg;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(e%ew===Qb){const t=(e-Qb)/ew;return function(r,s){const i=r.mul(s,ri),o=r.pow(i,t),u=r.mul(s,o),l=r.mul(r.mul(u,ri),o),d=r.mul(u,r.sub(l,r.ONE));if(!r.eql(r.sqr(d),s))throw new Error("Cannot find square root");return d}}return e%JI,eO(e)}const vH=(e,t)=>(kn(e,t)&Kt)===Kt,nO=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ef(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=nO.reduce((r,s)=>(r[s]="function",r),t);return Eu(e,n)}function tw(e,t,n){if(n<Sn)throw new Error("invalid exponent, negatives unsupported");if(n===Sn)return e.ONE;if(n===Kt)return t;let r=e.ONE,s=t;for(;n>Sn;)n&Kt&&(r=e.mul(r,s)),s=e.sqr(s),n>>=Kt;return r}function rO(e,t){const n=new Array(t.length),r=t.reduce((i,o,u)=>e.is0(o)?i:(n[u]=i,e.mul(i,o)),e.ONE),s=e.inv(r);return t.reduceRight((i,o,u)=>e.is0(o)?i:(n[u]=e.mul(i,n[u]),e.mul(i,o)),s),n}function TH(e,t,n){return e.mul(t,typeof n=="bigint"?xu(n,e.ORDER):e.inv(n))}function sO(e){const t=(e-Kt)/ri;return(n,r)=>n.pow(r,t)}function xH(e){const t=sO(e.ORDER);return n=>{const r=t(e,n);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}}function dg(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function tf(e,t,n=!1,r={}){if(e<=Sn)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:i}=dg(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const u=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:Xd(s),ZERO:Sn,ONE:Kt,create:l=>kn(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Sn<=l&&l<e},is0:l=>l===Sn,isOdd:l=>(l&Kt)===Kt,neg:l=>kn(-l,e),eql:(l,d)=>l===d,sqr:l=>kn(l*l,e),add:(l,d)=>kn(l+d,e),sub:(l,d)=>kn(l-d,e),mul:(l,d)=>kn(l*d,e),pow:(l,d)=>tw(u,l,d),div:(l,d)=>kn(l*xu(d,e),e),sqrN:l=>l*l,addN:(l,d)=>l+d,subN:(l,d)=>l-d,mulN:(l,d)=>l*d,inv:l=>xu(l,e),sqrt:r.sqrt||(l=>(o||(o=tO(e)),o(u,l))),invertBatch:l=>rO(u,l),cmov:(l,d,f)=>f?d:l,toBytes:l=>n?xe(l,i):H(l,i),fromBytes:l=>{if(l.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+l.length);return n?P(l):v(l)}});return Object.freeze(u)}function AH(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)}function SH(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n}function kH(e,t,n=!1){e=ensureBytes("privateHash",e);const r=e.length,s=dg(t).nByteLength+8;if(s<24||r<s||r>1024)throw new Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+r);const i=n?bytesToNumberLE(e):bytesToNumberBE(e);return kn(i,t-Kt)+Kt}function nw(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function rw(e){const t=nw(e);return t+Math.ceil(t/2)}function aO(e,t,n=!1){const r=e.length,s=nw(t),i=rw(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?v(e):P(e),u=kn(o,t-Kt)+Kt;return n?xe(u,s):H(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sw(e){const{Fp:t,mds:n,reversePartialPowIdx:r,roundConstants:s}=e,{roundsFull:i,roundsPartial:o,sboxPower:u,t:l}=e;ef(t);for(const T of["t","roundsFull","roundsPartial"])if(typeof e[T]!="number"||!Number.isSafeInteger(e[T]))throw new Error("invalid number "+T);if(!Array.isArray(n)||n.length!==l)throw new Error("Poseidon: invalid MDS matrix");const d=n.map(T=>{if(!Array.isArray(T)||T.length!==l)throw new Error("invalid MDS matrix row: "+T);return T.map(I=>{if(typeof I!="bigint")throw new Error("invalid MDS matrix bigint: "+I);return t.create(I)})});if(r!==void 0&&typeof r!="boolean")throw new Error("invalid param reversePartialPowIdx="+r);if(i&1)throw new Error("roundsFull is not even"+i);const f=i+o;if(!Array.isArray(s)||s.length!==f)throw new Error("Poseidon: invalid round constants");const g=s.map(T=>{if(!Array.isArray(T)||T.length!==l)throw new Error("invalid round constants");return T.map(I=>{if(typeof I!="bigint"||!t.isValid(I))throw new Error("invalid round constant");return t.create(I)})});if(!u||![3,5,7].includes(u))throw new Error("invalid sboxPower");const _=BigInt(u);let b=T=>tw(t,T,_);return u===3?b=T=>t.mul(t.sqrN(T),T):u===5&&(b=T=>t.mul(t.sqrN(t.sqrN(T)),T)),Object.freeze({...e,rounds:f,sboxFn:b,roundConstants:g,mds:d})}function iO(e,t){if(typeof t!="number")throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let s=0;s<e.length;s++)r.push(e[s]),r.length===t&&(n.push(r),r=[]);return n}function aw(e){const t=sw(e),{Fp:n,mds:r,roundConstants:s,rounds:i,roundsPartial:o,sboxFn:u,t:l}=t,d=t.roundsFull/2,f=t.reversePartialPowIdx?l-1:0,g=(b,T,I)=>(b=b.map((k,Z)=>n.add(k,s[I][Z])),T?b=b.map(k=>u(k)):b[f]=u(b[f]),b=r.map(k=>k.reduce((Z,Q,ee)=>n.add(Z,n.mulN(Q,b[ee])),n.ZERO)),b),_=function(T){if(!Array.isArray(T)||T.length!==l)throw new Error("invalid values, expected array of bigints with length "+l);T=T.map(k=>{if(typeof k!="bigint")throw new Error("invalid bigint="+k);return n.create(k)});let I=0;for(let k=0;k<d;k++)T=g(T,!0,I++);for(let k=0;k<o;k++)T=g(T,!1,I++);for(let k=0;k<d;k++)T=g(T,!0,I++);if(I!==i)throw new Error("invalid number of rounds");return T};return _.roundConstants=s,_}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iw=BigInt(0),nf=BigInt(1);function fg(e,t){const n=t.negate();return e?n:t}function hg(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function pg(e,t){hg(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function ow(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function cw(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const gg=new WeakMap,uw=new WeakMap;function mg(e){return uw.get(e)||1}function oO(e,t){return{constTimeNegate:fg,hasPrecomputes(n){return mg(n)!==1},unsafeLadder(n,r,s=e.ZERO){let i=n;for(;r>iw;)r&nf&&(s=s.add(i)),i=i.double(),r>>=nf;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=pg(r,t),o=[];let u=n,l=u;for(let d=0;d<s;d++){l=u,o.push(l);for(let f=1;f<i;f++)l=l.add(u),o.push(l);u=l.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=pg(n,t);let u=e.ZERO,l=e.BASE;const d=BigInt(2**n-1),f=2**n,g=BigInt(n);for(let _=0;_<i;_++){const b=_*o;let T=Number(s&d);s>>=g,T>o&&(T-=f,s+=nf);const I=b,k=b+Math.abs(T)-1,Z=_%2!==0,Q=T<0;T===0?l=l.add(fg(Z,r[I])):u=u.add(fg(Q,r[k]))}return{p:u,f:l}},wNAFUnsafe(n,r,s,i=e.ZERO){const{windows:o,windowSize:u}=pg(n,t),l=BigInt(2**n-1),d=2**n,f=BigInt(n);for(let g=0;g<o;g++){const _=g*u;if(s===iw)break;let b=Number(s&l);if(s>>=f,b>u&&(b-=d,s+=nf),b===0)continue;let T=r[_+Math.abs(b)-1];b<0&&(T=T.negate()),i=i.add(T)}return i},getPrecomputes(n,r,s){let i=gg.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&gg.set(r,s(i))),i},wNAFCached(n,r,s){const i=mg(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=mg(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){hg(r,t),uw.set(n,r),gg.delete(n)}}}function cO(e,t,n,r){if(ow(n,e),cw(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,i=Rb(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,u=(1<<o)-1,l=new Array(u+1).fill(s),d=Math.floor((t.BITS-1)/o)*o;let f=s;for(let g=d;g>=0;g-=o){l.fill(s);for(let b=0;b<r.length;b++){const T=r[b],I=Number(T>>BigInt(g)&BigInt(u));l[I]=l[I].add(n[b])}let _=s;for(let b=l.length-1,T=s;b>0;b--)T=T.add(l[b]),_=_.add(T);if(f=f.add(_),g!==0)for(let b=0;b<o;b++)f=f.double()}return f}function CH(e,t,n,r){hg(r,t.BITS),ow(n,e);const s=e.ZERO,i=2**r-1,o=Math.ceil(t.BITS/r),u=BigInt((1<<r)-1),l=n.map(d=>{const f=[];for(let g=0,_=d;g<i;g++)f.push(_),_=_.add(d);return f});return d=>{if(cw(d,t),d.length>n.length)throw new Error("array of scalars must be smaller than array of points");let f=s;for(let g=0;g<o;g++){if(f!==s)for(let b=0;b<r;b++)f=f.double();const _=BigInt(o*r-(g+1)*r);for(let b=0;b<d.length;b++){const T=d[b],I=Number(T>>_&u);I&&(f=f.add(l[b][I-1]))}}return f}}function lw(e){return ef(e.Fp),Eu(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...dg(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dw(e){e.lowS!==void 0&&Ja("lowS",e.lowS),e.prehash!==void 0&&Ja("prehash",e.prehash)}function uO(e){const t=lw(e);Eu(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{Ph:lO,aT:dO}=U,fs={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(e,t)=>{const{Err:n}=fs;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Qa(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Qa(s.length/2|128):"";return Qa(e)+i+s+t},decode(e,t){const{Err:n}=fs;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const l=s&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const d=t.subarray(r,r+l);if(d.length!==l)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of d)o=o<<8|f;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+o);if(u.length!==o)throw new n("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=fs;if(e<hs)throw new t("integer: negative integers are not allowed");let n=Qa(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=fs;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return lO(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=fs,s=typeof e=="string"?dO(e):e;Xa(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l}=r.decode(2,i),{v:d,l:f}=r.decode(2,l);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(d)}},hexFromSig(e){const{_tlv:t,_int:n}=fs,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),i=r+s;return t.encode(48,i)}},hs=BigInt(0),zt=BigInt(1),si=BigInt(2),rf=BigInt(3),fw=BigInt(4);function hw(e){const t=uO(e),{Fp:n}=t,r=tf(t.n,t.nBitLength),s=t.toBytes||((I,k,Z)=>{const Q=k.toAffine();return Fe(Uint8Array.from([4]),n.toBytes(Q.x),n.toBytes(Q.y))}),i=t.fromBytes||(I=>{const k=I.subarray(1),Z=n.fromBytes(k.subarray(0,n.BYTES)),Q=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:Z,y:Q}});function o(I){const{a:k,b:Z}=t,Q=n.sqr(I),ee=n.mul(Q,I);return n.add(n.add(ee,n.mul(I,k)),Z)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function u(I){return ei(I,zt,t.n)}function l(I){const{allowedPrivateKeyLengths:k,nByteLength:Z,wrapPrivateKey:Q,n:ee}=t;if(k&&typeof I!="bigint"){if(ds(I)&&(I=qr(I)),typeof I!="string"||!k.includes(I.length))throw new Error("invalid private key");I=I.padStart(Z*2,"0")}let re;try{re=typeof I=="bigint"?I:v(we("private key",I,Z))}catch{throw new Error("invalid private key, expected hex or "+Z+" bytes, got "+typeof I)}return Q&&(re=kn(re,ee)),qi("private key",re,zt,ee),re}function d(I){if(!(I instanceof _))throw new Error("ProjectivePoint expected")}const f=sg((I,k)=>{const{px:Z,py:Q,pz:ee}=I;if(n.eql(ee,n.ONE))return{x:Z,y:Q};const re=I.is0();k==null&&(k=re?n.ONE:n.inv(ee));const Se=n.mul(Z,k),me=n.mul(Q,k),oe=n.mul(ee,k);if(re)return{x:n.ZERO,y:n.ZERO};if(!n.eql(oe,n.ONE))throw new Error("invZ was invalid");return{x:Se,y:me}}),g=sg(I=>{if(I.is0()){if(t.allowInfinityPoint&&!n.is0(I.py))return;throw new Error("bad point: ZERO")}const{x:k,y:Z}=I.toAffine();if(!n.isValid(k)||!n.isValid(Z))throw new Error("bad point: x or y not FE");const Q=n.sqr(Z),ee=o(k);if(!n.eql(Q,ee))throw new Error("bad point: equation left != right");if(!I.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class _{constructor(k,Z,Q){if(this.px=k,this.py=Z,this.pz=Q,k==null||!n.isValid(k))throw new Error("x required");if(Z==null||!n.isValid(Z))throw new Error("y required");if(Q==null||!n.isValid(Q))throw new Error("z required");Object.freeze(this)}static fromAffine(k){const{x:Z,y:Q}=k||{};if(!k||!n.isValid(Z)||!n.isValid(Q))throw new Error("invalid affine point");if(k instanceof _)throw new Error("projective point not allowed");const ee=re=>n.eql(re,n.ZERO);return ee(Z)&&ee(Q)?_.ZERO:new _(Z,Q,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){const Z=n.invertBatch(k.map(Q=>Q.pz));return k.map((Q,ee)=>Q.toAffine(Z[ee])).map(_.fromAffine)}static fromHex(k){const Z=_.fromAffine(i(we("pointHex",k)));return Z.assertValidity(),Z}static fromPrivateKey(k){return _.BASE.multiply(l(k))}static msm(k,Z){return cO(_,r,k,Z)}_setWindowSize(k){T.setWindowSize(this,k)}assertValidity(){g(this)}hasEvenY(){const{y:k}=this.toAffine();if(n.isOdd)return!n.isOdd(k);throw new Error("Field doesn't support isOdd")}equals(k){d(k);const{px:Z,py:Q,pz:ee}=this,{px:re,py:Se,pz:me}=k,oe=n.eql(n.mul(Z,me),n.mul(re,ee)),Ee=n.eql(n.mul(Q,me),n.mul(Se,ee));return oe&&Ee}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:k,b:Z}=t,Q=n.mul(Z,rf),{px:ee,py:re,pz:Se}=this;let me=n.ZERO,oe=n.ZERO,Ee=n.ZERO,Ie=n.mul(ee,ee),Ne=n.mul(re,re),_e=n.mul(Se,Se),Ve=n.mul(ee,re);return Ve=n.add(Ve,Ve),Ee=n.mul(ee,Se),Ee=n.add(Ee,Ee),me=n.mul(k,Ee),oe=n.mul(Q,_e),oe=n.add(me,oe),me=n.sub(Ne,oe),oe=n.add(Ne,oe),oe=n.mul(me,oe),me=n.mul(Ve,me),Ee=n.mul(Q,Ee),_e=n.mul(k,_e),Ve=n.sub(Ie,_e),Ve=n.mul(k,Ve),Ve=n.add(Ve,Ee),Ee=n.add(Ie,Ie),Ie=n.add(Ee,Ie),Ie=n.add(Ie,_e),Ie=n.mul(Ie,Ve),oe=n.add(oe,Ie),_e=n.mul(re,Se),_e=n.add(_e,_e),Ie=n.mul(_e,Ve),me=n.sub(me,Ie),Ee=n.mul(_e,Ne),Ee=n.add(Ee,Ee),Ee=n.add(Ee,Ee),new _(me,oe,Ee)}add(k){d(k);const{px:Z,py:Q,pz:ee}=this,{px:re,py:Se,pz:me}=k;let oe=n.ZERO,Ee=n.ZERO,Ie=n.ZERO;const Ne=t.a,_e=n.mul(t.b,rf);let Ve=n.mul(Z,re),Qe=n.mul(Q,Se),le=n.mul(ee,me),ce=n.add(Z,Q),ye=n.add(re,Se);ce=n.mul(ce,ye),ye=n.add(Ve,Qe),ce=n.sub(ce,ye),ye=n.add(Z,ee);let De=n.add(re,me);return ye=n.mul(ye,De),De=n.add(Ve,le),ye=n.sub(ye,De),De=n.add(Q,ee),oe=n.add(Se,me),De=n.mul(De,oe),oe=n.add(Qe,le),De=n.sub(De,oe),Ie=n.mul(Ne,ye),oe=n.mul(_e,le),Ie=n.add(oe,Ie),oe=n.sub(Qe,Ie),Ie=n.add(Qe,Ie),Ee=n.mul(oe,Ie),Qe=n.add(Ve,Ve),Qe=n.add(Qe,Ve),le=n.mul(Ne,le),ye=n.mul(_e,ye),Qe=n.add(Qe,le),le=n.sub(Ve,le),le=n.mul(Ne,le),ye=n.add(ye,le),Ve=n.mul(Qe,ye),Ee=n.add(Ee,Ve),Ve=n.mul(De,ye),oe=n.mul(ce,oe),oe=n.sub(oe,Ve),Ve=n.mul(ce,Qe),Ie=n.mul(De,Ie),Ie=n.add(Ie,Ve),new _(oe,Ee,Ie)}subtract(k){return this.add(k.negate())}is0(){return this.equals(_.ZERO)}wNAF(k){return T.wNAFCached(this,k,_.normalizeZ)}multiplyUnsafe(k){const{endo:Z,n:Q}=t;qi("scalar",k,hs,Q);const ee=_.ZERO;if(k===hs)return ee;if(this.is0()||k===zt)return this;if(!Z||T.hasPrecomputes(this))return T.wNAFCachedUnsafe(this,k,_.normalizeZ);let{k1neg:re,k1:Se,k2neg:me,k2:oe}=Z.splitScalar(k),Ee=ee,Ie=ee,Ne=this;for(;Se>hs||oe>hs;)Se&zt&&(Ee=Ee.add(Ne)),oe&zt&&(Ie=Ie.add(Ne)),Ne=Ne.double(),Se>>=zt,oe>>=zt;return re&&(Ee=Ee.negate()),me&&(Ie=Ie.negate()),Ie=new _(n.mul(Ie.px,Z.beta),Ie.py,Ie.pz),Ee.add(Ie)}multiply(k){const{endo:Z,n:Q}=t;qi("scalar",k,zt,Q);let ee,re;if(Z){const{k1neg:Se,k1:me,k2neg:oe,k2:Ee}=Z.splitScalar(k);let{p:Ie,f:Ne}=this.wNAF(me),{p:_e,f:Ve}=this.wNAF(Ee);Ie=T.constTimeNegate(Se,Ie),_e=T.constTimeNegate(oe,_e),_e=new _(n.mul(_e.px,Z.beta),_e.py,_e.pz),ee=Ie.add(_e),re=Ne.add(Ve)}else{const{p:Se,f:me}=this.wNAF(k);ee=Se,re=me}return _.normalizeZ([ee,re])[0]}multiplyAndAddUnsafe(k,Z,Q){const ee=_.BASE,re=(me,oe)=>oe===hs||oe===zt||!me.equals(ee)?me.multiplyUnsafe(oe):me.multiply(oe),Se=re(this,Z).add(re(k,Q));return Se.is0()?void 0:Se}toAffine(k){return f(this,k)}isTorsionFree(){const{h:k,isTorsionFree:Z}=t;if(k===zt)return!0;if(Z)return Z(_,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:k,clearCofactor:Z}=t;return k===zt?this:Z?Z(_,this):this.multiplyUnsafe(t.h)}toRawBytes(k=!0){return Ja("isCompressed",k),this.assertValidity(),s(_,this,k)}toHex(k=!0){return Ja("isCompressed",k),qr(this.toRawBytes(k))}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO);const b=t.nBitLength,T=oO(_,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:_,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:u}}function fO(e){const t=lw(e);return Eu(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function _g(e){const t=fO(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function o(le){return kn(le,r)}function u(le){return xu(le,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:g}=hw({...t,toBytes(le,ce,ye){const De=ce.toAffine(),Ke=n.toBytes(De.x),Ge=Fe;return Ja("isCompressed",ye),ye?Ge(Uint8Array.from([ce.hasEvenY()?2:3]),Ke):Ge(Uint8Array.from([4]),Ke,n.toBytes(De.y))},fromBytes(le){const ce=le.length,ye=le[0],De=le.subarray(1);if(ce===s&&(ye===2||ye===3)){const Ke=v(De);if(!ei(Ke,zt,n.ORDER))throw new Error("Point is not on curve");const Ge=f(Ke);let gt;try{gt=n.sqrt(Ge)}catch(vn){const fn=vn instanceof Error?": "+vn.message:"";throw new Error("Point is not on curve"+fn)}const Nt=(gt&zt)===zt;return(ye&1)===1!==Nt&&(gt=n.neg(gt)),{x:Ke,y:gt}}else if(ce===i&&ye===4){const Ke=n.fromBytes(De.subarray(0,n.BYTES)),Ge=n.fromBytes(De.subarray(n.BYTES,2*n.BYTES));return{x:Ke,y:Ge}}else{const Ke=s,Ge=i;throw new Error("invalid Point, expected length of "+Ke+", or uncompressed "+Ge+", got "+ce)}}}),_=le=>qr(H(le,t.nByteLength));function b(le){const ce=r>>zt;return le>ce}function T(le){return b(le)?o(-le):le}const I=(le,ce,ye)=>v(le.slice(ce,ye));class k{constructor(ce,ye,De){this.r=ce,this.s=ye,this.recovery=De,this.assertValidity()}static fromCompact(ce){const ye=t.nByteLength;return ce=we("compactSignature",ce,ye*2),new k(I(ce,0,ye),I(ce,ye,2*ye))}static fromDER(ce){const{r:ye,s:De}=fs.toSig(we("DER",ce));return new k(ye,De)}assertValidity(){qi("r",this.r,zt,r),qi("s",this.s,zt,r)}addRecoveryBit(ce){return new k(this.r,this.s,ce)}recoverPublicKey(ce){const{r:ye,s:De,recovery:Ke}=this,Ge=me(we("msgHash",ce));if(Ke==null||![0,1,2,3].includes(Ke))throw new Error("recovery id invalid");const gt=Ke===2||Ke===3?ye+t.n:ye;if(gt>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Nt=Ke&1?"03":"02",Xt=l.fromHex(Nt+_(gt)),vn=u(gt),fn=o(-Ge*vn),Kr=o(De*vn),Sr=l.BASE.multiplyAndAddUnsafe(Xt,fn,Kr);if(!Sr)throw new Error("point at infinify");return Sr.assertValidity(),Sr}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new k(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return y(this.toDERHex())}toDERHex(){return fs.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return y(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}const Z={isValidPrivateKey(le){try{return d(le),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const le=rw(t.n);return aO(t.randomBytes(le),t.n)},precompute(le=8,ce=l.BASE){return ce._setWindowSize(le),ce.multiply(BigInt(3)),ce}};function Q(le,ce=!0){return l.fromPrivateKey(le).toRawBytes(ce)}function ee(le){const ce=ds(le),ye=typeof le=="string",De=(ce||ye)&&le.length;return ce?De===s||De===i:ye?De===2*s||De===2*i:le instanceof l}function re(le,ce,ye=!0){if(ee(le))throw new Error("first arg must be private key");if(!ee(ce))throw new Error("second arg must be public key");return l.fromHex(ce).multiply(d(le)).toRawBytes(ye)}const Se=t.bits2int||function(le){if(le.length>8192)throw new Error("input is too large");const ce=v(le),ye=le.length*8-t.nBitLength;return ye>0?ce>>BigInt(ye):ce},me=t.bits2int_modN||function(le){return o(Se(le))},oe=Xd(t.nBitLength);function Ee(le){return qi("num < 2^"+t.nBitLength,le,hs,oe),H(le,t.nByteLength)}function Ie(le,ce,ye=Ne){if(["recovered","canonical"].some(Is=>Is in ye))throw new Error("sign() legacy options not supported");const{hash:De,randomBytes:Ke}=t;let{lowS:Ge,prehash:gt,extraEntropy:Nt}=ye;Ge==null&&(Ge=!0),le=we("msgHash",le),dw(ye),gt&&(le=we("prehashed msgHash",De(le)));const Xt=me(le),vn=d(ce),fn=[Ee(vn),Ee(Xt)];if(Nt!=null&&Nt!==!1){const Is=Nt===!0?Ke(n.BYTES):Nt;fn.push(we("extraEntropy",Is))}const Kr=Fe(...fn),Sr=Xt;function is(Is){const kr=Se(Is);if(!g(kr))return;const ha=u(kr),ji=l.BASE.multiply(kr).toAffine(),Kn=o(ji.x);if(Kn===hs)return;const os=o(ha*o(Sr+Kn*vn));if(os===hs)return;let Os=(ji.x===Kn?0:2)|Number(ji.y&zt),Hd=os;return Ge&&b(os)&&(Hd=T(os),Os^=1),new k(Kn,Hd,Os)}return{seed:Kr,k2sig:is}}const Ne={lowS:t.lowS,prehash:!1},_e={lowS:t.lowS,prehash:!1};function Ve(le,ce,ye=Ne){const{seed:De,k2sig:Ke}=Ie(le,ce,ye),Ge=t;return Db(Ge.hash.outputLen,Ge.nByteLength,Ge.hmac)(De,Ke)}l.BASE._setWindowSize(8);function Qe(le,ce,ye,De=_e){const Ke=le;ce=we("msgHash",ce),ye=we("publicKey",ye);const{lowS:Ge,prehash:gt,format:Nt}=De;if(dw(De),"strict"in De)throw new Error("options.strict was renamed to lowS");if(Nt!==void 0&&Nt!=="compact"&&Nt!=="der")throw new Error("format must be compact or der");const Xt=typeof Ke=="string"||ds(Ke),vn=!Xt&&!Nt&&typeof Ke=="object"&&Ke!==null&&typeof Ke.r=="bigint"&&typeof Ke.s=="bigint";if(!Xt&&!vn)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let fn,Kr;try{if(vn&&(fn=new k(Ke.r,Ke.s)),Xt){try{Nt!=="compact"&&(fn=k.fromDER(Ke))}catch(Os){if(!(Os instanceof fs.Err))throw Os}!fn&&Nt!=="der"&&(fn=k.fromCompact(Ke))}Kr=l.fromHex(ye)}catch{return!1}if(!fn||Ge&&fn.hasHighS())return!1;gt&&(ce=t.hash(ce));const{r:Sr,s:is}=fn,Is=me(ce),kr=u(is),ha=o(Is*kr),ji=o(Sr*kr),Kn=l.BASE.multiplyAndAddUnsafe(Kr,ha,ji)?.toAffine();return Kn?o(Kn.x)===Sr:!1}return{CURVE:t,getPublicKey:Q,getSharedSecret:re,sign:Ve,verify:Qe,ProjectivePoint:l,Signature:k,utils:Z}}function pw(e,t){const n=e.ORDER;let r=hs;for(let T=n-zt;T%si===hs;T/=si)r+=zt;const s=r,i=si<<s-zt-zt,o=i*si,u=(n-zt)/o,l=(u-zt)/si,d=o-zt,f=i,g=e.pow(t,u),_=e.pow(t,(u+zt)/si);let b=(T,I)=>{let k=g,Z=e.pow(I,d),Q=e.sqr(Z);Q=e.mul(Q,I);let ee=e.mul(T,Q);ee=e.pow(ee,l),ee=e.mul(ee,Z),Z=e.mul(ee,I),Q=e.mul(ee,T);let re=e.mul(Q,Z);ee=e.pow(re,f);let Se=e.eql(ee,e.ONE);Z=e.mul(Q,_),ee=e.mul(re,k),Q=e.cmov(Z,Q,Se),re=e.cmov(ee,re,Se);for(let me=s;me>zt;me--){let oe=me-si;oe=si<<oe-zt;let Ee=e.pow(re,oe);const Ie=e.eql(Ee,e.ONE);Z=e.mul(Q,k),k=e.mul(k,k),Ee=e.mul(re,k),Q=e.cmov(Z,Q,Ie),re=e.cmov(Ee,re,Ie)}return{isValid:Se,value:Q}};if(e.ORDER%fw===rf){const T=(e.ORDER-rf)/fw,I=e.sqrt(e.neg(t));b=(k,Z)=>{let Q=e.sqr(Z);const ee=e.mul(k,Z);Q=e.mul(Q,ee);let re=e.pow(Q,T);re=e.mul(re,ee);const Se=e.mul(re,I),me=e.mul(e.sqr(re),Z),oe=e.eql(me,k);let Ee=e.cmov(Se,re,oe);return{isValid:oe,value:Ee}}}return b}function hO(e,t){if(ef(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=pw(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,u,l,d,f,g;s=e.sqr(r),s=e.mul(s,t.Z),i=e.sqr(s),i=e.add(i,s),o=e.add(i,e.ONE),o=e.mul(o,t.B),u=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),u=e.mul(u,t.A),i=e.sqr(o),d=e.sqr(u),l=e.mul(d,t.A),i=e.add(i,l),i=e.mul(i,o),d=e.mul(d,u),l=e.mul(d,t.B),i=e.add(i,l),f=e.mul(s,o);const{isValid:_,value:b}=n(i,d);g=e.mul(s,r),g=e.mul(g,b),f=e.cmov(f,o,_),g=e.cmov(g,b,_);const T=e.isOdd(r)===e.isOdd(g);return g=e.cmov(e.neg(g),g,T),f=e.div(f,u),{x:f,y:g}}}class gw extends og{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Pb(t);const r=sc(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Gi(this),this.iHash.update(t),this}digestInto(t){Gi(this),nc(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const mw=(e,t,n)=>new gw(e,t).update(n).digest();mw.create=(e,t)=>new gw(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _w(e){return{hash:e,hmac:(t,...n)=>mw(e,t,xI(...n)),randomBytes:AI}}function pO(e,t){const n=r=>_g({...e,..._w(r)});return Object.freeze({...n(t),create:n})}/*! scure-starknet - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Au=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),Yi=BigInt("0x800000000000000000000000000000000000000000000000000000000000000"),yw=252;function bw(e){for(;e[0]===0;)e=e.subarray(1);const t=e.length*8-yw,n=v(e);return t>0?n>>BigInt(t):n}function ww(e){return typeof e=="string"&&(e=wg(e),e.length&1&&(e="0"+e)),y(e)}const Xi=_g({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:tf(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:Au,nBitLength:yw,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,..._w(ac),bits2int:bw,bits2int_modN:e=>{const t=v(e).toString(16);return t.length===63&&(e=ww(t+"0")),kn(bw(e),Au)}}),gO=Xi;function ic(e){return we("",typeof e=="string"?ww(e):e)}function sf(e){return qr(ic(e)).padStart(64,"0")}function af(e,t=!1){return Xi.getPublicKey(sf(e),t)}function mO(e,t){return Xi.getSharedSecret(sf(e),t)}function Ew(e){const{r:t,s:n}=e;if(t<0n||t>=Yi)throw new Error(`Signature.r should be [1, ${Yi})`);const r=xu(n,Au);if(r<0n||r>=Yi)throw new Error(`inv(Signature.s) should be [1, ${Yi})`)}function vw(e){const t=ic(e);if(v(t)>=Yi)throw new Error(`msgHash should be [0, ${Yi})`);return t}function yg(e,t,n){const r=Xi.sign(vw(e),sf(t),n);return Ew(r),r}function bg(e,t,n){if(!(e instanceof Ls)){const r=ic(e);try{e=Ls.fromDER(r)}catch(s){if(!(s instanceof fs.Err))throw s;e=Ls.fromCompact(r)}}return Ew(e),Xi.verify(e,vw(t),ic(n))}const{CURVE:_O,ProjectivePoint:oc,Signature:Ls,utils:Su}=Xi;function Tw(e){return`0x${qr(e.subarray(1)).replace(/^0+/gm,"")}`}function wg(e){return e.replace(/^0x/i,"")}function xw(e){const t=ic(e),n=2n**256n,r=n-kn(n,Au);for(let s=0;;s++){const i=Eg(Fe(t,ve(BigInt(s))));if(i<r)return kn(i,Au).toString(16);if(s===1e5)throw new Error("grindKey is broken: tried 100k vals")}}function ku(e){return Tw(af(e,!0))}function yO(e){if(e=wg(e),e.length!==130)throw new Error("Wrong ethereum signature");return xw(e.substring(0,64))}const bO=2n**31n-1n,of=e=>Number(e&bO);function wO(e,t,n,r){const s=of(Eg(e)),i=of(Eg(t)),o=tc(wg(n));return`m/2645'/${s}'/${i}'/${of(o)}'/${of(o>>31n)}'/${r}`}const Cu=[new oc(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new oc(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new oc(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new oc(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new oc(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function Aw(e,t){const n=[];let r=e;for(let s=0;s<248;s++)n.push(r),r=r.double();r=t;for(let s=0;s<4;s++)n.push(r),r=r.double();return n}const EO=Aw(Cu[1],Cu[2]),vO=Aw(Cu[3],Cu[4]);function TO(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"){if(!Number.isSafeInteger(e))throw new Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=v(ic(e));if(!(0n<=t&&t<Xi.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}function Sw(e,t,n){let r=TO(t);for(let s=0;s<252;s++){const i=n[s];if(!i)throw new Error("invalid constant index");if(i.equals(e))throw new Error("Same point");(r&1n)!==0n&&(e=e.add(i)),r>>=1n}return e}function Us(e,t){let n=Cu[0];return n=Sw(n,e,EO),n=Sw(n,t,vO),Tw(n.toRawBytes(!0))}const xO=(e,t=Us)=>[0,...e,e.length].reduce((n,r)=>t(n,r)),AO=Xd(250),sr=e=>v(ug(e))&AO,Eg=e=>v(ac(e)),kw=tf(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function vg(e,t,n){const r=e.fromBytes(ac(Vb(`${t}${n}`)));return e.create(r)}function Cw(e,t,n,r=0){const s=[],i=[];for(let o=0;o<n;o++)s.push(vg(e,`${t}x`,r*n+o)),i.push(vg(e,`${t}y`,r*n+o));if(new Set([...s,...i]).size!==2*n)throw new Error("X and Y values are not distinct");return s.map(o=>i.map(u=>e.inv(e.sub(o,u))))}const SO=[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt));function Tg(e,t){if(ef(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw new Error(`Wrong poseidon opts: ${e}`);const n=e.rate+e.capacity,r=e.roundsFull+e.roundsPartial,s=[];for(let o=0;o<r;o++){const u=[];for(let l=0;l<n;l++)u.push(vg(e.Fp,"Hades",n*o+l));s.push(u)}const i=aw({...e,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:s});return i.m=n,i.rate=e.rate,i.capacity=e.capacity,i}function kO(e,t=0){const n=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw new Error(`Wrong mdsAttempt=${t}`);return Tg(e,Cw(e.Fp,"HadesMDS",n,t))}const Iu=Tg({Fp:kw,rate:2,capacity:1,roundsFull:8,roundsPartial:83},SO);function cf(e,t,n=Iu){return n([e,t,2n])[0]}function CO(e,t,n=Iu){return ve(cf(v(e),v(t),n))}function IO(e,t=Iu){return t([e,0n,1n])[0]}function Ct(e,t=Iu){const{m:n,rate:r}=t;if(!Array.isArray(e))throw new Error("bigint array expected in values");const s=Array.from(e);for(s.push(1n);s.length%r!==0;)s.push(0n);let i=new Array(n).fill(0n);for(let o=0;o<s.length;o+=r){for(let u=0;u<r;u++){const l=s[o+u];if(typeof l>"u")throw new Error("invalid index");if(typeof i[u]>"u")throw new Error("state[j] is undefined");i[u]=i[u]+l}i=t(i)}return i[0]}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const OO=4,Iw=0,Ow=1,NO=2;function cc(e){let t=e.length;for(;--t>=0;)e[t]=0}const RO=0,Nw=1,BO=2,DO=3,PO=258,xg=29,Ou=256,Nu=Ou+1+xg,uc=30,Ag=19,Rw=2*Nu+1,Ji=15,Sg=16,LO=7,kg=256,Bw=16,Dw=17,Pw=18,Cg=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),uf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),UO=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Lw=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),MO=512,ba=new Array((Nu+2)*2);cc(ba);const Ru=new Array(uc*2);cc(Ru);const Bu=new Array(MO);cc(Bu);const Du=new Array(PO-DO+1);cc(Du);const Ig=new Array(xg);cc(Ig);const lf=new Array(uc);cc(lf);function Og(e,t,n,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}let Uw,Mw,Vw;function Ng(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Fw=e=>e<256?Bu[e]:Bu[256+(e>>>7)],Pu=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},_r=(e,t,n)=>{e.bi_valid>Sg-n?(e.bi_buf|=t<<e.bi_valid&65535,Pu(e,e.bi_buf),e.bi_buf=t>>Sg-e.bi_valid,e.bi_valid+=n-Sg):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Ms=(e,t,n)=>{_r(e,n[t*2],n[t*2+1])},Hw=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},VO=e=>{e.bi_valid===16?(Pu(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},FO=(e,t)=>{const n=t.dyn_tree,r=t.max_code,s=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,l=t.stat_desc.max_length;let d,f,g,_,b,T,I=0;for(_=0;_<=Ji;_++)e.bl_count[_]=0;for(n[e.heap[e.heap_max]*2+1]=0,d=e.heap_max+1;d<Rw;d++)f=e.heap[d],_=n[n[f*2+1]*2+1]+1,_>l&&(_=l,I++),n[f*2+1]=_,!(f>r)&&(e.bl_count[_]++,b=0,f>=u&&(b=o[f-u]),T=n[f*2],e.opt_len+=T*(_+b),i&&(e.static_len+=T*(s[f*2+1]+b)));if(I!==0){do{for(_=l-1;e.bl_count[_]===0;)_--;e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[l]--,I-=2}while(I>0);for(_=l;_!==0;_--)for(f=e.bl_count[_];f!==0;)g=e.heap[--d],!(g>r)&&(n[g*2+1]!==_&&(e.opt_len+=(_-n[g*2+1])*n[g*2],n[g*2+1]=_),f--)}},$w=(e,t,n)=>{const r=new Array(Ji+1);let s=0,i,o;for(i=1;i<=Ji;i++)s=s+n[i-1]<<1,r[i]=s;for(o=0;o<=t;o++){let u=e[o*2+1];u!==0&&(e[o*2]=Hw(r[u]++,u))}},HO=()=>{let e,t,n,r,s;const i=new Array(Ji+1);for(n=0,r=0;r<xg-1;r++)for(Ig[r]=n,e=0;e<1<<Cg[r];e++)Du[n++]=r;for(Du[n-1]=r,s=0,r=0;r<16;r++)for(lf[r]=s,e=0;e<1<<uf[r];e++)Bu[s++]=r;for(s>>=7;r<uc;r++)for(lf[r]=s<<7,e=0;e<1<<uf[r]-7;e++)Bu[256+s++]=r;for(t=0;t<=Ji;t++)i[t]=0;for(e=0;e<=143;)ba[e*2+1]=8,e++,i[8]++;for(;e<=255;)ba[e*2+1]=9,e++,i[9]++;for(;e<=279;)ba[e*2+1]=7,e++,i[7]++;for(;e<=287;)ba[e*2+1]=8,e++,i[8]++;for($w(ba,Nu+1,i),e=0;e<uc;e++)Ru[e*2+1]=5,Ru[e*2]=Hw(e,5);Uw=new Og(ba,Cg,Ou+1,Nu,Ji),Mw=new Og(Ru,uf,0,uc,Ji),Vw=new Og(new Array(0),UO,0,Ag,LO)},jw=e=>{let t;for(t=0;t<Nu;t++)e.dyn_ltree[t*2]=0;for(t=0;t<uc;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Ag;t++)e.bl_tree[t*2]=0;e.dyn_ltree[kg*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Zw=e=>{e.bi_valid>8?Pu(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},zw=(e,t,n,r)=>{const s=t*2,i=n*2;return e[s]<e[i]||e[s]===e[i]&&r[t]<=r[n]},Rg=(e,t,n)=>{const r=e.heap[n];let s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&zw(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!zw(t,r,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=r},Kw=(e,t,n)=>{let r,s,i=0,o,u;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+i++]&255,r+=(e.pending_buf[e.sym_buf+i++]&255)<<8,s=e.pending_buf[e.sym_buf+i++],r===0?Ms(e,s,t):(o=Du[s],Ms(e,o+Ou+1,t),u=Cg[o],u!==0&&(s-=Ig[o],_r(e,s,u)),r--,o=Fw(r),Ms(e,o,n),u=uf[o],u!==0&&(r-=lf[o],_r(e,r,u)));while(i<e.sym_next);Ms(e,kg,t)},Bg=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.elems;let o,u,l=-1,d;for(e.heap_len=0,e.heap_max=Rw,o=0;o<i;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)d=e.heap[++e.heap_len]=l<2?++l:0,n[d*2]=1,e.depth[d]=0,e.opt_len--,s&&(e.static_len-=r[d*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)Rg(e,n,o);d=i;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Rg(e,n,1),u=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=u,n[d*2]=n[o*2]+n[u*2],e.depth[d]=(e.depth[o]>=e.depth[u]?e.depth[o]:e.depth[u])+1,n[o*2+1]=n[u*2+1]=d,e.heap[1]=d++,Rg(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],FO(e,t),$w(n,l,e.bl_count)},Ww=(e,t,n)=>{let r,s=-1,i,o=t[0*2+1],u=0,l=7,d=4;for(o===0&&(l=138,d=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)i=o,o=t[(r+1)*2+1],!(++u<l&&i===o)&&(u<d?e.bl_tree[i*2]+=u:i!==0?(i!==s&&e.bl_tree[i*2]++,e.bl_tree[Bw*2]++):u<=10?e.bl_tree[Dw*2]++:e.bl_tree[Pw*2]++,u=0,s=i,o===0?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4))},qw=(e,t,n)=>{let r,s=-1,i,o=t[0*2+1],u=0,l=7,d=4;for(o===0&&(l=138,d=3),r=0;r<=n;r++)if(i=o,o=t[(r+1)*2+1],!(++u<l&&i===o)){if(u<d)do Ms(e,i,e.bl_tree);while(--u!==0);else i!==0?(i!==s&&(Ms(e,i,e.bl_tree),u--),Ms(e,Bw,e.bl_tree),_r(e,u-3,2)):u<=10?(Ms(e,Dw,e.bl_tree),_r(e,u-3,3)):(Ms(e,Pw,e.bl_tree),_r(e,u-11,7));u=0,s=i,o===0?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4)}},$O=e=>{let t;for(Ww(e,e.dyn_ltree,e.l_desc.max_code),Ww(e,e.dyn_dtree,e.d_desc.max_code),Bg(e,e.bl_desc),t=Ag-1;t>=3&&e.bl_tree[Lw[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},jO=(e,t,n,r)=>{let s;for(_r(e,t-257,5),_r(e,n-1,5),_r(e,r-4,4),s=0;s<r;s++)_r(e,e.bl_tree[Lw[s]*2+1],3);qw(e,e.dyn_ltree,t-1),qw(e,e.dyn_dtree,n-1)},ZO=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Iw;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Ow;for(n=32;n<Ou;n++)if(e.dyn_ltree[n*2]!==0)return Ow;return Iw};let Gw=!1;const zO=e=>{Gw||(HO(),Gw=!0),e.l_desc=new Ng(e.dyn_ltree,Uw),e.d_desc=new Ng(e.dyn_dtree,Mw),e.bl_desc=new Ng(e.bl_tree,Vw),e.bi_buf=0,e.bi_valid=0,jw(e)},Yw=(e,t,n,r)=>{_r(e,(RO<<1)+(r?1:0),3),Zw(e),Pu(e,n),Pu(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},KO=e=>{_r(e,Nw<<1,3),Ms(e,kg,ba),VO(e)},WO=(e,t,n,r)=>{let s,i,o=0;e.level>0?(e.strm.data_type===NO&&(e.strm.data_type=ZO(e)),Bg(e,e.l_desc),Bg(e,e.d_desc),o=$O(e),s=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=s&&(s=i)):s=i=n+5,n+4<=s&&t!==-1?Yw(e,t,n,r):e.strategy===OO||i===s?(_r(e,(Nw<<1)+(r?1:0),3),Kw(e,ba,Ru)):(_r(e,(BO<<1)+(r?1:0),3),jO(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Kw(e,e.dyn_ltree,e.dyn_dtree)),jw(e),r&&Zw(e)},qO=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Du[n]+Ou+1)*2]++,e.dyn_dtree[Fw(t)*2]++),e.sym_next===e.sym_end);var GO=zO,YO=Yw,XO=WO,JO=qO,QO=KO,eN={_tr_init:GO,_tr_stored_block:YO,_tr_flush_block:XO,_tr_tally:JO,_tr_align:QO},Lu=(e,t,n,r)=>{let s=e&65535|0,i=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do s=s+t[r++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};const tN=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},nN=new Uint32Array(tN());var Fn=(e,t,n,r)=>{const s=nN,i=r+n;e^=-1;for(let o=r;o<i;o++)e=e>>>8^s[(e^t[o])&255];return e^-1},Qi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:rN,_tr_stored_block:Dg,_tr_flush_block:sN,_tr_tally:ai,_tr_align:aN}=eN,{Z_NO_FLUSH:ii,Z_PARTIAL_FLUSH:iN,Z_FULL_FLUSH:oN,Z_FINISH:Xr,Z_BLOCK:Xw,Z_OK:Gn,Z_STREAM_END:Jw,Z_STREAM_ERROR:Vs,Z_DATA_ERROR:cN,Z_BUF_ERROR:Pg,Z_DEFAULT_COMPRESSION:uN,Z_FILTERED:lN,Z_HUFFMAN_ONLY:df,Z_RLE:dN,Z_FIXED:fN,Z_DEFAULT_STRATEGY:hN,Z_UNKNOWN:pN,Z_DEFLATED:ff}=eo,gN=9,mN=15,_N=8,Lg=256+1+29,yN=30,bN=19,wN=2*Lg+1,EN=15,It=3,oi=258,Fs=oi+It+1,vN=32,lc=42,Ug=57,Mg=69,Vg=73,Fg=91,Hg=103,to=113,Uu=666,ar=1,dc=2,no=3,fc=4,TN=3,ro=(e,t)=>(e.msg=Qi[t],t),Qw=e=>e*2-(e>4?9:0),ci=e=>{let t=e.length;for(;--t>=0;)e[t]=0},xN=e=>{let t,n,r,s=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=s?n-s:0;while(--t);t=s,r=t;do n=e.prev[--r],e.prev[r]=n>=s?n-s:0;while(--t)};let ui=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Nr=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Rr=(e,t)=>{sN(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Nr(e.strm)},Ft=(e,t)=>{e.pending_buf[e.pending++]=t},Mu=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},$g=(e,t,n,r)=>{let s=e.avail_in;return s>r&&(s=r),s===0?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),e.state.wrap===1?e.adler=Lu(e.adler,t,s,n):e.state.wrap===2&&(e.adler=Fn(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},eE=(e,t)=>{let n=e.max_chain_length,r=e.strstart,s,i,o=e.prev_length,u=e.nice_match;const l=e.strstart>e.w_size-Fs?e.strstart-(e.w_size-Fs):0,d=e.window,f=e.w_mask,g=e.prev,_=e.strstart+oi;let b=d[r+o-1],T=d[r+o];e.prev_length>=e.good_match&&(n>>=2),u>e.lookahead&&(u=e.lookahead);do if(s=t,!(d[s+o]!==T||d[s+o-1]!==b||d[s]!==d[r]||d[++s]!==d[r+1])){r+=2,s++;do;while(d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&r<_);if(i=oi-(_-r),r=_-oi,i>o){if(e.match_start=t,o=i,i>=u)break;b=d[r+o-1],T=d[r+o]}}while((t=g[t&f])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},hc=e=>{const t=e.w_size;let n,r,s;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Fs)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),xN(e),r+=t),e.strm.avail_in===0)break;if(n=$g(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=It)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=ui(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=ui(e,e.ins_h,e.window[s+It-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<It)););}while(e.lookahead<Fs&&e.strm.avail_in!==0)},tE=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,s,i,o=0,u=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,s=e.strstart-e.block_start,r>s+e.strm.avail_in&&(r=s+e.strm.avail_in),r>i&&(r=i),r<n&&(r===0&&t!==Xr||t===ii||r!==s+e.strm.avail_in)))break;o=t===Xr&&r===s+e.strm.avail_in?1:0,Dg(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Nr(e.strm),s&&(s>r&&(s=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,r-=s),r&&($g(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return u-=e.strm.avail_in,u&&(u>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=u&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-u,e.strm.next_in),e.strstart),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?fc:t!==ii&&t!==Xr&&e.strm.avail_in===0&&e.strstart===e.block_start?dc:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&($g(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,n=i>e.w_size?e.w_size:i,s=e.strstart-e.block_start,(s>=n||(s||t===Xr)&&t!==ii&&e.strm.avail_in===0&&s<=i)&&(r=s>i?i:s,o=t===Xr&&e.strm.avail_in===0&&r===s?1:0,Dg(e,e.block_start,r,o),e.block_start+=r,Nr(e.strm)),o?no:ar)},jg=(e,t)=>{let n,r;for(;;){if(e.lookahead<Fs){if(hc(e),e.lookahead<Fs&&t===ii)return ar;if(e.lookahead===0)break}if(n=0,e.lookahead>=It&&(e.ins_h=ui(e,e.ins_h,e.window[e.strstart+It-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Fs&&(e.match_length=eE(e,n)),e.match_length>=It)if(r=ai(e,e.strstart-e.match_start,e.match_length-It),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=It){e.match_length--;do e.strstart++,e.ins_h=ui(e,e.ins_h,e.window[e.strstart+It-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ui(e,e.ins_h,e.window[e.strstart+1]);else r=ai(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Rr(e,!1),e.strm.avail_out===0))return ar}return e.insert=e.strstart<It-1?e.strstart:It-1,t===Xr?(Rr(e,!0),e.strm.avail_out===0?no:fc):e.sym_next&&(Rr(e,!1),e.strm.avail_out===0)?ar:dc},pc=(e,t)=>{let n,r,s;for(;;){if(e.lookahead<Fs){if(hc(e),e.lookahead<Fs&&t===ii)return ar;if(e.lookahead===0)break}if(n=0,e.lookahead>=It&&(e.ins_h=ui(e,e.ins_h,e.window[e.strstart+It-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=It-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Fs&&(e.match_length=eE(e,n),e.match_length<=5&&(e.strategy===lN||e.match_length===It&&e.strstart-e.match_start>4096)&&(e.match_length=It-1)),e.prev_length>=It&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-It,r=ai(e,e.strstart-1-e.prev_match,e.prev_length-It),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=ui(e,e.ins_h,e.window[e.strstart+It-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=It-1,e.strstart++,r&&(Rr(e,!1),e.strm.avail_out===0))return ar}else if(e.match_available){if(r=ai(e,0,e.window[e.strstart-1]),r&&Rr(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ar}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=ai(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<It-1?e.strstart:It-1,t===Xr?(Rr(e,!0),e.strm.avail_out===0?no:fc):e.sym_next&&(Rr(e,!1),e.strm.avail_out===0)?ar:dc},AN=(e,t)=>{let n,r,s,i;const o=e.window;for(;;){if(e.lookahead<=oi){if(hc(e),e.lookahead<=oi&&t===ii)return ar;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=It&&e.strstart>0&&(s=e.strstart-1,r=o[s],r===o[++s]&&r===o[++s]&&r===o[++s])){i=e.strstart+oi;do;while(r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&s<i);e.match_length=oi-(i-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=It?(n=ai(e,1,e.match_length-It),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=ai(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Rr(e,!1),e.strm.avail_out===0))return ar}return e.insert=0,t===Xr?(Rr(e,!0),e.strm.avail_out===0?no:fc):e.sym_next&&(Rr(e,!1),e.strm.avail_out===0)?ar:dc},SN=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(hc(e),e.lookahead===0)){if(t===ii)return ar;break}if(e.match_length=0,n=ai(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Rr(e,!1),e.strm.avail_out===0))return ar}return e.insert=0,t===Xr?(Rr(e,!0),e.strm.avail_out===0?no:fc):e.sym_next&&(Rr(e,!1),e.strm.avail_out===0)?ar:dc};function Hs(e,t,n,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=s}const Vu=[new Hs(0,0,0,0,tE),new Hs(4,4,8,4,jg),new Hs(4,5,16,8,jg),new Hs(4,6,32,32,jg),new Hs(4,4,16,16,pc),new Hs(8,16,32,32,pc),new Hs(8,16,128,128,pc),new Hs(8,32,128,256,pc),new Hs(32,128,258,1024,pc),new Hs(32,258,258,4096,pc)],kN=e=>{e.window_size=2*e.w_size,ci(e.head),e.max_lazy_match=Vu[e.level].max_lazy,e.good_match=Vu[e.level].good_length,e.nice_match=Vu[e.level].nice_length,e.max_chain_length=Vu[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=It-1,e.match_available=0,e.ins_h=0};function CN(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ff,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(wN*2),this.dyn_dtree=new Uint16Array((2*yN+1)*2),this.bl_tree=new Uint16Array((2*bN+1)*2),ci(this.dyn_ltree),ci(this.dyn_dtree),ci(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(EN+1),this.heap=new Uint16Array(2*Lg+1),ci(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Lg+1),ci(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Fu=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==lc&&t.status!==Ug&&t.status!==Mg&&t.status!==Vg&&t.status!==Fg&&t.status!==Hg&&t.status!==to&&t.status!==Uu?1:0},nE=e=>{if(Fu(e))return ro(e,Vs);e.total_in=e.total_out=0,e.data_type=pN;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Ug:t.wrap?lc:to,e.adler=t.wrap===2?0:1,t.last_flush=-2,rN(t),Gn},rE=e=>{const t=nE(e);return t===Gn&&kN(e.state),t},IN=(e,t)=>Fu(e)||e.state.wrap!==2?Vs:(e.state.gzhead=t,Gn),sE=(e,t,n,r,s,i)=>{if(!e)return Vs;let o=1;if(t===uN&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>gN||n!==ff||r<8||r>15||t<0||t>9||i<0||i>fN||r===8&&o!==1)return ro(e,Vs);r===8&&(r=9);const u=new CN;return e.state=u,u.strm=e,u.status=lc,u.wrap=o,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=s+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+It-1)/It),u.window=new Uint8Array(u.w_size*2),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<s+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=(u.lit_bufsize-1)*3,u.level=t,u.strategy=i,u.method=n,rE(e)},ON=(e,t)=>sE(e,t,ff,mN,_N,hN),NN=(e,t)=>{if(Fu(e)||t>Xw||t<0)return e?ro(e,Vs):Vs;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===Uu&&t!==Xr)return ro(e,e.avail_out===0?Pg:Vs);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(Nr(e),e.avail_out===0)return n.last_flush=-1,Gn}else if(e.avail_in===0&&Qw(t)<=Qw(r)&&t!==Xr)return ro(e,Pg);if(n.status===Uu&&e.avail_in!==0)return ro(e,Pg);if(n.status===lc&&n.wrap===0&&(n.status=to),n.status===lc){let s=ff+(n.w_bits-8<<4)<<8,i=-1;if(n.strategy>=df||n.level<2?i=0:n.level<6?i=1:n.level===6?i=2:i=3,s|=i<<6,n.strstart!==0&&(s|=vN),s+=31-s%31,Mu(n,s),n.strstart!==0&&(Mu(n,e.adler>>>16),Mu(n,e.adler&65535)),e.adler=1,n.status=to,Nr(e),n.pending!==0)return n.last_flush=-1,Gn}if(n.status===Ug){if(e.adler=0,Ft(n,31),Ft(n,139),Ft(n,8),n.gzhead)Ft(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ft(n,n.gzhead.time&255),Ft(n,n.gzhead.time>>8&255),Ft(n,n.gzhead.time>>16&255),Ft(n,n.gzhead.time>>24&255),Ft(n,n.level===9?2:n.strategy>=df||n.level<2?4:0),Ft(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Ft(n,n.gzhead.extra.length&255),Ft(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Fn(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Mg;else if(Ft(n,0),Ft(n,0),Ft(n,0),Ft(n,0),Ft(n,0),Ft(n,n.level===9?2:n.strategy>=df||n.level<2?4:0),Ft(n,TN),n.status=to,Nr(e),n.pending!==0)return n.last_flush=-1,Gn}if(n.status===Mg){if(n.gzhead.extra){let s=n.pending,i=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let u=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+u),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>s&&(e.adler=Fn(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex+=u,Nr(e),n.pending!==0)return n.last_flush=-1,Gn;s=0,i-=u}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>s&&(e.adler=Fn(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex=0}n.status=Vg}if(n.status===Vg){if(n.gzhead.name){let s=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>s&&(e.adler=Fn(e.adler,n.pending_buf,n.pending-s,s)),Nr(e),n.pending!==0)return n.last_flush=-1,Gn;s=0}n.gzindex<n.gzhead.name.length?i=n.gzhead.name.charCodeAt(n.gzindex++)&255:i=0,Ft(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>s&&(e.adler=Fn(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex=0}n.status=Fg}if(n.status===Fg){if(n.gzhead.comment){let s=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>s&&(e.adler=Fn(e.adler,n.pending_buf,n.pending-s,s)),Nr(e),n.pending!==0)return n.last_flush=-1,Gn;s=0}n.gzindex<n.gzhead.comment.length?i=n.gzhead.comment.charCodeAt(n.gzindex++)&255:i=0,Ft(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>s&&(e.adler=Fn(e.adler,n.pending_buf,n.pending-s,s))}n.status=Hg}if(n.status===Hg){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Nr(e),n.pending!==0))return n.last_flush=-1,Gn;Ft(n,e.adler&255),Ft(n,e.adler>>8&255),e.adler=0}if(n.status=to,Nr(e),n.pending!==0)return n.last_flush=-1,Gn}if(e.avail_in!==0||n.lookahead!==0||t!==ii&&n.status!==Uu){let s=n.level===0?tE(n,t):n.strategy===df?SN(n,t):n.strategy===dN?AN(n,t):Vu[n.level].func(n,t);if((s===no||s===fc)&&(n.status=Uu),s===ar||s===no)return e.avail_out===0&&(n.last_flush=-1),Gn;if(s===dc&&(t===iN?aN(n):t!==Xw&&(Dg(n,0,0,!1),t===oN&&(ci(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Nr(e),e.avail_out===0))return n.last_flush=-1,Gn}return t!==Xr?Gn:n.wrap<=0?Jw:(n.wrap===2?(Ft(n,e.adler&255),Ft(n,e.adler>>8&255),Ft(n,e.adler>>16&255),Ft(n,e.adler>>24&255),Ft(n,e.total_in&255),Ft(n,e.total_in>>8&255),Ft(n,e.total_in>>16&255),Ft(n,e.total_in>>24&255)):(Mu(n,e.adler>>>16),Mu(n,e.adler&65535)),Nr(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Gn:Jw)},RN=e=>{if(Fu(e))return Vs;const t=e.state.status;return e.state=null,t===to?ro(e,cN):Gn},BN=(e,t)=>{let n=t.length;if(Fu(e))return Vs;const r=e.state,s=r.wrap;if(s===2||s===1&&r.status!==lc||r.lookahead)return Vs;if(s===1&&(e.adler=Lu(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){s===0&&(ci(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const i=e.avail_in,o=e.next_in,u=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,hc(r);r.lookahead>=It;){let l=r.strstart,d=r.lookahead-(It-1);do r.ins_h=ui(r,r.ins_h,r.window[l+It-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--d);r.strstart=l,r.lookahead=It-1,hc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=It-1,r.match_available=0,e.next_in=o,e.input=u,e.avail_in=i,r.wrap=s,Gn};var DN=ON,PN=sE,LN=rE,UN=nE,MN=IN,VN=NN,FN=RN,HN=BN,$N="pako deflate (from Nodeca project)",Hu={deflateInit:DN,deflateInit2:PN,deflateReset:LN,deflateResetKeep:UN,deflateSetHeader:MN,deflate:VN,deflateEnd:FN,deflateSetDictionary:HN,deflateInfo:$N};const jN=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ZN=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)jN(n,r)&&(e[r]=n[r])}}return e},zN=e=>{let t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,s=0,i=e.length;r<i;r++){let o=e[r];n.set(o,s),s+=o.length}return n},hf={assign:ZN,flattenChunks:zN};let aE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{aE=!1}const $u=new Uint8Array(256);for(let e=0;e<256;e++)$u[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;$u[254]=$u[254]=1;var KN=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,s,i,o=e.length,u=0;for(s=0;s<o;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(u),i=0,s=0;i<u;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|n&63):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|n&63):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|n&63);return t};const WN=(e,t)=>{if(t<65534&&e.subarray&&aE)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var qN=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,s;const i=new Array(n*2);for(s=0,r=0;r<n;){let o=e[r++];if(o<128){i[s++]=o;continue}let u=$u[o];if(u>4){i[s++]=65533,r+=u-1;continue}for(o&=u===2?31:u===3?15:7;u>1&&r<n;)o=o<<6|e[r++]&63,u--;if(u>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return WN(i,s)},GN=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+$u[e[n]]>t?n:t},ju={string2buf:KN,buf2string:qN,utf8border:GN};function YN(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var iE=YN;const oE=Object.prototype.toString,{Z_NO_FLUSH:XN,Z_SYNC_FLUSH:JN,Z_FULL_FLUSH:QN,Z_FINISH:eR,Z_OK:pf,Z_STREAM_END:tR,Z_DEFAULT_COMPRESSION:nR,Z_DEFAULT_STRATEGY:rR,Z_DEFLATED:sR}=eo;function Zu(e){this.options=hf.assign({level:nR,method:sR,chunkSize:16384,windowBits:15,memLevel:8,strategy:rR},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iE,this.strm.avail_out=0;let n=Hu.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==pf)throw new Error(Qi[n]);if(t.header&&Hu.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=ju.string2buf(t.dictionary):oE.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Hu.deflateSetDictionary(this.strm,r),n!==pf)throw new Error(Qi[n]);this._dict_set=!0}}Zu.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let s,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?eR:XN,typeof e=="string"?n.input=ju.string2buf(e):oE.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===JN||i===QN)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(s=Hu.deflate(n,i),s===tR)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=Hu.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===pf;if(n.avail_out===0){this.onData(n.output);continue}if(i>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0},Zu.prototype.onData=function(e){this.chunks.push(e)},Zu.prototype.onEnd=function(e){e===pf&&(this.result=hf.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Zg(e,t){const n=new Zu(t);if(n.push(e,!0),n.err)throw n.msg||Qi[n.err];return n.result}function aR(e,t){return t=t||{},t.raw=!0,Zg(e,t)}function iR(e,t){return t=t||{},t.gzip=!0,Zg(e,t)}var oR=Zu,cR=Zg,uR=aR,lR=iR,dR=eo,fR={Deflate:oR,deflate:cR,deflateRaw:uR,gzip:lR,constants:dR};const gf=16209,hR=16191;var pR=function(t,n){let r,s,i,o,u,l,d,f,g,_,b,T,I,k,Z,Q,ee,re,Se,me,oe,Ee,Ie,Ne;const _e=t.state;r=t.next_in,Ie=t.input,s=r+(t.avail_in-5),i=t.next_out,Ne=t.output,o=i-(n-t.avail_out),u=i+(t.avail_out-257),l=_e.dmax,d=_e.wsize,f=_e.whave,g=_e.wnext,_=_e.window,b=_e.hold,T=_e.bits,I=_e.lencode,k=_e.distcode,Z=(1<<_e.lenbits)-1,Q=(1<<_e.distbits)-1;e:do{T<15&&(b+=Ie[r++]<<T,T+=8,b+=Ie[r++]<<T,T+=8),ee=I[b&Z];t:for(;;){if(re=ee>>>24,b>>>=re,T-=re,re=ee>>>16&255,re===0)Ne[i++]=ee&65535;else if(re&16){Se=ee&65535,re&=15,re&&(T<re&&(b+=Ie[r++]<<T,T+=8),Se+=b&(1<<re)-1,b>>>=re,T-=re),T<15&&(b+=Ie[r++]<<T,T+=8,b+=Ie[r++]<<T,T+=8),ee=k[b&Q];n:for(;;){if(re=ee>>>24,b>>>=re,T-=re,re=ee>>>16&255,re&16){if(me=ee&65535,re&=15,T<re&&(b+=Ie[r++]<<T,T+=8,T<re&&(b+=Ie[r++]<<T,T+=8)),me+=b&(1<<re)-1,me>l){t.msg="invalid distance too far back",_e.mode=gf;break e}if(b>>>=re,T-=re,re=i-o,me>re){if(re=me-re,re>f&&_e.sane){t.msg="invalid distance too far back",_e.mode=gf;break e}if(oe=0,Ee=_,g===0){if(oe+=d-re,re<Se){Se-=re;do Ne[i++]=_[oe++];while(--re);oe=i-me,Ee=Ne}}else if(g<re){if(oe+=d+g-re,re-=g,re<Se){Se-=re;do Ne[i++]=_[oe++];while(--re);if(oe=0,g<Se){re=g,Se-=re;do Ne[i++]=_[oe++];while(--re);oe=i-me,Ee=Ne}}}else if(oe+=g-re,re<Se){Se-=re;do Ne[i++]=_[oe++];while(--re);oe=i-me,Ee=Ne}for(;Se>2;)Ne[i++]=Ee[oe++],Ne[i++]=Ee[oe++],Ne[i++]=Ee[oe++],Se-=3;Se&&(Ne[i++]=Ee[oe++],Se>1&&(Ne[i++]=Ee[oe++]))}else{oe=i-me;do Ne[i++]=Ne[oe++],Ne[i++]=Ne[oe++],Ne[i++]=Ne[oe++],Se-=3;while(Se>2);Se&&(Ne[i++]=Ne[oe++],Se>1&&(Ne[i++]=Ne[oe++]))}}else if(re&64){t.msg="invalid distance code",_e.mode=gf;break e}else{ee=k[(ee&65535)+(b&(1<<re)-1)];continue n}break}}else if(re&64)if(re&32){_e.mode=hR;break e}else{t.msg="invalid literal/length code",_e.mode=gf;break e}else{ee=I[(ee&65535)+(b&(1<<re)-1)];continue t}break}}while(r<s&&i<u);Se=T>>3,r-=Se,T-=Se<<3,b&=(1<<T)-1,t.next_in=r,t.next_out=i,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=i<u?257+(u-i):257-(i-u),_e.hold=b,_e.bits=T};const gc=15,cE=852,uE=592,lE=0,zg=1,dE=2,gR=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mR=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_R=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yR=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var zu=(e,t,n,r,s,i,o,u)=>{const l=u.bits;let d=0,f=0,g=0,_=0,b=0,T=0,I=0,k=0,Z=0,Q=0,ee,re,Se,me,oe,Ee=null,Ie;const Ne=new Uint16Array(gc+1),_e=new Uint16Array(gc+1);let Ve=null,Qe,le,ce;for(d=0;d<=gc;d++)Ne[d]=0;for(f=0;f<r;f++)Ne[t[n+f]]++;for(b=l,_=gc;_>=1&&Ne[_]===0;_--);if(b>_&&(b=_),_===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,u.bits=1,0;for(g=1;g<_&&Ne[g]===0;g++);for(b<g&&(b=g),k=1,d=1;d<=gc;d++)if(k<<=1,k-=Ne[d],k<0)return-1;if(k>0&&(e===lE||_!==1))return-1;for(_e[1]=0,d=1;d<gc;d++)_e[d+1]=_e[d]+Ne[d];for(f=0;f<r;f++)t[n+f]!==0&&(o[_e[t[n+f]]++]=f);if(e===lE?(Ee=Ve=o,Ie=20):e===zg?(Ee=gR,Ve=mR,Ie=257):(Ee=_R,Ve=yR,Ie=0),Q=0,f=0,d=g,oe=i,T=b,I=0,Se=-1,Z=1<<b,me=Z-1,e===zg&&Z>cE||e===dE&&Z>uE)return 1;for(;;){Qe=d-I,o[f]+1<Ie?(le=0,ce=o[f]):o[f]>=Ie?(le=Ve[o[f]-Ie],ce=Ee[o[f]-Ie]):(le=96,ce=0),ee=1<<d-I,re=1<<T,g=re;do re-=ee,s[oe+(Q>>I)+re]=Qe<<24|le<<16|ce|0;while(re!==0);for(ee=1<<d-1;Q&ee;)ee>>=1;if(ee!==0?(Q&=ee-1,Q+=ee):Q=0,f++,--Ne[d]===0){if(d===_)break;d=t[n+o[f]]}if(d>b&&(Q&me)!==Se){for(I===0&&(I=b),oe+=g,T=d-I,k=1<<T;T+I<_&&(k-=Ne[T+I],!(k<=0));)T++,k<<=1;if(Z+=1<<T,e===zg&&Z>cE||e===dE&&Z>uE)return 1;Se=Q&me,s[Se]=b<<24|T<<16|oe-i|0}}return Q!==0&&(s[oe+Q]=d-I<<24|64<<16|0),u.bits=b,0};const bR=0,fE=1,hE=2,{Z_FINISH:pE,Z_BLOCK:wR,Z_TREES:mf,Z_OK:so,Z_STREAM_END:ER,Z_NEED_DICT:vR,Z_STREAM_ERROR:Jr,Z_DATA_ERROR:gE,Z_MEM_ERROR:mE,Z_BUF_ERROR:TR,Z_DEFLATED:_E}=eo,_f=16180,yE=16181,bE=16182,wE=16183,EE=16184,vE=16185,TE=16186,xE=16187,AE=16188,SE=16189,yf=16190,wa=16191,Kg=16192,kE=16193,Wg=16194,CE=16195,IE=16196,OE=16197,NE=16198,bf=16199,wf=16200,RE=16201,BE=16202,DE=16203,PE=16204,LE=16205,qg=16206,UE=16207,ME=16208,Qt=16209,VE=16210,FE=16211,xR=852,AR=592,SR=15,HE=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function kR(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ao=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<_f||t.mode>FE?1:0},$E=e=>{if(ao(e))return Jr;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=_f,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(xR),t.distcode=t.distdyn=new Int32Array(AR),t.sane=1,t.back=-1,so},jE=e=>{if(ao(e))return Jr;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,$E(e)},ZE=(e,t)=>{let n;if(ao(e))return Jr;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Jr:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,jE(e))},zE=(e,t)=>{if(!e)return Jr;const n=new kR;e.state=n,n.strm=e,n.window=null,n.mode=_f;const r=ZE(e,t);return r!==so&&(e.state=null),r},CR=e=>zE(e,SR);let KE=!0,Gg,Yg;const IR=e=>{if(KE){Gg=new Int32Array(512),Yg=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(zu(fE,e.lens,0,288,Gg,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;zu(hE,e.lens,0,32,Yg,0,e.work,{bits:5}),KE=!1}e.lencode=Gg,e.lenbits=9,e.distcode=Yg,e.distbits=5},WE=(e,t,n,r)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),i.window.set(t.subarray(n-r,n-r+s),i.wnext),r-=s,r?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},OR=(e,t)=>{let n,r,s,i,o,u,l,d,f,g,_,b,T,I,k=0,Z,Q,ee,re,Se,me,oe,Ee;const Ie=new Uint8Array(4);let Ne,_e;const Ve=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ao(e)||!e.output||!e.input&&e.avail_in!==0)return Jr;n=e.state,n.mode===wa&&(n.mode=Kg),o=e.next_out,s=e.output,l=e.avail_out,i=e.next_in,r=e.input,u=e.avail_in,d=n.hold,f=n.bits,g=u,_=l,Ee=so;e:for(;;)switch(n.mode){case _f:if(n.wrap===0){n.mode=Kg;break}for(;f<16;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(n.wrap&2&&d===35615){n.wbits===0&&(n.wbits=15),n.check=0,Ie[0]=d&255,Ie[1]=d>>>8&255,n.check=Fn(n.check,Ie,2,0),d=0,f=0,n.mode=yE;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=Qt;break}if((d&15)!==_E){e.msg="unknown compression method",n.mode=Qt;break}if(d>>>=4,f-=4,oe=(d&15)+8,n.wbits===0&&(n.wbits=oe),oe>15||oe>n.wbits){e.msg="invalid window size",n.mode=Qt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=d&512?SE:wa,d=0,f=0;break;case yE:for(;f<16;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(n.flags=d,(n.flags&255)!==_E){e.msg="unknown compression method",n.mode=Qt;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Qt;break}n.head&&(n.head.text=d>>8&1),n.flags&512&&n.wrap&4&&(Ie[0]=d&255,Ie[1]=d>>>8&255,n.check=Fn(n.check,Ie,2,0)),d=0,f=0,n.mode=bE;case bE:for(;f<32;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}n.head&&(n.head.time=d),n.flags&512&&n.wrap&4&&(Ie[0]=d&255,Ie[1]=d>>>8&255,Ie[2]=d>>>16&255,Ie[3]=d>>>24&255,n.check=Fn(n.check,Ie,4,0)),d=0,f=0,n.mode=wE;case wE:for(;f<16;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}n.head&&(n.head.xflags=d&255,n.head.os=d>>8),n.flags&512&&n.wrap&4&&(Ie[0]=d&255,Ie[1]=d>>>8&255,n.check=Fn(n.check,Ie,2,0)),d=0,f=0,n.mode=EE;case EE:if(n.flags&1024){for(;f<16;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}n.length=d,n.head&&(n.head.extra_len=d),n.flags&512&&n.wrap&4&&(Ie[0]=d&255,Ie[1]=d>>>8&255,n.check=Fn(n.check,Ie,2,0)),d=0,f=0}else n.head&&(n.head.extra=null);n.mode=vE;case vE:if(n.flags&1024&&(b=n.length,b>u&&(b=u),b&&(n.head&&(oe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+b),oe)),n.flags&512&&n.wrap&4&&(n.check=Fn(n.check,r,b,i)),u-=b,i+=b,n.length-=b),n.length))break e;n.length=0,n.mode=TE;case TE:if(n.flags&2048){if(u===0)break e;b=0;do oe=r[i+b++],n.head&&oe&&n.length<65536&&(n.head.name+=String.fromCharCode(oe));while(oe&&b<u);if(n.flags&512&&n.wrap&4&&(n.check=Fn(n.check,r,b,i)),u-=b,i+=b,oe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=xE;case xE:if(n.flags&4096){if(u===0)break e;b=0;do oe=r[i+b++],n.head&&oe&&n.length<65536&&(n.head.comment+=String.fromCharCode(oe));while(oe&&b<u);if(n.flags&512&&n.wrap&4&&(n.check=Fn(n.check,r,b,i)),u-=b,i+=b,oe)break e}else n.head&&(n.head.comment=null);n.mode=AE;case AE:if(n.flags&512){for(;f<16;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(n.wrap&4&&d!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Qt;break}d=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=wa;break;case SE:for(;f<32;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}e.adler=n.check=HE(d),d=0,f=0,n.mode=yf;case yf:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=d,n.bits=f,vR;e.adler=n.check=1,n.mode=wa;case wa:if(t===wR||t===mf)break e;case Kg:if(n.last){d>>>=f&7,f-=f&7,n.mode=qg;break}for(;f<3;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}switch(n.last=d&1,d>>>=1,f-=1,d&3){case 0:n.mode=kE;break;case 1:if(IR(n),n.mode=bf,t===mf){d>>>=2,f-=2;break e}break;case 2:n.mode=IE;break;case 3:e.msg="invalid block type",n.mode=Qt}d>>>=2,f-=2;break;case kE:for(d>>>=f&7,f-=f&7;f<32;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Qt;break}if(n.length=d&65535,d=0,f=0,n.mode=Wg,t===mf)break e;case Wg:n.mode=CE;case CE:if(b=n.length,b){if(b>u&&(b=u),b>l&&(b=l),b===0)break e;s.set(r.subarray(i,i+b),o),u-=b,i+=b,l-=b,o+=b,n.length-=b;break}n.mode=wa;break;case IE:for(;f<14;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(n.nlen=(d&31)+257,d>>>=5,f-=5,n.ndist=(d&31)+1,d>>>=5,f-=5,n.ncode=(d&15)+4,d>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Qt;break}n.have=0,n.mode=OE;case OE:for(;n.have<n.ncode;){for(;f<3;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}n.lens[Ve[n.have++]]=d&7,d>>>=3,f-=3}for(;n.have<19;)n.lens[Ve[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ne={bits:n.lenbits},Ee=zu(bR,n.lens,0,19,n.lencode,0,n.work,Ne),n.lenbits=Ne.bits,Ee){e.msg="invalid code lengths set",n.mode=Qt;break}n.have=0,n.mode=NE;case NE:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[d&(1<<n.lenbits)-1],Z=k>>>24,Q=k>>>16&255,ee=k&65535,!(Z<=f);){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(ee<16)d>>>=Z,f-=Z,n.lens[n.have++]=ee;else{if(ee===16){for(_e=Z+2;f<_e;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(d>>>=Z,f-=Z,n.have===0){e.msg="invalid bit length repeat",n.mode=Qt;break}oe=n.lens[n.have-1],b=3+(d&3),d>>>=2,f-=2}else if(ee===17){for(_e=Z+3;f<_e;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}d>>>=Z,f-=Z,oe=0,b=3+(d&7),d>>>=3,f-=3}else{for(_e=Z+7;f<_e;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}d>>>=Z,f-=Z,oe=0,b=11+(d&127),d>>>=7,f-=7}if(n.have+b>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Qt;break}for(;b--;)n.lens[n.have++]=oe}}if(n.mode===Qt)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Qt;break}if(n.lenbits=9,Ne={bits:n.lenbits},Ee=zu(fE,n.lens,0,n.nlen,n.lencode,0,n.work,Ne),n.lenbits=Ne.bits,Ee){e.msg="invalid literal/lengths set",n.mode=Qt;break}if(n.distbits=6,n.distcode=n.distdyn,Ne={bits:n.distbits},Ee=zu(hE,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ne),n.distbits=Ne.bits,Ee){e.msg="invalid distances set",n.mode=Qt;break}if(n.mode=bf,t===mf)break e;case bf:n.mode=wf;case wf:if(u>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=d,n.bits=f,pR(e,_),o=e.next_out,s=e.output,l=e.avail_out,i=e.next_in,r=e.input,u=e.avail_in,d=n.hold,f=n.bits,n.mode===wa&&(n.back=-1);break}for(n.back=0;k=n.lencode[d&(1<<n.lenbits)-1],Z=k>>>24,Q=k>>>16&255,ee=k&65535,!(Z<=f);){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(Q&&!(Q&240)){for(re=Z,Se=Q,me=ee;k=n.lencode[me+((d&(1<<re+Se)-1)>>re)],Z=k>>>24,Q=k>>>16&255,ee=k&65535,!(re+Z<=f);){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}d>>>=re,f-=re,n.back+=re}if(d>>>=Z,f-=Z,n.back+=Z,n.length=ee,Q===0){n.mode=LE;break}if(Q&32){n.back=-1,n.mode=wa;break}if(Q&64){e.msg="invalid literal/length code",n.mode=Qt;break}n.extra=Q&15,n.mode=RE;case RE:if(n.extra){for(_e=n.extra;f<_e;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=BE;case BE:for(;k=n.distcode[d&(1<<n.distbits)-1],Z=k>>>24,Q=k>>>16&255,ee=k&65535,!(Z<=f);){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(!(Q&240)){for(re=Z,Se=Q,me=ee;k=n.distcode[me+((d&(1<<re+Se)-1)>>re)],Z=k>>>24,Q=k>>>16&255,ee=k&65535,!(re+Z<=f);){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}d>>>=re,f-=re,n.back+=re}if(d>>>=Z,f-=Z,n.back+=Z,Q&64){e.msg="invalid distance code",n.mode=Qt;break}n.offset=ee,n.extra=Q&15,n.mode=DE;case DE:if(n.extra){for(_e=n.extra;f<_e;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Qt;break}n.mode=PE;case PE:if(l===0)break e;if(b=_-l,n.offset>b){if(b=n.offset-b,b>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Qt;break}b>n.wnext?(b-=n.wnext,T=n.wsize-b):T=n.wnext-b,b>n.length&&(b=n.length),I=n.window}else I=s,T=o-n.offset,b=n.length;b>l&&(b=l),l-=b,n.length-=b;do s[o++]=I[T++];while(--b);n.length===0&&(n.mode=wf);break;case LE:if(l===0)break e;s[o++]=n.length,l--,n.mode=wf;break;case qg:if(n.wrap){for(;f<32;){if(u===0)break e;u--,d|=r[i++]<<f,f+=8}if(_-=l,e.total_out+=_,n.total+=_,n.wrap&4&&_&&(e.adler=n.check=n.flags?Fn(n.check,s,_,o-_):Lu(n.check,s,_,o-_)),_=l,n.wrap&4&&(n.flags?d:HE(d))!==n.check){e.msg="incorrect data check",n.mode=Qt;break}d=0,f=0}n.mode=UE;case UE:if(n.wrap&&n.flags){for(;f<32;){if(u===0)break e;u--,d+=r[i++]<<f,f+=8}if(n.wrap&4&&d!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Qt;break}d=0,f=0}n.mode=ME;case ME:Ee=ER;break e;case Qt:Ee=gE;break e;case VE:return mE;case FE:default:return Jr}return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=d,n.bits=f,(n.wsize||_!==e.avail_out&&n.mode<Qt&&(n.mode<qg||t!==pE))&&WE(e,e.output,e.next_out,_-e.avail_out),g-=e.avail_in,_-=e.avail_out,e.total_in+=g,e.total_out+=_,n.total+=_,n.wrap&4&&_&&(e.adler=n.check=n.flags?Fn(n.check,s,_,e.next_out-_):Lu(n.check,s,_,e.next_out-_)),e.data_type=n.bits+(n.last?64:0)+(n.mode===wa?128:0)+(n.mode===bf||n.mode===Wg?256:0),(g===0&&_===0||t===pE)&&Ee===so&&(Ee=TR),Ee},NR=e=>{if(ao(e))return Jr;let t=e.state;return t.window&&(t.window=null),e.state=null,so},RR=(e,t)=>{if(ao(e))return Jr;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,so):Jr},BR=(e,t)=>{const n=t.length;let r,s,i;return ao(e)||(r=e.state,r.wrap!==0&&r.mode!==yf)?Jr:r.mode===yf&&(s=1,s=Lu(s,t,n,0),s!==r.check)?gE:(i=WE(e,t,n,n),i?(r.mode=VE,mE):(r.havedict=1,so))};var DR=jE,PR=ZE,LR=$E,UR=CR,MR=zE,VR=OR,FR=NR,HR=RR,$R=BR,jR="pako inflate (from Nodeca project)",Ea={inflateReset:DR,inflateReset2:PR,inflateResetKeep:LR,inflateInit:UR,inflateInit2:MR,inflate:VR,inflateEnd:FR,inflateGetHeader:HR,inflateSetDictionary:$R,inflateInfo:jR};function ZR(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var zR=ZR;const qE=Object.prototype.toString,{Z_NO_FLUSH:KR,Z_FINISH:WR,Z_OK:Ku,Z_STREAM_END:Xg,Z_NEED_DICT:Jg,Z_STREAM_ERROR:qR,Z_DATA_ERROR:GE,Z_MEM_ERROR:GR}=eo;function Wu(e){this.options=hf.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iE,this.strm.avail_out=0;let n=Ea.inflateInit2(this.strm,t.windowBits);if(n!==Ku)throw new Error(Qi[n]);if(this.header=new zR,Ea.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ju.string2buf(t.dictionary):qE.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ea.inflateSetDictionary(this.strm,t.dictionary),n!==Ku)))throw new Error(Qi[n])}Wu.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let i,o,u;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?WR:KR,qE.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Ea.inflate(n,o),i===Jg&&s&&(i=Ea.inflateSetDictionary(n,s),i===Ku?i=Ea.inflate(n,o):i===GE&&(i=Jg));n.avail_in>0&&i===Xg&&n.state.wrap>0&&e[n.next_in]!==0;)Ea.inflateReset(n),i=Ea.inflate(n,o);switch(i){case qR:case GE:case Jg:case GR:return this.onEnd(i),this.ended=!0,!1}if(u=n.avail_out,n.next_out&&(n.avail_out===0||i===Xg))if(this.options.to==="string"){let l=ju.utf8border(n.output,n.next_out),d=n.next_out-l,f=ju.buf2string(n.output,l);n.next_out=d,n.avail_out=r-d,d&&n.output.set(n.output.subarray(l,l+d),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===Ku&&u===0)){if(i===Xg)return i=Ea.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0},Wu.prototype.onData=function(e){this.chunks.push(e)},Wu.prototype.onEnd=function(e){e===Ku&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=hf.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Qg(e,t){const n=new Wu(t);if(n.push(e),n.err)throw n.msg||Qi[n.err];return n.result}function YR(e,t){return t=t||{},t.raw=!0,Qg(e,t)}var XR=Wu,JR=Qg,QR=YR,e3=Qg,t3=eo,n3={Inflate:XR,inflate:JR,inflateRaw:QR,ungzip:e3,constants:t3};const{Deflate:r3,deflate:s3,deflateRaw:a3,gzip:i3}=fR,{Inflate:o3,inflate:c3,inflateRaw:u3,ungzip:l3}=n3;var d3=r3,f3=s3,h3=a3,Ef=i3,p3=o3,g3=c3,m3=u3,vf=l3,_3=eo,LH={Deflate:d3,deflate:f3,deflateRaw:h3,gzip:Ef,Inflate:p3,inflate:g3,inflateRaw:m3,ungzip:vf,constants:_3};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Tf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Gu=BigInt(1),xf=BigInt(2),YE=(e,t)=>(e+t/xf)/t;function XE(e){const t=qu,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),u=BigInt(44),l=BigInt(88),d=e*e*e%t,f=d*d*e%t,g=Yr(f,n,t)*f%t,_=Yr(g,n,t)*f%t,b=Yr(_,xf,t)*d%t,T=Yr(b,s,t)*b%t,I=Yr(T,i,t)*T%t,k=Yr(I,u,t)*I%t,Z=Yr(k,l,t)*k%t,Q=Yr(Z,u,t)*I%t,ee=Yr(Q,n,t)*f%t,re=Yr(ee,o,t)*T%t,Se=Yr(re,r,t)*d%t,me=Yr(Se,xf,t);if(!em.eql(em.sqr(me),e))throw new Error("Cannot find square root");return me}const em=tf(qu,void 0,void 0,{sqrt:XE}),Af=pO({a:BigInt(0),b:BigInt(7),Fp:em,n:Tf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Tf,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Gu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),u=YE(i*e,t),l=YE(-r*e,t);let d=kn(e-u*n-l*s,t),f=kn(-u*r-l*i,t);const g=d>o,_=f>o;if(g&&(d=t-d),_&&(f=t-f),d>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:g,k1:d,k2neg:_,k2:f}}}},ac),JE=BigInt(0),QE={};function tm(e,...t){let n=QE[e];if(n===void 0){const r=sha256(Uint8Array.from(e,s=>s.charCodeAt(0)));n=concatBytes(r,r),QE[e]=n}return sha256(concatBytes(n,...t))}const ev=e=>e.toRawBytes(!0).slice(1),nm=e=>numberToBytesBE(e,32),rm=e=>mod(e,qu),Yu=e=>mod(e,Tf),sm=Af.ProjectivePoint,y3=(e,t,n)=>sm.BASE.multiplyAndAddUnsafe(e,t,n);function am(e){let t=Af.utils.normPrivateKeyToScalar(e),n=sm.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Yu(-t),bytes:ev(n)}}function b3(e){aInRange("x",e,Gu,qu);const t=rm(e*e),n=rm(t*e+BigInt(7));let r=XE(n);r%xf!==JE&&(r=rm(-r));const s=new sm(e,r,Gu);return s.assertValidity(),s}const mc=null;function tv(...e){return Yu(mc(tm("BIP0340/challenge",...e)))}function UH(e){return am(e).bytes}function MH(e,t,n=randomBytes(32)){const r=ensureBytes("message",e),{bytes:s,scalar:i}=am(t),o=ensureBytes("auxRand",n,32),u=nm(i^mc(tm("BIP0340/aux",o))),l=tm("BIP0340/nonce",u,s,r),d=Yu(mc(l));if(d===JE)throw new Error("sign failed: k is zero");const{bytes:f,scalar:g}=am(d),_=tv(f,s,r),b=new Uint8Array(64);if(b.set(f,0),b.set(nm(Yu(g+_*i)),32),!w3(b,r,s))throw new Error("sign: Invalid signature produced");return b}function w3(e,t,n){const r=ensureBytes("signature",e,64),s=ensureBytes("message",t),i=ensureBytes("publicKey",n,32);try{const o=b3(mc(i)),u=mc(r.subarray(0,32));if(!inRange(u,Gu,qu))return!1;const l=mc(r.subarray(32,64));if(!inRange(l,Gu,Tf))return!1;const d=tv(nm(u),ev(o),s),f=y3(o,l,Yu(-d));return!(!f||!f.hasEvenY()||f.toAffine().x!==u)}catch{return!1}}const VH=null,FH=null,HH=null,$H=null,jH=null,ZH=null,nv=(e,t,n=[])=>{const r=Object.getOwnPropertyDescriptors(t);for(let s of n)delete r[s];Object.defineProperties(e,r)},io=(e,t=[e])=>{const n=Object.getPrototypeOf(e);return n===null?t:io(n,[...t,n])},E3=(...e)=>{if(e.length===0)return;let t;const n=e.map(r=>io(r));for(;n.every(r=>r.length>0);){const r=n.map(i=>i.pop()),s=r[0];if(r.every(i=>i===s))t=s;else break}return t},rv=(e,t,n=[])=>{var r;const s=(r=E3(...e))!==null&&r!==void 0?r:Object.prototype,i=Object.create(s),o=io(s);for(let u of e){let l=io(u);for(let d=l.length-1;d>=0;d--){let f=l[d];o.indexOf(f)===-1&&(nv(i,f,["constructor",...n]),o.push(f))}}return i.constructor=t,i},im=e=>e.filter((t,n)=>e.indexOf(t)==n),Sf=(e,t)=>{const n=t.map(i=>io(i));let r=0,s=!0;for(;s;){s=!1;for(let i=t.length-1;i>=0;i--){const o=n[i][r];if(o!=null&&(s=!0,Object.getOwnPropertyDescriptor(o,e)!=null))return n[i][0]}r++}},sv=(e,t=Object.prototype)=>new Proxy({},{getPrototypeOf(){return t},setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor(n,r){return Object.getOwnPropertyDescriptor(Sf(r,e)||{},r)},defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has(n,r){return Sf(r,e)!==void 0||t[r]!==void 0},get(n,r){return(Sf(r,e)||t)[r]},set(n,r,s){const i=Sf(r,e);if(i===void 0)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return i[r]=s,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys(){return e.map(Object.getOwnPropertyNames).reduce((n,r)=>r.concat(n.filter(s=>r.indexOf(s)<0)))}}),v3=(e,t)=>sv([...e,{constructor:t}]),Xu={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},om=new WeakMap,T3=e=>om.get(e),x3=(e,t)=>om.set(e,t),zH=(e,t)=>{if(e instanceof t)return!0;const n=e.constructor,r=new Set;let s=new Set;for(s.add(n);s.size>0;){if(s.has(t))return!0;s.forEach(o=>r.add(o));const i=new Set;s.forEach(o=>{var u;const l=(u=om.get(o))!==null&&u!==void 0?u:io(o.prototype).map(d=>d.constructor).filter(d=>d!==null);l&&l.forEach(d=>{!r.has(d)&&!s.has(d)&&i.add(d)})}),s=i}return!1},av=(e,t)=>{var n,r;const s=im([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(t)]),i={};for(let o of s)i[o]=im([...(n=e?.[o])!==null&&n!==void 0?n:[],...(r=t?.[o])!==null&&r!==void 0?r:[]]);return i},iv=(e,t)=>{var n,r,s,i;return{property:av((n=e?.property)!==null&&n!==void 0?n:{},(r=t?.property)!==null&&r!==void 0?r:{}),method:av((s=e?.method)!==null&&s!==void 0?s:{},(i=t?.method)!==null&&i!==void 0?i:{})}},ov=(e,t)=>{var n,r,s,i,o,u;return{class:im([...(n=e?.class)!==null&&n!==void 0?n:[],...(r=t?.class)!==null&&r!==void 0?r:[]]),static:iv((s=e?.static)!==null&&s!==void 0?s:{},(i=t?.static)!==null&&i!==void 0?i:{}),instance:iv((o=e?.instance)!==null&&o!==void 0?o:{},(u=t?.instance)!==null&&u!==void 0?u:{})}},cm=new Map,A3=(...e)=>{var t;const n=new Set,r=new Set([...e]);for(;r.size>0;)for(let s of r){const i=io(s.prototype).map(d=>d.constructor),o=(t=T3(s))!==null&&t!==void 0?t:[],l=[...i,...o].filter(d=>!n.has(d));for(let d of l)r.add(d);n.add(s),r.delete(s)}return[...n]},S3=(...e)=>{const t=A3(...e).map(n=>cm.get(n)).filter(n=>!!n);return t.length==0?{}:t.length==1?t[0]:t.reduce((n,r)=>ov(n,r))},k3=(...e)=>{const t=e.map(n=>um(n));return t.length===0?{}:t.length===1?t[0]:t.reduce((n,r)=>ov(n,r))},um=e=>{let t=cm.get(e);return t||(t={},cm.set(e,t)),t},C3=e=>t=>{const n=um(t);let r=n.class;return r||(r=[],n.class=r),r.push(e),e(t)},I3=e=>(t,n,...r)=>{var s,i,o;const u=typeof t=="function"?"static":"instance",l=typeof t[n]=="function"?"method":"property",d=u==="static"?t:t.constructor,f=um(d),g=(s=f?.[u])!==null&&s!==void 0?s:{};f[u]=g;let _=(i=g?.[l])!==null&&i!==void 0?i:{};g[l]=_;let b=(o=_?.[n])!==null&&o!==void 0?o:[];return _[n]=b,b.push(e),e(t,n,...r)},KH=e=>(...t)=>t.length===1?C3(e)(t[0]):I3(e)(...t);function lm(...e){var t,n,r;const s=e.map(l=>l.prototype),i=Xu.initFunction;if(i!==null){const l=s.map(g=>g[i]).filter(g=>typeof g=="function"),d=function(...g){for(let _ of l)_.apply(this,g)},f={[i]:d};s.push(f)}function o(...l){for(const d of e)nv(this,new d(...l));i!==null&&typeof this[i]=="function"&&this[i].apply(this,l)}o.prototype=Xu.prototypeStrategy==="copy"?rv(s,o):v3(s,o),Object.setPrototypeOf(o,Xu.staticsStrategy==="copy"?rv(e,null,["prototype"]):sv(e,Function.prototype));let u=o;if(Xu.decoratorInheritance!=="none"){const l=Xu.decoratorInheritance==="deep"?S3(...e):k3(...e);for(let d of(t=l?.class)!==null&&t!==void 0?t:[]){const f=d(u);f&&(u=f)}cv((n=l?.static)!==null&&n!==void 0?n:{},u),cv((r=l?.instance)!==null&&r!==void 0?r:{},u.prototype)}return x3(u,e),u}const cv=(e,t)=>{const n=e.property,r=e.method;if(n)for(let s in n)for(let i of n[s])i(t,s);if(r)for(let s in r)for(let i of r[s])i(t,s,Object.getOwnPropertyDescriptor(t,s))},WH=(...e)=>t=>{const n=lm(...e.concat([t]));return Object.defineProperty(n,"name",{value:t.name,writable:!1}),n};var qt=je(36533).hp,uv=Object.defineProperty,O3=Object.getOwnPropertyDescriptor,N3=Object.getOwnPropertyNames,R3=Object.prototype.hasOwnProperty,Ht=(e,t)=>{for(var n in t)uv(e,n,{get:t[n],enumerable:!0})},lv=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of N3(t))!R3.call(e,s)&&s!==n&&uv(e,s,{get:()=>t[s],enumerable:!(r=O3(t,s))||r.enumerable});return e},B3=(e,t,n)=>(lv(e,t,"default"),n&&lv(n,t,"default")),dm={};Ht(dm,{ADDR_BOUND:()=>mm,API_VERSION:()=>bv,BaseUrl:()=>Tv,FeeMarginPercentage:()=>Sv,HARDENING_4BYTES:()=>Nv,HARDENING_BYTE:()=>Qu,IS_BROWSER:()=>dv,MASK_250:()=>yv,MASK_31:()=>pm,MAX_STORAGE_ITEM_SIZE:()=>wv,NetworkName:()=>kf,OutsideExecutionCallerAny:()=>Cv,PRIME:()=>gm,RANGE_FELT:()=>ym,RANGE_I128:()=>Ev,RANGE_U128:()=>vv,RPC_DEFAULT_VERSION:()=>Ju,RPC_NODES:()=>kv,SNIP9_V1_INTERFACE_ID:()=>Iv,SNIP9_V2_INTERFACE_ID:()=>Ov,StarknetChainId:()=>xv,TEXT_TO_FELT_MAX_LEN:()=>hm,TRANSACTION_VERSION:()=>Le.ETransactionVersion,TransactionHashPrefix:()=>Av,UDC:()=>oo,ZERO:()=>mn});var Le={};Ht(Le,{JRPC:()=>D3,RPCSPEC06:()=>en,RPCSPEC07:()=>N});var D3={},en={};Ht(en,{EBlockTag:()=>$3,EDAMode:()=>Z3,EDataAvailabilityMode:()=>j3,ESimulationFlag:()=>M3,ETransactionExecutionStatus:()=>H3,ETransactionFinalityStatus:()=>F3,ETransactionStatus:()=>V3,ETransactionType:()=>U3,ETransactionVersion:()=>z3,ETransactionVersion2:()=>_c,ETransactionVersion3:()=>K3,Errors:()=>P3,SPEC:()=>L3});var P3={},L3={},U3={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},M3={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},V3={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},F3={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},H3={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},$3={PENDING:"pending",LATEST:"latest"},j3={L1:"L1",L2:"L2"},Z3={L1:0,L2:1},z3={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},_c={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},K3={V3:"0x3",F3:"0x100000000000000000000000000000003"};B3(Le,N);var W3={};Ht(W3,{IS_BROWSER:()=>dv,addHexPrefix:()=>ht,arrayBufferToString:()=>fv,atobUniversal:()=>hv,btoaUniversal:()=>pv,buf2hex:()=>ir,calcByteLength:()=>mv,concatenateArrayBuffer:()=>er,padLeft:()=>gv,pascalToSnake:()=>Y3,removeHexPrefix:()=>on,sanitizeBytes:()=>_v,sanitizeHex:()=>yc,stringToArrayBuffer:()=>q3,utf8ToArray:()=>li});var dv=typeof window<"u",fm="0";function fv(e){return new Uint8Array(e).reduce((t,n)=>t+String.fromCharCode(n),"")}function li(e){return new TextEncoder().encode(e)}function q3(e){return li(e)}function hv(e){return Ir.decode(e)}function pv(e){return Ir.encode(new Uint8Array(e))}function ir(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function on(e){return e.replace(/^0x/i,"")}function ht(e){return`0x${on(e)}`}function G3(e,t,n,r=fm){const s=t-e.length;let i=e;if(s>0){const o=r.repeat(s);i=n?o+e:e+o}return i}function gv(e,t,n=fm){return G3(e,t,!0,n)}function mv(e,t=8){const{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function _v(e,t=8,n=fm){return gv(e,mv(e,t),n)}function yc(e){const t=on(e),n=_v(t,2);return n&&ht(n)}var Y3=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function er(e){const t=e.reduce((s,i)=>s+i.byteLength,0),n=new Uint8Array(t);let r=0;return e.forEach(s=>{n.set(s,r),r+=s.byteLength}),n}var hm=31,mn=0n,yv=2n**250n-1n,pm=2n**31n-1n,bv=mn,gm=2n**251n+17n*2n**192n+1n,wv=256n,mm=2n**251n-wv,_m=(e,t)=>({min:e,max:t}),ym=_m(mn,gm-1n),Ev=_m(-(2n**127n),2n**127n-1n),vv=_m(mn,2n**128n-1n),Tv=(e=>(e.SN_MAIN="https://alpha-mainnet.starknet.io",e.SN_SEPOLIA="https://alpha-sepolia.starknet.io",e))(Tv||{}),kf=(e=>(e.SN_MAIN="SN_MAIN",e.SN_SEPOLIA="SN_SEPOLIA",e))(kf||{}),xv=(e=>(e.SN_MAIN="0x534e5f4d41494e",e.SN_SEPOLIA="0x534e5f5345504f4c4941",e))(xv||{}),Av=(e=>(e.DECLARE="0x6465636c617265",e.DEPLOY="0x6465706c6f79",e.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",e.INVOKE="0x696e766f6b65",e.L1_HANDLER="0x6c315f68616e646c6572",e))(Av||{}),Sv=(e=>(e[e.L1_BOUND_MAX_AMOUNT=50]="L1_BOUND_MAX_AMOUNT",e[e.L1_BOUND_MAX_PRICE_PER_UNIT=50]="L1_BOUND_MAX_PRICE_PER_UNIT",e[e.MAX_FEE=50]="MAX_FEE",e))(Sv||{}),oo={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},Ju="v0_7",kv={SN_MAIN:[`https://starknet-mainnet.public.blastapi.io/rpc/${Ju}`,`https://free-rpc.nethermind.io/mainnet-juno/${Ju}`],SN_SEPOLIA:[`https://starknet-sepolia.public.blastapi.io/rpc/${Ju}`,`https://free-rpc.nethermind.io/sepolia-juno/${Ju}`]},Cv="0x414e595f43414c4c4552",Iv="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",Ov="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",Qu=128,Nv=2147483648n,Rv={};Ht(Rv,{RpcChannel:()=>gD});var Bv={};Ht(Bv,{parse:()=>bc,parseAlwaysAsBig:()=>J3,stringify:()=>Br,stringifyAlwaysAsBig:()=>Q3});var X3=e=>{if(!qn(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},bc=e=>Jo(String(e),void 0,X3),J3=e=>Jo(String(e),void 0,hu),Br=(e,t,n,r)=>wu(e,t,n,r),Q3=Br,eB={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_MAX_FEE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63},tB=eB;function nB(e,t=e.constructor){const{captureStackTrace:n}=Error;n&&n(e,t)}function rB(e,t){const{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}var sB=class extends Error{constructor(t){super(t);W(this,"name");Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),rB(this,new.target.prototype),nB(this)}},el=class extends sB{},Dv=class extends el{constructor(t,n,r){super(`RPC: ${n} with params ${Br(r,null,2)}

      ${t.code}: ${t.message}: ${Br(t.data)}`);W(this,"request");this.baseError=t,this.request={method:n,params:r}}get code(){return this.baseError.code}isType(t){return tB[t]===this.code}},aB={};Ht(aB,{BlockStatus:()=>uB,BlockTag:()=>di,ETH_ADDRESS:()=>Pv,EntryPointType:()=>iB,Literal:()=>fi,NON_ZERO_PREFIX:()=>Lv,OutsideExecutionTypesV1:()=>Uv,OutsideExecutionTypesV2:()=>Mv,OutsideExecutionVersion:()=>Vv,RPC:()=>Le,TransactionExecutionStatus:()=>Cf,TransactionFinalityStatus:()=>cB,TransactionStatus:()=>oB,TransactionType:()=>tn,TypedDataRevision:()=>K,Uint:()=>yr,ValidateType:()=>va});var iB={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},tn={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},oB={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",REJECTED:"REJECTED",REVERTED:"REVERTED"},cB={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},Cf={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},uB={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},di={PENDING:"pending",LATEST:"latest"},va={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},yr={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},fi={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Pv="core::starknet::eth_address::EthAddress",Lv="core::zeroable::NonZero::",Uv={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},Mv={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},Vv=(e=>(e.UNSUPPORTED="0",e.V1="1",e.V2="2",e))(Vv||{}),Fv=class{constructor(e){W(this,"nodeUrl");W(this,"headers");W(this,"interval");W(this,"requestId",0);W(this,"pendingRequests",{});W(this,"batchPromises",{});W(this,"delayTimer");W(this,"delayPromise");W(this,"delayPromiseResolve");W(this,"baseFetch");this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}async wait(){return(!this.delayPromise||!this.delayPromiseResolve)&&(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e,params:t??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:Br(e),headers:this.headers})).json()}async fetch(e,t,n){const r=this.addPendingRequest(e,t,n);await this.wait();const s=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const u=this.sendBatch(Object.values(s));Object.keys(s).forEach(l=>{this.batchPromises[l]=u})}const i=await this.batchPromises[r];delete this.batchPromises[r];const o=i.find(u=>u.id===r);if(!o)throw new Error(`Couldn't find the result for the request. Method: ${e}`);return o}};function at(e,t){if(!e)throw new Error(t||"Assertion failure")}var lB={};Ht(lB,{addPercent:()=>nl,assertInRange:()=>Em,bigNumberishArrayToDecimalStringArray:()=>jv,bigNumberishArrayToHexadecimalStringArray:()=>Zv,cleanHex:()=>tl,getDecimalString:()=>fB,getHexString:()=>zv,getHexStringArray:()=>vm,hexToBytes:()=>xa,hexToDecimalString:()=>$v,isBigNumberish:()=>rl,isHex:()=>br,isStringWholeNumber:()=>uo,stringToSha256ToArrayBuff4:()=>xm,toBigInt:()=>St,toCairoBool:()=>Tm,toHex:()=>pe,toHex64:()=>dB,toHexString:()=>Hv,toStorageKey:()=>wm});var Cn=e=>typeof e>"u"||e===void 0;function co(e){return typeof e=="number"}function bm(e){return typeof e=="boolean"}function Ta(e){return typeof e=="bigint"}function _n(e){return typeof e=="string"}function $s(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function br(e){return/^0x[0-9a-f]*$/i.test(e)}function St(e){return BigInt(e)}function pe(e){return ht(St(e).toString(16))}var Hv=pe;function wm(e){return ht(St(e).toString(16).padStart(64,"0"))}function dB(e){const t=ht(St(e).toString(16).padStart(64,"0"));if(t.length!==66)throw TypeError("number is too big for hex 0x(64) representation");return t}function $v(e){return BigInt(ht(e)).toString(10)}function tl(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function Em(e,t,n,r=""){const s=r===""?"invalid length":`invalid ${r} length`,i=BigInt(e),o=BigInt(t),u=BigInt(n);at(i>=o&&i<=u,`Message not signable, ${s}.`)}function jv(e){return e.map(t=>St(t).toString(10))}function Zv(e){return e.map(t=>pe(t))}function uo(e){return/^\d+$/.test(e)}function fB(e){if(br(e))return $v(e);if(uo(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function zv(e){if(br(e))return e;if(uo(e))return Hv(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function vm(e){return e.map(zv)}function Tm(e){return(+e).toString()}function xa(e){if(!br(e))throw new Error(`${e} needs to be a hex-string`);let t=on(e);return t.length%2!==0&&(t=`0${t}`),y(t)}function nl(e,t){const n=BigInt(e);return n+n*BigInt(t)/100n}function xm(e){const n=(r=>Number(r&pm))(BigInt(ht(ir(ac(e)))));return xa(pe(n))}function rl(e){return co(e)||Ta(e)||_n(e)&&(br(e)||uo(e))}var hB={};Ht(hB,{getL2MessageHash:()=>Kv,getSelector:()=>wc,getSelectorFromName:()=>yn,keccakBn:()=>Am,solidityUint256PackedKeccak256:()=>If,starknetKeccak:()=>Sm});function Am(e){const t=on(pe(BigInt(e))),n=t.length%2===0?t:`0${t}`;return ht(sr(xa(ht(n))).toString(16))}function pB(e){return ht(sr(li(e)).toString(16))}function Sm(e){return BigInt(pB(e))&yv}function yn(e){return pe(Sm(e))}function wc(e){return co(e)||Ta(e)?pe(e):br(e)?e:uo(e)?pe(e):yn(e)}function If(e){const t=ht(e.reduce((n,r)=>n+on(pe(r)).padStart(64,"0"),""));return ht(qr(ug(xa(t))))}function Kv(e,t,n,r,s){return If([e,t,s,n,r.length,...r])}var sl={};Ht(sl,{decodeShortString:()=>lo,encodeShortString:()=>Hn,isASCII:()=>km,isDecimalString:()=>Cm,isLongText:()=>Im,isShortString:()=>al,isShortText:()=>gB,isText:()=>il,splitLongString:()=>Om});function km(e){return/^[\x00-\x7F]*$/.test(e)}function al(e){return e.length<=hm}function Cm(e){return/^[0-9]*$/i.test(e)}function il(e){return _n(e)&&!br(e)&&!uo(e)}var gB=e=>il(e)&&al(e),Im=e=>il(e)&&!al(e);function Om(e){const t=RegExp(`[^]{1,${hm}}`,"g");return e.match(t)||[]}function Hn(e){if(!km(e))throw new Error(`${e} is not an ASCII string`);if(!al(e))throw new Error(`${e} is too long`);return ht(e.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function lo(e){if(!km(e))throw new Error(`${e} is not an ASCII string`);if(br(e))return on(e).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(Cm(e))return lo("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}var mB={};Ht(mB,{byteArrayFromString:()=>Of,stringFromByteArray:()=>Wv});function Wv(e){const t=BigInt(e.pending_word)===0n?"":lo(pe(e.pending_word));return e.data.reduce((n,r)=>{const s=BigInt(r)===0n?"":lo(pe(r));return n+s},"")+t}function Of(e){const t=Om(e),n=t[t.length-1],r=t.map(Hn),[s,i]=n===void 0||n.length===31?["0x00",0]:[r.pop(),n.length];return{data:r.length===0?[]:r,pending_word:s,pending_word_len:i}}var qv={};Ht(qv,{felt:()=>Qr,getAbiContractVersion:()=>Bm,getArrayType:()=>js,isCairo1Abi:()=>Rm,isCairo1Type:()=>gi,isLen:()=>ho,isTypeArray:()=>hi,isTypeBool:()=>Bf,isTypeByteArray:()=>ul,isTypeBytes31:()=>Df,isTypeContractAddress:()=>SB,isTypeEnum:()=>po,isTypeEthAddress:()=>go,isTypeFelt:()=>vc,isTypeLiteral:()=>Nm,isTypeNamedTuple:()=>Yv,isTypeNonZero:()=>mo,isTypeOption:()=>Nf,isTypeResult:()=>Rf,isTypeSecp256k1Point:()=>Pf,isTypeStruct:()=>ol,isTypeTuple:()=>pi,isTypeU96:()=>Xv,isTypeUint:()=>cl,isTypeUint256:()=>AB,tuple:()=>Tc,uint256:()=>Dm,uint512:()=>kB});function fo(e){if(Ta(e)||Number.isInteger(e))return e.toString();if(_n(e)){if(br(e))return BigInt(e).toString();if(il(e)){if(!al(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(Hn(e)).toString()}if(uo(e))return e}if(bm(e))return`${+e}`;throw new Error(`${e} can't be computed by felt()`)}var Ec=(1n<<128n)-1n,Gv=(1n<<256n)-1n,_B=0n,yB=340282366920938463463374607431768211455n,bB=340282366920938463463374607431768211455n,wB=0n,EB=0n,In=(As=class{constructor(...t){W(this,"low");W(this,"high");if(typeof t[0]=="object"&&t.length===1&&"low"in t[0]&&"high"in t[0]){const n=As.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(t.length===1){const n=As.validate(t[0]);this.low=n&Ec,this.high=n>>128n}else if(t.length===2){const n=As.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}static validate(t){const n=BigInt(t);if(n<_B)throw Error("bigNumberish is smaller than UINT_256_MIN");if(n>Gv)throw new Error("bigNumberish is bigger than UINT_256_MAX");return n}static validateProps(t,n){const r=BigInt(t),s=BigInt(n);if(r<wB||r>yB)throw new Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(s<EB||s>bB)throw new Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:s}}static is(t){try{As.validate(t)}catch{return!1}return!0}static isAbiType(t){return t===As.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:ht(this.low.toString(16)),high:ht(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[fo(this.low),fo(this.high)]}},W(As,"abiSelector","core::integer::u256"),As),vB=(1n<<512n)-1n,TB=0n,xB=0n,or=(Ss=class{constructor(...t){W(this,"limb0");W(this,"limb1");W(this,"limb2");W(this,"limb3");if(typeof t[0]=="object"&&t.length===1&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const n=Ss.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(t.length===1){const n=Ss.validate(t[0]);this.limb0=n&Ec,this.limb1=(n&Ec<<128n)>>128n,this.limb2=(n&Ec<<256n)>>256n,this.limb3=n>>384n}else if(t.length===4){const n=Ss.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(t){const n=BigInt(t);if(n<TB)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(n>vB)throw Error("bigNumberish is bigger than UINT_512_MAX.");return n}static validateProps(t,n,r,s){const i=BigInt(t),o=BigInt(n),u=BigInt(r),l=BigInt(s);return[i,o,u,l].forEach((d,f)=>{if(d<xB||d>Ec)throw Error(`limb${f} is not in the range of a u128 number`)}),{limb0:i,limb1:o,limb2:u,limb3:l}}static is(t){try{Ss.validate(t)}catch{return!1}return!0}static isAbiType(t){return t===Ss.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:ht(this.limb0.toString(16)),limb1:ht(this.limb1.toString(16)),limb2:ht(this.limb2.toString(16)),limb3:ht(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[fo(this.limb0),fo(this.limb1),fo(this.limb2),fo(this.limb3)]}},W(Ss,"abiSelector","core::integer::u512"),Ss),ho=e=>/_len$/.test(e),vc=e=>e==="felt"||e==="core::felt252",hi=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),pi=e=>/^\(.*\)$/i.test(e),Yv=e=>/\(.*\)/i.test(e)&&e.includes(":"),ol=(e,t)=>e in t,po=(e,t)=>e in t,Nf=e=>e.startsWith("core::option::Option::"),Rf=e=>e.startsWith("core::result::Result::"),cl=e=>Object.values(yr).includes(e),AB=e=>In.isAbiType(e),Nm=e=>Object.values(fi).includes(e),Bf=e=>e==="core::bool",SB=e=>e===fi.ContractAddress,go=e=>e===Pv,Df=e=>e==="core::bytes_31::bytes31",ul=e=>e==="core::byte_array::ByteArray",Xv=e=>e==="core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>",Pf=e=>e===fi.Secp256k1Point,gi=e=>e.includes("::"),js=e=>gi(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function Rm(e){const{cairo:t}=Bm(e);if(t===void 0)throw Error("Unable to determine Cairo version");return t==="1"}function mo(e){return e.startsWith(Lv)}function Bm(e){if(e.find(r=>r.type==="interface"))return{cairo:"1",compiler:"2"};const t=e.find(r=>(r.type==="function"||r.type==="constructor")&&(r.inputs.length||r.outputs.length));if(!t)return{cairo:void 0,compiler:void 0};const n=t.inputs.length?t.inputs:t.outputs;return gi(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Dm=e=>new In(e).toUint256DecimalString(),kB=e=>new or(e).toUint512DecimalString(),Tc=(...e)=>({...e});function Qr(e){return fo(e)}var ll=class{constructor(e){W(this,"variant");const t=Object.values(e);if(t.length===0)throw new Error("This Enum must have at least 1 variant");if(t.filter(r=>!Cn(r)).length!==1)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(t=>!Cn(t))}activeVariant(){const t=Object.entries(this.variant).find(n=>!Cn(n[1]));return Cn(t)?"":t[0]}},ps={Some:0,None:1},Pm=class{constructor(e,t){W(this,"Some");W(this,"None");if(!(e in Object.values(ps)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===ps.Some){if(Cn(t))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!Cn(this.Some)}isNone(){return this.None===!0}},Dr={Ok:0,Err:1},Lm=class{constructor(e,t){W(this,"Ok");W(this,"Err");if(!(e in Object.values(Dr)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===Dr.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!Cn(this.Ok))return this.Ok;if(!Cn(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!Cn(this.Ok)}isErr(){return!Cn(this.Err)}},Um={isBN:(e,t,n)=>{if(!Ta(e[n]))throw new Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)},unknown:(e,t,n)=>{throw new Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)}};function Lf(e,t,n){return Object.entries(e).reduce((r,[s,i])=>{const o=n??t[s];if(!(s in t)&&!n)return r[s]=i,r;if(o==="string"){if(Array.isArray(e[s])){const u=Lf(e[s],e[s].map(l=>o));return r[s]=Object.values(u).join(""),r}return Um.isBN(e,t,s),r[s]=lo(i),r}if(o==="number")return Um.isBN(e,t,s),r[s]=Number(i),r;if(typeof o=="function")return r[s]=o(i),r;if(Array.isArray(o)){const u=Lf(e[s],o,o[0]);return r[s]=Object.values(u),r}return $s(o)?(r[s]=Lf(e[s],o),r):(Um.unknown(e,t,s),r)},{})}var CB=class{constructor(e){W(this,"abi");this.abi=e}methodInputsLength(e){return e.inputs.reduce((t,n)=>ho(n.name)?t:t+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},IB=class{constructor(e){W(this,"abi");this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){return this.abi.find(n=>n.type==="interface")?.items?.find(n=>n.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>e.type==="interface"?e.items:e)}};function Jv(e){const t=OB(e);if(t===0||t===1)return new CB(e);if(t===2)return new IB(e);throw Error(`Unsupported ABI version ${t}`)}function OB(e){return e.find(t=>t.type==="interface")?2:Rm(e)?1:0}function Qv(e,t,n){return e==="constructor"&&!n&&!t.length}function NB(e){const t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}function RB(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let n="",r=0;for(;r<e.length;){if(e[r]==="("){let s=1;const i=r;for(r++;s;)e[r]===")"&&s--,e[r]==="("&&s++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}function BB(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=RB(t);let s=r.split(",").map(i=>n.length?i.replace(" ",n.shift()):i);return Yv(e)&&(s=s.reduce((i,o)=>i.concat(NB(o)),[])),s}function e1(e,t,n){for(let r=0,s=0;r<e.length;r++)if(e[r]===t)s++;else if(e[r]===n&&--s===0)return r;return Number.POSITIVE_INFINITY}function DB(e){const t=e.slice(1,-1),n=[];let r=0,s;for(;r<t.length;){switch(!0){case t[r]==="(":{s=r+e1(t.slice(r),"(",")")+1;break}case(t.startsWith("core::result::Result::<",r)||t.startsWith("core::array::Array::<",r)||t.startsWith("core::option::Option::<",r)):{s=r+e1(t.slice(r),"<",">")+1;break}default:{const i=t.indexOf(",",r);s=i!==-1?i:Number.POSITIVE_INFINITY}}n.push(t.slice(r,s)),r=s+2}return n}function Mm(e){return gi(e)?DB(e):BB(e)}function PB(e){return Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`)}function LB(e){return Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`)}function UB(e,t,n,r){const s=(f,g)=>{if(hi(g))return o(f,g);if(po(g,r)){const _=r[g];return l(f,_)}if(pi(g))return u(f,g);if(go(g)||mo(g)||ul(g)||Xv(g)||Pf(g))return f;if(In.isAbiType(g)){const _=f;if(typeof _!="object")return _;if(!("low"in _&&"high"in _))throw PB(g);return{low:_.low,high:_.high}}if(or.isAbiType(g)){const _=f;if(typeof _!="object")return _;if(!["limb0","limb1","limb2","limb3"].every(b=>b in _))throw LB(g);return{limb0:_.limb0,limb1:_.limb1,limb2:_.limb2,limb3:_.limb3}}if(ol(g,n)){const _=n[g].members;return i(f,_)}return f},i=(f,g)=>g.reduce((b,T)=>{const I=k=>Object.defineProperty(b,T.name,{enumerable:!0,value:k??f[T.name]});if(f[T.name]==="undefined"&&(gi(T.type)||!ho(T.name)))throw Error(`Your object needs a property with key : ${T.name} .`);return I(s(f[T.name],T.type)),b},{});function o(f,g){const _=js(g);return _n(f)?f:f.map(b=>s(b,_))}function u(f,g){return Mm(g).reduce((T,I,k)=>{const Z=Object.keys(f),Q=re=>Object.defineProperty(T,k.toString(),{enumerable:!0,value:re??f[Z[k]]}),ee=I?.type?I.type:I;return Q(s(f[Z[k]],ee)),T},{})}const l=(f,g)=>{if(Rf(g.name)){const I=f,k=g.name.substring(g.name.indexOf("<")+1,g.name.lastIndexOf(",")),Z=g.name.substring(g.name.indexOf(",")+1,g.name.lastIndexOf(">"));return I.isOk()?new Lm(Dr.Ok,s(f.unwrap(),k)):new Lm(Dr.Err,s(f.unwrap(),Z))}if(Nf(g.name)){const I=f,k=g.name.substring(g.name.indexOf("<")+1,g.name.lastIndexOf(">"));return I.isSome()?new Pm(ps.Some,s(I.unwrap(),k)):new Pm(ps.None,{})}const _=f,T=Object.entries(_.variant).map(I=>{if(Cn(I[1]))return I;const k=g.type.substring(g.type.lastIndexOf("<")+1,g.type.lastIndexOf(">"));return k==="()"?I:[I[0],s(_.unwrap(),k)]});return new ll(Object.fromEntries(T))};return t.reduce((f,g)=>{const _=b=>Object.defineProperty(f,g.name,{enumerable:!0,value:b});return ho(g.name)&&!gi(g.type)||_(s(e[g.name],g.type)),f},{})}function xc(e,t){switch(!0){case In.isAbiType(e):return new In(t).toApiRequest();case or.isAbiType(e):return new or(t).toApiRequest();case Df(e):return Hn(t.toString());case Pf(e):{const n=on(pe(t)).padStart(128,"0"),r=Dm(ht(n.slice(-64))),s=Dm(ht(n.slice(0,-64)));return[Qr(s.low),Qr(s.high),Qr(r.low),Qr(r.high)]}default:return Qr(t)}}function MB(e,t){const n=Mm(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${r}
      expected: ${n}`);return n.map((s,i)=>({element:r[i],type:s.type??s}))}function VB(e){const t=Of(e);return[t.data.length.toString(),...t.data.map(n=>n.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}function Zs(e,t,n,r){if(e===void 0)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){const s=[];s.push(Qr(e.length));const i=js(t);return e.reduce((o,u)=>o.concat(Zs(u,i,n,r)),s)}if(n[t]&&n[t].members.length){if(In.isAbiType(t))return new In(e).toApiRequest();if(or.isAbiType(t))return new or(e).toApiRequest();if(go(t))return xc(t,e);if(ul(t))return VB(e);const{members:s}=n[t],i=e;return s.reduce((o,u)=>o.concat(Zs(i[u.name],u.type,n,r)),[])}if(pi(t))return MB(e,t).reduce((i,o)=>{const u=Zs(o.element,o.type,n,r);return i.concat(u)},[]);if(In.isAbiType(t))return new In(e).toApiRequest();if(or.isAbiType(t))return new or(e).toApiRequest();if(po(t,r)){const{variants:s}=r[t];if(Nf(t)){const g=e;if(g.isSome()){const _=s.find(I=>I.name==="Some");if(Cn(_))throw Error("Error in abi : Option has no 'Some' variant.");const b=_.type;if(b==="()")return ps.Some.toString();const T=Zs(g.unwrap(),b,n,r);return Array.isArray(T)?[ps.Some.toString(),...T]:[ps.Some.toString(),T]}return ps.None.toString()}if(Rf(t)){const g=e;if(g.isOk()){const I=s.find(Q=>Q.name==="Ok");if(Cn(I))throw Error("Error in abi : Result has no 'Ok' variant.");const k=I.type;if(k==="()")return Dr.Ok.toString();const Z=Zs(g.unwrap(),k,n,r);return Array.isArray(Z)?[Dr.Ok.toString(),...Z]:[Dr.Ok.toString(),Z]}const _=s.find(I=>I.name==="Err");if(Cn(_))throw Error("Error in abi : Result has no 'Err' variant.");const b=_.type;if(b==="()")return Dr.Err.toString();const T=Zs(g.unwrap(),b,n,r);return Array.isArray(T)?[Dr.Err.toString(),...T]:[Dr.Err.toString(),T]}const i=e,o=i.activeVariant(),u=s.find(g=>g.name===o);if(Cn(u))throw Error(`Not find in abi : Enum has no '${o}' variant.`);const l=u.type,d=s.findIndex(g=>g.name===o);if(l==="()")return d.toString();const f=Zs(i.unwrap(),l,n,r);return Array.isArray(f)?[d.toString(),...f]:[d.toString(),f]}if(mo(t))return xc(js(t),e);if(typeof e=="object")throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return xc(t,e)}function FB(e,t,n,r){const{name:s,type:i}=t;let{value:o}=e.next();switch(!0){case hi(i):if(!Array.isArray(o)&&!il(o))throw Error(`ABI expected parameter ${s} to be array or long string, got ${o}`);return _n(o)&&(o=Om(o)),Zs(o,t.type,n,r);case mo(i):return xc(js(i),o);case go(i):return xc(i,o);case(ol(i,n)||pi(i)||In.isAbiType(i)):return Zs(o,i,n,r);case po(i,r):return Zs(o,i,n,r);default:return xc(i,o)}}function Vm(e,t){let n;switch(!0){case Bf(e):return n=t.next().value,!!BigInt(n);case In.isAbiType(e):const r=t.next().value,s=t.next().value;return new In(r,s).toBigInt();case or.isAbiType(e):const i=t.next().value,o=t.next().value,u=t.next().value,l=t.next().value;return new or(i,o,u,l).toBigInt();case go(e):return n=t.next().value,BigInt(n);case Df(e):return n=t.next().value,lo(n);case Pf(e):const d=on(t.next().value).padStart(32,"0"),f=on(t.next().value).padStart(32,"0"),g=on(t.next().value).padStart(32,"0"),_=on(t.next().value).padStart(32,"0");return BigInt(ht(f+d+_+g));default:return n=t.next().value,BigInt(n)}}function gs(e,t,n,r){if(t.type==="()")return{};if(In.isAbiType(t.type)){const s=e.next().value,i=e.next().value;return new In(s,i).toBigInt()}if(or.isAbiType(t.type)){const s=e.next().value,i=e.next().value,o=e.next().value,u=e.next().value;return new or(s,i,o,u).toBigInt()}if(ul(t.type)){const s=[],i=BigInt(e.next().value);for(;s.length<i;)s.push(pe(e.next().value));const o=pe(e.next().value),u=BigInt(e.next().value);return Wv({data:s,pending_word:o,pending_word_len:u})}if(hi(t.type)){const s=[],i={name:"",type:js(t.type)},o=BigInt(e.next().value);for(;s.length<o;)s.push(gs(e,i,n,r));return s}if(mo(t.type)){const s={name:"",type:js(t.type)};return gs(e,s,n,r)}if(n&&t.type in n&&n[t.type])return go(t.type)?Vm(t.type,e):n[t.type].members.reduce((s,i)=>(s[i.name]=gs(e,i,n,r),s),{});if(r&&t.type in r&&r[t.type]){const s=Number(e.next().value),i=r[t.type].variants.reduce((u,l,d)=>d===s?(u[l.name]=gs(e,{name:"",type:l.type},n,r),u):(u[l.name]=void 0,u),{});if(t.type.startsWith("core::option::Option")){const u=s===ps.Some?i.Some:void 0;return new Pm(s,u)}if(t.type.startsWith("core::result::Result")){let u;return s===Dr.Ok?u=i.Ok:u=i.Err,new Lm(s,u)}return new ll(i)}if(pi(t.type))return Mm(t.type).reduce((i,o,u)=>{const l=o?.name?o.name:u,d=o?.type?o.type:o,f={name:l,type:d};return i[l]=gs(e,f,n,r),i},{});if(hi(t.type)){const s=[],i={name:"",type:js(t.type)},o=BigInt(e.next().value);for(;s.length<o;)s.push(gs(e,i,n,r));return s}return Vm(t.type,e)}function Uf(e,t,n,r,s){const{name:i,type:o}=t;let u;switch(!0){case ho(i):return u=e.next().value,BigInt(u);case(n&&o in n||pi(o)):return gs(e,t,n,r);case(r&&po(o,r)):return gs(e,t,n,r);case hi(o):if(gi(o))return gs(e,t,n,r);const l=[];if(s&&s[`${i}_len`]){const d=s[`${i}_len`];for(;l.length<d;)l.push(gs(e,{name:i,type:t.type.replace("*","")},n,r))}return l;case mo(o):return gs(e,t,n,r);default:return Vm(o,e)}}var Fm=(e,t)=>{if(at(_n(e)||co(e)||Ta(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),_n(e)&&!br(e))return;const n=BigInt(e.toString(10));at(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},HB=(e,t)=>{at(_n(e),`Validate: arg ${t.name} should be a string.`),at(e.length<32,`Validate: arg ${t.name} cairo typed ${t.type} should be a string of less than 32 characters.`)},$B=(e,t)=>{at(_n(e),`Validate: arg ${t.name} should be a string.`)},Mf=(e,t)=>{co(e)&&at(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),at(_n(e)||co(e)||Ta(e)||$s(e)&&"low"in e&&"high"in e||$s(e)&&["limb0","limb1","limb2","limb3"].every(r=>r in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`);let n;switch(t.type){case yr.u256:n=new In(e).toBigInt();break;case yr.u512:n=new or(e).toBigInt();break;default:n=St(e)}switch(t.type){case yr.u8:at(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case yr.u16:at(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case yr.u32:at(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case yr.u64:at(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case yr.u128:at(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case yr.u256:at(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case yr.u512:at(or.is(n),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case fi.ClassHash:at(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case fi.ContractAddress:at(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case fi.Secp256k1Point:{at(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break}case fi.U96:{at(n>=0n&&n<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`);break}default:break}},t1=(e,t)=>{at(bm(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},n1=(e,t,n)=>{if(t.type===yr.u256||t.type===yr.u512){Mf(e,t);return}if(go(t.type)){at(!$s(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);const r=BigInt(e.toString(10));at(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}at($s(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),n[t.type].members.forEach(({name:r})=>{at(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},r1=(e,t)=>{at($s(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(Nf(t.type)&&r.includes("isSome")&&r.includes("isNone"))&&!(Rf(t.type)&&r.includes("isOk")&&r.includes("isErr"))&&!(r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},s1=(e,t)=>{at($s(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},a1=(e,t,n,r)=>{const s=js(t.type);if(!(vc(s)&&Im(e)))switch(at(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case vc(s):e.forEach(i=>Fm(i,t));break;case pi(s):e.forEach(i=>s1(i,{name:t.name,type:s}));break;case hi(s):e.forEach(i=>a1(i,{name:"",type:s},n,r));break;case ol(s,n):e.forEach(i=>n1(i,{name:t.name,type:s},n));break;case po(s,r):e.forEach(i=>r1(i,{name:t.name,type:s}));break;case(cl(s)||Nm(s)):e.forEach(i=>Mf(i,{name:"",type:s}));break;case Bf(s):e.forEach(i=>t1(i,t));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}},jB=(e,t)=>{const n=js(t.type);switch(at(cl(n)&&n!==or.abiSelector||vc(n),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case vc(n):Fm(e,t),at(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case cl(n):switch(Mf(e,{name:"",type:n}),n){case yr.u256:at(new In(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type.");break;default:at(St(e)>0,"Validate: value 0 is not authorized in NonZero uint type.")}break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value "${e}"`)}};function i1(e,t,n,r){e.inputs.reduce((s,i)=>{const o=t[s];switch(!0){case ho(i.name):return s;case vc(i.type):Fm(o,i);break;case Df(i.type):HB(o,i);break;case(cl(i.type)||Nm(i.type)):Mf(o,i);break;case Bf(i.type):t1(o,i);break;case ul(i.type):$B(o,i);break;case hi(i.type):a1(o,i,n,r);break;case ol(i.type,n):n1(o,i,n);break;case po(i.type,r):r1(o,i);break;case pi(i.type):s1(o,i);break;case mo(i.type):jB(o,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${o}`)}return s+1},0)}var _t=class $d{constructor(t){W(this,"abi");W(this,"parser");W(this,"structs");W(this,"enums");this.structs=$d.getAbiStruct(t),this.enums=$d.getAbiEnum(t),this.parser=Jv(t),this.abi=this.parser.getLegacyFormat()}validate(t,n,r=[]){if(t!==va.DEPLOY){const o=this.abi.filter(u=>{if(u.type!=="function")return!1;const l=u.stateMutability==="view"||u.state_mutability==="view";return t===va.INVOKE?!l:l}).map(u=>u.name);at(o.includes(n),`${t===va.INVOKE?"invocable":"viewable"} method not found in abi`)}const s=this.abi.find(o=>t===va.DEPLOY?o.name===n&&o.type==="constructor":o.name===n&&o.type==="function");if(Qv(n,r,s))return;const i=this.parser.methodInputsLength(s);if(r.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${r.length}`);i1(s,r,this.structs,this.enums)}compile(t,n){const r=this.abi.find(u=>u.name===t);if(Qv(t,n,r))return[];let s;if(Array.isArray(n))s=n;else{const u=UB(n,r.inputs,this.structs,this.enums);s=Object.values(u),i1(r,s,this.structs,this.enums)}const i=s[Symbol.iterator](),o=r.inputs.reduce((u,l)=>ho(l.name)&&!gi(l.type)?u:u.concat(FB(i,l,this.structs,this.enums)),[]);return Object.defineProperty(o,"__compiled__",{enumerable:!1,writable:!1,value:!0}),o}static compile(t){const n=s=>{const i=(u,l=".")=>{const d=Array.isArray(u)?[u.length.toString(),...u]:u;return Object.entries(d).flatMap(([f,g])=>{let _=g;f==="entrypoint"?_=yn(_):Im(_)&&(_=Of(_));const b=Array.isArray(d)&&f==="0"?"$$len":f;if(Ta(_))return[[`${l}${b}`,Qr(_)]];if(Object(_)===_){const T=Object.getOwnPropertyNames(Object.getPrototypeOf(_)),I=[...Object.getOwnPropertyNames(_),...T];if(I.includes("isSome")&&I.includes("isNone")){const k=_,Z=k.isSome()?ps.Some:ps.None;return k.isSome()?i({0:Z,1:k.unwrap()},`${l}${b}.`):[[`${l}${b}`,Qr(Z)]]}if(I.includes("isOk")&&I.includes("isErr")){const k=_,Z=k.isOk()?Dr.Ok:Dr.Err;return i({0:Z,1:k.unwrap()},`${l}${b}.`)}if(I.includes("variant")&&I.includes("activeVariant")){const k=_,Z=k.activeVariant(),ee=Object.keys(k.variant).findIndex(re=>re===Z);return typeof k.unwrap()=="object"&&Object.keys(k.unwrap()).length===0?[[`${l}${b}`,Qr(ee)]]:i({0:ee,1:k.unwrap()},`${l}${b}.`)}return i(_,`${l}${b}.`)}return[[`${l}${b}`,Qr(_)]]})};return Object.fromEntries(i(s))};let r;if(Array.isArray(t)){const s={...t},i=n(s);r=Object.values(i)}else{const s=n(t);r=Object.values(s)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,n){const{outputs:r}=this.abi.find(o=>o.name===t),s=n.flat()[Symbol.iterator](),i=r.flat().reduce((o,u,l)=>{const d=u.name??l;return o[d]=Uf(s,u,this.structs,this.enums,o),o[d]&&o[`${d}_len`]&&delete o[`${d}_len`],o},{});return Object.keys(i).length===1&&0 in i?i[0]:i}format(t,n,r){const s=this.parse(t,n);return Lf(s,r)}static getAbiStruct(t){return t.filter(n=>n.type==="struct").reduce((n,r)=>({...n,[r.name]:r}),{})}static getAbiEnum(t){const n=t.filter(r=>r.type==="enum").reduce((r,s)=>({...r,[s.name]:s}),{});return delete n["core::bool"],n}static toCalldata(t=[]){return $d.compile(t)}static toHex(t=[]){return $d.compile(t).map(r=>pe(r))}decodeParameters(t,n){const r=Array.isArray(t)?t:[t],s=n.flat()[Symbol.iterator](),i=r.map(o=>Uf(s,{name:"",type:o},this.structs,this.enums));return i.length===1?i[0]:i}},ZB={};Ht(ZB,{calculateContractAddressFromHash:()=>jf,calculateDeclareTransactionHash:()=>_o,calculateDeployAccountTransactionHash:()=>Sa,calculateInvokeTransactionHash:()=>Aa,calculateL2MessageTxHash:()=>d1,computeCompiledClassHash:()=>T1,computeContractClassHash:()=>A1,computeHashOnElements:()=>zs,computeHintedClassHash:()=>w1,computeLegacyContractClassHash:()=>E1,computePedersenHash:()=>fl,computePedersenHashOnElements:()=>y1,computePoseidonHash:()=>_1,computePoseidonHashOnElements:()=>b1,computeSierraContractClassHash:()=>x1,formatSpaces:()=>hl,getL2MessageHash:()=>Kv,getSelector:()=>wc,getSelectorFromName:()=>yn,hashByteCodeSegments:()=>v1,keccakBn:()=>Am,poseidon:()=>O,solidityUint256PackedKeccak256:()=>If,starknetKeccak:()=>Sm});var zB={};Ht(zB,{calculateDeclareTransactionHash:()=>c1,calculateDeployAccountTransactionHash:()=>u1,calculateL2MessageTxHash:()=>d1,calculateTransactionHash:()=>l1,calculateTransactionHashCommon:()=>dl,computeHashOnElements:()=>Hm});var o1={};Ht(o1,{starkCurve:()=>C,weierstrass:()=>$});function Hm(e){return[...e,e.length].reduce((t,n)=>Us(St(t),St(n)),0).toString()}function dl(e,t,n,r,s,i,o,u=[]){const l=Hm(s),d=[e,t,n,r,l,i,o,...u];return Hm(d)}function c1(e,t,n,r,s,i,o){return dl("0x6465636c617265",n,t,0,[e],r,s,[i,...o?[o]:[]])}function u1(e,t,n,r,s,i,o,u){const l=[t,r,...n];return dl("0x6465706c6f795f6163636f756e74",s,e,0,l,i,o,[u])}function l1(e,t,n,r,s,i){return dl("0x696e766f6b65",t,e,0,n,r,s,[i])}function d1(e,t,n,r,s,i){const o=[e,...r];return dl("0x6c315f68616e646c6572",0,t,wc(n),o,0,s,[i])}var KB={};Ht(KB,{calculateDeclareTransactionHash:()=>g1,calculateDeployAccountTransactionHash:()=>p1,calculateInvokeTransactionHash:()=>m1,calculateTransactionHashCommon:()=>$f,encodeResourceBoundsL1:()=>Ff,encodeResourceBoundsL2:()=>Hf,hashDAMode:()=>Vf,hashFeeField:()=>h1});var mi=e=>e.map(t=>BigInt(t)),WB=32n,qB=64n,$m=128n,f1=qB+$m,GB=BigInt(Hn("L1_GAS")),YB=BigInt(Hn("L2_GAS"));function Vf(e,t){return(BigInt(e)<<WB)+BigInt(t)}function Ff(e){return(GB<<f1)+(BigInt(e.l1_gas.max_amount)<<$m)+BigInt(e.l1_gas.max_price_per_unit)}function Hf(e){return(YB<<f1)+(BigInt(e.l2_gas.max_amount)<<$m)+BigInt(e.l2_gas.max_price_per_unit)}function h1(e,t){const n=Ff(t),r=Hf(t);return Ct([BigInt(e),n,r])}function $f(e,t,n,r,s,i,o,u,l,d,f=[]){const g=h1(i,d),_=Vf(u,l),b=mi([e,t,n,g,Ct(mi(o)),r,s,_,...mi(f)]);return pe(Ct(b))}function p1(e,t,n,r,s,i,o,u,l,d,f,g){return $f("0x6465706c6f795f6163636f756e74",s,e,i,o,f,g,u,l,d,[Ct(mi(n)),t,r])}function g1(e,t,n,r,s,i,o,u,l,d,f,g){return $f("0x6465636c617265",r,n,s,i,f,mi(g),u,l,d,[Ct(mi(o)),e,t])}function m1(e,t,n,r,s,i,o,u,l,d,f){return $f("0x696e766f6b65",t,e,r,s,d,f,o,u,l,[Ct(mi(i)),Ct(mi(n))])}function XB(e){return[Le.ETransactionVersion.V3,Le.ETransactionVersion.F3].includes(e.version)}function Aa(e){return XB(e)?m1(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):l1(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function JB(e){return[Le.ETransactionVersion.V3,Le.ETransactionVersion.F3].includes(e.version)}function _o(e){return JB(e)?g1(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):c1(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function QB(e){return[Le.ETransactionVersion.V3,Le.ETransactionVersion.F3].includes(e.version)}function Sa(e){return QB(e)?p1(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):u1(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}function fl(e,t){return Us(BigInt(e),BigInt(t))}function _1(e,t){return pe(cf(BigInt(e),BigInt(t)))}function zs(e){return[...e,e.length].reduce((t,n)=>Us(BigInt(t),BigInt(n)),0).toString()}var y1=zs;function b1(e){return pe(Ct(e.map(t=>BigInt(t))))}function jf(e,t,n,r){const s=_t.compile(n),i=zs(s),o=Qr("0x535441524b4e45545f434f4e54524143545f41444452455353"),u=zs([o,r,e,t,i]);return pe(BigInt(u)%mm)}function eD(e,t){return e==="attributes"||e==="accessible_scopes"?Array.isArray(t)&&t.length===0?void 0:t:e==="debug_info"?null:t===null?void 0:t}function hl(e){let t=!1;const n=[];for(const r of e)r==='"'&&!(n.length>0&&n.slice(-1)[0]==="\\")&&(t=!t),t?n.push(r):n.push(r===":"?": ":r===","?", ":r);return n.join("")}function w1(e){const{abi:t,program:n}=e,s=hl(Br({abi:t,program:n},eD));return ht(sr(li(s)).toString(16))}function E1(e){const t=_n(e)?bc(e):e,n=pe(bv),r=zs(t.entry_points_by_type.EXTERNAL.flatMap(d=>[d.selector,d.offset])),s=zs(t.entry_points_by_type.L1_HANDLER.flatMap(d=>[d.selector,d.offset])),i=zs(t.entry_points_by_type.CONSTRUCTOR.flatMap(d=>[d.selector,d.offset])),o=zs(t.program.builtins.map(d=>Hn(d))),u=w1(t),l=zs(t.program.data);return zs([n,r,s,i,o,u,l])}function tD(e){return Ct(e.flatMap(t=>BigInt(Hn(t))))}function jm(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.offset),tD(n.builtins)]);return Ct(t)}function v1(e){const t=e.bytecode.map(i=>BigInt(i)),n=e.bytecode_segment_lengths??[];let r=0;const s=n.flatMap(i=>{const o=t.slice(r,r+=i);return[BigInt(i),Ct(o)]});return 1n+Ct(s)}function T1(e){const n=BigInt(Hn("COMPILED_CLASS_V1")),r=jm(e.entry_points_by_type.EXTERNAL),s=jm(e.entry_points_by_type.L1_HANDLER),i=jm(e.entry_points_by_type.CONSTRUCTOR),o=e.bytecode_segment_lengths?v1(e):Ct(e.bytecode.map(u=>BigInt(u)));return pe(Ct([n,r,s,i,o]))}function Zm(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.function_idx)]);return Ct(t)}function nD(e){const t=hl(Br(e.abi,null));return BigInt(ht(sr(li(t)).toString(16)))}function x1(e){const n=BigInt(Hn("CONTRACT_CLASS_V0.1.0")),r=Zm(e.entry_points_by_type.EXTERNAL),s=Zm(e.entry_points_by_type.L1_HANDLER),i=Zm(e.entry_points_by_type.CONSTRUCTOR),o=nD(e),u=Ct(e.sierra_program.map(l=>BigInt(l)));return pe(Ct([n,r,s,i,o,u]))}function A1(e){const t=_n(e)?bc(e):e;return"sierra_program"in t?x1(t):E1(t)}var rD={};Ht(rD,{compressProgram:()=>zm,decompressProgram:()=>_i,estimateFeeToBounds:()=>gl,estimatedFeeToMaxFee:()=>S1,formatSignature:()=>pl,getFullPublicKey:()=>iD,intDAM:()=>cn,makeAddress:()=>sD,randomAddress:()=>Km,reduceV2:()=>zf,signatureToDecimalArray:()=>aD,signatureToHexArray:()=>On,toFeeVersion:()=>Zf,toTransactionVersion:()=>Ks,v3Details:()=>Nn});function zm(e){const t=_n(e)?e:Br(e),n=Ef(t);return pv(n)}function _i(e){if(Array.isArray(e))return e;const t=fv(vf(hv(e)));return bc(t)}function Km(){const e=Su.randomPrivateKey();return ku(e)}function sD(e){return ht(e).toLowerCase()}function pl(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(t=>pe(t));try{const{r:t,s:n}=e;return[pe(t),pe(n)]}catch{throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function aD(e){return jv(pl(e))}function On(e){return Zv(pl(e))}function S1(e,t=50){return nl(e,t)}function gl(e,t=50,n=50){if(Ta(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}};if(Cn(e.gas_consumed)||Cn(e.gas_price))throw Error("estimateFeeToBounds: estimate is undefined");const r=e.data_gas_consumed!==void 0&&e.data_gas_price!==void 0?pe(nl(BigInt(e.overall_fee)/BigInt(e.gas_price),t)):pe(nl(e.gas_consumed,t)),s=pe(nl(e.gas_price,n));return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:r,max_price_per_unit:s}}}function cn(e){if(e===Le.EDataAvailabilityMode.L1)return Le.EDAMode.L1;if(e===Le.EDataAvailabilityMode.L2)return Le.EDAMode.L2;throw Error("EDAM conversion")}function Ks(e,t){const n=t?pe(t):void 0,r=pe(e);if(t&&!Object.values(Le.ETransactionVersion).includes(n))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(Le.ETransactionVersion).includes(r))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?n:r}function Zf(e){if(!e)return;const t=pe(e);if(t===Le.ETransactionVersion.V0)return Le.ETransactionVersion.F0;if(t===Le.ETransactionVersion.V1)return Le.ETransactionVersion.F1;if(t===Le.ETransactionVersion.V2)return Le.ETransactionVersion.F2;if(t===Le.ETransactionVersion.V3)return Le.ETransactionVersion.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function Nn(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||Le.EDataAvailabilityMode.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||Le.EDataAvailabilityMode.L1,resourceBounds:e.resourceBounds??gl(mn)}}function zf(e){return e===Le.ETransactionVersion.F2?Le.ETransactionVersion.F1:e===Le.ETransactionVersion.V2?Le.ETransactionVersion.V1:e}function iD(e){const t=pe(e);return ht(ir(af(t,!1)))}function cr(e){return"sierra_program"in(_n(e)?bc(e):e)}function ml(e){const t={...e};if(cr(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=T1(e.casm)),!t.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??A1(e.contract),!t.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}function qH(e){if(cr(e))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const t=e;return{...t,program:_i(t.program)}}var oD={};Ht(oD,{ethRandomPrivateKey:()=>k1,validateAndParseEthAddress:()=>Wm});function k1(){return yc(ir(Af.utils.randomPrivateKey()))}function Wm(e){Em(e,mn,2n**160n-1n,"Ethereum Address ");const t=ht(on(pe(e)).padStart(40,"0"));return at(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}var C1=globalThis.fetch.bind(globalThis),cD={};Ht(cD,{Block:()=>Ut,createSierraContractClass:()=>I1,getDefaultNodeUrl:()=>_l,isPendingBlock:()=>uD,isPendingStateUpdate:()=>dD,isPendingTransaction:()=>lD,isV3Tx:()=>Pr,isVersion:()=>qm,parseContract:()=>O1,validBlockTags:()=>N1,wait:()=>Ac});function Ac(e){return new Promise(t=>{setTimeout(t,e)})}function I1(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=hl(Br(e.abi)),t.sierra_program=hl(Br(e.sierra_program)),t.sierra_program=zm(t.sierra_program),t}function O1(e){const t=_n(e)?bc(e):e;return cr(e)?I1(t):{...t,..."program"in t&&{program:zm(t.program)}}}var _l=(e,t=!1)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");const n=kv[e??"SN_SEPOLIA"],r=Math.floor(Math.random()*n.length);return n[r]},N1=Object.values(di),Ut=class{constructor(e){W(this,"hash",null);W(this,"number",null);W(this,"tag",null);W(this,"valueOf",()=>this.number);W(this,"toString",()=>this.hash);this.setIdentifier(e)}setIdentifier(e){if(_n(e))if(Cm(e))this.number=parseInt(e,10);else if(br(e))this.hash=e;else if(N1.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`);else Ta(e)?this.hash=pe(e):co(e)?this.number=e:this.tag=di.PENDING;if(co(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}get queryIdentifier(){return this.number!==null?`blockNumber=${this.number}`:this.hash!==null?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return this.number!==null?{block_number:this.number}:this.hash!==null?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}};function Pr(e){const t=e.version?pe(e.version):Le.ETransactionVersion.V3;return t===Le.ETransactionVersion.V3||t===Le.ETransactionVersion.F3}function qm(e,t){const[n,r]=e.split("."),[s,i]=t.split(".");return n===s&&r===i}function uD(e){return e.status==="PENDING"}function lD(e){return!("block_hash"in e)}function dD(e){return!("block_hash"in e)}var fD={};Ht(fD,{buildUDCCall:()=>Ym,fromCallsToExecuteCalldata:()=>Gm,fromCallsToExecuteCalldataWithNonce:()=>hD,fromCallsToExecuteCalldata_cairo1:()=>B1,getExecuteCalldata:()=>yo,getVersionsByType:()=>Xm,transformCallsToMulticallArrays:()=>R1,transformCallsToMulticallArrays_cairo1:()=>pD});var R1=e=>{const t=[],n=[];return e.forEach(r=>{const s=_t.compile(r.calldata||[]);t.push({to:St(r.contractAddress).toString(10),selector:St(yn(r.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:s.length.toString()}),n.push(...s)}),{callArray:t,calldata:_t.compile({calldata:n})}},Gm=e=>{const{callArray:t,calldata:n}=R1(e);return[..._t.compile({callArray:t}),...n]},hD=(e,t)=>[...Gm(e),St(t).toString()],pD=e=>e.map(n=>({to:St(n.contractAddress).toString(10),selector:St(yn(n.entrypoint)).toString(10),calldata:_t.compile(n.calldata||[])})),B1=e=>{const t=e.map(n=>({contractAddress:n.contractAddress,entrypoint:n.entrypoint,calldata:Array.isArray(n.calldata)&&"__compiled__"in n.calldata?n.calldata:_t.compile(n.calldata)}));return _t.compile({orderCalls:t})},yo=(e,t="0")=>t==="1"?B1(e):Gm(e);function Ym(e,t){const n=[].concat(e).map(r=>{const{classHash:s,salt:i,unique:o=!0,constructorCalldata:u=[]}=r,l=_t.compile(u),d=i??Km();return{call:{contractAddress:oo.ADDRESS,entrypoint:oo.ENTRYPOINT,calldata:[s,d,Tm(o),l.length,...l]},address:jf(o?Us(t,d):d,s,l,o?oo.ADDRESS:0)}});return{calls:n.map(r=>r.call),addresses:n.map(r=>r.address)}}function Xm(e){return e==="fee"?{v1:Le.ETransactionVersion.F1,v2:Le.ETransactionVersion.F2,v3:Le.ETransactionVersion.F3}:{v1:Le.ETransactionVersion.V1,v2:Le.ETransactionVersion.V2,v3:Le.ETransactionVersion.V3}}var Jm={headers:{"Content-Type":"application/json"},blockIdentifier:di.PENDING,retries:200},gD=class{constructor(e){W(this,"nodeUrl");W(this,"headers");W(this,"requestId");W(this,"blockIdentifier");W(this,"retries");W(this,"waitMode");W(this,"chainId");W(this,"specVersion");W(this,"transactionRetryIntervalFallback");W(this,"batchClient");W(this,"baseFetch");const{baseFetch:t,batch:n,blockIdentifier:r,chainId:s,headers:i,nodeUrl:o,retries:u,specVersion:l,transactionRetryIntervalFallback:d,waitMode:f}=e||{};Object.values(kf).includes(o)?this.nodeUrl=_l(o,e?.default):o?this.nodeUrl=o:this.nodeUrl=_l(void 0,e?.default),this.baseFetch=t??C1,this.blockIdentifier=r??Jm.blockIdentifier,this.chainId=s,this.headers={...Jm.headers,...i},this.retries=u??Jm.retries,this.specVersion=l,this.transactionRetryIntervalFallback=d,this.waitMode=f??!1,this.requestId=0,typeof n=="number"&&(this.batchClient=new Fv({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch}))}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Br(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new Dv(n,e,t);if(r instanceof el)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:i,result:o}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,i),o}const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:s}=await n.json();return this.errorHandler(e,t,r),s}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){return this.specVersion??(this.specVersion=await this.fetchEndpoint("starknet_specVersion")),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const n=pe(e),r=new Ut(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=pe(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Ut(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=pe(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=pe(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=pe(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:s=!0}=t,i=new Ut(n).identifier,o=[];return r&&o.push(en.ESimulationFlag.SKIP_VALIDATE),s&&o.push(en.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(u=>this.buildTransaction(u)),simulation_flags:o})}async waitForTransaction(e,t){const n=pe(e);let{retries:r}=this,s=!1,i=!1;const o=t?.retryInterval??this.transactionRetryIntervalDefault,u=t?.errorStates??[en.ETransactionStatus.REJECTED],l=t?.successStates??[en.ETransactionExecutionStatus.SUCCEEDED,en.ETransactionStatus.ACCEPTED_ON_L2,en.ETransactionStatus.ACCEPTED_ON_L1];let d;for(;!s;){await Ac(o);try{d=await this.getTransactionStatus(n);const g=d.execution_status,_=d.finality_status;if(!_)throw new Error("waiting for transaction status");if(u.includes(g)||u.includes(_)){const b=`${g}: ${_}`,T=new Error(b);throw T.response=d,i=!0,T}else(l.includes(g)||l.includes(_))&&(s=!0)}catch(g){if(g instanceof Error&&i)throw g;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Ac(o)}return f}getStorageAt(e,t,n=this.blockIdentifier){const r=pe(e),s=wm(t),i=new Ut(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:s,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=pe(e),r=new Ut(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=pe(e),r=new Ut(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=pe(e),r=new Ut(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){const r=new Ut(t).identifier;let s={};return qm("0.5",await this.getSpecVersion())||(s={simulation_flags:n?[en.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(i=>this.buildTransaction(i,"fee")),block_id:r,...s})}async invoke(e,t){let n;return Pr(t)?n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:en.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:_t.toHex(e.calldata),version:en.ETransactionVersion.V3,signature:On(e.signature),nonce:pe(t.nonce),resource_bounds:t.resourceBounds,tip:pe(t.tip),paymaster_data:t.paymasterData.map(r=>pe(r)),account_deployment_data:t.accountDeploymentData.map(r=>pe(r)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:_t.toHex(e.calldata),type:en.ETransactionType.INVOKE,max_fee:pe(t.maxFee||0),version:en.ETransactionVersion.V1,signature:On(e.signature),nonce:pe(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},s){let i;if(!cr(e)&&!Pr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:en.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:en.ETransactionVersion.V1,max_fee:pe(s.maxFee||0),signature:On(t),sender_address:n,nonce:pe(s.nonce)}});else if(cr(e)&&!Pr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:en.ETransactionType.DECLARE,contract_class:{sierra_program:_i(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:en.ETransactionVersion.V2,max_fee:pe(s.maxFee||0),signature:On(t),sender_address:n,nonce:pe(s.nonce)}});else if(cr(e)&&Pr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:en.ETransactionType.DECLARE,sender_address:n,compiled_class_hash:r||"",version:en.ETransactionVersion.V3,signature:On(t),nonce:pe(s.nonce),contract_class:{sierra_program:_i(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:s.resourceBounds,tip:pe(s.tip),paymaster_data:s.paymasterData.map(o=>pe(o)),account_deployment_data:s.accountDeploymentData.map(o=>pe(o)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters");return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},s){let i;return Pr(s)?i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:en.ETransactionType.DEPLOY_ACCOUNT,version:en.ETransactionVersion.V3,signature:On(r),nonce:pe(s.nonce),contract_address_salt:pe(n||0),constructor_calldata:_t.toHex(t||[]),class_hash:pe(e),resource_bounds:s.resourceBounds,tip:pe(s.tip),paymaster_data:s.paymasterData.map(o=>pe(o)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}}):i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:_t.toHex(t||[]),class_hash:pe(e),contract_address_salt:pe(n||0),type:en.ETransactionType.DEPLOY_ACCOUNT,max_fee:pe(s.maxFee||0),version:en.ETransactionVersion.V1,signature:On(r),nonce:pe(s.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){const n=new Ut(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:yn(e.entrypoint),calldata:_t.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:s,payload:i}=e,o={from_address:Wm(n),to_address:pe(r),entry_point_selector:wc(s),payload:vm(i)},u=new Ut(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:u})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=Xm(t);let r;if(Pr(e)?r={signature:On(e.signature),nonce:pe(e.nonce),resource_bounds:e.resourceBounds,tip:pe(e.tip),paymaster_data:e.paymasterData.map(s=>pe(s)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(s=>pe(s))}:r={signature:On(e.signature),nonce:pe(e.nonce),max_fee:pe(e.maxFee||0)},e.type===tn.INVOKE)return{type:en.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:_t.toHex(e.calldata),version:pe(e.version||n.v3),...r};if(e.type===tn.DECLARE)return cr(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:_i(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:pe(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:pe(e.version||n.v1),...r};if(e.type===tn.DEPLOY_ACCOUNT){const{account_deployment_data:s,...i}=r;return{type:e.type,constructor_calldata:_t.toHex(e.constructorCalldata||[]),class_hash:pe(e.classHash),contract_address_salt:pe(e.addressSalt||0),version:pe(e.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},mD={};Ht(mD,{RpcChannel:()=>D1});var Qm={headers:{"Content-Type":"application/json"},blockIdentifier:di.PENDING,retries:200},D1=class{constructor(e){W(this,"nodeUrl");W(this,"headers");W(this,"requestId");W(this,"blockIdentifier");W(this,"retries");W(this,"waitMode");W(this,"chainId");W(this,"specVersion");W(this,"transactionRetryIntervalFallback");W(this,"batchClient");W(this,"baseFetch");const{baseFetch:t,batch:n,blockIdentifier:r,chainId:s,headers:i,nodeUrl:o,retries:u,specVersion:l,transactionRetryIntervalFallback:d,waitMode:f}=e||{};Object.values(kf).includes(o)?this.nodeUrl=_l(o,e?.default):o?this.nodeUrl=o:this.nodeUrl=_l(void 0,e?.default),this.baseFetch=t??C1,this.blockIdentifier=r??Qm.blockIdentifier,this.chainId=s,this.headers={...Qm.headers,...i},this.retries=u??Qm.retries,this.specVersion=l,this.transactionRetryIntervalFallback=d,this.waitMode=f??!1,this.requestId=0,typeof n=="number"&&(this.batchClient=new Fv({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch}))}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Br(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new Dv(n,e,t);if(r instanceof el)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:i,result:o}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,i),o}const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:s}=await n.json();return this.errorHandler(e,t,r),s}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){return this.specVersion??(this.specVersion=await this.fetchEndpoint("starknet_specVersion")),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const n=pe(e),r=new Ut(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Ut(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=pe(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Ut(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=pe(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=pe(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=pe(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:s=!0}=t,i=new Ut(n).identifier,o=[];return r&&o.push(X.SKIP_VALIDATE),s&&o.push(X.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(u=>this.buildTransaction(u)),simulation_flags:o})}async waitForTransaction(e,t){const n=pe(e);let{retries:r}=this,s=!1,i=!1;const o=t?.retryInterval??this.transactionRetryIntervalDefault,u=t?.errorStates??[ie.REJECTED],l=t?.successStates??[te.SUCCEEDED,ie.ACCEPTED_ON_L2,ie.ACCEPTED_ON_L1];let d;for(;!s;){await Ac(o);try{d=await this.getTransactionStatus(n);const g=d.execution_status,_=d.finality_status;if(!_)throw new Error("waiting for transaction status");if(u.includes(g)||u.includes(_)){const b=`${g}: ${_}`,T=new Error(b);throw T.response=d,i=!0,T}else(l.includes(g)||l.includes(_))&&(s=!0)}catch(g){if(g instanceof Error&&i)throw g;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Ac(o)}return f}getStorageAt(e,t,n=this.blockIdentifier){const r=pe(e),s=wm(t),i=new Ut(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:s,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=pe(e),r=new Ut(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=pe(e),r=new Ut(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=pe(e),r=new Ut(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){const r=new Ut(t).identifier;let s={};return qm("0.5",await this.getSpecVersion())||(s={simulation_flags:n?[X.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(i=>this.buildTransaction(i,"fee")),block_id:r,...s})}async invoke(e,t){let n;return Pr(t)?n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:Y.INVOKE,sender_address:e.contractAddress,calldata:_t.toHex(e.calldata),version:Oe.V3,signature:On(e.signature),nonce:pe(t.nonce),resource_bounds:t.resourceBounds,tip:pe(t.tip),paymaster_data:t.paymasterData.map(r=>pe(r)),account_deployment_data:t.accountDeploymentData.map(r=>pe(r)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:_t.toHex(e.calldata),type:Y.INVOKE,max_fee:pe(t.maxFee||0),version:Oe.V1,signature:On(e.signature),nonce:pe(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},s){let i;if(!cr(e)&&!Pr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Y.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:Oe.V1,max_fee:pe(s.maxFee||0),signature:On(t),sender_address:n,nonce:pe(s.nonce)}});else if(cr(e)&&!Pr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Y.DECLARE,contract_class:{sierra_program:_i(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:Oe.V2,max_fee:pe(s.maxFee||0),signature:On(t),sender_address:n,nonce:pe(s.nonce)}});else if(cr(e)&&Pr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Y.DECLARE,sender_address:n,compiled_class_hash:r||"",version:Oe.V3,signature:On(t),nonce:pe(s.nonce),contract_class:{sierra_program:_i(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:s.resourceBounds,tip:pe(s.tip),paymaster_data:s.paymasterData.map(o=>pe(o)),account_deployment_data:s.accountDeploymentData.map(o=>pe(o)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters");return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},s){let i;return Pr(s)?i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:Y.DEPLOY_ACCOUNT,version:Oe.V3,signature:On(r),nonce:pe(s.nonce),contract_address_salt:pe(n||0),constructor_calldata:_t.toHex(t||[]),class_hash:pe(e),resource_bounds:s.resourceBounds,tip:pe(s.tip),paymaster_data:s.paymasterData.map(o=>pe(o)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}}):i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:_t.toHex(t||[]),class_hash:pe(e),contract_address_salt:pe(n||0),type:Y.DEPLOY_ACCOUNT,max_fee:pe(s.maxFee||0),version:Oe.V1,signature:On(r),nonce:pe(s.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){const n=new Ut(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:yn(e.entrypoint),calldata:_t.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:s,payload:i}=e,o={from_address:Wm(n),to_address:pe(r),entry_point_selector:wc(s),payload:vm(i)},u=new Ut(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:u})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=Xm(t);let r;if(Pr(e)?r={signature:On(e.signature),nonce:pe(e.nonce),resource_bounds:e.resourceBounds,tip:pe(e.tip),paymaster_data:e.paymasterData.map(s=>pe(s)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(s=>pe(s))}:r={signature:On(e.signature),nonce:pe(e.nonce),max_fee:pe(e.maxFee||0)},e.type===tn.INVOKE)return{type:Y.INVOKE,sender_address:e.contractAddress,calldata:_t.toHex(e.calldata),version:pe(e.version||n.v3),...r};if(e.type===tn.DECLARE)return cr(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:_i(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:pe(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:pe(e.version||n.v1),...r};if(e.type===tn.DEPLOY_ACCOUNT){const{account_deployment_data:s,...i}=r;return{type:e.type,constructor_calldata:_t.toHex(e.constructorCalldata||[]),class_hash:pe(e.classHash),contract_address_salt:pe(e.addressSalt||0),version:pe(e.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},P1=class{constructor(e){W(this,"margin");this.margin=e}estimatedFeeToMaxFee(e){return S1(e,this.margin?.maxFee)}estimateFeeToBounds(e){return gl(e,this.margin?.l1BoundMaxAmount,this.margin?.l1BoundMaxPricePerUnit)}parseGetBlockResponse(e){return{status:"PENDING",...e}}parseTransactionReceipt(e){return"actual_fee"in e&&_n(e.actual_fee)?{...e,actual_fee:{amount:e.actual_fee,unit:"FRI"}}:e}parseFeeEstimateResponse(e){const t=e[0];return{overall_fee:St(t.overall_fee),gas_consumed:St(t.gas_consumed),gas_price:St(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?St(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?St(t.data_gas_price):0n}}parseFeeEstimateBulkResponse(e){return e.map(t=>({overall_fee:St(t.overall_fee),gas_consumed:St(t.gas_consumed),gas_price:St(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?St(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?St(t.data_gas_price):0n}))}parseSimulateTransactionResponse(e){return e.map(t=>({...t,suggestedMaxFee:this.estimatedFeeToMaxFee(t.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(t.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:_n(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},L1=class Op{constructor(t){W(this,"statusReceipt");W(this,"value");[this.statusReceipt,this.value]=Op.isSuccess(t)?["success",t]:Op.isReverted(t)?["reverted",t]:Op.isRejected(t)?["rejected",t]:["error",new Error("Unknown response type")];for(const[n]of Object.entries(this))Object.defineProperty(this,n,{enumerable:!1});for(const[n,r]of Object.entries(t))Object.defineProperty(this,n,{enumerable:!0,writable:!1,value:r})}match(t){return this.statusReceipt in t?t[this.statusReceipt](this.value):t._()}isSuccess(){return this.statusReceipt==="success"}isReverted(){return this.statusReceipt==="reverted"}isRejected(){return this.statusReceipt==="rejected"}isError(){return this.statusReceipt==="error"}static isSuccess(t){return t.execution_status===Cf.SUCCEEDED}static isReverted(t){return t.execution_status===Cf.REVERTED}static isRejected(t){return t.status===Cf.REJECTED}},_D={};Ht(_D,{TypedDataRevision:()=>K,encodeData:()=>j1,encodeType:()=>H1,encodeValue:()=>yl,getDependencies:()=>t_,getMessageHash:()=>bo,getStructHash:()=>bl,getTypeHash:()=>$1,isMerkleTreeType:()=>F1,prepareSelector:()=>V1,validateTypedData:()=>Wf,verifyMessage:()=>ED});var yD={};Ht(yD,{MerkleTree:()=>e_,proofMerklePath:()=>U1});var e_=class Np{constructor(t,n=fl){W(this,"leaves");W(this,"branches",[]);W(this,"root");W(this,"hashMethod");this.hashMethod=n,this.leaves=t,this.root=this.build(t)}build(t){if(t.length===1)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(Np.hash(t[r],"0x0",this.hashMethod)):n.push(Np.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(t,n,r=fl){const[s,i]=[BigInt(t),BigInt(n)].sort((o,u)=>o>=u?1:-1);return r(s,i)}getProof(t,n=this.leaves,r=[]){const s=n.indexOf(t);if(s===-1)throw new Error("leaf not found");if(n.length===1)return r;const i=s%2===0,o=(i?n[s+1]:n[s-1])??"0x0",u=[...r,o],l=this.leaves.length===n.length?-1:this.branches.findIndex(f=>f.length===n.length),d=this.branches[l+1]??[this.root];return this.getProof(Np.hash(i?t:o,i?o:t,this.hashMethod),d,u)}};function U1(e,t,n,r=fl){if(n.length===0)return e===t;const[s,...i]=n;return U1(e,e_.hash(t,s,r),i,r)}var bD={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Lr={[K.ACTIVE]:{domain:"StarknetDomain",hashMethod:b1,hashMerkleMethod:_1,escapeTypeString:e=>`"${e}"`,presetTypes:bD},[K.LEGACY]:{domain:"StarkNetDomain",hashMethod:y1,hashMerkleMethod:fl,escapeTypeString:e=>e,presetTypes:{}}};function Kf(e,t,{min:n,max:r}){const s=BigInt(e);at(s>=n&&s<=r,`${s} (${t}) is out of bounds [${n}, ${r}]`)}function M1({types:e,domain:t}){if(Lr[K.ACTIVE].domain in e&&t.revision===K.ACTIVE)return K.ACTIVE;if(Lr[K.LEGACY].domain in e&&(t.revision??K.LEGACY)===K.LEGACY)return K.LEGACY}function Ws(e){try{return pe(e)}catch{if(_n(e))return pe(Hn(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Wf(e){const t=e;return!!(t.message&&t.primaryType&&t.types&&M1(t))}function V1(e){return br(e)?e:yn(e)}function F1(e){return e.type==="merkletree"}function t_(e,t,n=[],r="",s=K.LEGACY){return t[t.length-1]==="*"?t=t.slice(0,-1):s===K.ACTIVE&&(t==="enum"?t=r:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),n.includes(t)||!e[t]?n:[t,...e[t].reduce((i,o)=>[...i,...t_(e,o.type,i,o.contains,s).filter(u=>!i.includes(u))],[])]}function wD(e,t){if(t.parent&&t.key){const r=e[t.parent].find(i=>i.name===t.key);if(!F1(r))throw new Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}function H1(e,t,n=K.LEGACY){const r=n===K.ACTIVE?{...e,...Lr[n].presetTypes}:e,[s,...i]=t_(r,t,void 0,void 0,n),o=s?[s,...i.sort()]:[],u=Lr[n].escapeTypeString;return o.map(l=>{const d=r[l].map(f=>{const g=f.type==="enum"&&n===K.ACTIVE?f.contains:f.type,_=g.match(/^\(.*\)$/)?`(${g.slice(1,-1).split(",").map(b=>b&&u(b)).join(",")})`:u(g);return`${u(f.name)}:${_}`});return`${u(l)}(${d})`}).join("")}function $1(e,t,n=K.LEGACY){return yn(H1(e,t,n))}function yl(e,t,n,r={},s=K.LEGACY){if(e[t])return[t,bl(e,t,n,s)];if(Lr[s].presetTypes[t])return[t,bl(Lr[s].presetTypes,t,n,s)];if(t.endsWith("*")){const i=n.map(o=>yl(e,t.slice(0,-1),o,void 0,s)[1]);return[t,Lr[s].hashMethod(i)]}switch(t){case"enum":{if(s===K.ACTIVE){const[i,o]=Object.entries(n)[0],u=e[r.parent].find(_=>_.name===r.key),l=e[u.contains],d=l.find(_=>_.name===i),f=l.indexOf(d),g=d.type.slice(1,-1).split(",").map((_,b)=>{if(!_)return _;const T=o[b];return yl(e,_,T,void 0,s)[1]});return[t,Lr[s].hashMethod([f,...g])]}return[t,Ws(n)]}case"merkletree":{const i=wD(e,r),o=n.map(l=>yl(e,i,l,void 0,s)[1]),{root:u}=new e_(o,Lr[s].hashMerkleMethod);return["felt",u]}case"selector":return["felt",V1(n)];case"string":{if(s===K.ACTIVE){const i=Of(n),o=[i.data.length,...i.data,i.pending_word,i.pending_word_len];return[t,Lr[s].hashMethod(o)]}return[t,Ws(n)]}case"i128":{if(s===K.ACTIVE){const i=BigInt(n);return Kf(i,t,Ev),[t,Ws(i<0n?gm+i:i)]}return[t,Ws(n)]}case"timestamp":case"u128":return s===K.ACTIVE&&Kf(n,t,vv),[t,Ws(n)];case"felt":case"shortstring":return s===K.ACTIVE&&Kf(Ws(n),t,ym),[t,Ws(n)];case"ClassHash":case"ContractAddress":return s===K.ACTIVE&&Kf(n,t,ym),[t,Ws(n)];case"bool":return s===K.ACTIVE&&at(bm(n),`Type mismatch for ${t} ${n}`),[t,Ws(n)];default:{if(s===K.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,Ws(n)]}}}function j1(e,t,n,r=K.LEGACY){const s=e[t]??Lr[r].presetTypes[t],[i,o]=s.reduce(([u,l],d)=>{if(n[d.name]===void 0||n[d.name]===null&&d.type!=="enum")throw new Error(`Cannot encode data: missing data for '${d.name}'`);const f=n[d.name],g={parent:t,key:d.name},[_,b]=yl(e,d.type,f,g,r);return[[...u,_],[...l,b]]},[["felt"],[$1(e,t,r)]]);return[i,o]}function bl(e,t,n,r=K.LEGACY){return Lr[r].hashMethod(j1(e,t,n,r)[1])}function bo(e,t){if(!Wf(e))throw new Error("Typed data does not match JSON schema");const n=M1(e),{domain:r,hashMethod:s}=Lr[n],i=[Hn("StarkNet Message"),bl(e.types,r,e.domain,n),t,bl(e.types,e.primaryType,e.message,n)];return s(i)}function ED(e,t,n,r){const s=Wf(e);if(!rl(e)&&!s)throw new Error("message has a wrong format.");if(s&&r===void 0)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(s&&!rl(r))throw new Error("accountAddress shall be a BigNumberish");const i=s?bo(e,r):pe(e),o=Array.isArray(t)?new Ls(BigInt(t[0]),BigInt(t[1])):t,u=pe(n);return bg(o,i,u)}var Z1=class{constructor(e){W(this,"responseParser");W(this,"channel");W(this,"getStateUpdate",this.getBlockStateUpdate);e&&"channel"in e?(this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new P1):(this.channel=new D1({...e,waitMode:!1}),this.responseParser=new P1(e?.feeMarginPercentage))}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}async getSpecVersion(){return this.channel.getSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if(e===di.LATEST)return;const n=await this.getBlockNumber(),r=e===di.PENDING?n+1:Number(pe(e));if(r<=n)return;const{retries:s}=this.channel;let i=s,o=!1;for(;!o;)if(await this.getBlockNumber()===r?o=!0:await Ac(t),i-=1,i<=0)throw new Error(`waitForBlock() timed-out after ${s} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);at(t.type==="L1_HANDLER","This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:s,nonce:i}=t,o=[n[0],r,i,s,n.length-1,...n.slice(1)];return If(o)}async getBlockWithReceipts(e){if(this.channel instanceof Rv.RpcChannel)throw new el("Unsupported method for RPC version");return this.channel.getBlockWithReceipts(e)}async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getPendingTransactions(){const{transactions:e}=await this.getBlockWithTxHashes(di.PENDING).then(this.responseParser.parseGetBlockResponse);return Promise.all(e.map(t=>this.getTransactionByHash(t)))}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e),n=this.responseParser.parseTransactionReceipt(t);return new L1(n)}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(n=>this.responseParser.parseSimulateTransactionResponse(n))}async waitForTransaction(e,t){const n=await this.channel.waitForTransaction(e,t);return new L1(n)}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let s;if(e)s=await this.getClassAt(e,n);else if(t)s=await this.getClass(t,n);else throw Error("getContractVersion require contractAddress or classHash");return cr(s)?r?{cairo:"1",compiler:Bm(s.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,n,r){return this.getInvokeEstimateFee(e,t,n,r)}async getInvokeEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:tn.INVOKE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(s=>this.responseParser.parseFeeEstimateResponse(s))}async getDeclareEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:tn.DECLARE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(s=>this.responseParser.parseFeeEstimateResponse(s))}async getDeployAccountEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:tn.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(s=>this.responseParser.parseFeeEstimateResponse(s))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(n=>this.responseParser.parseFeeEstimateBulkResponse(n))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,n,r,s){const i=Wf(e);if(!rl(e)&&!i)throw new Error("message has a wrong format.");if(!rl(n))throw new Error("accountAddress shall be a BigNumberish");const o=i?bo(e,n):pe(e),u=r?[r]:["isValidSignature","is_valid_signature"],l=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","is invalid, with respect to the public key","INVALID_SIG"]};let d;for(const f of u)try{const g=await this.callContract({contractAddress:pe(n),entrypoint:f,calldata:_t.compile({hash:St(o).toString(),signature:pl(t)})});if(l.nokResponse.includes(g[0].toString()))return!1;if(l.okResponse.length===0||l.okResponse.includes(g[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(g){if(l.error.some(_=>g.message.includes(_)))return!1;d=g}throw Error(`Signature verification Error: ${d}`)}async isClassDeclared(e,t){let n;if(!e.classHash&&"contract"in e)n=ml(e).classHash;else if(e.classHash)n=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(n,t)instanceof Object}catch(r){if(r instanceof el)return!1;throw r}}async prepareInvocations(e){const t=[];for(const n of e)n.type===tn.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||t.unshift(n):t.push(n);return t}},vD={};Ht(vD,{StarknetIdContract:()=>a_,StarknetIdIdentityContract:()=>i_,StarknetIdMulticallContract:()=>o_,StarknetIdPfpContract:()=>u_,StarknetIdPopContract:()=>l_,StarknetIdVerifierContract:()=>c_,dynamicCallData:()=>Dt,dynamicFelt:()=>Yn,execution:()=>Gs,getStarknetIdContract:()=>qf,getStarknetIdIdentityContract:()=>q1,getStarknetIdMulticallContract:()=>G1,getStarknetIdPfpContract:()=>X1,getStarknetIdPopContract:()=>J1,getStarknetIdVerifierContract:()=>Y1,isStarkDomain:()=>Q1,useDecoded:()=>s_,useEncoded:()=>W1});var qs="abcdefghijklmnopqrstuvwxyz0123456789-",Sc=BigInt(qs.length+1),$n="\u8FD9\u6765",z1=BigInt(qs.length),n_=BigInt($n.length),K1=BigInt($n.length+1);function r_(e){let t=0;for(;e.endsWith($n[$n.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function s_(e){let t="";return e.forEach(n=>{for(;n!==mn;){const i=n%Sc;if(n/=Sc,i===BigInt(qs.length)){const o=n/K1;if(o===mn){const u=n%K1;n=o,u===mn?t+=qs[0]:t+=$n[Number(u)-1]}else{const u=n%n_;t+=$n[Number(u)],n/=n_}}else t+=qs[Number(i)]}const[r,s]=r_(t);s&&(t=r+(s%2===0?$n[$n.length-1].repeat(s/2-1)+$n[0]+qs[1]:$n[$n.length-1].repeat((s-1)/2+1))),t+="."}),t&&t.concat("stark")}function W1(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith($n[0]+qs[1])){const[r,s]=r_(e.substring(0,e.length-2));e=r+$n[$n.length-1].repeat(2*(s+1))}else{const[r,s]=r_(e);s&&(e=r+$n[$n.length-1].repeat(1+2*(s-1)))}for(let r=0;r<e.length;r+=1){const s=e[r],i=qs.indexOf(s),o=BigInt(qs.indexOf(s));if(i!==-1)r===e.length-1&&e[r]===qs[0]?(t+=n*z1,n*=Sc,n*=Sc):(t+=n*o,n*=Sc);else if($n.indexOf(s)!==-1){t+=n*z1,n*=Sc;const u=(r===e.length-1?1:0)+$n.indexOf(s);t+=n*BigInt(u),n*=n_}}return t}var a_={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function qf(e){switch(e){case"0x534e5f4d41494e":return a_.MAINNET;case"0x534e5f5345504f4c4941":return a_.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var i_={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function q1(e){switch(e){case"0x534e5f4d41494e":return i_.MAINNET;case"0x534e5f5345504f4c4941":return i_.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var o_="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function G1(e){switch(e){case"0x534e5f4d41494e":return o_;case"0x534e5f5345504f4c4941":return o_;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var c_={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function Y1(e){switch(e){case"0x534e5f4d41494e":return c_.MAINNET;case"0x534e5f5345504f4c4941":return c_.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var u_={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function X1(e){switch(e){case"0x534e5f4d41494e":return u_.MAINNET;case"0x534e5f5345504f4c4941":return u_.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var l_={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function J1(e){switch(e){case"0x534e5f4d41494e":return l_.MAINNET;case"0x534e5f5345504f4c4941":return l_.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function Gs(e,t=void 0,n=void 0){return new ll({Static:e,IfEqual:t?Tc(t[0],t[1],t[2]):void 0,IfNotEqual:n?Tc(n[0],n[1],n[2]):void 0})}function Yn(e,t=void 0){return new ll({Hardcoded:e,Reference:t?Tc(t[0],t[1]):void 0})}function Dt(e,t=void 0,n=void 0){return new ll({Hardcoded:e,Reference:t?Tc(t[0],t[1]):void 0,ArrayReference:n?Tc(n[0],n[1]):void 0})}function Q1(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var TD=class Rp{async getStarkName(t,n){return Rp.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return Rp.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,s,i,o,u){return Rp.getStarkProfile(this,t,n,r,s,i,o,u)}static async getStarkName(t,n,r){const s=await t.getChainId(),i=r??qf(s);try{const u=(await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:_t.compile({address:n,hint:[]})})).map(d=>BigInt(d)).slice(1),l=s_(u);if(!l)throw Error("Starkname not found");return l}catch(o){throw o instanceof Error&&o.message==="Starkname not found"?o:Error("Could not get stark name")}}static async getAddressFromStarkName(t,n,r){const s=n.endsWith(".stark")?n:`${n}.stark`;if(!Q1(s))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),o=r??qf(i);try{const u=s.replace(".stark","").split(".").map(d=>W1(d).toString(10));return(await t.callContract({contractAddress:o,entrypoint:"domain_to_address",calldata:_t.compile({domain:u,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,n,r,s,i,o,u,l){const d=await t.getChainId(),f=r??qf(d),g=s??q1(d),_=i??Y1(d),b=o??X1(d),T=u??J1(d),I=l??G1(d);try{const k=[{execution:Gs({}),to:Dt(f),selector:Dt(yn("address_to_domain")),calldata:[Dt(n),Dt("0")]},{execution:Gs({}),to:Yn(f),selector:Yn(yn("domain_to_id")),calldata:[Dt(void 0,void 0,[0,0])]},{execution:Gs({}),to:Yn(g),selector:Yn(yn("get_verifier_data")),calldata:[Dt(void 0,[1,0]),Dt(Hn("twitter")),Dt(_),Dt("0")]},{execution:Gs({}),to:Yn(g),selector:Yn(yn("get_verifier_data")),calldata:[Dt(void 0,[1,0]),Dt(Hn("github")),Dt(_),Dt("0")]},{execution:Gs({}),to:Yn(g),selector:Yn(yn("get_verifier_data")),calldata:[Dt(void 0,[1,0]),Dt(Hn("discord")),Dt(_),Dt("0")]},{execution:Gs({}),to:Yn(g),selector:Yn(yn("get_verifier_data")),calldata:[Dt(void 0,[1,0]),Dt(Hn("proof_of_personhood")),Dt(T),Dt("0")]},{execution:Gs({}),to:Yn(g),selector:Yn(yn("get_verifier_data")),calldata:[Dt(void 0,[1,0]),Dt(Hn("nft_pp_contract")),Dt(b),Dt("0")]},{execution:Gs({}),to:Yn(g),selector:Yn(yn("get_extended_verifier_data")),calldata:[Dt(void 0,[1,0]),Dt(Hn("nft_pp_id")),Dt("2"),Dt(b),Dt("0")]},{execution:Gs(void 0,void 0,[6,0,0]),to:Yn(void 0,[6,0]),selector:Yn(yn("tokenURI")),calldata:[Dt(void 0,[7,1]),Dt(void 0,[7,2])]}],Z=await t.callContract({contractAddress:I,entrypoint:"aggregate",calldata:_t.compile({calls:k})});if(Array.isArray(Z)){const Q=parseInt(Z[0],16),ee=[];let re=1;for(let Ve=0;Ve<Q&&re<Z.length;Ve+=1){const Qe=parseInt(Z[re],16);re+=1;const le=Z.slice(re,re+Qe);ee.push(le),re+=Qe}const Se=s_(ee[0].slice(1).map(Ve=>BigInt(Ve))),me=ee[2][0]!=="0x0"?BigInt(ee[2][0]).toString():void 0,oe=ee[3][0]!=="0x0"?BigInt(ee[3][0]).toString():void 0,Ee=ee[4][0]!=="0x0"?BigInt(ee[4][0]).toString():void 0,Ie=ee[5][0]==="0x1",_e=(Z[0]==="0x9"?ee[8].slice(1).map(Ve=>lo(Ve)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(ee[1][0]).toString()}`;return{name:Se,twitter:me,github:oe,discord:Ee,proofOfPersonhood:Ie,profilePicture:_e}}throw Error("Error while calling aggregate function")}catch(k){throw k instanceof Error?k:Error("Could not get user stark profile data from address")}}},eT=class extends lm(Z1,TD){},GH=class{},tT=new Z1({default:!0}),YH=class{},xD=class{constructor(e=Su.randomPrivateKey()){W(this,"pk");this.pk=e instanceof Uint8Array?ir(e):pe(e)}async getPubKey(){return ku(this.pk)}async signMessage(e,t){const n=bo(e,t);return this.signRaw(n)}async signTransaction(e,t){const n=yo(e,t.cairoVersion);let r;if(Object.values(Le.ETransactionVersion2).includes(t.version)){const s=t;r=Aa({...s,senderAddress:s.walletAddress,compiledCalldata:n,version:s.version})}else if(Object.values(Le.ETransactionVersion3).includes(t.version)){const s=t;r=Aa({...s,senderAddress:s.walletAddress,compiledCalldata:n,version:s.version,nonceDataAvailabilityMode:cn(s.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(s.feeDataAvailabilityMode)})}else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){const t=_t.compile(e.constructorCalldata);let n;if(Object.values(Le.ETransactionVersion2).includes(e.version)){const r=e;n=Sa({...r,salt:r.addressSalt,constructorCalldata:t,version:r.version})}else if(Object.values(Le.ETransactionVersion3).includes(e.version)){const r=e;n=Sa({...r,salt:r.addressSalt,compiledConstructorCalldata:t,version:r.version,nonceDataAvailabilityMode:cn(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(r.feeDataAvailabilityMode)})}else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(n)}async signDeclareTransaction(e){let t;if(Object.values(Le.ETransactionVersion2).includes(e.version)){const n=e;t=_o({...n,version:n.version})}else if(Object.values(Le.ETransactionVersion3).includes(e.version)){const n=e;t=_o({...n,version:n.version,nonceDataAvailabilityMode:cn(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(n.feeDataAvailabilityMode)})}else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return yg(e,this.pk)}},AD={};Ht(AD,{UINT_128_MAX:()=>Ec,UINT_256_MAX:()=>Gv,bnToUint256:()=>d_,isUint256:()=>kD,uint256ToBN:()=>SD});function SD(e){return new In(e).toBigInt()}function kD(e){return In.is(e)}function d_(e){return new In(e).toUint256HexString()}var XH=class{constructor(e=k1()){W(this,"pk");this.pk=e instanceof Uint8Array?ir(e).padStart(64,"0"):on(pe(e)).padStart(64,"0")}async getPubKey(){return ht(ir(secp256k12.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(e,t){const n=bo(e,t),r=secp256k12.sign(on(yc(n)),this.pk);return this.formatEthSignature(r)}async signTransaction(e,t){const n=yo(e,t.cairoVersion);let r;if(Object.values(Le.ETransactionVersion2).includes(t.version)){const i=t;r=Aa({...i,senderAddress:i.walletAddress,compiledCalldata:n,version:i.version})}else if(Object.values(Le.ETransactionVersion3).includes(t.version)){const i=t;r=Aa({...i,senderAddress:i.walletAddress,compiledCalldata:n,version:i.version,nonceDataAvailabilityMode:cn(i.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(i.feeDataAvailabilityMode)})}else throw Error("unsupported signTransaction version");const s=secp256k12.sign(on(yc(r)),this.pk);return this.formatEthSignature(s)}async signDeployAccountTransaction(e){const t=_t.compile(e.constructorCalldata);let n;if(Object.values(Le.ETransactionVersion2).includes(e.version)){const s=e;n=Sa({...s,salt:s.addressSalt,constructorCalldata:t,version:s.version})}else if(Object.values(Le.ETransactionVersion3).includes(e.version)){const s=e;n=Sa({...s,salt:s.addressSalt,compiledConstructorCalldata:t,version:s.version,nonceDataAvailabilityMode:cn(s.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(s.feeDataAvailabilityMode)})}else throw Error("unsupported signDeployAccountTransaction version");const r=secp256k12.sign(on(yc(n)),this.pk);return this.formatEthSignature(r)}async signDeclareTransaction(e){let t;if(Object.values(Le.ETransactionVersion2).includes(e.version)){const r=e;t=_o({...r,version:r.version})}else if(Object.values(Le.ETransactionVersion3).includes(e.version)){const r=e;t=_o({...r,version:r.version,nonceDataAvailabilityMode:cn(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(r.feeDataAvailabilityMode)})}else throw Error("unsupported signDeclareTransaction version");const n=secp256k12.sign(on(yc(t)),this.pk);return this.formatEthSignature(n)}formatEthSignature(e){const t=d_(e.r),n=d_(e.s);return[pe(t.low),pe(t.high),pe(n.low),pe(n.high),pe(e.recovery)]}},CD=class{constructor(e,t,n="LedgerW",r=ID){W(this,"transporter");W(this,"_transporter");W(this,"accountID");W(this,"eip2645applicationName");W(this,"pathBuffer");W(this,"appVersion");W(this,"pubKey");W(this,"fullPubKey");at(t>=0,"Ledger account ID shall not be a negative number."),at(t<=pm,"Ledger account ID shall be < 2**31."),at(!!n,"Ledger application name shall not be empty."),this.transporter=e,this._transporter=this.transporter,this.accountID=t,this.pubKey="",this.fullPubKey="",this.eip2645applicationName=n,this.appVersion="",this.pathBuffer=r(this.accountID,this.eip2645applicationName)}async getPubKey(){return this.pubKey||await this.getPublicKeys(),this.pubKey}async getFullPubKey(){return this.fullPubKey||await this.getPublicKeys(),this.fullPubKey}async getAppVersion(){if(!this.appVersion){const e=await this._transporter.send(+"0x5a",0,0,0);this.appVersion=`${e[0]}.${e[1]}.${e[2]}`}return this.appVersion}async signMessage(e,t){const n=bo(e,t);return this.signRaw(n)}async signTransaction(e,t){const n=yo(e,t.cairoVersion);let r;if(Object.values(_c).includes(t.version)){const s=t;r=Aa({...s,senderAddress:s.walletAddress,compiledCalldata:n,version:s.version})}else if(Object.values(Le.ETransactionVersion3).includes(t.version)){const s=t;r=Aa({...s,senderAddress:s.walletAddress,compiledCalldata:n,version:s.version,nonceDataAvailabilityMode:cn(s.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(s.feeDataAvailabilityMode)})}else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){const t=_t.compile(e.constructorCalldata);let n;if(Object.values(_c).includes(e.version)){const r=e;n=Sa({...r,salt:r.addressSalt,constructorCalldata:t,version:r.version})}else if(Object.values(Le.ETransactionVersion3).includes(e.version)){const r=e;n=Sa({...r,salt:r.addressSalt,compiledConstructorCalldata:t,version:r.version,nonceDataAvailabilityMode:cn(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(r.feeDataAvailabilityMode)})}else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(n)}async signDeclareTransaction(e){let t;if(Object.values(_c).includes(e.version)){const n=e;t=_o({...n,version:n.version})}else if(Object.values(Le.ETransactionVersion3).includes(e.version)){const n=e;t=_o({...n,version:n.version,nonceDataAvailabilityMode:cn(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(n.feeDataAvailabilityMode)})}else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){ht(ir(await this._transporter.send(+"0x5a",2,0,0,qt.from(this.pathBuffer))));const t=pe(BigInt(e)<<4n),n=xa(t),r=Uint8Array.from(await this._transporter.send(+"0x5a",2,1,0,qt.from(n))),s=BigInt(ht(ir(r.subarray(1,33)))),i=BigInt(ht(ir(r.subarray(33,65)))),o=r[65];return new Ls(s,i).addRecoveryBit(o)}async getPublicKeys(){const e=this.pathBuffer,t=Uint8Array.from(await this._transporter.send(+"0x5a",1,0,0,qt.from(e)));this.pubKey=ht(ir(t.subarray(1,33))),this.fullPubKey=ht(ir(t.subarray(0,65)))}};function ID(e,t="LedgerW"){const n=new Uint8Array([128,0,10,85]),r=new Uint8Array([71,65,233,201]),s=t==="LedgerW"?new Uint8Array([43,206,231,219]):xm(t),i=new Uint8Array([0,0,0,0]),o=pe(e),u=ht(on(o).padStart(8,"0")),l=xa(u),d=new Uint8Array([0,0,0,0]);return er([n,r,s,i,l,d])}function f_(e){const t=pe(ht(e.toString())),n=on(t).padStart(64,"0");return ht(n)}function OD(e){const t=f_(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return Em(t,mn,mm-1n,"Starknet Address"),t}function ND(e){const t=on(OD(e)).toLowerCase().split(""),n=on(Am(e)),r=hexToBytes2(n.padStart(64,"0"));for(let s=0;s<t.length;s+=2)r[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(r[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return ht(t.join(""))}function JH(e){return ND(e)===e}var QH=class extends CD{constructor(e,t,n="LedgerW",r=RD){super(e,t,n,r)}async signTransaction(e,t){const n=yo(e,t.cairoVersion);if(Object.values(_c).includes(t.version)){const r=t,s=Aa({...r,senderAddress:r.walletAddress,compiledCalldata:n,version:r.version}),i=await this.signTxV1(r,e);return at(St(s)===i.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}if(Object.values(Le.ETransactionVersion3).includes(t.version)){const r=t,s=Aa({...r,senderAddress:r.walletAddress,compiledCalldata:n,version:r.version,nonceDataAvailabilityMode:cn(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(r.feeDataAvailabilityMode)}),i=await this.signTxV3(r,e);return at(St(s)===i.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}throw Error("unsupported signTransaction version")}async signDeployAccountTransaction(e){const t=_t.compile(e.constructorCalldata);let n;if(Object.values(_c).includes(e.version)){const r=e;n=Sa({...r,salt:r.addressSalt,constructorCalldata:t,version:r.version});const s=await this.signDeployAccountV1(r);return at(St(n)===s.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),s.signature}if(Object.values(Le.ETransactionVersion3).includes(e.version)){const r=e;n=Sa({...r,salt:r.addressSalt,compiledConstructorCalldata:t,version:r.version,nonceDataAvailabilityMode:cn(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:cn(r.feeDataAvailabilityMode)});const s=await this.signDeployAccountV3(r);return at(St(n)===s.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),s.signature}throw Error("unsupported signDeployAccountTransaction version")}convertBnToLedger(e){return xa(f_(pe(e)))}decodeSignatureLedger(e){const t=BigInt(ht(ir(e.subarray(0,32)))),n=BigInt(ht(ir(e.subarray(33,65)))),r=BigInt(ht(ir(e.subarray(65,97)))),s=e[97],o=new Ls(n,r).addRecoveryBit(s);return{hash:t,signature:o}}encodeCall(e){const t=this.convertBnToLedger(e.contractAddress),n=xa(f_(wc(e.entrypoint)));let r=new Uint8Array([]);if(e.calldata){const u=_t.compile(e.calldata);r=er(u.map(l=>this.convertBnToLedger(l)))}const s=er([t,n,r]),i=[],o=7*32;for(let u=0;u<s.length;u+=o)i.push(s.subarray(u,u+o));return i}async signTxV1(e,t){await this._transporter.send(+"0x5a",4,0,0,qt.from(this.pathBuffer));const n=this.convertBnToLedger(e.walletAddress),r=this.convertBnToLedger(e.maxFee),s=this.convertBnToLedger(e.chainId),i=this.convertBnToLedger(e.nonce),o=er([n,r,s,i]);await this._transporter.send(+"0x5a",4,1,0,qt.from(o));const u=this.convertBnToLedger(t.length);await this._transporter.send(+"0x5a",4,2,0,qt.from(u));let l=new Uint8Array(0);for(const d of t){const f=this.encodeCall(d);await this._transporter.send(+"0x5a",4,3,0,qt.from(f[0])),f.length>1&&f.slice(1).forEach(async g=>{await this._transporter.send(+"0x5a",4,3,1,qt.from(g))}),l=await this._transporter.send(+"0x5a",4,3,2)}return this.decodeSignatureLedger(l)}async signTxV3(e,t){at(e.paymasterData.length<=7,"Paymaster data includes more than 7 items."),at(e.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(+"0x5a",3,0,0,qt.from(this.pathBuffer));const n=this.convertBnToLedger(e.walletAddress),r=this.convertBnToLedger(e.tip),s=this.convertBnToLedger(e.chainId),i=this.convertBnToLedger(e.nonce),o=this.convertBnToLedger(Vf(e.nonceDataAvailabilityMode===Le.EDataAvailabilityMode.L1?Le.EDAMode.L1:Le.EDAMode.L2,e.feeDataAvailabilityMode===Le.EDataAvailabilityMode.L1?Le.EDAMode.L1:Le.EDAMode.L2)),u=this.convertBnToLedger(Ff(e.resourceBounds)),l=this.convertBnToLedger(Hf(e.resourceBounds)),d=er([n,r,u,l,s,i,o]);await this._transporter.send(+"0x5a",3,1,0,qt.from(d));const f=er(e.paymasterData.map(T=>this.convertBnToLedger(T)));await this._transporter.send(+"0x5a",3,2,0,qt.from(f));const g=er(e.paymasterData.map(T=>this.convertBnToLedger(T)));await this._transporter.send(+"0x5a",3,3,0,qt.from(g));const _=this.convertBnToLedger(t.length);await this._transporter.send(+"0x5a",3,4,0,qt.from(_));let b=new Uint8Array(0);for(const T of t){const I=this.encodeCall(T);await this._transporter.send(+"0x5a",3,5,0,qt.from(I[0])),I.length>1&&I.slice(1).forEach(async k=>{await this._transporter.send(+"0x5a",3,5,1,qt.from(k))}),b=await this._transporter.send(+"0x5a",3,5,2)}return this.decodeSignatureLedger(b)}async signDeployAccountV1(e){await this._transporter.send(+"0x5a",6,0,0,qt.from(this.pathBuffer));const t=this.convertBnToLedger(e.contractAddress),n=this.convertBnToLedger(e.classHash),r=this.convertBnToLedger(e.addressSalt),s=this.convertBnToLedger(e.chainId),i=this.convertBnToLedger(e.nonce),o=er([t,n,r,s,i]);await this._transporter.send(+"0x5a",6,1,0,qt.from(o));const u=this.convertBnToLedger(e.maxFee);await this._transporter.send(+"0x5a",6,2,0,qt.from(u));const l=_t.compile(e.constructorCalldata),d=this.convertBnToLedger(l.length);await this._transporter.send(+"0x5a",6,3,0,qt.from(d));const f=er(l.map(T=>this.convertBnToLedger(T))),g=[],_=7*32;for(let T=0;T<f.length;T+=_)g.push(f.subarray(T,T+_));let b=new Uint8Array(0);for(const T of g)b=await this._transporter.send(+"0x5a",6,4,0,qt.from(T));return this.decodeSignatureLedger(b)}async signDeployAccountV3(e){await this._transporter.send(+"0x5a",5,0,0,qt.from(this.pathBuffer));const t=this.convertBnToLedger(e.contractAddress),n=this.convertBnToLedger(e.chainId),r=this.convertBnToLedger(e.nonce),s=this.convertBnToLedger(Vf(e.nonceDataAvailabilityMode===Le.EDataAvailabilityMode.L1?Le.EDAMode.L1:Le.EDAMode.L2,e.feeDataAvailabilityMode===Le.EDataAvailabilityMode.L1?Le.EDAMode.L1:Le.EDAMode.L2)),i=this.convertBnToLedger(e.classHash),o=this.convertBnToLedger(e.addressSalt),u=er([t,n,r,s,i,o]);await this._transporter.send(+"0x5a",5,1,0,qt.from(u));const l=this.convertBnToLedger(e.tip),d=this.convertBnToLedger(Ff(e.resourceBounds)),f=this.convertBnToLedger(Hf(e.resourceBounds)),g=er([l,d,f]);await this._transporter.send(+"0x5a",5,2,0,qt.from(g));const _=er(e.paymasterData.map(ee=>this.convertBnToLedger(ee)));await this._transporter.send(+"0x5a",5,3,0,qt.from(_));const b=_t.compile(e.constructorCalldata),T=this.convertBnToLedger(b.length);await this._transporter.send(+"0x5a",5,4,0,qt.from(T));const I=er(b.map(ee=>this.convertBnToLedger(ee))),k=[],Z=7*32;for(let ee=0;ee<I.length;ee+=Z)k.push(I.subarray(ee,ee+Z));let Q=new Uint8Array(0);for(const ee of k)Q=await this._transporter.send(+"0x5a",5,5,0,qt.from(ee));return this.decodeSignatureLedger(Q)}};function RD(e,t="LedgerW"){const n=new Uint8Array([Qu,0,10,85]),r=new Uint8Array([71|Qu,65,233,201]),s=t==="LedgerW"?new Uint8Array([43,206,231,219]):xm(t),i=er([new Uint8Array([s[0]|Qu]),s.subarray(1)]),o=new Uint8Array([Qu,0,0,0]),u=pe(BigInt(e)|Nv),l=ht(on(u).padStart(8,"0")),d=xa(l),f=new Uint8Array([0,0,0,0]);return er([n,r,i,o,d,f])}var BD={};Ht(BD,{getAbiEvents:()=>nT,isAbiEvent:()=>h_,parseEvents:()=>sT,parseUDCEvent:()=>aT});function h_(e){return e.type==="event"}function DD(e){return e.filter(t=>t.type==="event").reduce((t,n)=>{const r=n.name,s={...n};return s.name=r,{...t,[ht(sr(li(r)).toString(16))]:s}},{})}function PD(e){const t=e.filter(s=>h_(s)&&s.kind==="struct"),n=e.filter(s=>h_(s)&&s.kind==="enum");return t.reduce((s,i)=>{let o=[],{name:u}=i,l=!1;const d=_=>_.type===u;for(;;){const _=n.find(T=>T.variants.some(d));if(Cn(_))break;const b=_.variants.find(d);o.unshift(b.name),b.kind==="flat"&&(l=!0),u=_.name}if(o.length===0)throw new Error("inconsistency in ABI events definition.");l&&(o=[o[o.length-1]]);const f=o.pop();let g={[ht(sr(li(f)).toString(16))]:i};for(;o.length>0;)g={[ht(sr(li(o.pop())).toString(16))]:g};return g={...g},rT(s,g)},{})}function nT(e){return Rm(e)?PD(e):DD(e)}function rT(e,t){const n={...e};return $s(e)&&$s(t)&&Object.keys(t).forEach(r=>{$s(t[r])?r in e?n[r]=rT(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}function sT(e,t,n,r){return e.flat().reduce((i,o)=>{let u=t[o.keys.shift()??0];if(!u)return i;for(;!u.name;){const b=o.keys.shift();at(!!b,'Not enough data in "keys" property of this event.'),u=u[b]}const l={};l[u.name]={};const d=o.keys[Symbol.iterator](),f=o.data[Symbol.iterator](),g=u.members?.filter(b=>b.kind==="key")||u.keys,_=u.members?.filter(b=>b.kind==="data")||u.data;return g.forEach(b=>{l[u.name][b.name]=Uf(d,b,n,r,l[u.name])}),_.forEach(b=>{l[u.name][b.name]=Uf(f,b,n,r,l[u.name])}),"block_hash"in o&&(l.block_hash=o.block_hash),"block_number"in o&&(l.block_number=o.block_number),"transaction_hash"in o&&(l.transaction_hash=o.transaction_hash),i.push(l),i},[])}function aT(e){if(!e.events?.length)throw new Error("UDC emitted event is empty");const t=e.events.find(n=>tl(n.from_address)===tl(oo.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}var LD={};Ht(LD,{buildExecuteFromOutsideCallData:()=>uT,getOutsideCall:()=>p_,getTypedData:()=>cT});function p_(e){const t=e.calldata??[],n=Array.isArray(t)?t:_t.compile(t);return{to:e.contractAddress,selector:yn(e.entrypoint),calldata:n}}function iT(e,t){const n=p_(e);return t==="1"?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function oT(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,...t==="2"?{revision:"1"}:{}}}function cT(e,t,n,r,s){return s==="1"?{types:Uv,primaryType:"OutsideExecution",domain:oT(e,s),message:{...t,nonce:n,calls_len:r.length,calls:r.map(i=>iT(i,s))}}:{types:Mv,primaryType:"OutsideExecution",domain:oT(e,s),message:{Caller:t.caller,Nonce:n,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:r.map(i=>iT(i,s))}}}function uT(e){const t=e.outsideExecution,n=pl(e.signature);return _t.compile({outside_execution:t,signature:n})}var UD={};Ht(UD,{supportsInterface:()=>g_});async function g_(e,t,n){const r={contractAddress:pe(t),entrypoint:"supports_interface",calldata:[pe(n)]};try{const s=await e.callContract(r);return BigInt(s[0])!==0n}catch{return!1}}var lT=class extends eT{constructor(t,n,r,s,i=Le.ETransactionVersion.V2){super(t);W(this,"signer");W(this,"address");W(this,"cairoVersion");W(this,"transactionVersion");W(this,"deploySelf",this.deployAccount);this.address=n.toLowerCase(),this.signer=_n(r)||r instanceof Uint8Array?new xD(r):r,s&&(this.cairoVersion=s.toString()),this.transactionVersion=i}getPreferredVersion(t,n){return this.transactionVersion===Le.ETransactionVersion.V3?n:this.transactionVersion===Le.ETransactionVersion.V2?t:Le.ETransactionVersion.V3}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return St(t??await this.getNonce())}catch{return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:n}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=n}return this.cairoVersion}async estimateFee(t,n={}){return this.estimateInvokeFee(t,n)}async estimateInvokeFee(t,n={}){const{nonce:r,blockIdentifier:s,version:i,skipValidate:o=!0}=n,u=Array.isArray(t)?t:[t],l=St(r??await this.getNonce()),d=Ks(this.getPreferredVersion(Le.ETransactionVersion.F1,Le.ETransactionVersion.F3),Zf(i)),f=await this.getChainId(),g={...Nn(n),walletAddress:this.address,nonce:l,maxFee:mn,version:d,chainId:f,cairoVersion:await this.getCairoVersion(),skipValidate:o},_=await this.buildInvocation(u,g);return super.getInvokeEstimateFee({..._},{...Nn(n),version:d,nonce:l},s,n.skipValidate)}async estimateDeclareFee(t,n={}){const{blockIdentifier:r,nonce:s,version:i,skipValidate:o=!0}=n,u=St(s??await this.getNonce()),l=Ks(cr(t.contract)?this.getPreferredVersion(Le.ETransactionVersion.F2,Le.ETransactionVersion.F3):Le.ETransactionVersion.F1,Zf(i)),d=await this.getChainId(),f=await this.buildDeclarePayload(t,{...Nn(n),nonce:u,chainId:d,version:l,walletAddress:this.address,maxFee:mn,cairoVersion:void 0,skipValidate:o});return super.getDeclareEstimateFee(f,{...Nn(n),version:l,nonce:u},r,n.skipValidate)}async estimateAccountDeployFee({classHash:t,addressSalt:n=0,constructorCalldata:r=[],contractAddress:s},i={}){const{blockIdentifier:o,version:u,skipValidate:l=!0}=i,d=Ks(this.getPreferredVersion(Le.ETransactionVersion.F1,Le.ETransactionVersion.F3),Zf(u)),f=mn,g=await this.getChainId(),_=await this.buildAccountDeployPayload({classHash:t,addressSalt:n,constructorCalldata:r,contractAddress:s},{...Nn(i),nonce:f,chainId:g,version:d,walletAddress:this.address,maxFee:mn,cairoVersion:void 0,skipValidate:l});return super.getDeployAccountEstimateFee({..._},{...Nn(i),version:d,nonce:f},o,i.skipValidate)}async estimateDeployFee(t,n={}){const r=this.buildUDCContractPayload(t);return this.estimateInvokeFee(r,n)}async estimateFeeBulk(t,n={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:r,blockIdentifier:s,version:i,skipValidate:o}=n,u=await this.accountInvocationsFactory(t,{...Nn(n),versions:[Le.ETransactionVersion.F1,Ks(this.getPreferredVersion(Le.ETransactionVersion.F2,Le.ETransactionVersion.F3),i)],nonce:r,blockIdentifier:s,skipValidate:o});return super.getEstimateFeeBulk(u,{blockIdentifier:s,skipValidate:o})}async simulateTransaction(t,n={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:r,blockIdentifier:s,skipValidate:i=!0,skipExecute:o,version:u}=n,l=await this.accountInvocationsFactory(t,{...Nn(n),versions:[Le.ETransactionVersion.V1,Ks(this.getPreferredVersion(Le.ETransactionVersion.V2,Le.ETransactionVersion.V3),u)],nonce:r,blockIdentifier:s,skipValidate:i});return super.getSimulateTransaction(l,{blockIdentifier:s,skipValidate:i,skipExecute:o})}async execute(t,n,r={}){const s=n===void 0||Array.isArray(n)?r:n,i=Array.isArray(t)?t:[t],o=St(s.nonce??await this.getNonce()),u=Ks(this.getPreferredVersion(Le.ETransactionVersion.V1,Le.ETransactionVersion.V3),s.version),l=await this.getUniversalSuggestedFee(u,{type:tn.INVOKE,payload:t},{...s,version:u}),d=await this.getChainId(),f={...Nn(s),resourceBounds:l.resourceBounds,walletAddress:this.address,nonce:o,maxFee:l.maxFee,version:u,chainId:d,cairoVersion:await this.getCairoVersion()},g=await this.signer.signTransaction(i,f),_=yo(i,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:_,signature:g},{...Nn(s),resourceBounds:l.resourceBounds,nonce:o,maxFee:l.maxFee,version:u})}async declareIfNot(t,n={}){const r=ml(t);try{await this.getClassByHash(r.classHash)}catch{return this.declare(t,n)}return{transaction_hash:"",class_hash:r.classHash}}async declare(t,n={}){const r=ml(t),{nonce:s,version:i}=n,o=Ks(cr(t.contract)?this.getPreferredVersion(Le.ETransactionVersion.V2,Le.ETransactionVersion.V3):Le.ETransactionVersion.V1,i),u=await this.getUniversalSuggestedFee(o,{type:tn.DECLARE,payload:r},{...n,version:o}),l={...Nn(n),resourceBounds:u.resourceBounds,maxFee:u.maxFee,nonce:St(s??await this.getNonce()),version:o,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},d=await this.buildDeclarePayload(r,l);return this.declareContract(d,l)}async deploy(t,n={}){const{calls:r,addresses:s}=Ym(t,this.address);return{...await this.execute(r,void 0,n),contract_address:s}}async deployContract(t,n={}){const r=await this.deploy(t,n),s=await this.waitForTransaction(r.transaction_hash);return aT(s)}async declareAndDeploy(t,n={}){const{constructorCalldata:r,salt:s,unique:i}=t;let o=await this.declareIfNot(t,n);if(o.transaction_hash!==""){const l=await this.waitForTransaction(o.transaction_hash);o={...o,...l}}const u=await this.deployContract({classHash:o.class_hash,salt:s,unique:i,constructorCalldata:r},n);return{declare:{...o},deploy:u}}async deployAccount({classHash:t,constructorCalldata:n=[],addressSalt:r=0,contractAddress:s},i={}){const o=Ks(this.getPreferredVersion(Le.ETransactionVersion.V1,Le.ETransactionVersion.V3),i.version),u=mn,l=await this.getChainId(),d=_t.compile(n),f=s??jf(r,t,d,0),g=await this.getUniversalSuggestedFee(o,{type:tn.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:d,addressSalt:r,contractAddress:f}},i),_=await this.signer.signDeployAccountTransaction({...Nn(i),classHash:t,constructorCalldata:d,contractAddress:f,addressSalt:r,chainId:l,resourceBounds:g.resourceBounds,maxFee:g.maxFee,version:o,nonce:u});return this.deployAccountContract({classHash:t,addressSalt:r,constructorCalldata:n,signature:_},{...Nn(i),nonce:u,resourceBounds:g.resourceBounds,maxFee:g.maxFee,version:o})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return bo(t,this.address)}async verifyMessageHash(t,n,r,s){return this.verifyMessageInStarknet(t,n,this.address,r,s)}async verifyMessage(t,n,r,s){return this.verifyMessageInStarknet(t,n,this.address,r,s)}async getSnip9Version(){return await g_(this,this.address,Ov)?"2":await g_(this,this.address,Iv)?"1":"0"}async isValidSnip9Nonce(t){try{const n={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[pe(t)]},r=await this.callContract(n);return BigInt(r[0])!==0n}catch(n){throw new Error(`Failed to check if nonce is valid: ${n}`)}}async getSnip9Nonce(){const t=Km();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,n,r,s){if(!br(t.caller)&&t.caller!=="ANY_CALLER")throw new Error(`The caller ${t.caller} is not valid.`);const i=br(t.caller)?t.caller:Cv,o=Array.isArray(n)?n:[n],u=r??await this.getSnip9Version();if(!u)throw new Error("This account is not handling outside transactions.");const l=s?pe(s):await this.getSnip9Nonce(),d=cT(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},l,o,u),f=await this.signMessage(d);return{outsideExecution:{caller:i,nonce:l,execute_after:t.execute_after,execute_before:t.execute_before,calls:o.map(p_)},signature:f,signerAddress:this.address,version:u}}async executeFromOutside(t,n){const s=(Array.isArray(t)?t:[t]).map(i=>{let o;if(i.version==="1")o="execute_from_outside";else if(i.version==="2")o="execute_from_outside_v2";else throw new Error("Unsupported OutsideExecution version");return{contractAddress:pe(i.signerAddress),entrypoint:o,calldata:uT(i)}});return this.execute(s,n)}async getUniversalSuggestedFee(t,{type:n,payload:r},s){let i=0,o=gl(mn);return t===Le.ETransactionVersion.V3?o=s.resourceBounds??(await this.getSuggestedFee({type:n,payload:r},s)).resourceBounds:i=s.maxFee??(await this.getSuggestedFee({type:n,payload:r},s)).suggestedMaxFee,{maxFee:i,resourceBounds:o}}async getSuggestedFee({type:t,payload:n},r){switch(t){case tn.INVOKE:return this.estimateInvokeFee(n,r);case tn.DECLARE:return this.estimateDeclareFee(n,r);case tn.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(n,r);case tn.DEPLOY:return this.estimateDeployFee(n,r);default:return{gas_consumed:0n,gas_price:0n,overall_fee:mn,unit:"FRI",suggestedMaxFee:mn,resourceBounds:gl(mn),data_gas_consumed:0n,data_gas_price:0n}}}async buildInvocation(t,n){const r=yo(t,await this.getCairoVersion()),s=n.skipValidate?[]:await this.signer.signTransaction(t,n);return{...Nn(n),contractAddress:this.address,calldata:r,signature:s}}async buildDeclarePayload(t,n){const{classHash:r,contract:s,compiledClassHash:i}=ml(t),o=O1(s);if(Cn(i)&&(n.version===Le.ETransactionVersion3.F3||n.version===Le.ETransactionVersion3.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const u=n.skipValidate?[]:await this.signer.signDeclareTransaction({...n,...Nn(n),classHash:r,compiledClassHash:i,senderAddress:n.walletAddress});return{senderAddress:n.walletAddress,signature:u,contract:o,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:n=0,constructorCalldata:r=[],contractAddress:s},i){const o=_t.compile(r),u=s??jf(n,t,o,0),l=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...Nn(i),classHash:t,contractAddress:u,addressSalt:n,constructorCalldata:o});return{...Nn(i),classHash:t,addressSalt:n,constructorCalldata:o,signature:l}}buildUDCContractPayload(t){return[].concat(t).map(r=>{const{classHash:s,salt:i="0",unique:o=!0,constructorCalldata:u=[]}=r,l=_t.compile(u);return{contractAddress:oo.ADDRESS,entrypoint:oo.ENTRYPOINT,calldata:[s,i,Tm(o),l.length,...l]}})}async accountInvocationsFactory(t,n){const{nonce:r,blockIdentifier:s,skipValidate:i=!0}=n,o=await this.getNonceSafe(r),u=await this.getChainId(),l=n.versions.map(g=>Ks(g)),d="payload"in t[0]?t[0].payload:t[0],f=t[0].type===tn.DEPLOY_ACCOUNT?await this.getCairoVersion(d.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(g,_)=>{const b="payload"in g?g.payload:g,T={...Nn(n),walletAddress:this.address,nonce:St(Number(o)+_),maxFee:mn,chainId:u,cairoVersion:f,version:"",skipValidate:i},I={type:g.type,nonce:St(Number(o)+_),blockIdentifier:s,version:""};if(g.type===tn.INVOKE){const k=zf(l[1]);T.version=k,I.version=k;const Z=await this.buildInvocation([].concat(b),T);return{...I,...Z,...T}}if(g.type===tn.DEPLOY){const k=zf(l[1]);T.version=k,I.version=k;const Z=this.buildUDCContractPayload(b),Q=await this.buildInvocation(Z,T);return{...I,...Q,...T,type:tn.INVOKE}}if(g.type===tn.DECLARE){const k=cr(b.contract)?l[1]:l[0];T.version=k,I.version=k;const Z=await this.buildDeclarePayload(b,T);return{...I,...Z,...T}}if(g.type===tn.DEPLOY_ACCOUNT){const k=zf(l[1]);T.version=k,I.version=k;const Z=await this.buildAccountDeployPayload(b,T);return{...I,...Z,...T}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${g}`)}))}async getStarkName(t=this.address,n){return super.getStarkName(t,n)}},e9=class extends null{},MD={};Ht(MD,{addDeclareTransaction:()=>mT,addInvokeTransaction:()=>gT,addStarknetChain:()=>hT,deploymentData:()=>FD,getPermissions:()=>dT,onAccountChange:()=>yT,onNetworkChanged:()=>bT,requestAccounts:()=>Gf,requestChainId:()=>VD,signMessage:()=>_T,supportedSpecs:()=>HD,switchStarknetChain:()=>pT,watchAsset:()=>fT});function Gf(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function dT(e){return e.request({type:"wallet_getPermissions"})}function fT(e,t){return e.request({type:"wallet_watchAsset",params:t})}function hT(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function pT(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function VD(e){return e.request({type:"wallet_requestChainId"})}function FD(e){return e.request({type:"wallet_deploymentData"})}function gT(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function mT(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function _T(e,t){return e.request({type:"wallet_signTypedData",params:t})}function HD(e){return e.request({type:"wallet_supportedSpecs"})}function yT(e,t){e.on("accountsChanged",t)}function bT(e,t){e.on("networkChanged",t)}var t9=class Tb extends lT{constructor(n,r,s,i=""){super(n,i,"",s);W(this,"walletProvider");this.walletProvider=r,this.walletProvider.on("accountsChanged",o=>{o&&(this.address=o[0].toLowerCase())}),this.walletProvider.on("networkChanged",o=>{o&&this.channel.setChainId(o)}),i.length||(console.warn("@deprecated Use static method WalletAccount.connect or WalletAccount.connectSilent instead. Constructor {@link WalletAccount.(format:2)}."),Gf(this.walletProvider).then(([o])=>{this.address=o.toLowerCase()}))}onAccountChange(n){yT(this.walletProvider,n)}onNetworkChanged(n){bT(this.walletProvider,n)}requestAccounts(n=!1){return Gf(this.walletProvider,n)}getPermissions(){return dT(this.walletProvider)}switchStarknetChain(n){return pT(this.walletProvider,n)}watchAsset(n){return fT(this.walletProvider,n)}addStarknetChain(n){return hT(this.walletProvider,n)}execute(n){const s={calls:[].concat(n).map(i=>{const{contractAddress:o,entrypoint:u,calldata:l}=i;return{contract_address:o,entry_point:u,calldata:l}})};return gT(this.walletProvider,s)}declare(n){const r=ml(n),s=n.contract,i={...s,abi:Br(s.abi)};if(!r.compiledClassHash)throw Error("compiledClassHash is required");const o={compiled_class_hash:r.compiledClassHash,contract_class:i};return mT(this.walletProvider,o)}async deploy(n){const{calls:r,addresses:s}=Ym(n,this.address);return{...await this.execute(r),contract_address:s}}signMessage(n){return _T(this.walletProvider,n)}static async connect(n,r,s,i=!1){const[o]=await Gf(r,i);return new Tb(n,r,s,o)}static async connectSilent(n,r,s){return Tb.connect(n,r,s,!0)}},m_=e=>{const t=["blockIdentifier","parseRequest","parseResponse","formatResponse","maxFee","nonce","signature","addressSalt"],n=e[e.length-1];return typeof n=="object"&&t.some(r=>r in n)?{args:e,options:e.pop()}:{args:e}};function wT(e,t){return async function(...n){const r=m_(n);return e.call(t.name,r.args,{parseRequest:!0,parseResponse:!0,...r.options})}}function $D(e,t){return async function(...n){const r=m_(n);return e.invoke(t.name,r.args,{parseRequest:!0,...r.options})}}function ET(e,t){return t.stateMutability==="view"||t.state_mutability==="view"?wT(e,t):$D(e,t)}function jD(e,t){return function(...n){return e.populate(t.name,n)}}function ZD(e,t){return function(...n){return e.estimate(t.name,n)}}function wl(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var vT=class{constructor(e,t,n=tT){W(this,"abi");W(this,"address");W(this,"providerOrAccount");W(this,"deployTransactionHash");W(this,"structs");W(this,"events");W(this,"functions");W(this,"callStatic");W(this,"populateTransaction");W(this,"estimateFee");W(this,"callData");this.address=t&&t.toLowerCase(),this.providerOrAccount=n,this.callData=new _t(e),this.structs=_t.getAbiStruct(e),this.events=nT(e);const r=Jv(e);this.abi=r.getLegacyFormat();const s={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(i=>{if(i.type!=="function")return;const o=i.name;this[o]||Object.defineProperty(this,o,{...s,value:ET(this,i)}),this.functions[o]||Object.defineProperty(this.functions,o,{...s,value:ET(this,i)}),this.callStatic[o]||Object.defineProperty(this.callStatic,o,{...s,value:wT(this,i)}),this.populateTransaction[o]||Object.defineProperty(this.populateTransaction,o,{...s,value:jD(this,i)}),this.estimateFee[o]||Object.defineProperty(this.estimateFee,o,{...s,value:ZD(this,i)})})}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e,t=[],{parseRequest:n=!0,parseResponse:r=!0,formatResponse:s=void 0,blockIdentifier:i=void 0}={}){at(this.address!==null,"contract is not connected to an address");const o=wl(t,()=>n?(this.callData.validate(va.CALL,e,t),this.callData.compile(e,t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:o,entrypoint:e},i).then(u=>r?s?this.callData.format(e,u,s):this.callData.parse(e,u):u)}invoke(e,t=[],{parseRequest:n=!0,maxFee:r,nonce:s,signature:i}={}){at(this.address!==null,"contract is not connected to an address");const o=wl(t,()=>n?(this.callData.validate(va.INVOKE,e,t),this.callData.compile(e,t)):(console.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),u={contractAddress:this.address,calldata:o,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(u,void 0,{maxFee:r,nonce:s});if(!s)throw new Error("Nonce is required when invoking a function without an account");return console.warn(`Invoking ${e} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...u,signature:i},{nonce:s})}async estimate(e,t=[]){at(this.address!==null,"contract is not connected to an address"),wl(t,()=>!1)||this.callData.validate(va.INVOKE,e,t);const n=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(n);throw Error("Contract must be connected to the account contract to estimate")}populate(e,t=[]){const n=wl(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:n}}parseEvents(e){let t;return e.match({success:n=>{const r=n.events?.map(s=>({block_hash:n.block_hash,block_number:n.block_number,transaction_hash:n.transaction_hash,...s})).filter(s=>tl(s.from_address)===tl(this.address),[])||[];t=sT(r,this.events,this.structs,_t.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),t}isCairo1(){return qv.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}},n9=class{constructor(){W(this,"functions");W(this,"callStatic");W(this,"populateTransaction");W(this,"estimateFee")}},r9=class{constructor(e){W(this,"compiledContract");W(this,"account");W(this,"abi");W(this,"classHash");W(this,"casm");W(this,"compiledClassHash");W(this,"CallData");this.compiledContract=e.compiledContract,this.account=e.account,this.casm=e.casm,this.abi=e.abi??e.compiledContract.abi,this.classHash=e.classHash,this.compiledClassHash=e.compiledClassHash,this.CallData=new _t(this.abi)}async deploy(...e){const{args:t,options:n={parseRequest:!0}}=m_(e),r=wl(t,()=>n.parseRequest?(this.CallData.validate(va.DEPLOY,"constructor",t),this.CallData.compile("constructor",t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t)),{deploy:{contract_address:s,transaction_hash:i}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:r,salt:n.addressSalt});at(!!s,"Deployment of the contract failed");const o=new vT(this.compiledContract.abi,s,this.account);return o.deployTransactionHash=i,o}connect(e){return this.account=e,this}attach(e){return new vT(this.abi,e,this.account)}},s9=class{},a9=null,zD=je(47040);const dt=e=>typeof e=="string",El=()=>{let e,t;const n=new Promise((r,s)=>{e=r,t=s});return n.resolve=e,n.reject=t,n},TT=e=>e==null?"":""+e,KD=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},WD=/###/g,xT=e=>e&&e.indexOf("###")>-1?e.replace(WD,"."):e,AT=e=>!e||dt(e),vl=(e,t,n)=>{const r=dt(t)?t.split("."):t;let s=0;for(;s<r.length-1;){if(AT(e))return{};const i=xT(r[s]);!e[i]&&n&&(e[i]=new n),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++s}return AT(e)?{}:{obj:e,k:xT(r[s])}},ST=(e,t,n)=>{const{obj:r,k:s}=vl(e,t,Object);if(r!==void 0||t.length===1){r[s]=n;return}let i=t[t.length-1],o=t.slice(0,t.length-1),u=vl(e,o,Object);for(;u.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),u=vl(e,o,Object),u?.obj&&typeof u.obj[`${u.k}.${i}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${i}`]=n},qD=(e,t,n,r)=>{const{obj:s,k:i}=vl(e,t,Object);s[i]=s[i]||[],s[i].push(n)},Yf=(e,t)=>{const{obj:n,k:r}=vl(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},GD=(e,t,n)=>{const r=Yf(e,n);return r!==void 0?r:Yf(t,n)},kT=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?dt(e[r])||e[r]instanceof String||dt(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):kT(e[r],t[r],n):e[r]=t[r]);return e},kc=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var YD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const XD=e=>dt(e)?e.replace(/[&<>"'\/]/g,t=>YD[t]):e;class JD{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const QD=[" ",",","?","!",";"],e6=new JD(20),t6=(e,t,n)=>{t=t||"",n=n||"";const r=QD.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=e6.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(e);if(!i){const o=e.indexOf(n);o>0&&!s.test(e.substring(0,o))&&(i=!0)}return i},__=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let s=e;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,u="";for(let l=i;l<r.length;++l)if(l!==i&&(u+=n),u+=r[l],o=s[u],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=o}return s},Xf=e=>e?.replace("_","-"),n6={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Jf{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||n6,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,s){return s&&!this.debug?null:(dt(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Jf(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Jf(this.logger,t)}}var Ys=new Jf;class Qf{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(o=>{let[u,l]=o;for(let d=0;d<l;d++)u(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[u,l]=o;for(let d=0;d<l;d++)u.apply(u,[t,...r])})}}class CT extends Qf{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;t.indexOf(".")>-1?u=t.split("."):(u=[t,n],r&&(Array.isArray(r)?u.push(...r):dt(r)&&i?u.push(...r.split(i)):u.push(r)));const l=Yf(this.data,u);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=u[0],n=u[1],r=u.slice(2).join(".")),l||!o||!dt(r)?l:__(this.data?.[t]?.[n],r,i)}addResource(t,n,r,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let u=[t,n];r&&(u=u.concat(o?r.split(o):r)),t.indexOf(".")>-1&&(u=t.split("."),s=n,n=u[1]),this.addNamespaces(n),ST(this.data,u,s),i.silent||this.emit("added",t,n,r,s)}addResources(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(dt(r[i])||Array.isArray(r[i]))&&this.addResource(t,n,i,r[i],{silent:!0});s.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},u=[t,n];t.indexOf(".")>-1&&(u=t.split("."),s=r,r=n,n=u[1]),this.addNamespaces(n);let l=Yf(this.data,u)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?kT(l,r,i):l={...l,...r},ST(this.data,u,l),o.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var IT={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,s){return e.forEach(i=>{t=this.processors[i]?.process(t,n,r,s)??t}),t}};const OT={},NT=e=>!dt(e)&&typeof e!="boolean"&&typeof e!="number";class eh extends Qf{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),KD(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ys.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&t.indexOf(r)>-1,u=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!t6(t,r,s);if(o&&!u){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:dt(i)?[i]:i};const d=t.split(r);(r!==s||r===s&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),t=d.join(s)}return{key:t,namespaces:dt(i)?[i]:i}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:u}=this.extractFromKey(t[t.length-1],n),l=u[u.length-1],d=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode"){if(f){const _e=n.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${_e}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${_e}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const g=this.resolve(t,n);let _=g?.res;const b=g?.usedKey||o,T=g?.exactUsedKey||o,I=["[object Number]","[object Function]","[object RegExp]"],k=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,Z=!this.i18nFormat||this.i18nFormat.handleAsObject,Q=n.count!==void 0&&!dt(n.count),ee=eh.hasDefaultValue(n),re=Q?this.pluralResolver.getSuffix(d,n.count,n):"",Se=n.ordinal&&Q?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",me=Q&&!n.ordinal&&n.count===0,oe=me&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${re}`]||n[`defaultValue${Se}`]||n.defaultValue;let Ee=_;Z&&!_&&ee&&(Ee=oe);const Ie=NT(Ee),Ne=Object.prototype.toString.apply(Ee);if(Z&&Ee&&Ie&&I.indexOf(Ne)<0&&!(dt(k)&&Array.isArray(Ee))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,Ee,{...n,ns:u}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(g.res=_e,g.usedParams=this.getUsedParamsDetails(n),g):_e}if(i){const _e=Array.isArray(Ee),Ve=_e?[]:{},Qe=_e?T:b;for(const le in Ee)if(Object.prototype.hasOwnProperty.call(Ee,le)){const ce=`${Qe}${i}${le}`;ee&&!_?Ve[le]=this.translate(ce,{...n,defaultValue:NT(oe)?oe[le]:void 0,joinArrays:!1,ns:u}):Ve[le]=this.translate(ce,{...n,joinArrays:!1,ns:u}),Ve[le]===ce&&(Ve[le]=Ee[le])}_=Ve}}else if(Z&&dt(k)&&Array.isArray(_))_=_.join(k),_&&(_=this.extendTranslation(_,t,n,r));else{let _e=!1,Ve=!1;!this.isValidLookup(_)&&ee&&(_e=!0,_=oe),this.isValidLookup(_)||(Ve=!0,_=o);const le=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ve?void 0:_,ce=ee&&oe!==_&&this.options.updateMissing;if(Ve||_e||ce){if(this.logger.log(ce?"updateKey":"missingKey",d,l,o,ce?oe:_),i){const Ge=this.resolve(o,{...n,keySeparator:!1});Ge&&Ge.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ye=[];const De=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&De&&De[0])for(let Ge=0;Ge<De.length;Ge++)ye.push(De[Ge]);else this.options.saveMissingTo==="all"?ye=this.languageUtils.toResolveHierarchy(n.lng||this.language):ye.push(n.lng||this.language);const Ke=(Ge,gt,Nt)=>{const Xt=ee&&Nt!==_?Nt:le;this.options.missingKeyHandler?this.options.missingKeyHandler(Ge,l,gt,Xt,ce,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Ge,l,gt,Xt,ce,n),this.emit("missingKey",Ge,l,gt,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Q?ye.forEach(Ge=>{const gt=this.pluralResolver.getSuffixes(Ge,n);me&&n[`defaultValue${this.options.pluralSeparator}zero`]&&gt.indexOf(`${this.options.pluralSeparator}zero`)<0&&gt.push(`${this.options.pluralSeparator}zero`),gt.forEach(Nt=>{Ke([Ge],o+Nt,n[`defaultValue${Nt}`]||oe)})}):Ke(ye,o,oe))}_=this.extendTranslation(_,t,n,g,r),Ve&&_===o&&this.options.appendNamespaceToMissingKey&&(_=`${l}:${o}`),(Ve||_e)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,_e?_:void 0))}return s?(g.res=_,g.usedParams=this.getUsedParamsDetails(n),g):_}extendTranslation(t,n,r,s,i){var o=this;if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=dt(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const _=t.match(this.interpolator.nestingRegexp);f=_&&_.length}let g=r.replace&&!dt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),t=this.interpolator.interpolate(t,g,r.lng||this.language||s.usedLng,r),d){const _=t.match(this.interpolator.nestingRegexp),b=_&&_.length;f<b&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var _=arguments.length,b=new Array(_),T=0;T<_;T++)b[T]=arguments[T];return i?.[0]===b[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${n[0]}`),null):o.translate(...b,n)},r)),r.interpolation&&this.interpolator.reset()}const u=r.postProcess||this.options.postProcess,l=dt(u)?[u]:u;return t!=null&&l?.length&&r.applyPostProcessor!==!1&&(t=IT.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,i,o,u;return dt(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(l,n),f=d.key;s=f;let g=d.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const _=n.count!==void 0&&!dt(n.count),b=_&&!n.ordinal&&n.count===0,T=n.context!==void 0&&(dt(n.context)||typeof n.context=="number")&&n.context!=="",I=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);g.forEach(k=>{this.isValidLookup(r)||(u=k,!OT[`${I[0]}-${k}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(OT[`${I[0]}-${k}`]=!0,this.logger.warn(`key "${s}" for languages "${I.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(Z=>{if(this.isValidLookup(r))return;o=Z;const Q=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(Q,f,Z,k,n);else{let re;_&&(re=this.pluralResolver.getSuffix(Z,n.count,n));const Se=`${this.options.pluralSeparator}zero`,me=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(_&&(Q.push(f+re),n.ordinal&&re.indexOf(me)===0&&Q.push(f+re.replace(me,this.options.pluralSeparator)),b&&Q.push(f+Se)),T){const oe=`${f}${this.options.contextSeparator}${n.context}`;Q.push(oe),_&&(Q.push(oe+re),n.ordinal&&re.indexOf(me)===0&&Q.push(oe+re.replace(me,this.options.pluralSeparator)),b&&Q.push(oe+Se))}}let ee;for(;ee=Q.pop();)this.isValidLookup(r)||(i=ee,r=this.getResource(Z,k,ee,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:u}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,s):this.resourceStore.getResource(t,n,r,s)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!dt(t.replace);let s=r?t.replace:t;if(r&&typeof t.count<"u"&&(s.count=t.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class RT{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ys.create("languageUtils")}getScriptPartFromCode(t){if(t=Xf(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Xf(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(dt(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),dt(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return dt(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):dt(t)&&i(this.formatLanguageCode(t)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}const BT={zero:0,one:1,two:2,few:3,many:4,other:5},DT={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class r6{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=Ys.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Xf(t==="dev"?"en":t),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),DT;if(!t.match(/-|_/))return DT;const l=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(l,n)}return this.pluralRulesCache[i]=o,o}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(s=>`${n}${s}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>BT[s]-BT[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(t,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const PT=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=GD(e,t,n);return!i&&s&&dt(n)&&(i=__(e,n,r),i===void 0&&(i=__(t,n,r))),i},y_=e=>e.replace(/\$/g,"$$$$");class s6{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ys.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:u,suffixEscaped:l,formatSeparator:d,unescapeSuffix:f,unescapePrefix:g,nestingPrefix:_,nestingPrefixEscaped:b,nestingSuffix:T,nestingSuffixEscaped:I,nestingOptionsSeparator:k,maxReplaces:Z,alwaysFormat:Q}=t.interpolation;this.escape=n!==void 0?n:XD,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?kc(i):o||"{{",this.suffix=u?kc(u):l||"}}",this.formatSeparator=d||",",this.unescapePrefix=f?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=_?kc(_):b||kc("$t("),this.nestingSuffix=T?kc(T):I||kc(")"),this.nestingOptionsSeparator=k||",",this.maxReplaces=Z||1e3,this.alwaysFormat=Q!==void 0?Q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,s){let i,o,u;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=b=>{if(b.indexOf(this.formatSeparator)<0){const Z=PT(n,l,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Z,void 0,r,{...s,...n,interpolationkey:b}):Z}const T=b.split(this.formatSeparator),I=T.shift().trim(),k=T.join(this.formatSeparator).trim();return this.format(PT(n,l,I,this.options.keySeparator,this.options.ignoreJSONStructure),k,r,{...s,...n,interpolationkey:I})};this.resetRegExp();const f=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,g=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>y_(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?y_(this.escape(b)):y_(b)}].forEach(b=>{for(u=0;i=b.regex.exec(t);){const T=i[1].trim();if(o=d(T),o===void 0)if(typeof f=="function"){const k=f(t,i,s);o=dt(k)?k:""}else if(s&&Object.prototype.hasOwnProperty.call(s,T))o="";else if(g){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${T} for interpolating ${t}`),o="";else!dt(o)&&!this.useRawValueToEscape&&(o=TT(o));const I=b.safeValue(o);if(t=t.replace(i[0],I),g?(b.regex.lastIndex+=o.length,b.regex.lastIndex-=i[0].length):b.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,o;const u=(l,d)=>{const f=this.nestingOptionsSeparator;if(l.indexOf(f)<0)return l;const g=l.split(new RegExp(`${f}[ ]*{`));let _=`{${g[1]}`;l=g[0],_=this.interpolate(_,o);const b=_.match(/'/g),T=_.match(/"/g);((b?.length??0)%2===0&&!T||T.length%2!==0)&&(_=_.replace(/'/g,'"'));try{o=JSON.parse(_),d&&(o={...d,...o})}catch(I){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,I),`${l}${f}${_}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(t);){let l=[];o={...r},o=o.replace&&!dt(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let d=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const f=s[1].split(this.formatSeparator).map(g=>g.trim());s[1]=f.shift(),l=f,d=!0}if(i=n(u.call(this,s[1].trim(),o),o),i&&s[0]===t&&!dt(i))return i;dt(i)||(i=TT(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${t}`),i=""),d&&(i=l.reduce((f,g)=>this.format(f,g,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),t=t.replace(s[0],i),this.regexp.lastIndex=0}return t}}const a6=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);t==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):t==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[u,...l]=o.split(":"),d=l.join(":").trim().replace(/^'+|'+$/g,""),f=u.trim();n[f]||(n[f]=d),d==="false"&&(n[f]=!1),d==="true"&&(n[f]=!0),isNaN(d)||(n[f]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},Cc=e=>{const t={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let u=t[o];return u||(u=e(Xf(r),s),t[o]=u),u(n)}};class i6{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ys.create("formatter"),this.options=t,this.formats={number:Cc((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return i=>s.format(i)}),currency:Cc((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>s.format(i)}),datetime:Cc((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return i=>s.format(i)}),relativetime:Cc((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return i=>s.format(i,r.range||"day")}),list:Cc((n,r)=>{const s=new Intl.ListFormat(n,{...r});return i=>s.format(i)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=Cc(n)}format(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(u=>u.indexOf(")")>-1)){const u=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,u)].join(this.formatSeparator)}return i.reduce((u,l)=>{const{formatName:d,formatOptions:f}=a6(l);if(this.formats[d]){let g=u;try{const _=s?.formatParams?.[s.interpolationkey]||{},b=_.locale||_.lng||s.locale||s.lng||r;g=this.formats[d](u,b,{...f,...s,..._})}catch(_){this.logger.warn(_)}return g}else this.logger.warn(`there was no format function for ${d}`);return u},t)}}const o6=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class c6 extends Qf{constructor(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Ys.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,s.backend,s)}queueLoad(t,n,r,s){const i={},o={},u={},l={};return t.forEach(d=>{let f=!0;n.forEach(g=>{const _=`${d}|${g}`;!r.reload&&this.store.hasResourceBundle(d,g)?this.state[_]=2:this.state[_]<0||(this.state[_]===1?o[_]===void 0&&(o[_]=!0):(this.state[_]=1,f=!1,o[_]===void 0&&(o[_]=!0),i[_]===void 0&&(i[_]=!0),l[g]===void 0&&(l[g]=!0)))}),f||(u[d]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const s=t.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const u={};this.queue.forEach(l=>{qD(l.loaded,[i],o),o6(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(d=>{u[d]||(u[d]={});const f=l.loaded[d];f.length&&f.forEach(g=>{u[d][g]===void 0&&(u[d][g]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const u=(d,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(d&&f&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,s+1,i*2,o)},i);return}o(d,f)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const d=l(t,n);d&&typeof d.then=="function"?d.then(f=>u(null,f)).catch(u):u(null,d)}catch(d){u(d)}return}return l(t,n,u)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();dt(t)&&(t=this.languageUtils.toResolveHierarchy(t)),dt(n)&&(n=[n]);const i=this.queueLoad(t,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,u)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&u&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,u),this.loaded(t,o,u)})}saveMissing(t,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const l={...o,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let f;d.length===5?f=d(t,n,r,s,l):f=d(t,n,r,s),f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}else d(t,n,r,s,u,l)}!t||!t[0]||this.store.addResource(t[0],n,r,s)}}}const LT=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),dt(e[1])&&(t.defaultValue=e[1]),dt(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),UT=e=>(dt(e.ns)&&(e.ns=[e.ns]),dt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),dt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),th=()=>{},u6=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Tl extends Qf{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=UT(t),this.services={},this.logger=Ys,this.modules={external:[]},u6(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(dt(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=LT();this.options={...s,...this.options,...UT(n)},this.options.interpolation={...s.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ys.init(i(this.modules.logger),this.options):Ys.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=i6;const g=new RT(this.options);this.store=new CT(this.options.resources,this.options);const _=this.services;_.logger=Ys,_.resourceStore=this.store,_.languageUtils=g,_.pluralResolver=new r6(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(_.formatter=i(f),_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new s6(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new c6(i(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",function(b){for(var T=arguments.length,I=new Array(T>1?T-1:0),k=1;k<T;k++)I[k-1]=arguments[k];t.emit(b,...I)}),this.modules.languageDetector&&(_.languageDetector=i(this.modules.languageDetector),_.languageDetector.init&&_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=i(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new eh(this.services,this.options),this.translator.on("*",function(b){for(var T=arguments.length,I=new Array(T>1?T-1:0),k=1;k<T;k++)I[k-1]=arguments[k];t.emit(b,...I)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,r||(r=th),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return t.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return t.store[f](...arguments),t}});const l=El(),d=()=>{const f=(g,_)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(_),r(g,_)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:th;const s=dt(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],o=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};s?o(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload?.forEach?.(u=>o(u)),this.services.backendConnector.load(i,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(t,n,r){const s=El();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=th),this.services.backendConnector.reload(t,n,i=>{s.resolve(),r(i)}),s}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&IT.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const s=El();this.emit("languageChanging",t);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},u=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const d=dt(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,f=>{o(f,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(t),s}getFixedT(t,n,r){var s=this;const i=function(o,u){let l;if(typeof u!="object"){for(var d=arguments.length,f=new Array(d>2?d-2:0),g=2;g<d;g++)f[g-2]=arguments[g];l=s.options.overloadTranslationOptionHandler([o,u].concat(f))}else l={...u};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const _=s.options.keySeparator||".";let b;return l.keyPrefix&&Array.isArray(o)?b=o.map(T=>`${l.keyPrefix}${_}${T}`):b=l.keyPrefix?`${l.keyPrefix}${_}${o}`:o,s.t(b,l)};return dt(t)?i.lng=t:i.lngs=t,i.ns=n,i.keyPrefix=r,i}t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.translate(...n)}exists(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.exists(...n)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(u,l)=>{const d=this.services.backendConnector.state[`${u}|${l}`];return d===-1||d===0||d===2};if(n.precheck){const u=n.precheck(this,o);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,t)&&(!s||o(i,t)))}loadNamespaces(t,n){const r=El();return this.options.ns?(dt(t)&&(t=[t]),t.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=El();dt(t)&&(t=[t]);const s=this.options.preload||[],i=t.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new RT(LT());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Tl(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:th;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const s={...this.options,...t,isClone:!0},i=new Tl(s);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(u=>{i[u]=this[u]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const u=Object.keys(this.store.data).reduce((l,d)=>(l[d]={...this.store.data[d]},Object.keys(l[d]).reduce((f,g)=>(f[g]={...l[d][g]},f),{})),{});i.store=new CT(u,s),i.services.resourceStore=i.store}return i.translator=new eh(i.services,s),i.translator.on("*",function(u){for(var l=arguments.length,d=new Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];i.emit(u,...d)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const tr=Tl.createInstance();tr.createInstance=Tl.createInstance;const i9=tr.createInstance,o9=tr.dir,c9=tr.init,u9=tr.loadResources,l9=tr.reloadResources,d9=tr.use,f9=tr.changeLanguage,h9=tr.getFixedT,p9=tr.t,g9=tr.exists,m9=tr.setDefaultNamespace,_9=tr.hasLoadedNamespace,y9=tr.loadNamespaces,b9=tr.loadLanguages,l6=()=>{try{return typeof window<"u"&&window.location?.protocol!=="chrome-extension:"}catch{return!1}},d6=()=>typeof document<"u",MT=e=>e&&e.startsWith("zh_")?"zh-CN":e,f6=async()=>{if(l6())return"en";try{if(typeof window<"u"||d6()){const{settingsStore:e}=await Promise.all([je.e(211),je.e(693),je.e(707),je.e(311)]).then(je.bind(je,82707)),t=await e.get("language");return MT(zD.l[t]?.code)||"en"}else return MT(tr.language)||"en"}catch(e){return console.error("Error getting language from settings store:",e),"en"}},VT=async()=>({"argent-version":"5.24.2","argent-client":"argent-x","Accept-Language":await f6()}),FT=VT(),E9={"argent-version":"5.24.2","argent-client":"argent-x"},HT=e=>{switch(e){case"sepolia-alpha":return"sepolia";case"mainnet-alpha":return"mainnet"}return null},v9=async e=>{const t=HT(e),n=await VT();return t?{...n,"argent-network":t}:n},h6=se()(async(e,t)=>new eT({nodeUrl:e,chainId:t,headers:await FT}),{normalizer:([e,t=""])=>`${e}::${t}`});async function $T(e){const t=sl.encodeShortString(e.chainId);return h6(e.rpcUrl,t)}const p6=document.getElementById("argent-x-extension")?.getAttribute("data-extension-id");function Mt(e){return window.postMessage({...e,extensionId:p6},window.location.origin)}function wt(e,t,n=()=>!0){return new Promise((r,s)=>{const i=setTimeout(()=>s(new Error("Timeout")),t),o=u=>{if(u.origin===window.location.origin&&u.data.type===e&&n(u.data))return clearTimeout(i),window.removeEventListener("message",o),r("data"in u.data?u.data.data:void 0)};window.addEventListener("message",o)})}const g6=async()=>{Mt({type:"DISCONNECT_ACCOUNT"})};var nh=je(2187);function m6(e){return e}function _6(e){return e.length===0?m6:e.length===1?e[0]:function(n){return e.reduce((r,s)=>s(r),n)}}function T9(e){return typeof e=="object"&&e!==null&&"subscribe"in e}function b_(e){const t={subscribe(n){let r=null,s=!1,i=!1,o=!1;function u(){if(r===null){o=!0;return}i||(i=!0,typeof r=="function"?r():r&&r.unsubscribe())}return r=e({next(l){s||n.next?.(l)},error(l){s||(s=!0,n.error?.(l),u())},complete(){s||(s=!0,n.complete?.(),u())}}),o&&u(),{unsubscribe:u}},pipe(...n){return _6(n)(t)}};return t}function y6(e){return t=>{let n=0,r=null;const s=[];function i(){r||(r=t.subscribe({next(u){for(const l of s)l.next?.(u)},error(u){for(const l of s)l.error?.(u)},complete(){for(const u of s)u.complete?.()}}))}function o(){if(n===0&&r){const u=r;r=null,u.unsubscribe()}}return{subscribe(u){return n++,s.push(u),i(),{unsubscribe(){n--,o();const l=s.findIndex(d=>d===u);l>-1&&s.splice(l,1)}}}}}}function x9(e){return t=>({subscribe(n){let r=0;return t.subscribe({next(i){n.next?.(e(i,r++))},error(i){n.error?.(i)},complete(){n.complete?.()}})}})}function A9(e){return t=>({subscribe(n){return t.subscribe({next(r){e.next?.(r),n.next?.(r)},error(r){e.error?.(r),n.error?.(r)},complete(){e.complete?.(),n.complete?.()}})}})}class w_ extends Error{constructor(t){super(t),this.name="ObservableAbortError",Object.setPrototypeOf(this,w_.prototype)}}function b6(e){let t;return{promise:new Promise((r,s)=>{let i=!1;function o(){i||(i=!0,s(new w_("This operation was aborted.")),u.unsubscribe())}const u=e.subscribe({next(l){i=!0,r(l),o()},error(l){i=!0,s(l),o()},complete(){i=!0,o()}});t=o}),abort:t}}function jT(e){return b_(t=>{function n(s=0,i=e.op){const o=e.links[s];if(!o)throw new Error("No more links to execute - did you forget to add an ending link?");return o({op:i,next(l){return n(s+1,l)}})}return n().subscribe(t)})}function ZT(e){return Array.isArray(e)?e:[e]}function S9(e){return t=>{const n=ZT(e.true).map(s=>s(t)),r=ZT(e.false).map(s=>s(t));return s=>observable(i=>{const o=e.condition(s.op)?n:r;return jT({op:s.op,links:o}).subscribe(i)})}}function zT(e){const t=Object.create(null);for(const n in e){const r=e[n];t[r]=n}return t}const KT={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},k9=zT(KT),w6=zT(KT),E6={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,FORBIDDEN:403,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501};function WT(e){return E6[e]??500}function C9(e){const t=Array.isArray(e)?e:[e],n=new Set(t.map(s=>{if("error"in s){const i=s.error.data;if(typeof i.httpStatus=="number")return i.httpStatus;const o=w6[s.error.code];return WT(o)}return 200}));return n.size!==1?207:n.values().next().value}function I9(e){return WT(e.code)}const qT=()=>{};function GT(e,t){return new Proxy(qT,{get(r,s){if(!(typeof s!="string"||s==="then"))return GT(e,[...t,s])},apply(r,s,i){const o=t[t.length-1]==="apply";return e({args:o?i.length>=2?i[1]:[]:i,path:o?t.slice(0,-1):t})}})}const v6=e=>GT(e,[]),T6=e=>new Proxy(qT,{get(t,n){if(!(typeof n!="string"||n==="then"))return e(n)}});function O9(e){const{path:t,error:n,config:r}=e,{code:s}=e.error,i={message:n.message,code:TRPC_ERROR_CODES_BY_KEY[s],data:{code:s,httpStatus:getHTTPStatusCodeFromError(n)}};return r.isDev&&typeof e.error.stack=="string"&&(i.data.stack=e.error.stack),typeof t=="string"&&(i.data.path=t),r.errorFormatter({...e,shape:i})}function YT(e,t){return"error"in t?{...t,error:e.transformer.output.serialize(t.error)}:"data"in t.result?{...t,result:{...t.result,data:e.transformer.output.serialize(t.result.data)}}:t}function N9(e,t){return Array.isArray(t)?t.map(n=>YT(e,n)):YT(e,t)}function x6(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}class A6 extends Error{}function S6(e){if(e instanceof Error)return e;const t=typeof e;if(!(t==="undefined"||t==="function"||e===null)){if(t!=="object")return new Error(String(e));if(x6(e)){const n=new A6;for(const r in e)n[r]=e[r];return n}}}function rh(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}function k6(e,t){if("error"in e){const r=t.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:r}}}return{ok:!0,result:{...e.result,...(!e.result.type||e.result.type==="data")&&{type:"data",data:t.transformer.deserialize(e.result.data)}}}}class E_ extends Error{constructor(){super("Unable to transform response from server")}}function XT(e,t){let n;try{n=k6(e,t)}catch{throw new E_}if(!n.ok&&(!rh(n.error.error)||typeof n.error.error.code!="number"))throw new E_;if(n.ok&&!rh(n.result))throw new E_;return n}function C6(e){return e instanceof es||e instanceof Error&&e.name==="TRPCClientError"}function I6(e){return rh(e)&&rh(e.error)&&typeof e.error.code=="number"&&typeof e.error.message=="string"}class es extends Error{static from(t,n={}){const r=t;return C6(r)?(n.meta&&(r.meta={...r.meta,...n.meta}),r):I6(r)?new es(r.error.message,{...n,result:r}):r instanceof Error?new es(r.message,{...n,cause:S6(r)}):new es("Unknown error",{...n,cause:r})}constructor(t,n){const r=n?.cause;super(t,{cause:r}),this.meta=n?.meta,this.cause=r,this.shape=n?.result?.error,this.data=n?.result?.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,es.prototype)}}const JT=e=>typeof e=="function";function O6(e){if(e)return e;if(typeof window<"u"&&JT(window.fetch))return window.fetch;if(typeof globalThis<"u"&&JT(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}function N6(e){return e||(typeof window<"u"&&window.AbortController?window.AbortController:typeof globalThis<"u"&&globalThis.AbortController?globalThis.AbortController:null)}function QT(e){return{url:e.url.toString().replace(/\/$/,""),fetch:e.fetch,AbortController:N6(e.AbortController)}}function R6(e){const t={};for(let n=0;n<e.length;n++){const r=e[n];t[n]=r}return t}const B6={query:"GET",mutation:"POST"};function ex(e){return"input"in e?e.runtime.transformer.serialize(e.input):R6(e.inputs.map(t=>e.runtime.transformer.serialize(t)))}const v_=e=>{let t=e.url+"/"+e.path;const n=[];if("inputs"in e&&n.push("batch=1"),e.type==="query"){const r=ex(e);r!==void 0&&n.push(`input=${encodeURIComponent(JSON.stringify(r))}`)}return n.length&&(t+="?"+n.join("&")),t},tx=e=>{if(e.type==="query")return;const t=ex(e);return t!==void 0?JSON.stringify(t):void 0},nx=e=>sx({...e,contentTypeHeader:"application/json",getUrl:v_,getBody:tx});async function rx(e,t){const n=e.getUrl(e),r=e.getBody(e),{type:s}=e,i=await e.headers();/* istanbul ignore if -- @preserve */if(s==="subscription")throw new Error("Subscriptions should use wsLink");const o={...e.contentTypeHeader?{"content-type":e.contentTypeHeader}:{},...e.batchModeHeader?{"trpc-batch-mode":e.batchModeHeader}:{},...i};return O6(e.fetch)(n,{method:B6[s],signal:t?.signal,body:r,headers:o})}function sx(e){const t=e.AbortController?new e.AbortController:null,n={};let r=!1;return{promise:new Promise((o,u)=>{rx(e,t).then(l=>(n.response=l,r=!0,l.json())).then(l=>{n.responseJSON=l,o({json:l,meta:n})}).catch(l=>{r=!0,u(es.from(l,{meta:n}))})}),cancel:()=>{r||t?.abort()}}}const T_=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function x_(e){let t=null,n=null;const r=()=>{clearTimeout(n),n=null,t=null};function s(u){const l=[[]];let d=0;for(;;){const f=u[d];if(!f)break;const g=l[l.length-1];if(f.aborted){f.reject?.(new Error("Aborted")),d++;continue}if(e.validate(g.concat(f).map(b=>b.key))){g.push(f),d++;continue}if(g.length===0){f.reject?.(new Error("Input is too big for a single dispatch")),d++;continue}l.push([])}return l}function i(){const u=s(t);r();for(const l of u){if(!l.length)continue;const d={items:l,cancel:T_};for(const b of l)b.batch=d;const f=(b,T)=>{const I=d.items[b];I.resolve?.(T),I.batch=null,I.reject=null,I.resolve=null},{promise:g,cancel:_}=e.fetch(d.items.map(b=>b.key),f);d.cancel=_,g.then(b=>{for(let T=0;T<b.length;T++){const I=b[T];f(T,I)}for(const T of d.items)T.reject?.(new Error("Missing result")),T.batch=null}).catch(b=>{for(const T of d.items)T.reject?.(b),T.batch=null})}}function o(u){const l={aborted:!1,key:u,batch:null,resolve:T_,reject:T_},d=new Promise((g,_)=>{l.reject=_,l.resolve=g,t||(t=[]),t.push(l)});return n||(n=setTimeout(i)),{promise:d,cancel:()=>{l.aborted=!0,l.batch?.items.every(g=>g.aborted)&&(l.batch.cancel(),l.batch=null)}}}return{load:o}}function ax(e){return function(n){const r=QT(n),s=n.maxURLLength??1/0;return i=>{const o=g=>{const _=T=>{if(s===1/0)return!0;const I=T.map(Q=>Q.path).join(","),k=T.map(Q=>Q.input);return v_({...r,runtime:i,type:g,path:I,inputs:k}).length<=s},b=e({...r,runtime:i,type:g,opts:n});return{validate:_,fetch:b}},u=x_(o("query")),l=x_(o("mutation")),d=x_(o("subscription")),f={query:u,subscription:d,mutation:l};return({op:g})=>b_(_=>{const b=f[g.type],{promise:T,cancel:I}=b.load(g);let k;return T.then(Z=>{k=Z;const Q=XT(Z.json,i);if(!Q.ok){_.error(es.from(Q.error,{meta:Z.meta}));return}_.next({context:Z.meta,result:Q.result}),_.complete()}).catch(Z=>{_.error(es.from(Z,{meta:k?.meta}))}),()=>{I()}})}}}const B9=ax(e=>t=>{const n=t.map(o=>o.path).join(","),r=t.map(o=>o.input),{promise:s,cancel:i}=nx({...e,path:n,inputs:r,headers(){return e.opts.headers?typeof e.opts.headers=="function"?e.opts.headers({opList:t}):e.opts.headers:{}}});return{promise:s.then(o=>(Array.isArray(o.json)?o.json:t.map(()=>o.json)).map(d=>({meta:o.meta,json:d}))),cancel:i}});function ix(e){return t=>{const n=QT(t);return r=>({op:s})=>b_(i=>{const{path:o,input:u,type:l}=s,{promise:d,cancel:f}=e.requester({...n,runtime:r,type:l,path:o,input:u,headers(){return t.headers?typeof t.headers=="function"?t.headers({op:s}):t.headers:{}}});let g;return d.then(_=>{g=_.meta;const b=XT(_.json,r);if(!b.ok){i.error(es.from(b.error,{meta:g}));return}i.next({context:_.meta,result:b.result}),i.complete()}).catch(_=>{i.error(es.from(_,{meta:g}))}),()=>{f()}})}}const D9=ix({requester:nx});function D6(e){return typeof FormData>"u"?!1:e instanceof FormData}const A_={css:{query:["72e3ff","3fb0d8"],mutation:["c5a3fc","904dfc"],subscription:["ff49e1","d83fbe"]},ansi:{regular:{query:["\x1B[30;46m","\x1B[97;46m"],mutation:["\x1B[30;45m","\x1B[97;45m"],subscription:["\x1B[30;42m","\x1B[97;42m"]},bold:{query:["\x1B[1;30;46m","\x1B[1;97;46m"],mutation:["\x1B[1;30;45m","\x1B[1;97;45m"],subscription:["\x1B[1;30;42m","\x1B[1;97;42m"]}}};function P6(e){const{direction:t,type:n,path:r,id:s,input:i}=e,o=[],u=[];if(e.colorMode==="ansi"){const[g,_]=A_.ansi.regular[n],[b,T]=A_.ansi.bold[n];return o.push(t==="up"?g:_,t==="up"?">>":"<<",n,t==="up"?b:T,`#${s}`,r,"\x1B[0m"),t==="up"?u.push({input:e.input}):u.push({input:e.input,result:"result"in e.result?e.result.result:e.result,elapsedMs:e.elapsedMs}),{parts:o,args:u}}const[l,d]=A_.css[n],f=`
    background-color: #${t==="up"?l:d}; 
    color: ${t==="up"?"black":"white"};
    padding: 2px;
  `;return o.push("%c",t==="up"?">>":"<<",n,`#${s}`,`%c${r}%c`,"%O"),u.push(f,`${f}; font-weight: bold;`,`${f}; font-weight: normal;`),t==="up"?u.push({input:i,context:e.context}):u.push({input:i,result:e.result,elapsedMs:e.elapsedMs,context:e.context}),{parts:o,args:u}}const L6=({c:e=console,colorMode:t="css"})=>n=>{const r=n.input,s=D6(r)?Object.fromEntries(r):r,{parts:i,args:o}=P6({...n,colorMode:t,input:s}),u=n.direction==="down"&&n.result&&(n.result instanceof Error||"error"in n.result.result)?"error":"log";e[u].apply(null,[i.join(" ")].concat(o))};function P9(e={}){const{enabled:t=()=>!0}=e,n=e.colorMode??(typeof window>"u"?"ansi":"css"),{logger:r=L6({c:e.console,colorMode:n})}=e;return()=>({op:s,next:i})=>observable(o=>{t({...s,direction:"up"})&&r({...s,direction:"up"});const u=Date.now();function l(d){const f=Date.now()-u;t({...s,direction:"down",result:d})&&r({...s,direction:"down",elapsedMs:f,result:d})}return i(s).pipe(tap({next(d){l(d)},error(d){l(d)}})).subscribe(o)})}/* istanbul ignore next -- @preserve */const U6=e=>e===0?0:Math.min(1e3*2**e,3e4);function L9(e){const{url:t,WebSocket:n=WebSocket,retryDelayMs:r=U6,onOpen:s,onClose:i}=e;/* istanbul ignore next -- @preserve */if(!n)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");let o=[];const u=Object.create(null);let l=0,d=null,f=null,g=re(),_="connecting";function b(){_!=="open"||d||(d=setTimeout(()=>{d=null,o.length===1?g.send(JSON.stringify(o.pop())):g.send(JSON.stringify(o)),o=[]}))}function T(){if(f!==null||_==="closed")return;const me=r(l++);k(me)}function I(){_="connecting";const me=g;g=re(),Z(me)}function k(me){f||(_="connecting",f=setTimeout(I,me))}function Z(me){Object.values(u).some(Ee=>Ee.ws===me)||me.close()}function Q(){Object.values(u).forEach(me=>{me.type==="subscription"&&me.callbacks.complete()})}function ee(me){o.some(oe=>oe.id===me.op.id)||Se(me.op,me.callbacks)}function re(){const me=typeof t=="function"?t():t,oe=new n(me);clearTimeout(f),f=null,oe.addEventListener("open",()=>{/* istanbul ignore next -- @preserve */oe===g&&(l=0,_="open",s?.(),b())}),oe.addEventListener("error",()=>{oe===g&&T()});const Ee=Ne=>{if(Ne.method==="reconnect"&&oe===g){_==="open"&&i?.(),I();for(const _e of Object.values(u))_e.type==="subscription"&&ee(_e)}},Ie=Ne=>{const _e=Ne.id!==null&&u[Ne.id];if(_e){if(_e.callbacks.next?.(Ne),_e.ws!==g&&oe===g){const Ve=_e.ws;_e.ws=g,Z(Ve)}"result"in Ne&&Ne.result.type==="stopped"&&oe===g&&_e.callbacks.complete()}};return oe.addEventListener("message",({data:Ne})=>{const _e=JSON.parse(Ne);"method"in _e?Ee(_e):Ie(_e),(oe!==g||_==="closed")&&Z(oe)}),oe.addEventListener("close",({code:Ne})=>{_==="open"&&i?.({code:Ne}),g===oe&&T();for(const[_e,Ve]of Object.entries(u))if(Ve.ws===oe){if(_==="closed"){delete u[_e],Ve.callbacks.complete?.();continue}Ve.type==="subscription"?ee(Ve):(delete u[_e],Ve.callbacks.error?.(TRPCClientError.from(new S_("WebSocket closed prematurely"))))}}),oe}function Se(me,oe){const{type:Ee,input:Ie,path:Ne,id:_e}=me,Ve={id:_e,method:Ee,params:{input:Ie,path:Ne}};return u[_e]={ws:g,type:Ee,callbacks:oe,op:me},o.push(Ve),b(),()=>{const Qe=u[_e]?.callbacks;delete u[_e],o=o.filter(le=>le.id!==_e),Qe?.complete?.(),g.readyState===n.OPEN&&me.type==="subscription"&&(o.push({id:_e,method:"subscription.stop"}),b())}}return{close:()=>{_="closed",i?.(),Q(),Z(g),clearTimeout(f),f=null},request:Se,getConnection(){return g}}}class S_ extends Error{constructor(t){super(t),this.name="TRPCWebSocketClosedError",Object.setPrototypeOf(this,S_.prototype)}}function U9(e){return t=>{const{client:n}=e;return({op:r})=>observable(s=>{const{type:i,path:o,id:u,context:l}=r,d=t.transformer.serialize(r.input),f=n.request({type:i,path:o,input:d,id:u,context:l},{error(g){s.error(g),f()},complete(){s.complete()},next(g){const _=transformResult(g,t);if(!_.ok){s.error(TRPCClientError.from(_.error));return}s.next({result:_.result}),r.type!=="subscription"&&(f(),s.complete())}});return()=>{f()}})}}class k_{$request({type:t,input:n,path:r,context:s={}}){return jT({links:this.links,op:{id:++this.requestId,type:t,path:r,input:n,context:s}}).pipe(y6())}requestAsPromise(t){const n=this.$request(t),{promise:r,abort:s}=b6(n);return new Promise((o,u)=>{t.signal?.addEventListener("abort",s),r.then(l=>{o(l.result.data)}).catch(l=>{u(es.from(l))})})}query(t,n,r){return this.requestAsPromise({type:"query",path:t,input:n,context:r?.context,signal:r?.signal})}mutation(t,n,r){return this.requestAsPromise({type:"mutation",path:t,input:n,context:r?.context,signal:r?.signal})}subscription(t,n,r){return this.$request({type:"subscription",path:t,input:n,context:r?.context}).subscribe({next(i){i.result.type==="started"?r.onStarted?.():i.result.type==="stopped"?r.onStopped?.():r.onData?.(i.result.data)},error(i){r.onError?.(i)},complete(){r.onComplete?.()}})}constructor(t){this.requestId=0;const n=(()=>{const r=t.transformer;return r?"input"in r?t.transformer:{input:r,output:r}:{input:{serialize:s=>s,deserialize:s=>s},output:{serialize:s=>s,deserialize:s=>s}}})();this.runtime={transformer:{serialize:r=>n.input.serialize(r),deserialize:r=>n.output.deserialize(r)},combinedTransformer:n},this.links=t.links.map(r=>r(this.runtime))}}function M9(e){return new k_(e)}function V9(e){return new k_(e)}const M6={query:"query",mutate:"mutation",subscribe:"subscription"},V6=e=>M6[e];function F6(e){return T6(t=>e.hasOwnProperty(t)?e[t]:t==="__untypedClient"?e:v6(({path:n,args:r})=>{const s=[t,...n],i=V6(s.pop()),o=s.join(".");return e[i](o,...r)}))}function H6(e){const t=new k_(e);return F6(t)}function F9(e){return e.__untypedClient}function $6(e){if(e)return e;if(typeof window<"u"&&window.TextDecoder)return new window.TextDecoder;if(typeof globalThis<"u"&&globalThis.TextDecoder)return new globalThis.TextDecoder;throw new Error("No TextDecoder implementation found")}async function j6(e){const t=e.parse??JSON.parse,n=r=>{if(e.signal?.aborted||!r||r==="}")return;const s=r.indexOf(":"),i=r.substring(2,s-1),o=r.substring(s+1);e.onSingle(Number(i),t(o))};await Z6(e.readableStream,n,e.textDecoder)}async function Z6(e,t,n){let r="";const s=i=>{const u=n.decode(i).split(`
`);if(u.length===1)r+=u[0];else if(u.length>1){t(r+u[0]);for(let l=1;l<u.length-1;l++)t(u[l]);r=u[u.length-1]}};"getReader"in e?await K6(e,s):await z6(e,s),t(r)}function z6(e,t){return new Promise(n=>{e.on("data",t),e.on("end",n)})}async function K6(e,t){const n=e.getReader();let r=await n.read();for(;!r.done;)t(r.value),r=await n.read()}const W6=(e,t)=>{const n=e.AbortController?new e.AbortController:null,r=rx({...e,contentTypeHeader:"application/json",batchModeHeader:"stream",getUrl:v_,getBody:tx},n),s=()=>n?.abort(),i=r.then(async o=>{if(!o.body)throw new Error("Received response without body");const u={response:o};return j6({readableStream:o.body,onSingle:t,parse:l=>({json:JSON.parse(l),meta:u}),signal:n?.signal,textDecoder:e.textDecoder})});return{cancel:s,promise:i}},$9=ax(e=>{const t=$6(e.opts.textDecoder);return(n,r)=>{const s=n.map(l=>l.path).join(","),i=n.map(l=>l.input),{cancel:o,promise:u}=W6({...e,textDecoder:t,path:s,inputs:i,headers(){return e.opts.headers?typeof e.opts.headers=="function"?e.opts.headers({opList:n}):e.opts.headers:{}}},(l,d)=>{r(l,d)});return{promise:u.then(()=>[]),cancel:o}}}),q6=e=>{if("input"in e){if(!(e.input instanceof FormData))throw new Error("Input is not FormData");return e.input}},Z9=ix({requester:e=>{if(e.type!=="mutation")throw new Error("We only handle mutations with formdata");return sx({...e,getUrl(){return`${e.url}/${e.path}`},getBody:q6})}});var G6=je(6201);class Y6{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(t,n){this.keyToValue.set(t,n),this.valueToKey.set(n,t)}getByKey(t){return this.keyToValue.get(t)}getByValue(t){return this.valueToKey.get(t)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class ox{constructor(t){this.generateIdentifier=t,this.kv=new Y6}register(t,n){this.kv.getByValue(t)||(n||(n=this.generateIdentifier(t)),this.kv.set(n,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}}class X6 extends ox{constructor(){super(t=>t.name),this.classToAllowedProps=new Map}register(t,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(t,n.allowProps),super.register(t,n.identifier)):super.register(t,n)}getAllowedProps(t){return this.classToAllowedProps.get(t)}}function J6(e){if("values"in Object)return Object.values(e);const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function Q6(e,t){const n=J6(e);if("find"in n)return n.find(t);const r=n;for(let s=0;s<r.length;s++){const i=r[s];if(t(i))return i}}function Ic(e,t){Object.entries(e).forEach(([n,r])=>t(r,n))}function sh(e,t){return e.indexOf(t)!==-1}function cx(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(t(r))return r}}class eP{constructor(){this.transfomers={}}register(t){this.transfomers[t.name]=t}findApplicable(t){return Q6(this.transfomers,n=>n.isApplicable(t))}findByName(t){return this.transfomers[t]}}const tP=e=>Object.prototype.toString.call(e).slice(8,-1),ux=e=>typeof e>"u",nP=e=>e===null,xl=e=>typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype,C_=e=>xl(e)&&Object.keys(e).length===0,yi=e=>Array.isArray(e),rP=e=>typeof e=="string",sP=e=>typeof e=="number"&&!isNaN(e),aP=e=>typeof e=="boolean",iP=e=>e instanceof RegExp,Al=e=>e instanceof Map,Sl=e=>e instanceof Set,lx=e=>tP(e)==="Symbol",oP=e=>e instanceof Date&&!isNaN(e.valueOf()),cP=e=>e instanceof Error,dx=e=>typeof e=="number"&&isNaN(e),uP=e=>aP(e)||nP(e)||ux(e)||sP(e)||rP(e)||lx(e),lP=e=>typeof e=="bigint",dP=e=>e===1/0||e===-1/0,fP=e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),hP=e=>e instanceof URL,fx=e=>e.replace(/\./g,"\\."),I_=e=>e.map(String).map(fx).join("."),kl=e=>{const t=[];let n="";for(let s=0;s<e.length;s++){let i=e.charAt(s);if(i==="\\"&&e.charAt(s+1)==="."){n+=".",s++;continue}if(i==="."){t.push(n),n="";continue}n+=i}const r=n;return t.push(r),t};function Xs(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}const hx=[Xs(ux,"undefined",()=>null,()=>{}),Xs(lP,"bigint",e=>e.toString(),e=>typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),Xs(oP,"Date",e=>e.toISOString(),e=>new Date(e)),Xs(cP,"Error",(e,t)=>{const n={name:e.name,message:e.message};return t.allowedErrorProps.forEach(r=>{n[r]=e[r]}),n},(e,t)=>{const n=new Error(e.message);return n.name=e.name,n.stack=e.stack,t.allowedErrorProps.forEach(r=>{n[r]=e[r]}),n}),Xs(iP,"regexp",e=>""+e,e=>{const t=e.slice(1,e.lastIndexOf("/")),n=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,n)}),Xs(Sl,"set",e=>[...e.values()],e=>new Set(e)),Xs(Al,"map",e=>[...e.entries()],e=>new Map(e)),Xs(e=>dx(e)||dP(e),"number",e=>dx(e)?"NaN":e>0?"Infinity":"-Infinity",Number),Xs(e=>e===0&&1/e===-1/0,"number",()=>"-0",Number),Xs(hP,"URL",e=>e.toString(),e=>new URL(e))];function ah(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}const px=ah((e,t)=>lx(e)?!!t.symbolRegistry.getIdentifier(e):!1,(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,n)=>{const r=n.symbolRegistry.getValue(t[1]);if(!r)throw new Error("Trying to deserialize unknown symbol");return r}),pP=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),gx=ah(fP,e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{const n=pP[t[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(e)});function mx(e,t){return e?.constructor?!!t.classRegistry.getIdentifier(e.constructor):!1}const _x=ah(mx,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{const n=t.classRegistry.getAllowedProps(e.constructor);if(!n)return{...e};const r={};return n.forEach(s=>{r[s]=e[s]}),r},(e,t,n)=>{const r=n.classRegistry.getValue(t[1]);if(!r)throw new Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(r.prototype),e)}),yx=ah((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,n)=>{const r=n.customTransformerRegistry.findByName(t[1]);if(!r)throw new Error("Trying to deserialize unknown custom value");return r.deserialize(e)}),gP=[_x,px,yx,gx],bx=(e,t)=>{const n=cx(gP,s=>s.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation(e,t)};const r=cx(hx,s=>s.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation}},wx={};hx.forEach(e=>{wx[e.annotation]=e});const mP=(e,t,n)=>{if(yi(t))switch(t[0]){case"symbol":return px.untransform(e,t,n);case"class":return _x.untransform(e,t,n);case"custom":return yx.untransform(e,t,n);case"typed-array":return gx.untransform(e,t,n);default:throw new Error("Unknown transformation: "+t)}else{const r=wx[t];if(!r)throw new Error("Unknown transformation: "+t);return r.untransform(e,n)}},Oc=(e,t)=>{const n=e.keys();for(;t>0;)n.next(),t--;return n.next().value};function Ex(e){if(sh(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(sh(e,"prototype"))throw new Error("prototype is not allowed as a property");if(sh(e,"constructor"))throw new Error("constructor is not allowed as a property")}const _P=(e,t)=>{Ex(t);for(let n=0;n<t.length;n++){const r=t[n];if(Sl(e))e=Oc(e,+r);else if(Al(e)){const s=+r,i=+t[++n]==0?"key":"value",o=Oc(e,s);switch(i){case"key":e=o;break;case"value":e=e.get(o);break}}else e=e[r]}return e},O_=(e,t,n)=>{if(Ex(t),t.length===0)return n(e);let r=e;for(let i=0;i<t.length-1;i++){const o=t[i];if(yi(r)){const u=+o;r=r[u]}else if(xl(r))r=r[o];else if(Sl(r)){const u=+o;r=Oc(r,u)}else if(Al(r)){if(i===t.length-2)break;const l=+o,d=+t[++i]==0?"key":"value",f=Oc(r,l);switch(d){case"key":r=f;break;case"value":r=r.get(f);break}}}const s=t[t.length-1];if(yi(r)?r[+s]=n(r[+s]):xl(r)&&(r[s]=n(r[s])),Sl(r)){const i=Oc(r,+s),o=n(i);i!==o&&(r.delete(i),r.add(o))}if(Al(r)){const i=+t[t.length-2],o=Oc(r,i);switch(+s==0?"key":"value"){case"key":{const l=n(o);r.set(l,r.get(o)),l!==o&&r.delete(o);break}case"value":{r.set(o,n(r.get(o)));break}}}return e};function N_(e,t,n=[]){if(!e)return;if(!yi(e)){Ic(e,(i,o)=>N_(i,t,[...n,...kl(o)]));return}const[r,s]=e;s&&Ic(s,(i,o)=>{N_(i,t,[...n,...kl(o)])}),t(r,n)}function yP(e,t,n){return N_(t,(r,s)=>{e=O_(e,s,i=>mP(i,r,n))}),e}function bP(e,t){function n(r,s){const i=_P(e,kl(s));r.map(kl).forEach(o=>{e=O_(e,o,()=>i)})}if(yi(t)){const[r,s]=t;r.forEach(i=>{e=O_(e,kl(i),()=>e)}),s&&Ic(s,n)}else Ic(t,n);return e}const wP=(e,t)=>xl(e)||yi(e)||Al(e)||Sl(e)||mx(e,t);function EP(e,t,n){const r=n.get(e);r?r.push(t):n.set(e,[t])}function vP(e,t){const n={};let r;return e.forEach(s=>{if(s.length<=1)return;t||(s=s.map(u=>u.map(String)).sort((u,l)=>u.length-l.length));const[i,...o]=s;i.length===0?r=o.map(I_):n[I_(i)]=o.map(I_)}),r?C_(n)?[r]:[r,n]:C_(n)?void 0:n}const vx=(e,t,n,r,s=[],i=[],o=new Map)=>{const u=uP(e);if(!u){EP(e,s,t);const b=o.get(e);if(b)return r?{transformedValue:null}:b}if(!wP(e,n)){const b=bx(e,n),T=b?{transformedValue:b.value,annotations:[b.type]}:{transformedValue:e};return u||o.set(e,T),T}if(sh(i,e))return{transformedValue:null};const l=bx(e,n),d=l?.value??e,f=yi(d)?[]:{},g={};Ic(d,(b,T)=>{if(T==="__proto__"||T==="constructor"||T==="prototype")throw new Error(`Detected property ${T}. This is a prototype pollution risk, please remove it from your object.`);const I=vx(b,t,n,r,[...s,T],[...i,e],o);f[T]=I.transformedValue,yi(I.annotations)?g[T]=I.annotations:xl(I.annotations)&&Ic(I.annotations,(k,Z)=>{g[fx(T)+"."+Z]=k})});const _=C_(g)?{transformedValue:f,annotations:l?[l.type]:void 0}:{transformedValue:f,annotations:l?[l.type,g]:g};return u||o.set(e,_),_};function hn(e){return Object.prototype.toString.call(e).slice(8,-1)}function TP(e){return hn(e)==="Object"}function ih(e){return hn(e)==="Array"}function z9(e){return hn(e)==="Blob"}function xP(e){return hn(e)==="Boolean"}function K9(e){return hn(e)==="Date"&&!isNaN(e)}function W9(e){return ih(e)&&e.length===0}function oh(e){if(hn(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function q9(e){return oh(e)&&Object.keys(e).length===0}function G9(e){return e===""}function Y9(e){return hn(e)==="Error"||e instanceof Error}function X9(e){return hn(e)==="File"}function J9(e){return ih(e)&&e.length>0}function Q9(e){return oh(e)&&Object.keys(e).length>0}function Tx(e){return hn(e)==="String"}function e$(e){return Tx(e)&&e!==""}function t$(e){return typeof e=="function"}function AP(e,t){if(!(t instanceof Function))throw new TypeError("Type must be a function");if(!Object.prototype.hasOwnProperty.call(t,"prototype"))throw new TypeError("Type is not a class");const n=t.name;return hn(e)===n||!!(e&&e.constructor===t)}function n$(e,t){if(typeof t=="function"){for(let n=e;n;n=Object.getPrototypeOf(n))if(AP(n,t))return!0;return!1}else{for(let n=e;n;n=Object.getPrototypeOf(n))if(hn(n)===t)return!0;return!1}}function r$(e){return hn(e)==="Map"}function s$(e){return hn(e)==="Number"&&isNaN(e)}function R_(e){return hn(e)==="Number"&&!isNaN(e)}function a$(e){return R_(e)&&e<0}function xx(e){return hn(e)==="Null"}function SP(e,t,n,r,s){return i=>e(i)||t(i)||!!n&&n(i)||!!r&&r(i)||!!s&&s(i)}function Ax(e){return hn(e)==="Undefined"}const i$=SP(xx,Ax);function o$(e){return oh(e)}function c$(e){return TP(e)}function u$(e){return R_(e)&&e>0}function kP(e){return hn(e)==="Symbol"}function l$(e){return xP(e)||xx(e)||Ax(e)||R_(e)||Tx(e)||kP(e)}function d$(e){return hn(e)==="Promise"}function f$(e){return hn(e)==="RegExp"}function h$(e){return hn(e)==="Set"}function p$(e){return hn(e)==="WeakMap"}function g$(e){return hn(e)==="WeakSet"}function CP(e,t,n,r,s){const i={}.propertyIsEnumerable.call(r,t)?"enumerable":"nonenumerable";i==="enumerable"&&(e[t]=n),s&&i==="nonenumerable"&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}function B_(e,t={}){if(ih(e))return e.map(s=>B_(s,t));if(!oh(e))return e;const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols(e);return[...n,...r].reduce((s,i)=>{if(ih(t.props)&&!t.props.includes(i))return s;const o=e[i],u=B_(o,t);return CP(s,i,u,e,t.nonenumerable),s},{})}class Ot{constructor({dedupe:t=!1}={}){this.classRegistry=new X6,this.symbolRegistry=new ox(n=>n.description??""),this.customTransformerRegistry=new eP,this.allowedErrorProps=[],this.dedupe=t}serialize(t){const n=new Map,r=vx(t,n,this,this.dedupe),s={json:r.transformedValue};r.annotations&&(s.meta={...s.meta,values:r.annotations});const i=vP(n,this.dedupe);return i&&(s.meta={...s.meta,referentialEqualities:i}),s}deserialize(t){const{json:n,meta:r}=t;let s=B_(n);return r?.values&&(s=yP(s,r.values,this)),r?.referentialEqualities&&(s=bP(s,r.referentialEqualities)),s}stringify(t){return JSON.stringify(this.serialize(t))}parse(t){return this.deserialize(JSON.parse(t))}registerClass(t,n){this.classRegistry.register(t,n)}registerSymbol(t,n){this.symbolRegistry.register(t,n)}registerCustom(t,n){this.customTransformerRegistry.register({name:n,...t})}allowErrorProps(...t){this.allowedErrorProps.push(...t)}}Ot.defaultInstance=new Ot,Ot.serialize=Ot.defaultInstance.serialize.bind(Ot.defaultInstance),Ot.deserialize=Ot.defaultInstance.deserialize.bind(Ot.defaultInstance),Ot.stringify=Ot.defaultInstance.stringify.bind(Ot.defaultInstance),Ot.parse=Ot.defaultInstance.parse.bind(Ot.defaultInstance),Ot.registerClass=Ot.defaultInstance.registerClass.bind(Ot.defaultInstance),Ot.registerSymbol=Ot.defaultInstance.registerSymbol.bind(Ot.defaultInstance),Ot.registerCustom=Ot.defaultInstance.registerCustom.bind(Ot.defaultInstance),Ot.allowErrorProps=Ot.defaultInstance.allowErrorProps.bind(Ot.defaultInstance);const m$=Ot.serialize,_$=Ot.deserialize,y$=Ot.stringify,b$=Ot.parse,w$=Ot.registerClass,E$=Ot.registerCustom,v$=Ot.registerSymbol,T$=Ot.allowErrorProps,D_=H6({transformer:Ot,links:[(0,G6.windowLink)({window})]});class Sx extends Error{constructor({code:t,message:n,options:r={}},s){const{error:i,context:o}=r;super(n,{cause:i}),this.errorMessages=s,this.name="BaseError",this.context=o,this.code=t,this.setMessageByCode(t,n)}setMessageByCode(t,n){!t||!this.errorMessages||n||(this.message=this.errorMessages[t])}toString(){return this.message||""}}var Ur=(e=>(e[e.UserAborted=113]="UserAborted",e[e.Unknown=163]="Unknown",e))(Ur||{});const IP={113:"An error occurred (USER_REFUSED_OP)",163:"An error occurred (UNKNOWN_ERROR)"};class ts extends Sx{constructor(t){super(t,IP),this.name="WalletRPCError"}}async function P_(e){const t="skipDeploy"in e?!!e.skipDeploy:!1;Mt({type:"SIGN_MESSAGE",data:{typedData:e,options:{skipDeploy:t}}});const{actionHash:n}=await wt("SIGN_MESSAGE_RES",1e3);Mt({type:"OPEN_UI"});const r=await Promise.race([wt("SIGNATURE_SUCCESS",11*60*1e3,s=>s.data.actionHash===n),wt("SIGNATURES_PENDING",10*60*1e3,s=>s.data.actionHash===n),wt("SIGNATURE_FAILURE",10*60*1e3,s=>s.data.actionHash===n).then(s=>s).catch(s=>(Mt({type:"SIGNATURE_FAILURE",data:{actionHash:n,error:s.message}}),"timeout"))]);if(r==="timeout")throw new ts({code:Ur.Unknown});if("error"in r)throw new ts({code:Ur.UserAborted,options:{error:r.error}});return"requestId"in r?await D_.multisig.waitForOffchainSignatures.mutate({requestId:r.requestId}):r.signature}class OP extends lT{constructor(t,n){const r=o1.starkCurve.utils.randomPrivateKey();super(n||tT,t,r)}async execute(t,n,r={}){const s=Array.isArray(n)?r:n,[i,o]=await nh.Sc.execute.parseAsync([t,s]);Mt({type:"EXECUTE_TRANSACTION",data:{transactions:i,transactionsDetail:o}});const{actionHash:u}=await wt("EXECUTE_TRANSACTION_RES",1e3);Mt({type:"OPEN_UI"});const l=await Promise.race([wt("TRANSACTION_SUBMITTED",11*60*1e3,d=>d.data.actionHash===u),wt("TRANSACTION_FAILED",10*60*1e3,d=>d.data.actionHash===u).then(()=>"error").catch(()=>(Mt({type:"TRANSACTION_FAILED",data:{actionHash:u}}),"timeout"))]);if(l==="error")throw Error("User abort");if(l==="timeout")throw Error("User action timed out");return{transaction_hash:l.transactionResult.transactionHash}}async declare({contract:t,classHash:n,casm:r,compiledClassHash:s},i){Mt({type:"REQUEST_DECLARE_CONTRACT",data:{payload:{contract:t,classHash:n,casm:r,compiledClassHash:s}}});const{actionHash:o}=await wt("REQUEST_DECLARE_CONTRACT_RES",1e3);Mt({type:"OPEN_UI"});const u=await Promise.race([wt("DECLARE_CONTRACT_ACTION_SUBMITTED",21*60*1e3,l=>l.data.actionHash===o),wt("DECLARE_CONTRACT_ACTION_FAILED",20*60*1e3,l=>l.data.actionHash===o).then(()=>"error").catch(()=>"timeout")]);if(u==="error")throw Error("User abort");if(u==="timeout")throw Error("User action timed out");return{transaction_hash:u.txHash,class_hash:u.classHash}}async signMessage(t,n={skipDeploy:!1}){return P_({...t,skipDeploy:n.skipDeploy})}}const L_=async()=>{try{return Mt({type:"IS_PREAUTHORIZED"}),await wt("IS_PREAUTHORIZED_RES",10*1e3)}catch{}return!1};var kx=je(95056),Gt=je(36533).hp,Cx=Object.defineProperty,NP=Object.getOwnPropertyDescriptor,RP=Object.getOwnPropertyNames,BP=Object.prototype.hasOwnProperty,$t=(e,t)=>{for(var n in t)Cx(e,n,{get:t[n],enumerable:!0})},Ix=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of RP(t))!BP.call(e,s)&&s!==n&&Cx(e,s,{get:()=>t[s],enumerable:!(r=NP(t,s))||r.enumerable});return e},DP=(e,t,n)=>(Ix(e,t,"default"),n&&Ix(n,t,"default")),Cl={};$t(Cl,{ADDR_BOUND:()=>H_,API_VERSION:()=>Mx,BaseUrl:()=>$x,FeeMarginPercentage:()=>zx,HARDENING_4BYTES:()=>Yx,HARDENING_BYTE:()=>Ol,IS_BROWSER:()=>Ox,MASK_250:()=>Ux,MASK_31:()=>V_,MAX_STORAGE_ITEM_SIZE:()=>Vx,NetworkName:()=>ch,OutsideExecutionCallerAny:()=>Wx,PRIME:()=>F_,RANGE_FELT:()=>j_,RANGE_I128:()=>Fx,RANGE_U128:()=>Hx,RPC_DEFAULT_VERSION:()=>Il,RPC_NODES:()=>Kx,SNIP9_V1_INTERFACE_ID:()=>qx,SNIP9_V2_INTERFACE_ID:()=>Gx,StarknetChainId:()=>jx,TEXT_TO_FELT_MAX_LEN:()=>M_,TRANSACTION_VERSION:()=>Ue.ETransactionVersion,TransactionHashPrefix:()=>Zx,UDC:()=>wo,ZERO:()=>bn});var Ue={};$t(Ue,{JRPC:()=>PP,RPCSPEC06:()=>nn,RPCSPEC07:()=>N});var PP={},nn={};$t(nn,{EBlockTag:()=>jP,EDAMode:()=>zP,EDataAvailabilityMode:()=>ZP,ESimulationFlag:()=>VP,ETransactionExecutionStatus:()=>$P,ETransactionFinalityStatus:()=>HP,ETransactionStatus:()=>FP,ETransactionType:()=>MP,ETransactionVersion:()=>KP,ETransactionVersion2:()=>Nc,ETransactionVersion3:()=>WP,Errors:()=>LP,SPEC:()=>UP});var LP={},UP={},MP={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},VP={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},FP={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},HP={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},$P={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},jP={PENDING:"pending",LATEST:"latest"},ZP={L1:"L1",L2:"L2"},zP={L1:0,L2:1},KP={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},Nc={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},WP={V3:"0x3",F3:"0x100000000000000000000000000000003"};DP(Ue,N);var qP={};$t(qP,{IS_BROWSER:()=>Ox,addHexPrefix:()=>pt,arrayBufferToString:()=>Nx,atobUniversal:()=>Rx,btoaUniversal:()=>Bx,buf2hex:()=>ur,calcByteLength:()=>Px,concatenateArrayBuffer:()=>nr,padLeft:()=>Dx,pascalToSnake:()=>XP,removeHexPrefix:()=>un,sanitizeBytes:()=>Lx,sanitizeHex:()=>Rc,stringToArrayBuffer:()=>GP,utf8ToArray:()=>bi});var Ox=typeof window<"u",U_="0";function Nx(e){return new Uint8Array(e).reduce((t,n)=>t+String.fromCharCode(n),"")}function bi(e){return new TextEncoder().encode(e)}function GP(e){return bi(e)}function Rx(e){return Ir.decode(e)}function Bx(e){return Ir.encode(new Uint8Array(e))}function ur(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function un(e){return e.replace(/^0x/i,"")}function pt(e){return`0x${un(e)}`}function YP(e,t,n,r=U_){const s=t-e.length;let i=e;if(s>0){const o=r.repeat(s);i=n?o+e:e+o}return i}function Dx(e,t,n=U_){return YP(e,t,!0,n)}function Px(e,t=8){const{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function Lx(e,t=8,n=U_){return Dx(e,Px(e,t),n)}function Rc(e){const t=un(e),n=Lx(t,2);return n&&pt(n)}var XP=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function nr(e){const t=e.reduce((s,i)=>s+i.byteLength,0),n=new Uint8Array(t);let r=0;return e.forEach(s=>{n.set(s,r),r+=s.byteLength}),n}var M_=31,bn=0n,Ux=2n**250n-1n,V_=2n**31n-1n,Mx=bn,F_=2n**251n+17n*2n**192n+1n,Vx=256n,H_=2n**251n-Vx,$_=(e,t)=>({min:e,max:t}),j_=$_(bn,F_-1n),Fx=$_(-(2n**127n),2n**127n-1n),Hx=$_(bn,2n**128n-1n),$x=(e=>(e.SN_MAIN="https://alpha-mainnet.starknet.io",e.SN_SEPOLIA="https://alpha-sepolia.starknet.io",e))($x||{}),ch=(e=>(e.SN_MAIN="SN_MAIN",e.SN_SEPOLIA="SN_SEPOLIA",e))(ch||{}),jx=(e=>(e.SN_MAIN="0x534e5f4d41494e",e.SN_SEPOLIA="0x534e5f5345504f4c4941",e))(jx||{}),Zx=(e=>(e.DECLARE="0x6465636c617265",e.DEPLOY="0x6465706c6f79",e.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",e.INVOKE="0x696e766f6b65",e.L1_HANDLER="0x6c315f68616e646c6572",e))(Zx||{}),zx=(e=>(e[e.L1_BOUND_MAX_AMOUNT=50]="L1_BOUND_MAX_AMOUNT",e[e.L1_BOUND_MAX_PRICE_PER_UNIT=50]="L1_BOUND_MAX_PRICE_PER_UNIT",e[e.MAX_FEE=50]="MAX_FEE",e))(zx||{}),wo={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},Il="v0_7",Kx={SN_MAIN:[`https://starknet-mainnet.public.blastapi.io/rpc/${Il}`,`https://free-rpc.nethermind.io/mainnet-juno/${Il}`],SN_SEPOLIA:[`https://starknet-sepolia.public.blastapi.io/rpc/${Il}`,`https://free-rpc.nethermind.io/sepolia-juno/${Il}`]},Wx="0x414e595f43414c4c4552",qx="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",Gx="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",Ol=128,Yx=2147483648n,Xx={};$t(Xx,{RpcChannel:()=>b4});var JP={};$t(JP,{parse:()=>Bc,parseAlwaysAsBig:()=>eL,stringify:()=>Mr,stringifyAlwaysAsBig:()=>tL});var QP=e=>{if(!qn(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},Bc=e=>Jo(String(e),void 0,QP),eL=e=>Jo(String(e),void 0,hu),Mr=(e,t,n,r)=>wu(e,t,n,r),tL=Mr,nL={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_MAX_FEE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63},rL=nL;function sL(e,t=e.constructor){const{captureStackTrace:n}=Error;n&&n(e,t)}function aL(e,t){const{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}var iL=class extends Error{constructor(t){super(t);W(this,"name");Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),aL(this,new.target.prototype),sL(this)}},Nl=class extends iL{},Jx=class extends Nl{constructor(t,n,r){super(`RPC: ${n} with params ${Mr(r,null,2)}

      ${t.code}: ${t.message}: ${Mr(t.data)}`);W(this,"request");this.baseError=t,this.request={method:n,params:r}}get code(){return this.baseError.code}isType(t){return rL[t]===this.code}},oL={};$t(oL,{BlockStatus:()=>dL,BlockTag:()=>wi,ETH_ADDRESS:()=>Qx,EntryPointType:()=>cL,Literal:()=>Ei,NON_ZERO_PREFIX:()=>eA,OutsideExecutionTypesV1:()=>tA,OutsideExecutionTypesV2:()=>nA,OutsideExecutionVersion:()=>rA,RPC:()=>Ue,TransactionExecutionStatus:()=>uh,TransactionFinalityStatus:()=>lL,TransactionStatus:()=>uL,TransactionType:()=>rn,TypedDataRevision:()=>K,Uint:()=>wr,ValidateType:()=>ka});var cL={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},rn={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},uL={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",REJECTED:"REJECTED",REVERTED:"REVERTED"},lL={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},uh={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},dL={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},wi={PENDING:"pending",LATEST:"latest"},ka={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},wr={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},Ei={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Qx="core::starknet::eth_address::EthAddress",eA="core::zeroable::NonZero::",tA={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},nA={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},rA=(e=>(e.UNSUPPORTED="0",e.V1="1",e.V2="2",e))(rA||{}),sA=class{constructor(e){W(this,"nodeUrl");W(this,"headers");W(this,"interval");W(this,"requestId",0);W(this,"pendingRequests",{});W(this,"batchPromises",{});W(this,"delayTimer");W(this,"delayPromise");W(this,"delayPromiseResolve");W(this,"baseFetch");this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}async wait(){return(!this.delayPromise||!this.delayPromiseResolve)&&(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e,params:t??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:Mr(e),headers:this.headers})).json()}async fetch(e,t,n){const r=this.addPendingRequest(e,t,n);await this.wait();const s=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const u=this.sendBatch(Object.values(s));Object.keys(s).forEach(l=>{this.batchPromises[l]=u})}const i=await this.batchPromises[r];delete this.batchPromises[r];const o=i.find(u=>u.id===r);if(!o)throw new Error(`Couldn't find the result for the request. Method: ${e}`);return o}};function it(e,t){if(!e)throw new Error(t||"Assertion failure")}var fL={};$t(fL,{addPercent:()=>Bl,assertInRange:()=>K_,bigNumberishArrayToDecimalStringArray:()=>oA,bigNumberishArrayToHexadecimalStringArray:()=>cA,cleanHex:()=>Rl,getDecimalString:()=>pL,getHexString:()=>uA,getHexStringArray:()=>W_,hexToBytes:()=>Ia,hexToDecimalString:()=>iA,isBigNumberish:()=>Dl,isHex:()=>Er,isStringWholeNumber:()=>vo,stringToSha256ToArrayBuff4:()=>G_,toBigInt:()=>kt,toCairoBool:()=>q_,toHex:()=>ge,toHex64:()=>hL,toHexString:()=>aA,toStorageKey:()=>z_});var Rn=e=>typeof e>"u"||e===void 0;function Eo(e){return typeof e=="number"}function Z_(e){return typeof e=="boolean"}function Ca(e){return typeof e=="bigint"}function wn(e){return typeof e=="string"}function Js(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function Er(e){return/^0x[0-9a-f]*$/i.test(e)}function kt(e){return BigInt(e)}function ge(e){return pt(kt(e).toString(16))}var aA=ge;function z_(e){return pt(kt(e).toString(16).padStart(64,"0"))}function hL(e){const t=pt(kt(e).toString(16).padStart(64,"0"));if(t.length!==66)throw TypeError("number is too big for hex 0x(64) representation");return t}function iA(e){return BigInt(pt(e)).toString(10)}function Rl(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function K_(e,t,n,r=""){const s=r===""?"invalid length":`invalid ${r} length`,i=BigInt(e),o=BigInt(t),u=BigInt(n);it(i>=o&&i<=u,`Message not signable, ${s}.`)}function oA(e){return e.map(t=>kt(t).toString(10))}function cA(e){return e.map(t=>ge(t))}function vo(e){return/^\d+$/.test(e)}function pL(e){if(Er(e))return iA(e);if(vo(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function uA(e){if(Er(e))return e;if(vo(e))return aA(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function W_(e){return e.map(uA)}function q_(e){return(+e).toString()}function Ia(e){if(!Er(e))throw new Error(`${e} needs to be a hex-string`);let t=un(e);return t.length%2!==0&&(t=`0${t}`),y(t)}function Bl(e,t){const n=BigInt(e);return n+n*BigInt(t)/100n}function G_(e){const n=(r=>Number(r&V_))(BigInt(pt(ur(ac(e)))));return Ia(ge(n))}function Dl(e){return Eo(e)||Ca(e)||wn(e)&&(Er(e)||vo(e))}var gL={};$t(gL,{getL2MessageHash:()=>lA,getSelector:()=>Dc,getSelectorFromName:()=>En,keccakBn:()=>Y_,solidityUint256PackedKeccak256:()=>lh,starknetKeccak:()=>X_});function Y_(e){const t=un(ge(BigInt(e))),n=t.length%2===0?t:`0${t}`;return pt(sr(Ia(pt(n))).toString(16))}function mL(e){return pt(sr(bi(e)).toString(16))}function X_(e){return BigInt(mL(e))&Ux}function En(e){return ge(X_(e))}function Dc(e){return Eo(e)||Ca(e)?ge(e):Er(e)?e:vo(e)?ge(e):En(e)}function lh(e){const t=pt(e.reduce((n,r)=>n+un(ge(r)).padStart(64,"0"),""));return pt(qr(ug(Ia(t))))}function lA(e,t,n,r,s){return lh([e,t,s,n,r.length,...r])}var _L={};$t(_L,{decodeShortString:()=>To,encodeShortString:()=>jn,isASCII:()=>J_,isDecimalString:()=>Q_,isLongText:()=>ey,isShortString:()=>Pl,isShortText:()=>yL,isText:()=>Ll,splitLongString:()=>ty});function J_(e){return/^[\x00-\x7F]*$/.test(e)}function Pl(e){return e.length<=M_}function Q_(e){return/^[0-9]*$/i.test(e)}function Ll(e){return wn(e)&&!Er(e)&&!vo(e)}var yL=e=>Ll(e)&&Pl(e),ey=e=>Ll(e)&&!Pl(e);function ty(e){const t=RegExp(`[^]{1,${M_}}`,"g");return e.match(t)||[]}function jn(e){if(!J_(e))throw new Error(`${e} is not an ASCII string`);if(!Pl(e))throw new Error(`${e} is too long`);return pt(e.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function To(e){if(!J_(e))throw new Error(`${e} is not an ASCII string`);if(Er(e))return un(e).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(Q_(e))return To("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}var bL={};$t(bL,{byteArrayFromString:()=>dh,stringFromByteArray:()=>dA});function dA(e){const t=BigInt(e.pending_word)===0n?"":To(ge(e.pending_word));return e.data.reduce((n,r)=>{const s=BigInt(r)===0n?"":To(ge(r));return n+s},"")+t}function dh(e){const t=ty(e),n=t[t.length-1],r=t.map(jn),[s,i]=n===void 0||n.length===31?["0x00",0]:[r.pop(),n.length];return{data:r.length===0?[]:r,pending_word:s,pending_word_len:i}}var fA={};$t(fA,{felt:()=>ns,getAbiContractVersion:()=>sy,getArrayType:()=>Qs,isCairo1Abi:()=>ry,isCairo1Type:()=>xi,isLen:()=>Ao,isTypeArray:()=>vi,isTypeBool:()=>ph,isTypeByteArray:()=>Vl,isTypeBytes31:()=>gh,isTypeContractAddress:()=>IL,isTypeEnum:()=>So,isTypeEthAddress:()=>ko,isTypeFelt:()=>Lc,isTypeLiteral:()=>ny,isTypeNamedTuple:()=>pA,isTypeNonZero:()=>Co,isTypeOption:()=>fh,isTypeResult:()=>hh,isTypeSecp256k1Point:()=>mh,isTypeStruct:()=>Ul,isTypeTuple:()=>Ti,isTypeU96:()=>gA,isTypeUint:()=>Ml,isTypeUint256:()=>CL,tuple:()=>Uc,uint256:()=>ay,uint512:()=>OL});function xo(e){if(Ca(e)||Number.isInteger(e))return e.toString();if(wn(e)){if(Er(e))return BigInt(e).toString();if(Ll(e)){if(!Pl(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(jn(e)).toString()}if(vo(e))return e}if(Z_(e))return`${+e}`;throw new Error(`${e} can't be computed by felt()`)}var Pc=(1n<<128n)-1n,hA=(1n<<256n)-1n,wL=0n,EL=340282366920938463463374607431768211455n,vL=340282366920938463463374607431768211455n,TL=0n,xL=0n,Bn=(ks=class{constructor(...t){W(this,"low");W(this,"high");if(typeof t[0]=="object"&&t.length===1&&"low"in t[0]&&"high"in t[0]){const n=ks.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(t.length===1){const n=ks.validate(t[0]);this.low=n&Pc,this.high=n>>128n}else if(t.length===2){const n=ks.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}static validate(t){const n=BigInt(t);if(n<wL)throw Error("bigNumberish is smaller than UINT_256_MIN");if(n>hA)throw new Error("bigNumberish is bigger than UINT_256_MAX");return n}static validateProps(t,n){const r=BigInt(t),s=BigInt(n);if(r<TL||r>EL)throw new Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(s<xL||s>vL)throw new Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:s}}static is(t){try{ks.validate(t)}catch{return!1}return!0}static isAbiType(t){return t===ks.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:pt(this.low.toString(16)),high:pt(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[xo(this.low),xo(this.high)]}},W(ks,"abiSelector","core::integer::u256"),ks),AL=(1n<<512n)-1n,SL=0n,kL=0n,lr=(Cs=class{constructor(...t){W(this,"limb0");W(this,"limb1");W(this,"limb2");W(this,"limb3");if(typeof t[0]=="object"&&t.length===1&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const n=Cs.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(t.length===1){const n=Cs.validate(t[0]);this.limb0=n&Pc,this.limb1=(n&Pc<<128n)>>128n,this.limb2=(n&Pc<<256n)>>256n,this.limb3=n>>384n}else if(t.length===4){const n=Cs.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(t){const n=BigInt(t);if(n<SL)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(n>AL)throw Error("bigNumberish is bigger than UINT_512_MAX.");return n}static validateProps(t,n,r,s){const i=BigInt(t),o=BigInt(n),u=BigInt(r),l=BigInt(s);return[i,o,u,l].forEach((d,f)=>{if(d<kL||d>Pc)throw Error(`limb${f} is not in the range of a u128 number`)}),{limb0:i,limb1:o,limb2:u,limb3:l}}static is(t){try{Cs.validate(t)}catch{return!1}return!0}static isAbiType(t){return t===Cs.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:pt(this.limb0.toString(16)),limb1:pt(this.limb1.toString(16)),limb2:pt(this.limb2.toString(16)),limb3:pt(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[xo(this.limb0),xo(this.limb1),xo(this.limb2),xo(this.limb3)]}},W(Cs,"abiSelector","core::integer::u512"),Cs),Ao=e=>/_len$/.test(e),Lc=e=>e==="felt"||e==="core::felt252",vi=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),Ti=e=>/^\(.*\)$/i.test(e),pA=e=>/\(.*\)/i.test(e)&&e.includes(":"),Ul=(e,t)=>e in t,So=(e,t)=>e in t,fh=e=>e.startsWith("core::option::Option::"),hh=e=>e.startsWith("core::result::Result::"),Ml=e=>Object.values(wr).includes(e),CL=e=>Bn.isAbiType(e),ny=e=>Object.values(Ei).includes(e),ph=e=>e==="core::bool",IL=e=>e===Ei.ContractAddress,ko=e=>e===Qx,gh=e=>e==="core::bytes_31::bytes31",Vl=e=>e==="core::byte_array::ByteArray",gA=e=>e==="core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>",mh=e=>e===Ei.Secp256k1Point,xi=e=>e.includes("::"),Qs=e=>xi(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function ry(e){const{cairo:t}=sy(e);if(t===void 0)throw Error("Unable to determine Cairo version");return t==="1"}function Co(e){return e.startsWith(eA)}function sy(e){if(e.find(r=>r.type==="interface"))return{cairo:"1",compiler:"2"};const t=e.find(r=>(r.type==="function"||r.type==="constructor")&&(r.inputs.length||r.outputs.length));if(!t)return{cairo:void 0,compiler:void 0};const n=t.inputs.length?t.inputs:t.outputs;return xi(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var ay=e=>new Bn(e).toUint256DecimalString(),OL=e=>new lr(e).toUint512DecimalString(),Uc=(...e)=>({...e});function ns(e){return xo(e)}var Fl=class{constructor(e){W(this,"variant");const t=Object.values(e);if(t.length===0)throw new Error("This Enum must have at least 1 variant");if(t.filter(r=>!Rn(r)).length!==1)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(t=>!Rn(t))}activeVariant(){const t=Object.entries(this.variant).find(n=>!Rn(n[1]));return Rn(t)?"":t[0]}},ms={Some:0,None:1},iy=class{constructor(e,t){W(this,"Some");W(this,"None");if(!(e in Object.values(ms)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===ms.Some){if(Rn(t))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!Rn(this.Some)}isNone(){return this.None===!0}},Vr={Ok:0,Err:1},oy=class{constructor(e,t){W(this,"Ok");W(this,"Err");if(!(e in Object.values(Vr)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===Vr.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!Rn(this.Ok))return this.Ok;if(!Rn(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!Rn(this.Ok)}isErr(){return!Rn(this.Err)}},cy={isBN:(e,t,n)=>{if(!Ca(e[n]))throw new Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)},unknown:(e,t,n)=>{throw new Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)}};function _h(e,t,n){return Object.entries(e).reduce((r,[s,i])=>{const o=n??t[s];if(!(s in t)&&!n)return r[s]=i,r;if(o==="string"){if(Array.isArray(e[s])){const u=_h(e[s],e[s].map(l=>o));return r[s]=Object.values(u).join(""),r}return cy.isBN(e,t,s),r[s]=To(i),r}if(o==="number")return cy.isBN(e,t,s),r[s]=Number(i),r;if(typeof o=="function")return r[s]=o(i),r;if(Array.isArray(o)){const u=_h(e[s],o,o[0]);return r[s]=Object.values(u),r}return Js(o)?(r[s]=_h(e[s],o),r):(cy.unknown(e,t,s),r)},{})}var NL=class{constructor(e){W(this,"abi");this.abi=e}methodInputsLength(e){return e.inputs.reduce((t,n)=>Ao(n.name)?t:t+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},RL=class{constructor(e){W(this,"abi");this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){return this.abi.find(n=>n.type==="interface")?.items?.find(n=>n.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>e.type==="interface"?e.items:e)}};function mA(e){const t=BL(e);if(t===0||t===1)return new NL(e);if(t===2)return new RL(e);throw Error(`Unsupported ABI version ${t}`)}function BL(e){return e.find(t=>t.type==="interface")?2:ry(e)?1:0}function _A(e,t,n){return e==="constructor"&&!n&&!t.length}function DL(e){const t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}function PL(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let n="",r=0;for(;r<e.length;){if(e[r]==="("){let s=1;const i=r;for(r++;s;)e[r]===")"&&s--,e[r]==="("&&s++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}function LL(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=PL(t);let s=r.split(",").map(i=>n.length?i.replace(" ",n.shift()):i);return pA(e)&&(s=s.reduce((i,o)=>i.concat(DL(o)),[])),s}function yA(e,t,n){for(let r=0,s=0;r<e.length;r++)if(e[r]===t)s++;else if(e[r]===n&&--s===0)return r;return Number.POSITIVE_INFINITY}function UL(e){const t=e.slice(1,-1),n=[];let r=0,s;for(;r<t.length;){switch(!0){case t[r]==="(":{s=r+yA(t.slice(r),"(",")")+1;break}case(t.startsWith("core::result::Result::<",r)||t.startsWith("core::array::Array::<",r)||t.startsWith("core::option::Option::<",r)):{s=r+yA(t.slice(r),"<",">")+1;break}default:{const i=t.indexOf(",",r);s=i!==-1?i:Number.POSITIVE_INFINITY}}n.push(t.slice(r,s)),r=s+2}return n}function uy(e){return xi(e)?UL(e):LL(e)}function ML(e){return Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`)}function VL(e){return Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`)}function FL(e,t,n,r){const s=(f,g)=>{if(vi(g))return o(f,g);if(So(g,r)){const _=r[g];return l(f,_)}if(Ti(g))return u(f,g);if(ko(g)||Co(g)||Vl(g)||gA(g)||mh(g))return f;if(Bn.isAbiType(g)){const _=f;if(typeof _!="object")return _;if(!("low"in _&&"high"in _))throw ML(g);return{low:_.low,high:_.high}}if(lr.isAbiType(g)){const _=f;if(typeof _!="object")return _;if(!["limb0","limb1","limb2","limb3"].every(b=>b in _))throw VL(g);return{limb0:_.limb0,limb1:_.limb1,limb2:_.limb2,limb3:_.limb3}}if(Ul(g,n)){const _=n[g].members;return i(f,_)}return f},i=(f,g)=>g.reduce((b,T)=>{const I=k=>Object.defineProperty(b,T.name,{enumerable:!0,value:k??f[T.name]});if(f[T.name]==="undefined"&&(xi(T.type)||!Ao(T.name)))throw Error(`Your object needs a property with key : ${T.name} .`);return I(s(f[T.name],T.type)),b},{});function o(f,g){const _=Qs(g);return wn(f)?f:f.map(b=>s(b,_))}function u(f,g){return uy(g).reduce((T,I,k)=>{const Z=Object.keys(f),Q=re=>Object.defineProperty(T,k.toString(),{enumerable:!0,value:re??f[Z[k]]}),ee=I?.type?I.type:I;return Q(s(f[Z[k]],ee)),T},{})}const l=(f,g)=>{if(hh(g.name)){const I=f,k=g.name.substring(g.name.indexOf("<")+1,g.name.lastIndexOf(",")),Z=g.name.substring(g.name.indexOf(",")+1,g.name.lastIndexOf(">"));return I.isOk()?new oy(Vr.Ok,s(f.unwrap(),k)):new oy(Vr.Err,s(f.unwrap(),Z))}if(fh(g.name)){const I=f,k=g.name.substring(g.name.indexOf("<")+1,g.name.lastIndexOf(">"));return I.isSome()?new iy(ms.Some,s(I.unwrap(),k)):new iy(ms.None,{})}const _=f,T=Object.entries(_.variant).map(I=>{if(Rn(I[1]))return I;const k=g.type.substring(g.type.lastIndexOf("<")+1,g.type.lastIndexOf(">"));return k==="()"?I:[I[0],s(_.unwrap(),k)]});return new Fl(Object.fromEntries(T))};return t.reduce((f,g)=>{const _=b=>Object.defineProperty(f,g.name,{enumerable:!0,value:b});return Ao(g.name)&&!xi(g.type)||_(s(e[g.name],g.type)),f},{})}function Mc(e,t){switch(!0){case Bn.isAbiType(e):return new Bn(t).toApiRequest();case lr.isAbiType(e):return new lr(t).toApiRequest();case gh(e):return jn(t.toString());case mh(e):{const n=un(ge(t)).padStart(128,"0"),r=ay(pt(n.slice(-64))),s=ay(pt(n.slice(0,-64)));return[ns(s.low),ns(s.high),ns(r.low),ns(r.high)]}default:return ns(t)}}function HL(e,t){const n=uy(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${r}
      expected: ${n}`);return n.map((s,i)=>({element:r[i],type:s.type??s}))}function $L(e){const t=dh(e);return[t.data.length.toString(),...t.data.map(n=>n.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}function ea(e,t,n,r){if(e===void 0)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){const s=[];s.push(ns(e.length));const i=Qs(t);return e.reduce((o,u)=>o.concat(ea(u,i,n,r)),s)}if(n[t]&&n[t].members.length){if(Bn.isAbiType(t))return new Bn(e).toApiRequest();if(lr.isAbiType(t))return new lr(e).toApiRequest();if(ko(t))return Mc(t,e);if(Vl(t))return $L(e);const{members:s}=n[t],i=e;return s.reduce((o,u)=>o.concat(ea(i[u.name],u.type,n,r)),[])}if(Ti(t))return HL(e,t).reduce((i,o)=>{const u=ea(o.element,o.type,n,r);return i.concat(u)},[]);if(Bn.isAbiType(t))return new Bn(e).toApiRequest();if(lr.isAbiType(t))return new lr(e).toApiRequest();if(So(t,r)){const{variants:s}=r[t];if(fh(t)){const g=e;if(g.isSome()){const _=s.find(I=>I.name==="Some");if(Rn(_))throw Error("Error in abi : Option has no 'Some' variant.");const b=_.type;if(b==="()")return ms.Some.toString();const T=ea(g.unwrap(),b,n,r);return Array.isArray(T)?[ms.Some.toString(),...T]:[ms.Some.toString(),T]}return ms.None.toString()}if(hh(t)){const g=e;if(g.isOk()){const I=s.find(Q=>Q.name==="Ok");if(Rn(I))throw Error("Error in abi : Result has no 'Ok' variant.");const k=I.type;if(k==="()")return Vr.Ok.toString();const Z=ea(g.unwrap(),k,n,r);return Array.isArray(Z)?[Vr.Ok.toString(),...Z]:[Vr.Ok.toString(),Z]}const _=s.find(I=>I.name==="Err");if(Rn(_))throw Error("Error in abi : Result has no 'Err' variant.");const b=_.type;if(b==="()")return Vr.Err.toString();const T=ea(g.unwrap(),b,n,r);return Array.isArray(T)?[Vr.Err.toString(),...T]:[Vr.Err.toString(),T]}const i=e,o=i.activeVariant(),u=s.find(g=>g.name===o);if(Rn(u))throw Error(`Not find in abi : Enum has no '${o}' variant.`);const l=u.type,d=s.findIndex(g=>g.name===o);if(l==="()")return d.toString();const f=ea(i.unwrap(),l,n,r);return Array.isArray(f)?[d.toString(),...f]:[d.toString(),f]}if(Co(t))return Mc(Qs(t),e);if(typeof e=="object")throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return Mc(t,e)}function jL(e,t,n,r){const{name:s,type:i}=t;let{value:o}=e.next();switch(!0){case vi(i):if(!Array.isArray(o)&&!Ll(o))throw Error(`ABI expected parameter ${s} to be array or long string, got ${o}`);return wn(o)&&(o=ty(o)),ea(o,t.type,n,r);case Co(i):return Mc(Qs(i),o);case ko(i):return Mc(i,o);case(Ul(i,n)||Ti(i)||Bn.isAbiType(i)):return ea(o,i,n,r);case So(i,r):return ea(o,i,n,r);default:return Mc(i,o)}}function ly(e,t){let n;switch(!0){case ph(e):return n=t.next().value,!!BigInt(n);case Bn.isAbiType(e):const r=t.next().value,s=t.next().value;return new Bn(r,s).toBigInt();case lr.isAbiType(e):const i=t.next().value,o=t.next().value,u=t.next().value,l=t.next().value;return new lr(i,o,u,l).toBigInt();case ko(e):return n=t.next().value,BigInt(n);case gh(e):return n=t.next().value,To(n);case mh(e):const d=un(t.next().value).padStart(32,"0"),f=un(t.next().value).padStart(32,"0"),g=un(t.next().value).padStart(32,"0"),_=un(t.next().value).padStart(32,"0");return BigInt(pt(f+d+_+g));default:return n=t.next().value,BigInt(n)}}function _s(e,t,n,r){if(t.type==="()")return{};if(Bn.isAbiType(t.type)){const s=e.next().value,i=e.next().value;return new Bn(s,i).toBigInt()}if(lr.isAbiType(t.type)){const s=e.next().value,i=e.next().value,o=e.next().value,u=e.next().value;return new lr(s,i,o,u).toBigInt()}if(Vl(t.type)){const s=[],i=BigInt(e.next().value);for(;s.length<i;)s.push(ge(e.next().value));const o=ge(e.next().value),u=BigInt(e.next().value);return dA({data:s,pending_word:o,pending_word_len:u})}if(vi(t.type)){const s=[],i={name:"",type:Qs(t.type)},o=BigInt(e.next().value);for(;s.length<o;)s.push(_s(e,i,n,r));return s}if(Co(t.type)){const s={name:"",type:Qs(t.type)};return _s(e,s,n,r)}if(n&&t.type in n&&n[t.type])return ko(t.type)?ly(t.type,e):n[t.type].members.reduce((s,i)=>(s[i.name]=_s(e,i,n,r),s),{});if(r&&t.type in r&&r[t.type]){const s=Number(e.next().value),i=r[t.type].variants.reduce((u,l,d)=>d===s?(u[l.name]=_s(e,{name:"",type:l.type},n,r),u):(u[l.name]=void 0,u),{});if(t.type.startsWith("core::option::Option")){const u=s===ms.Some?i.Some:void 0;return new iy(s,u)}if(t.type.startsWith("core::result::Result")){let u;return s===Vr.Ok?u=i.Ok:u=i.Err,new oy(s,u)}return new Fl(i)}if(Ti(t.type))return uy(t.type).reduce((i,o,u)=>{const l=o?.name?o.name:u,d=o?.type?o.type:o,f={name:l,type:d};return i[l]=_s(e,f,n,r),i},{});if(vi(t.type)){const s=[],i={name:"",type:Qs(t.type)},o=BigInt(e.next().value);for(;s.length<o;)s.push(_s(e,i,n,r));return s}return ly(t.type,e)}function yh(e,t,n,r,s){const{name:i,type:o}=t;let u;switch(!0){case Ao(i):return u=e.next().value,BigInt(u);case(n&&o in n||Ti(o)):return _s(e,t,n,r);case(r&&So(o,r)):return _s(e,t,n,r);case vi(o):if(xi(o))return _s(e,t,n,r);const l=[];if(s&&s[`${i}_len`]){const d=s[`${i}_len`];for(;l.length<d;)l.push(_s(e,{name:i,type:t.type.replace("*","")},n,r))}return l;case Co(o):return _s(e,t,n,r);default:return ly(o,e)}}var dy=(e,t)=>{if(it(wn(e)||Eo(e)||Ca(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),wn(e)&&!Er(e))return;const n=BigInt(e.toString(10));it(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},ZL=(e,t)=>{it(wn(e),`Validate: arg ${t.name} should be a string.`),it(e.length<32,`Validate: arg ${t.name} cairo typed ${t.type} should be a string of less than 32 characters.`)},zL=(e,t)=>{it(wn(e),`Validate: arg ${t.name} should be a string.`)},bh=(e,t)=>{Eo(e)&&it(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),it(wn(e)||Eo(e)||Ca(e)||Js(e)&&"low"in e&&"high"in e||Js(e)&&["limb0","limb1","limb2","limb3"].every(r=>r in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`);let n;switch(t.type){case wr.u256:n=new Bn(e).toBigInt();break;case wr.u512:n=new lr(e).toBigInt();break;default:n=kt(e)}switch(t.type){case wr.u8:it(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case wr.u16:it(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case wr.u32:it(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case wr.u64:it(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case wr.u128:it(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case wr.u256:it(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case wr.u512:it(lr.is(n),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case Ei.ClassHash:it(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case Ei.ContractAddress:it(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case Ei.Secp256k1Point:{it(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break}case Ei.U96:{it(n>=0n&&n<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`);break}default:break}},bA=(e,t)=>{it(Z_(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},wA=(e,t,n)=>{if(t.type===wr.u256||t.type===wr.u512){bh(e,t);return}if(ko(t.type)){it(!Js(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);const r=BigInt(e.toString(10));it(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}it(Js(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),n[t.type].members.forEach(({name:r})=>{it(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},EA=(e,t)=>{it(Js(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(fh(t.type)&&r.includes("isSome")&&r.includes("isNone"))&&!(hh(t.type)&&r.includes("isOk")&&r.includes("isErr"))&&!(r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},vA=(e,t)=>{it(Js(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},TA=(e,t,n,r)=>{const s=Qs(t.type);if(!(Lc(s)&&ey(e)))switch(it(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case Lc(s):e.forEach(i=>dy(i,t));break;case Ti(s):e.forEach(i=>vA(i,{name:t.name,type:s}));break;case vi(s):e.forEach(i=>TA(i,{name:"",type:s},n,r));break;case Ul(s,n):e.forEach(i=>wA(i,{name:t.name,type:s},n));break;case So(s,r):e.forEach(i=>EA(i,{name:t.name,type:s}));break;case(Ml(s)||ny(s)):e.forEach(i=>bh(i,{name:"",type:s}));break;case ph(s):e.forEach(i=>bA(i,t));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}},KL=(e,t)=>{const n=Qs(t.type);switch(it(Ml(n)&&n!==lr.abiSelector||Lc(n),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case Lc(n):dy(e,t),it(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Ml(n):switch(bh(e,{name:"",type:n}),n){case wr.u256:it(new Bn(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type.");break;default:it(kt(e)>0,"Validate: value 0 is not authorized in NonZero uint type.")}break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value "${e}"`)}};function xA(e,t,n,r){e.inputs.reduce((s,i)=>{const o=t[s];switch(!0){case Ao(i.name):return s;case Lc(i.type):dy(o,i);break;case gh(i.type):ZL(o,i);break;case(Ml(i.type)||ny(i.type)):bh(o,i);break;case ph(i.type):bA(o,i);break;case Vl(i.type):zL(o,i);break;case vi(i.type):TA(o,i,n,r);break;case Ul(i.type,n):wA(o,i,n);break;case So(i.type,r):EA(o,i);break;case Ti(i.type):vA(o,i);break;case Co(i.type):KL(o,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${o}`)}return s+1},0)}var yt=class jd{constructor(t){W(this,"abi");W(this,"parser");W(this,"structs");W(this,"enums");this.structs=jd.getAbiStruct(t),this.enums=jd.getAbiEnum(t),this.parser=mA(t),this.abi=this.parser.getLegacyFormat()}validate(t,n,r=[]){if(t!==ka.DEPLOY){const o=this.abi.filter(u=>{if(u.type!=="function")return!1;const l=u.stateMutability==="view"||u.state_mutability==="view";return t===ka.INVOKE?!l:l}).map(u=>u.name);it(o.includes(n),`${t===ka.INVOKE?"invocable":"viewable"} method not found in abi`)}const s=this.abi.find(o=>t===ka.DEPLOY?o.name===n&&o.type==="constructor":o.name===n&&o.type==="function");if(_A(n,r,s))return;const i=this.parser.methodInputsLength(s);if(r.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${r.length}`);xA(s,r,this.structs,this.enums)}compile(t,n){const r=this.abi.find(u=>u.name===t);if(_A(t,n,r))return[];let s;if(Array.isArray(n))s=n;else{const u=FL(n,r.inputs,this.structs,this.enums);s=Object.values(u),xA(r,s,this.structs,this.enums)}const i=s[Symbol.iterator](),o=r.inputs.reduce((u,l)=>Ao(l.name)&&!xi(l.type)?u:u.concat(jL(i,l,this.structs,this.enums)),[]);return Object.defineProperty(o,"__compiled__",{enumerable:!1,writable:!1,value:!0}),o}static compile(t){const n=s=>{const i=(u,l=".")=>{const d=Array.isArray(u)?[u.length.toString(),...u]:u;return Object.entries(d).flatMap(([f,g])=>{let _=g;f==="entrypoint"?_=En(_):ey(_)&&(_=dh(_));const b=Array.isArray(d)&&f==="0"?"$$len":f;if(Ca(_))return[[`${l}${b}`,ns(_)]];if(Object(_)===_){const T=Object.getOwnPropertyNames(Object.getPrototypeOf(_)),I=[...Object.getOwnPropertyNames(_),...T];if(I.includes("isSome")&&I.includes("isNone")){const k=_,Z=k.isSome()?ms.Some:ms.None;return k.isSome()?i({0:Z,1:k.unwrap()},`${l}${b}.`):[[`${l}${b}`,ns(Z)]]}if(I.includes("isOk")&&I.includes("isErr")){const k=_,Z=k.isOk()?Vr.Ok:Vr.Err;return i({0:Z,1:k.unwrap()},`${l}${b}.`)}if(I.includes("variant")&&I.includes("activeVariant")){const k=_,Z=k.activeVariant(),ee=Object.keys(k.variant).findIndex(re=>re===Z);return typeof k.unwrap()=="object"&&Object.keys(k.unwrap()).length===0?[[`${l}${b}`,ns(ee)]]:i({0:ee,1:k.unwrap()},`${l}${b}.`)}return i(_,`${l}${b}.`)}return[[`${l}${b}`,ns(_)]]})};return Object.fromEntries(i(s))};let r;if(Array.isArray(t)){const s={...t},i=n(s);r=Object.values(i)}else{const s=n(t);r=Object.values(s)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,n){const{outputs:r}=this.abi.find(o=>o.name===t),s=n.flat()[Symbol.iterator](),i=r.flat().reduce((o,u,l)=>{const d=u.name??l;return o[d]=yh(s,u,this.structs,this.enums,o),o[d]&&o[`${d}_len`]&&delete o[`${d}_len`],o},{});return Object.keys(i).length===1&&0 in i?i[0]:i}format(t,n,r){const s=this.parse(t,n);return _h(s,r)}static getAbiStruct(t){return t.filter(n=>n.type==="struct").reduce((n,r)=>({...n,[r.name]:r}),{})}static getAbiEnum(t){const n=t.filter(r=>r.type==="enum").reduce((r,s)=>({...r,[s.name]:s}),{});return delete n["core::bool"],n}static toCalldata(t=[]){return jd.compile(t)}static toHex(t=[]){return jd.compile(t).map(r=>ge(r))}decodeParameters(t,n){const r=Array.isArray(t)?t:[t],s=n.flat()[Symbol.iterator](),i=r.map(o=>yh(s,{name:"",type:o},this.structs,this.enums));return i.length===1?i[0]:i}},WL={};$t(WL,{calculateContractAddressFromHash:()=>xh,calculateDeclareTransactionHash:()=>Io,calculateDeployAccountTransactionHash:()=>Na,calculateInvokeTransactionHash:()=>Oa,calculateL2MessageTxHash:()=>CA,computeCompiledClassHash:()=>FA,computeContractClassHash:()=>$A,computeHashOnElements:()=>ta,computeHintedClassHash:()=>UA,computeLegacyContractClassHash:()=>MA,computePedersenHash:()=>$l,computePedersenHashOnElements:()=>PA,computePoseidonHash:()=>DA,computePoseidonHashOnElements:()=>LA,computeSierraContractClassHash:()=>HA,formatSpaces:()=>jl,getL2MessageHash:()=>lA,getSelector:()=>Dc,getSelectorFromName:()=>En,hashByteCodeSegments:()=>VA,keccakBn:()=>Y_,poseidon:()=>O,solidityUint256PackedKeccak256:()=>lh,starknetKeccak:()=>X_});var qL={};$t(qL,{calculateDeclareTransactionHash:()=>AA,calculateDeployAccountTransactionHash:()=>SA,calculateL2MessageTxHash:()=>CA,calculateTransactionHash:()=>kA,calculateTransactionHashCommon:()=>Hl,computeHashOnElements:()=>fy});var GL={};$t(GL,{starkCurve:()=>C,weierstrass:()=>$});function fy(e){return[...e,e.length].reduce((t,n)=>Us(kt(t),kt(n)),0).toString()}function Hl(e,t,n,r,s,i,o,u=[]){const l=fy(s),d=[e,t,n,r,l,i,o,...u];return fy(d)}function AA(e,t,n,r,s,i,o){return Hl("0x6465636c617265",n,t,0,[e],r,s,[i,...o?[o]:[]])}function SA(e,t,n,r,s,i,o,u){const l=[t,r,...n];return Hl("0x6465706c6f795f6163636f756e74",s,e,0,l,i,o,[u])}function kA(e,t,n,r,s,i){return Hl("0x696e766f6b65",t,e,0,n,r,s,[i])}function CA(e,t,n,r,s,i){const o=[e,...r];return Hl("0x6c315f68616e646c6572",0,t,Dc(n),o,0,s,[i])}var YL={};$t(YL,{calculateDeclareTransactionHash:()=>RA,calculateDeployAccountTransactionHash:()=>NA,calculateInvokeTransactionHash:()=>BA,calculateTransactionHashCommon:()=>Th,encodeResourceBoundsL1:()=>Eh,encodeResourceBoundsL2:()=>vh,hashDAMode:()=>wh,hashFeeField:()=>OA});var Ai=e=>e.map(t=>BigInt(t)),XL=32n,JL=64n,hy=128n,IA=JL+hy,QL=BigInt(jn("L1_GAS")),e4=BigInt(jn("L2_GAS"));function wh(e,t){return(BigInt(e)<<XL)+BigInt(t)}function Eh(e){return(QL<<IA)+(BigInt(e.l1_gas.max_amount)<<hy)+BigInt(e.l1_gas.max_price_per_unit)}function vh(e){return(e4<<IA)+(BigInt(e.l2_gas.max_amount)<<hy)+BigInt(e.l2_gas.max_price_per_unit)}function OA(e,t){const n=Eh(t),r=vh(t);return Ct([BigInt(e),n,r])}function Th(e,t,n,r,s,i,o,u,l,d,f=[]){const g=OA(i,d),_=wh(u,l),b=Ai([e,t,n,g,Ct(Ai(o)),r,s,_,...Ai(f)]);return ge(Ct(b))}function NA(e,t,n,r,s,i,o,u,l,d,f,g){return Th("0x6465706c6f795f6163636f756e74",s,e,i,o,f,g,u,l,d,[Ct(Ai(n)),t,r])}function RA(e,t,n,r,s,i,o,u,l,d,f,g){return Th("0x6465636c617265",r,n,s,i,f,Ai(g),u,l,d,[Ct(Ai(o)),e,t])}function BA(e,t,n,r,s,i,o,u,l,d,f){return Th("0x696e766f6b65",t,e,r,s,d,f,o,u,l,[Ct(Ai(i)),Ct(Ai(n))])}function t4(e){return[Ue.ETransactionVersion.V3,Ue.ETransactionVersion.F3].includes(e.version)}function Oa(e){return t4(e)?BA(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):kA(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function n4(e){return[Ue.ETransactionVersion.V3,Ue.ETransactionVersion.F3].includes(e.version)}function Io(e){return n4(e)?RA(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):AA(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function r4(e){return[Ue.ETransactionVersion.V3,Ue.ETransactionVersion.F3].includes(e.version)}function Na(e){return r4(e)?NA(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):SA(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}function $l(e,t){return Us(BigInt(e),BigInt(t))}function DA(e,t){return ge(cf(BigInt(e),BigInt(t)))}function ta(e){return[...e,e.length].reduce((t,n)=>Us(BigInt(t),BigInt(n)),0).toString()}var PA=ta;function LA(e){return ge(Ct(e.map(t=>BigInt(t))))}function xh(e,t,n,r){const s=yt.compile(n),i=ta(s),o=ns("0x535441524b4e45545f434f4e54524143545f41444452455353"),u=ta([o,r,e,t,i]);return ge(BigInt(u)%H_)}function s4(e,t){return e==="attributes"||e==="accessible_scopes"?Array.isArray(t)&&t.length===0?void 0:t:e==="debug_info"?null:t===null?void 0:t}function jl(e){let t=!1;const n=[];for(const r of e)r==='"'&&!(n.length>0&&n.slice(-1)[0]==="\\")&&(t=!t),t?n.push(r):n.push(r===":"?": ":r===","?", ":r);return n.join("")}function UA(e){const{abi:t,program:n}=e,s=jl(Mr({abi:t,program:n},s4));return pt(sr(bi(s)).toString(16))}function MA(e){const t=wn(e)?Bc(e):e,n=ge(Mx),r=ta(t.entry_points_by_type.EXTERNAL.flatMap(d=>[d.selector,d.offset])),s=ta(t.entry_points_by_type.L1_HANDLER.flatMap(d=>[d.selector,d.offset])),i=ta(t.entry_points_by_type.CONSTRUCTOR.flatMap(d=>[d.selector,d.offset])),o=ta(t.program.builtins.map(d=>jn(d))),u=UA(t),l=ta(t.program.data);return ta([n,r,s,i,o,u,l])}function a4(e){return Ct(e.flatMap(t=>BigInt(jn(t))))}function py(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.offset),a4(n.builtins)]);return Ct(t)}function VA(e){const t=e.bytecode.map(i=>BigInt(i)),n=e.bytecode_segment_lengths??[];let r=0;const s=n.flatMap(i=>{const o=t.slice(r,r+=i);return[BigInt(i),Ct(o)]});return 1n+Ct(s)}function FA(e){const n=BigInt(jn("COMPILED_CLASS_V1")),r=py(e.entry_points_by_type.EXTERNAL),s=py(e.entry_points_by_type.L1_HANDLER),i=py(e.entry_points_by_type.CONSTRUCTOR),o=e.bytecode_segment_lengths?VA(e):Ct(e.bytecode.map(u=>BigInt(u)));return ge(Ct([n,r,s,i,o]))}function gy(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.function_idx)]);return Ct(t)}function i4(e){const t=jl(Mr(e.abi,null));return BigInt(pt(sr(bi(t)).toString(16)))}function HA(e){const n=BigInt(jn("CONTRACT_CLASS_V0.1.0")),r=gy(e.entry_points_by_type.EXTERNAL),s=gy(e.entry_points_by_type.L1_HANDLER),i=gy(e.entry_points_by_type.CONSTRUCTOR),o=i4(e),u=Ct(e.sierra_program.map(l=>BigInt(l)));return ge(Ct([n,r,s,i,o,u]))}function $A(e){const t=wn(e)?Bc(e):e;return"sierra_program"in t?HA(t):MA(t)}var o4={};$t(o4,{compressProgram:()=>my,decompressProgram:()=>Si,estimateFeeToBounds:()=>zl,estimatedFeeToMaxFee:()=>jA,formatSignature:()=>Zl,getFullPublicKey:()=>l4,intDAM:()=>ln,makeAddress:()=>c4,randomAddress:()=>_y,reduceV2:()=>Sh,signatureToDecimalArray:()=>u4,signatureToHexArray:()=>Dn,toFeeVersion:()=>Ah,toTransactionVersion:()=>na,v3Details:()=>Pn});function my(e){const t=wn(e)?e:Mr(e),n=Ef(t);return Bx(n)}function Si(e){if(Array.isArray(e))return e;const t=Nx(vf(Rx(e)));return Bc(t)}function _y(){const e=Su.randomPrivateKey();return ku(e)}function c4(e){return pt(e).toLowerCase()}function Zl(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(t=>ge(t));try{const{r:t,s:n}=e;return[ge(t),ge(n)]}catch{throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function u4(e){return oA(Zl(e))}function Dn(e){return cA(Zl(e))}function jA(e,t=50){return Bl(e,t)}function zl(e,t=50,n=50){if(Ca(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}};if(Rn(e.gas_consumed)||Rn(e.gas_price))throw Error("estimateFeeToBounds: estimate is undefined");const r=e.data_gas_consumed!==void 0&&e.data_gas_price!==void 0?ge(Bl(BigInt(e.overall_fee)/BigInt(e.gas_price),t)):ge(Bl(e.gas_consumed,t)),s=ge(Bl(e.gas_price,n));return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:r,max_price_per_unit:s}}}function ln(e){if(e===Ue.EDataAvailabilityMode.L1)return Ue.EDAMode.L1;if(e===Ue.EDataAvailabilityMode.L2)return Ue.EDAMode.L2;throw Error("EDAM conversion")}function na(e,t){const n=t?ge(t):void 0,r=ge(e);if(t&&!Object.values(Ue.ETransactionVersion).includes(n))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(Ue.ETransactionVersion).includes(r))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?n:r}function Ah(e){if(!e)return;const t=ge(e);if(t===Ue.ETransactionVersion.V0)return Ue.ETransactionVersion.F0;if(t===Ue.ETransactionVersion.V1)return Ue.ETransactionVersion.F1;if(t===Ue.ETransactionVersion.V2)return Ue.ETransactionVersion.F2;if(t===Ue.ETransactionVersion.V3)return Ue.ETransactionVersion.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function Pn(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||Ue.EDataAvailabilityMode.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||Ue.EDataAvailabilityMode.L1,resourceBounds:e.resourceBounds??zl(bn)}}function Sh(e){return e===Ue.ETransactionVersion.F2?Ue.ETransactionVersion.F1:e===Ue.ETransactionVersion.V2?Ue.ETransactionVersion.V1:e}function l4(e){const t=ge(e);return pt(ur(af(t,!1)))}function dr(e){return"sierra_program"in(wn(e)?Bc(e):e)}function Kl(e){const t={...e};if(dr(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=FA(e.casm)),!t.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??$A(e.contract),!t.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}function x$(e){if(dr(e))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const t=e;return{...t,program:Si(t.program)}}var d4={};$t(d4,{ethRandomPrivateKey:()=>ZA,validateAndParseEthAddress:()=>yy});function ZA(){return Rc(ur(Af.utils.randomPrivateKey()))}function yy(e){K_(e,bn,2n**160n-1n,"Ethereum Address ");const t=pt(un(ge(e)).padStart(40,"0"));return it(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}var zA=globalThis.fetch.bind(globalThis),f4={};$t(f4,{Block:()=>Vt,createSierraContractClass:()=>KA,getDefaultNodeUrl:()=>Wl,isPendingBlock:()=>h4,isPendingStateUpdate:()=>g4,isPendingTransaction:()=>p4,isV3Tx:()=>Fr,isVersion:()=>by,parseContract:()=>WA,validBlockTags:()=>qA,wait:()=>Vc});function Vc(e){return new Promise(t=>{setTimeout(t,e)})}function KA(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=jl(Mr(e.abi)),t.sierra_program=jl(Mr(e.sierra_program)),t.sierra_program=my(t.sierra_program),t}function WA(e){const t=wn(e)?Bc(e):e;return dr(e)?KA(t):{...t,..."program"in t&&{program:my(t.program)}}}var Wl=(e,t=!1)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");const n=Kx[e??"SN_SEPOLIA"],r=Math.floor(Math.random()*n.length);return n[r]},qA=Object.values(wi),Vt=class{constructor(e){W(this,"hash",null);W(this,"number",null);W(this,"tag",null);W(this,"valueOf",()=>this.number);W(this,"toString",()=>this.hash);this.setIdentifier(e)}setIdentifier(e){if(wn(e))if(Q_(e))this.number=parseInt(e,10);else if(Er(e))this.hash=e;else if(qA.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`);else Ca(e)?this.hash=ge(e):Eo(e)?this.number=e:this.tag=wi.PENDING;if(Eo(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}get queryIdentifier(){return this.number!==null?`blockNumber=${this.number}`:this.hash!==null?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return this.number!==null?{block_number:this.number}:this.hash!==null?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}};function Fr(e){const t=e.version?ge(e.version):Ue.ETransactionVersion.V3;return t===Ue.ETransactionVersion.V3||t===Ue.ETransactionVersion.F3}function by(e,t){const[n,r]=e.split("."),[s,i]=t.split(".");return n===s&&r===i}function h4(e){return e.status==="PENDING"}function p4(e){return!("block_hash"in e)}function g4(e){return!("block_hash"in e)}var m4={};$t(m4,{buildUDCCall:()=>Ey,fromCallsToExecuteCalldata:()=>wy,fromCallsToExecuteCalldataWithNonce:()=>_4,fromCallsToExecuteCalldata_cairo1:()=>YA,getExecuteCalldata:()=>Oo,getVersionsByType:()=>vy,transformCallsToMulticallArrays:()=>GA,transformCallsToMulticallArrays_cairo1:()=>y4});var GA=e=>{const t=[],n=[];return e.forEach(r=>{const s=yt.compile(r.calldata||[]);t.push({to:kt(r.contractAddress).toString(10),selector:kt(En(r.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:s.length.toString()}),n.push(...s)}),{callArray:t,calldata:yt.compile({calldata:n})}},wy=e=>{const{callArray:t,calldata:n}=GA(e);return[...yt.compile({callArray:t}),...n]},_4=(e,t)=>[...wy(e),kt(t).toString()],y4=e=>e.map(n=>({to:kt(n.contractAddress).toString(10),selector:kt(En(n.entrypoint)).toString(10),calldata:yt.compile(n.calldata||[])})),YA=e=>{const t=e.map(n=>({contractAddress:n.contractAddress,entrypoint:n.entrypoint,calldata:Array.isArray(n.calldata)&&"__compiled__"in n.calldata?n.calldata:yt.compile(n.calldata)}));return yt.compile({orderCalls:t})},Oo=(e,t="0")=>t==="1"?YA(e):wy(e);function Ey(e,t){const n=[].concat(e).map(r=>{const{classHash:s,salt:i,unique:o=!0,constructorCalldata:u=[]}=r,l=yt.compile(u),d=i??_y();return{call:{contractAddress:wo.ADDRESS,entrypoint:wo.ENTRYPOINT,calldata:[s,d,q_(o),l.length,...l]},address:xh(o?Us(t,d):d,s,l,o?wo.ADDRESS:0)}});return{calls:n.map(r=>r.call),addresses:n.map(r=>r.address)}}function vy(e){return e==="fee"?{v1:Ue.ETransactionVersion.F1,v2:Ue.ETransactionVersion.F2,v3:Ue.ETransactionVersion.F3}:{v1:Ue.ETransactionVersion.V1,v2:Ue.ETransactionVersion.V2,v3:Ue.ETransactionVersion.V3}}var Ty={headers:{"Content-Type":"application/json"},blockIdentifier:wi.PENDING,retries:200},b4=class{constructor(e){W(this,"nodeUrl");W(this,"headers");W(this,"requestId");W(this,"blockIdentifier");W(this,"retries");W(this,"waitMode");W(this,"chainId");W(this,"specVersion");W(this,"transactionRetryIntervalFallback");W(this,"batchClient");W(this,"baseFetch");const{baseFetch:t,batch:n,blockIdentifier:r,chainId:s,headers:i,nodeUrl:o,retries:u,specVersion:l,transactionRetryIntervalFallback:d,waitMode:f}=e||{};Object.values(ch).includes(o)?this.nodeUrl=Wl(o,e?.default):o?this.nodeUrl=o:this.nodeUrl=Wl(void 0,e?.default),this.baseFetch=t??zA,this.blockIdentifier=r??Ty.blockIdentifier,this.chainId=s,this.headers={...Ty.headers,...i},this.retries=u??Ty.retries,this.specVersion=l,this.transactionRetryIntervalFallback=d,this.waitMode=f??!1,this.requestId=0,typeof n=="number"&&(this.batchClient=new sA({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch}))}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Mr(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new Jx(n,e,t);if(r instanceof Nl)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:i,result:o}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,i),o}const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:s}=await n.json();return this.errorHandler(e,t,r),s}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){return this.specVersion??(this.specVersion=await this.fetchEndpoint("starknet_specVersion")),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const n=ge(e),r=new Vt(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=ge(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Vt(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=ge(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=ge(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=ge(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:s=!0}=t,i=new Vt(n).identifier,o=[];return r&&o.push(nn.ESimulationFlag.SKIP_VALIDATE),s&&o.push(nn.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(u=>this.buildTransaction(u)),simulation_flags:o})}async waitForTransaction(e,t){const n=ge(e);let{retries:r}=this,s=!1,i=!1;const o=t?.retryInterval??this.transactionRetryIntervalDefault,u=t?.errorStates??[nn.ETransactionStatus.REJECTED],l=t?.successStates??[nn.ETransactionExecutionStatus.SUCCEEDED,nn.ETransactionStatus.ACCEPTED_ON_L2,nn.ETransactionStatus.ACCEPTED_ON_L1];let d;for(;!s;){await Vc(o);try{d=await this.getTransactionStatus(n);const g=d.execution_status,_=d.finality_status;if(!_)throw new Error("waiting for transaction status");if(u.includes(g)||u.includes(_)){const b=`${g}: ${_}`,T=new Error(b);throw T.response=d,i=!0,T}else(l.includes(g)||l.includes(_))&&(s=!0)}catch(g){if(g instanceof Error&&i)throw g;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Vc(o)}return f}getStorageAt(e,t,n=this.blockIdentifier){const r=ge(e),s=z_(t),i=new Vt(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:s,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=ge(e),r=new Vt(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=ge(e),r=new Vt(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=ge(e),r=new Vt(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){const r=new Vt(t).identifier;let s={};return by("0.5",await this.getSpecVersion())||(s={simulation_flags:n?[nn.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(i=>this.buildTransaction(i,"fee")),block_id:r,...s})}async invoke(e,t){let n;return Fr(t)?n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:nn.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:yt.toHex(e.calldata),version:nn.ETransactionVersion.V3,signature:Dn(e.signature),nonce:ge(t.nonce),resource_bounds:t.resourceBounds,tip:ge(t.tip),paymaster_data:t.paymasterData.map(r=>ge(r)),account_deployment_data:t.accountDeploymentData.map(r=>ge(r)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:yt.toHex(e.calldata),type:nn.ETransactionType.INVOKE,max_fee:ge(t.maxFee||0),version:nn.ETransactionVersion.V1,signature:Dn(e.signature),nonce:ge(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},s){let i;if(!dr(e)&&!Fr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:nn.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:nn.ETransactionVersion.V1,max_fee:ge(s.maxFee||0),signature:Dn(t),sender_address:n,nonce:ge(s.nonce)}});else if(dr(e)&&!Fr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:nn.ETransactionType.DECLARE,contract_class:{sierra_program:Si(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:nn.ETransactionVersion.V2,max_fee:ge(s.maxFee||0),signature:Dn(t),sender_address:n,nonce:ge(s.nonce)}});else if(dr(e)&&Fr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:nn.ETransactionType.DECLARE,sender_address:n,compiled_class_hash:r||"",version:nn.ETransactionVersion.V3,signature:Dn(t),nonce:ge(s.nonce),contract_class:{sierra_program:Si(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:s.resourceBounds,tip:ge(s.tip),paymaster_data:s.paymasterData.map(o=>ge(o)),account_deployment_data:s.accountDeploymentData.map(o=>ge(o)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters");return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},s){let i;return Fr(s)?i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:nn.ETransactionType.DEPLOY_ACCOUNT,version:nn.ETransactionVersion.V3,signature:Dn(r),nonce:ge(s.nonce),contract_address_salt:ge(n||0),constructor_calldata:yt.toHex(t||[]),class_hash:ge(e),resource_bounds:s.resourceBounds,tip:ge(s.tip),paymaster_data:s.paymasterData.map(o=>ge(o)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}}):i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:yt.toHex(t||[]),class_hash:ge(e),contract_address_salt:ge(n||0),type:nn.ETransactionType.DEPLOY_ACCOUNT,max_fee:ge(s.maxFee||0),version:nn.ETransactionVersion.V1,signature:Dn(r),nonce:ge(s.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){const n=new Vt(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:En(e.entrypoint),calldata:yt.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:s,payload:i}=e,o={from_address:yy(n),to_address:ge(r),entry_point_selector:Dc(s),payload:W_(i)},u=new Vt(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:u})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=vy(t);let r;if(Fr(e)?r={signature:Dn(e.signature),nonce:ge(e.nonce),resource_bounds:e.resourceBounds,tip:ge(e.tip),paymaster_data:e.paymasterData.map(s=>ge(s)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(s=>ge(s))}:r={signature:Dn(e.signature),nonce:ge(e.nonce),max_fee:ge(e.maxFee||0)},e.type===rn.INVOKE)return{type:nn.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:yt.toHex(e.calldata),version:ge(e.version||n.v3),...r};if(e.type===rn.DECLARE)return dr(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:Si(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:ge(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:ge(e.version||n.v1),...r};if(e.type===rn.DEPLOY_ACCOUNT){const{account_deployment_data:s,...i}=r;return{type:e.type,constructor_calldata:yt.toHex(e.constructorCalldata||[]),class_hash:ge(e.classHash),contract_address_salt:ge(e.addressSalt||0),version:ge(e.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},w4={};$t(w4,{RpcChannel:()=>XA});var xy={headers:{"Content-Type":"application/json"},blockIdentifier:wi.PENDING,retries:200},XA=class{constructor(e){W(this,"nodeUrl");W(this,"headers");W(this,"requestId");W(this,"blockIdentifier");W(this,"retries");W(this,"waitMode");W(this,"chainId");W(this,"specVersion");W(this,"transactionRetryIntervalFallback");W(this,"batchClient");W(this,"baseFetch");const{baseFetch:t,batch:n,blockIdentifier:r,chainId:s,headers:i,nodeUrl:o,retries:u,specVersion:l,transactionRetryIntervalFallback:d,waitMode:f}=e||{};Object.values(ch).includes(o)?this.nodeUrl=Wl(o,e?.default):o?this.nodeUrl=o:this.nodeUrl=Wl(void 0,e?.default),this.baseFetch=t??zA,this.blockIdentifier=r??xy.blockIdentifier,this.chainId=s,this.headers={...xy.headers,...i},this.retries=u??xy.retries,this.specVersion=l,this.transactionRetryIntervalFallback=d,this.waitMode=f??!1,this.requestId=0,typeof n=="number"&&(this.batchClient=new sA({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch}))}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Mr(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new Jx(n,e,t);if(r instanceof Nl)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:i,result:o}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,i),o}const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:s}=await n.json();return this.errorHandler(e,t,r),s}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){return this.specVersion??(this.specVersion=await this.fetchEndpoint("starknet_specVersion")),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const n=ge(e),r=new Vt(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Vt(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=ge(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Vt(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=ge(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=ge(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=ge(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:s=!0}=t,i=new Vt(n).identifier,o=[];return r&&o.push(X.SKIP_VALIDATE),s&&o.push(X.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(u=>this.buildTransaction(u)),simulation_flags:o})}async waitForTransaction(e,t){const n=ge(e);let{retries:r}=this,s=!1,i=!1;const o=t?.retryInterval??this.transactionRetryIntervalDefault,u=t?.errorStates??[ie.REJECTED],l=t?.successStates??[te.SUCCEEDED,ie.ACCEPTED_ON_L2,ie.ACCEPTED_ON_L1];let d;for(;!s;){await Vc(o);try{d=await this.getTransactionStatus(n);const g=d.execution_status,_=d.finality_status;if(!_)throw new Error("waiting for transaction status");if(u.includes(g)||u.includes(_)){const b=`${g}: ${_}`,T=new Error(b);throw T.response=d,i=!0,T}else(l.includes(g)||l.includes(_))&&(s=!0)}catch(g){if(g instanceof Error&&i)throw g;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Vc(o)}return f}getStorageAt(e,t,n=this.blockIdentifier){const r=ge(e),s=z_(t),i=new Vt(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:s,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=ge(e),r=new Vt(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=ge(e),r=new Vt(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=ge(e),r=new Vt(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){const r=new Vt(t).identifier;let s={};return by("0.5",await this.getSpecVersion())||(s={simulation_flags:n?[X.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(i=>this.buildTransaction(i,"fee")),block_id:r,...s})}async invoke(e,t){let n;return Fr(t)?n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:Y.INVOKE,sender_address:e.contractAddress,calldata:yt.toHex(e.calldata),version:Oe.V3,signature:Dn(e.signature),nonce:ge(t.nonce),resource_bounds:t.resourceBounds,tip:ge(t.tip),paymaster_data:t.paymasterData.map(r=>ge(r)),account_deployment_data:t.accountDeploymentData.map(r=>ge(r)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:yt.toHex(e.calldata),type:Y.INVOKE,max_fee:ge(t.maxFee||0),version:Oe.V1,signature:Dn(e.signature),nonce:ge(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},s){let i;if(!dr(e)&&!Fr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Y.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:Oe.V1,max_fee:ge(s.maxFee||0),signature:Dn(t),sender_address:n,nonce:ge(s.nonce)}});else if(dr(e)&&!Fr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Y.DECLARE,contract_class:{sierra_program:Si(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:Oe.V2,max_fee:ge(s.maxFee||0),signature:Dn(t),sender_address:n,nonce:ge(s.nonce)}});else if(dr(e)&&Fr(s))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Y.DECLARE,sender_address:n,compiled_class_hash:r||"",version:Oe.V3,signature:Dn(t),nonce:ge(s.nonce),contract_class:{sierra_program:Si(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:s.resourceBounds,tip:ge(s.tip),paymaster_data:s.paymasterData.map(o=>ge(o)),account_deployment_data:s.accountDeploymentData.map(o=>ge(o)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters");return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},s){let i;return Fr(s)?i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:Y.DEPLOY_ACCOUNT,version:Oe.V3,signature:Dn(r),nonce:ge(s.nonce),contract_address_salt:ge(n||0),constructor_calldata:yt.toHex(t||[]),class_hash:ge(e),resource_bounds:s.resourceBounds,tip:ge(s.tip),paymaster_data:s.paymasterData.map(o=>ge(o)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}}):i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:yt.toHex(t||[]),class_hash:ge(e),contract_address_salt:ge(n||0),type:Y.DEPLOY_ACCOUNT,max_fee:ge(s.maxFee||0),version:Oe.V1,signature:Dn(r),nonce:ge(s.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){const n=new Vt(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:En(e.entrypoint),calldata:yt.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:s,payload:i}=e,o={from_address:yy(n),to_address:ge(r),entry_point_selector:Dc(s),payload:W_(i)},u=new Vt(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:u})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=vy(t);let r;if(Fr(e)?r={signature:Dn(e.signature),nonce:ge(e.nonce),resource_bounds:e.resourceBounds,tip:ge(e.tip),paymaster_data:e.paymasterData.map(s=>ge(s)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(s=>ge(s))}:r={signature:Dn(e.signature),nonce:ge(e.nonce),max_fee:ge(e.maxFee||0)},e.type===rn.INVOKE)return{type:Y.INVOKE,sender_address:e.contractAddress,calldata:yt.toHex(e.calldata),version:ge(e.version||n.v3),...r};if(e.type===rn.DECLARE)return dr(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:Si(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:ge(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:ge(e.version||n.v1),...r};if(e.type===rn.DEPLOY_ACCOUNT){const{account_deployment_data:s,...i}=r;return{type:e.type,constructor_calldata:yt.toHex(e.constructorCalldata||[]),class_hash:ge(e.classHash),contract_address_salt:ge(e.addressSalt||0),version:ge(e.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},JA=class{constructor(e){W(this,"margin");this.margin=e}estimatedFeeToMaxFee(e){return jA(e,this.margin?.maxFee)}estimateFeeToBounds(e){return zl(e,this.margin?.l1BoundMaxAmount,this.margin?.l1BoundMaxPricePerUnit)}parseGetBlockResponse(e){return{status:"PENDING",...e}}parseTransactionReceipt(e){return"actual_fee"in e&&wn(e.actual_fee)?{...e,actual_fee:{amount:e.actual_fee,unit:"FRI"}}:e}parseFeeEstimateResponse(e){const t=e[0];return{overall_fee:kt(t.overall_fee),gas_consumed:kt(t.gas_consumed),gas_price:kt(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?kt(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?kt(t.data_gas_price):0n}}parseFeeEstimateBulkResponse(e){return e.map(t=>({overall_fee:kt(t.overall_fee),gas_consumed:kt(t.gas_consumed),gas_price:kt(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?kt(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?kt(t.data_gas_price):0n}))}parseSimulateTransactionResponse(e){return e.map(t=>({...t,suggestedMaxFee:this.estimatedFeeToMaxFee(t.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(t.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:wn(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},QA=class Bp{constructor(t){W(this,"statusReceipt");W(this,"value");[this.statusReceipt,this.value]=Bp.isSuccess(t)?["success",t]:Bp.isReverted(t)?["reverted",t]:Bp.isRejected(t)?["rejected",t]:["error",new Error("Unknown response type")];for(const[n]of Object.entries(this))Object.defineProperty(this,n,{enumerable:!1});for(const[n,r]of Object.entries(t))Object.defineProperty(this,n,{enumerable:!0,writable:!1,value:r})}match(t){return this.statusReceipt in t?t[this.statusReceipt](this.value):t._()}isSuccess(){return this.statusReceipt==="success"}isReverted(){return this.statusReceipt==="reverted"}isRejected(){return this.statusReceipt==="rejected"}isError(){return this.statusReceipt==="error"}static isSuccess(t){return t.execution_status===uh.SUCCEEDED}static isReverted(t){return t.execution_status===uh.REVERTED}static isRejected(t){return t.status===uh.REJECTED}},E4={};$t(E4,{TypedDataRevision:()=>K,encodeData:()=>iS,encodeType:()=>sS,encodeValue:()=>ql,getDependencies:()=>Sy,getMessageHash:()=>No,getStructHash:()=>Gl,getTypeHash:()=>aS,isMerkleTreeType:()=>rS,prepareSelector:()=>nS,validateTypedData:()=>Ch,verifyMessage:()=>A4});var v4={};$t(v4,{MerkleTree:()=>Ay,proofMerklePath:()=>eS});var Ay=class Dp{constructor(t,n=$l){W(this,"leaves");W(this,"branches",[]);W(this,"root");W(this,"hashMethod");this.hashMethod=n,this.leaves=t,this.root=this.build(t)}build(t){if(t.length===1)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(Dp.hash(t[r],"0x0",this.hashMethod)):n.push(Dp.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(t,n,r=$l){const[s,i]=[BigInt(t),BigInt(n)].sort((o,u)=>o>=u?1:-1);return r(s,i)}getProof(t,n=this.leaves,r=[]){const s=n.indexOf(t);if(s===-1)throw new Error("leaf not found");if(n.length===1)return r;const i=s%2===0,o=(i?n[s+1]:n[s-1])??"0x0",u=[...r,o],l=this.leaves.length===n.length?-1:this.branches.findIndex(f=>f.length===n.length),d=this.branches[l+1]??[this.root];return this.getProof(Dp.hash(i?t:o,i?o:t,this.hashMethod),d,u)}};function eS(e,t,n,r=$l){if(n.length===0)return e===t;const[s,...i]=n;return eS(e,Ay.hash(t,s,r),i,r)}var T4={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Hr={[K.ACTIVE]:{domain:"StarknetDomain",hashMethod:LA,hashMerkleMethod:DA,escapeTypeString:e=>`"${e}"`,presetTypes:T4},[K.LEGACY]:{domain:"StarkNetDomain",hashMethod:PA,hashMerkleMethod:$l,escapeTypeString:e=>e,presetTypes:{}}};function kh(e,t,{min:n,max:r}){const s=BigInt(e);it(s>=n&&s<=r,`${s} (${t}) is out of bounds [${n}, ${r}]`)}function tS({types:e,domain:t}){if(Hr[K.ACTIVE].domain in e&&t.revision===K.ACTIVE)return K.ACTIVE;if(Hr[K.LEGACY].domain in e&&(t.revision??K.LEGACY)===K.LEGACY)return K.LEGACY}function ra(e){try{return ge(e)}catch{if(wn(e))return ge(jn(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Ch(e){const t=e;return!!(t.message&&t.primaryType&&t.types&&tS(t))}function nS(e){return Er(e)?e:En(e)}function rS(e){return e.type==="merkletree"}function Sy(e,t,n=[],r="",s=K.LEGACY){return t[t.length-1]==="*"?t=t.slice(0,-1):s===K.ACTIVE&&(t==="enum"?t=r:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),n.includes(t)||!e[t]?n:[t,...e[t].reduce((i,o)=>[...i,...Sy(e,o.type,i,o.contains,s).filter(u=>!i.includes(u))],[])]}function x4(e,t){if(t.parent&&t.key){const r=e[t.parent].find(i=>i.name===t.key);if(!rS(r))throw new Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}function sS(e,t,n=K.LEGACY){const r=n===K.ACTIVE?{...e,...Hr[n].presetTypes}:e,[s,...i]=Sy(r,t,void 0,void 0,n),o=s?[s,...i.sort()]:[],u=Hr[n].escapeTypeString;return o.map(l=>{const d=r[l].map(f=>{const g=f.type==="enum"&&n===K.ACTIVE?f.contains:f.type,_=g.match(/^\(.*\)$/)?`(${g.slice(1,-1).split(",").map(b=>b&&u(b)).join(",")})`:u(g);return`${u(f.name)}:${_}`});return`${u(l)}(${d})`}).join("")}function aS(e,t,n=K.LEGACY){return En(sS(e,t,n))}function ql(e,t,n,r={},s=K.LEGACY){if(e[t])return[t,Gl(e,t,n,s)];if(Hr[s].presetTypes[t])return[t,Gl(Hr[s].presetTypes,t,n,s)];if(t.endsWith("*")){const i=n.map(o=>ql(e,t.slice(0,-1),o,void 0,s)[1]);return[t,Hr[s].hashMethod(i)]}switch(t){case"enum":{if(s===K.ACTIVE){const[i,o]=Object.entries(n)[0],u=e[r.parent].find(_=>_.name===r.key),l=e[u.contains],d=l.find(_=>_.name===i),f=l.indexOf(d),g=d.type.slice(1,-1).split(",").map((_,b)=>{if(!_)return _;const T=o[b];return ql(e,_,T,void 0,s)[1]});return[t,Hr[s].hashMethod([f,...g])]}return[t,ra(n)]}case"merkletree":{const i=x4(e,r),o=n.map(l=>ql(e,i,l,void 0,s)[1]),{root:u}=new Ay(o,Hr[s].hashMerkleMethod);return["felt",u]}case"selector":return["felt",nS(n)];case"string":{if(s===K.ACTIVE){const i=dh(n),o=[i.data.length,...i.data,i.pending_word,i.pending_word_len];return[t,Hr[s].hashMethod(o)]}return[t,ra(n)]}case"i128":{if(s===K.ACTIVE){const i=BigInt(n);return kh(i,t,Fx),[t,ra(i<0n?F_+i:i)]}return[t,ra(n)]}case"timestamp":case"u128":return s===K.ACTIVE&&kh(n,t,Hx),[t,ra(n)];case"felt":case"shortstring":return s===K.ACTIVE&&kh(ra(n),t,j_),[t,ra(n)];case"ClassHash":case"ContractAddress":return s===K.ACTIVE&&kh(n,t,j_),[t,ra(n)];case"bool":return s===K.ACTIVE&&it(Z_(n),`Type mismatch for ${t} ${n}`),[t,ra(n)];default:{if(s===K.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,ra(n)]}}}function iS(e,t,n,r=K.LEGACY){const s=e[t]??Hr[r].presetTypes[t],[i,o]=s.reduce(([u,l],d)=>{if(n[d.name]===void 0||n[d.name]===null&&d.type!=="enum")throw new Error(`Cannot encode data: missing data for '${d.name}'`);const f=n[d.name],g={parent:t,key:d.name},[_,b]=ql(e,d.type,f,g,r);return[[...u,_],[...l,b]]},[["felt"],[aS(e,t,r)]]);return[i,o]}function Gl(e,t,n,r=K.LEGACY){return Hr[r].hashMethod(iS(e,t,n,r)[1])}function No(e,t){if(!Ch(e))throw new Error("Typed data does not match JSON schema");const n=tS(e),{domain:r,hashMethod:s}=Hr[n],i=[jn("StarkNet Message"),Gl(e.types,r,e.domain,n),t,Gl(e.types,e.primaryType,e.message,n)];return s(i)}function A4(e,t,n,r){const s=Ch(e);if(!Dl(e)&&!s)throw new Error("message has a wrong format.");if(s&&r===void 0)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(s&&!Dl(r))throw new Error("accountAddress shall be a BigNumberish");const i=s?No(e,r):ge(e),o=Array.isArray(t)?new Ls(BigInt(t[0]),BigInt(t[1])):t,u=ge(n);return bg(o,i,u)}var oS=class{constructor(e){W(this,"responseParser");W(this,"channel");W(this,"getStateUpdate",this.getBlockStateUpdate);e&&"channel"in e?(this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new JA):(this.channel=new XA({...e,waitMode:!1}),this.responseParser=new JA(e?.feeMarginPercentage))}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}async getSpecVersion(){return this.channel.getSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if(e===wi.LATEST)return;const n=await this.getBlockNumber(),r=e===wi.PENDING?n+1:Number(ge(e));if(r<=n)return;const{retries:s}=this.channel;let i=s,o=!1;for(;!o;)if(await this.getBlockNumber()===r?o=!0:await Vc(t),i-=1,i<=0)throw new Error(`waitForBlock() timed-out after ${s} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);it(t.type==="L1_HANDLER","This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:s,nonce:i}=t,o=[n[0],r,i,s,n.length-1,...n.slice(1)];return lh(o)}async getBlockWithReceipts(e){if(this.channel instanceof Xx.RpcChannel)throw new Nl("Unsupported method for RPC version");return this.channel.getBlockWithReceipts(e)}async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getPendingTransactions(){const{transactions:e}=await this.getBlockWithTxHashes(wi.PENDING).then(this.responseParser.parseGetBlockResponse);return Promise.all(e.map(t=>this.getTransactionByHash(t)))}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e),n=this.responseParser.parseTransactionReceipt(t);return new QA(n)}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(n=>this.responseParser.parseSimulateTransactionResponse(n))}async waitForTransaction(e,t){const n=await this.channel.waitForTransaction(e,t);return new QA(n)}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let s;if(e)s=await this.getClassAt(e,n);else if(t)s=await this.getClass(t,n);else throw Error("getContractVersion require contractAddress or classHash");return dr(s)?r?{cairo:"1",compiler:sy(s.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,n,r){return this.getInvokeEstimateFee(e,t,n,r)}async getInvokeEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:rn.INVOKE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(s=>this.responseParser.parseFeeEstimateResponse(s))}async getDeclareEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:rn.DECLARE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(s=>this.responseParser.parseFeeEstimateResponse(s))}async getDeployAccountEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:rn.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(s=>this.responseParser.parseFeeEstimateResponse(s))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(n=>this.responseParser.parseFeeEstimateBulkResponse(n))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,n,r,s){const i=Ch(e);if(!Dl(e)&&!i)throw new Error("message has a wrong format.");if(!Dl(n))throw new Error("accountAddress shall be a BigNumberish");const o=i?No(e,n):ge(e),u=r?[r]:["isValidSignature","is_valid_signature"],l=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","is invalid, with respect to the public key","INVALID_SIG"]};let d;for(const f of u)try{const g=await this.callContract({contractAddress:ge(n),entrypoint:f,calldata:yt.compile({hash:kt(o).toString(),signature:Zl(t)})});if(l.nokResponse.includes(g[0].toString()))return!1;if(l.okResponse.length===0||l.okResponse.includes(g[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(g){if(l.error.some(_=>g.message.includes(_)))return!1;d=g}throw Error(`Signature verification Error: ${d}`)}async isClassDeclared(e,t){let n;if(!e.classHash&&"contract"in e)n=Kl(e).classHash;else if(e.classHash)n=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(n,t)instanceof Object}catch(r){if(r instanceof Nl)return!1;throw r}}async prepareInvocations(e){const t=[];for(const n of e)n.type===rn.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||t.unshift(n):t.push(n);return t}},S4={};$t(S4,{StarknetIdContract:()=>Oy,StarknetIdIdentityContract:()=>Ny,StarknetIdMulticallContract:()=>Ry,StarknetIdPfpContract:()=>Dy,StarknetIdPopContract:()=>Py,StarknetIdVerifierContract:()=>By,dynamicCallData:()=>Pt,dynamicFelt:()=>Xn,execution:()=>aa,getStarknetIdContract:()=>Ih,getStarknetIdIdentityContract:()=>dS,getStarknetIdMulticallContract:()=>fS,getStarknetIdPfpContract:()=>pS,getStarknetIdPopContract:()=>gS,getStarknetIdVerifierContract:()=>hS,useDecoded:()=>Iy,useEncoded:()=>lS});var sa="abcdefghijklmnopqrstuvwxyz0123456789-",Fc=BigInt(sa.length+1),Zn="\u8FD9\u6765",cS=BigInt(sa.length),ky=BigInt(Zn.length),uS=BigInt(Zn.length+1);function Cy(e){let t=0;for(;e.endsWith(Zn[Zn.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function Iy(e){let t="";return e.forEach(n=>{for(;n!==bn;){const i=n%Fc;if(n/=Fc,i===BigInt(sa.length)){const o=n/uS;if(o===bn){const u=n%uS;n=o,u===bn?t+=sa[0]:t+=Zn[Number(u)-1]}else{const u=n%ky;t+=Zn[Number(u)],n/=ky}}else t+=sa[Number(i)]}const[r,s]=Cy(t);s&&(t=r+(s%2===0?Zn[Zn.length-1].repeat(s/2-1)+Zn[0]+sa[1]:Zn[Zn.length-1].repeat((s-1)/2+1))),t+="."}),t&&t.concat("stark")}function lS(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(Zn[0]+sa[1])){const[r,s]=Cy(e.substring(0,e.length-2));e=r+Zn[Zn.length-1].repeat(2*(s+1))}else{const[r,s]=Cy(e);s&&(e=r+Zn[Zn.length-1].repeat(1+2*(s-1)))}for(let r=0;r<e.length;r+=1){const s=e[r],i=sa.indexOf(s),o=BigInt(sa.indexOf(s));if(i!==-1)r===e.length-1&&e[r]===sa[0]?(t+=n*cS,n*=Fc,n*=Fc):(t+=n*o,n*=Fc);else if(Zn.indexOf(s)!==-1){t+=n*cS,n*=Fc;const u=(r===e.length-1?1:0)+Zn.indexOf(s);t+=n*BigInt(u),n*=ky}}return t}var Oy={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function Ih(e){switch(e){case"0x534e5f4d41494e":return Oy.MAINNET;case"0x534e5f5345504f4c4941":return Oy.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var Ny={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function dS(e){switch(e){case"0x534e5f4d41494e":return Ny.MAINNET;case"0x534e5f5345504f4c4941":return Ny.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Ry="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function fS(e){switch(e){case"0x534e5f4d41494e":return Ry;case"0x534e5f5345504f4c4941":return Ry;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var By={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function hS(e){switch(e){case"0x534e5f4d41494e":return By.MAINNET;case"0x534e5f5345504f4c4941":return By.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Dy={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function pS(e){switch(e){case"0x534e5f4d41494e":return Dy.MAINNET;case"0x534e5f5345504f4c4941":return Dy.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var Py={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function gS(e){switch(e){case"0x534e5f4d41494e":return Py.MAINNET;case"0x534e5f5345504f4c4941":return Py.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function aa(e,t=void 0,n=void 0){return new Fl({Static:e,IfEqual:t?Uc(t[0],t[1],t[2]):void 0,IfNotEqual:n?Uc(n[0],n[1],n[2]):void 0})}function Xn(e,t=void 0){return new Fl({Hardcoded:e,Reference:t?Uc(t[0],t[1]):void 0})}function Pt(e,t=void 0,n=void 0){return new Fl({Hardcoded:e,Reference:t?Uc(t[0],t[1]):void 0,ArrayReference:n?Uc(n[0],n[1]):void 0})}var k4=class Pp{async getStarkName(t,n){return Pp.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return Pp.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,s,i,o,u){return Pp.getStarkProfile(this,t,n,r,s,i,o,u)}static async getStarkName(t,n,r){const s=await t.getChainId(),i=r??Ih(s);try{const u=(await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:yt.compile({address:n,hint:[]})})).map(d=>BigInt(d)).slice(1),l=Iy(u);if(!l)throw Error("Starkname not found");return l}catch(o){throw o instanceof Error&&o.message==="Starkname not found"?o:Error("Could not get stark name")}}static async getAddressFromStarkName(t,n,r){const s=await t.getChainId(),i=r??Ih(s);try{const o=n.replace(".stark","").split(".").map(l=>lS(l).toString(10));return(await t.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:yt.compile({domain:o,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,n,r,s,i,o,u,l){const d=await t.getChainId(),f=r??Ih(d),g=s??dS(d),_=i??hS(d),b=o??pS(d),T=u??gS(d),I=l??fS(d);try{const k=[{execution:aa({}),to:Pt(f),selector:Pt(En("address_to_domain")),calldata:[Pt(n),Pt("0")]},{execution:aa({}),to:Xn(f),selector:Xn(En("domain_to_id")),calldata:[Pt(void 0,void 0,[0,0])]},{execution:aa({}),to:Xn(g),selector:Xn(En("get_verifier_data")),calldata:[Pt(void 0,[1,0]),Pt(jn("twitter")),Pt(_),Pt("0")]},{execution:aa({}),to:Xn(g),selector:Xn(En("get_verifier_data")),calldata:[Pt(void 0,[1,0]),Pt(jn("github")),Pt(_),Pt("0")]},{execution:aa({}),to:Xn(g),selector:Xn(En("get_verifier_data")),calldata:[Pt(void 0,[1,0]),Pt(jn("discord")),Pt(_),Pt("0")]},{execution:aa({}),to:Xn(g),selector:Xn(En("get_verifier_data")),calldata:[Pt(void 0,[1,0]),Pt(jn("proof_of_personhood")),Pt(T),Pt("0")]},{execution:aa({}),to:Xn(g),selector:Xn(En("get_verifier_data")),calldata:[Pt(void 0,[1,0]),Pt(jn("nft_pp_contract")),Pt(b),Pt("0")]},{execution:aa({}),to:Xn(g),selector:Xn(En("get_extended_verifier_data")),calldata:[Pt(void 0,[1,0]),Pt(jn("nft_pp_id")),Pt("2"),Pt(b),Pt("0")]},{execution:aa(void 0,void 0,[6,0,0]),to:Xn(void 0,[6,0]),selector:Xn(En("tokenURI")),calldata:[Pt(void 0,[7,1]),Pt(void 0,[7,2])]}],Z=await t.callContract({contractAddress:I,entrypoint:"aggregate",calldata:yt.compile({calls:k})});if(Array.isArray(Z)){const Q=parseInt(Z[0],16),ee=[];let re=1;for(let Ve=0;Ve<Q&&re<Z.length;Ve+=1){const Qe=parseInt(Z[re],16);re+=1;const le=Z.slice(re,re+Qe);ee.push(le),re+=Qe}const Se=Iy(ee[0].slice(1).map(Ve=>BigInt(Ve))),me=ee[2][0]!=="0x0"?BigInt(ee[2][0]).toString():void 0,oe=ee[3][0]!=="0x0"?BigInt(ee[3][0]).toString():void 0,Ee=ee[4][0]!=="0x0"?BigInt(ee[4][0]).toString():void 0,Ie=ee[5][0]==="0x1",_e=(Z[0]==="0x9"?ee[8].slice(1).map(Ve=>To(Ve)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(ee[1][0]).toString()}`;return{name:Se,twitter:me,github:oe,discord:Ee,proofOfPersonhood:Ie,profilePicture:_e}}throw Error("Error while calling aggregate function")}catch(k){throw k instanceof Error?k:Error("Could not get user stark profile data from address")}}},C4=class extends lm(oS,k4){},A$=class{},I4=new oS({default:!0}),S$=class{},O4=class{constructor(e=Su.randomPrivateKey()){W(this,"pk");this.pk=e instanceof Uint8Array?ur(e):ge(e)}async getPubKey(){return ku(this.pk)}async signMessage(e,t){const n=No(e,t);return this.signRaw(n)}async signTransaction(e,t){const n=Oo(e,t.cairoVersion);let r;if(Object.values(Ue.ETransactionVersion2).includes(t.version)){const s=t;r=Oa({...s,senderAddress:s.walletAddress,compiledCalldata:n,version:s.version})}else if(Object.values(Ue.ETransactionVersion3).includes(t.version)){const s=t;r=Oa({...s,senderAddress:s.walletAddress,compiledCalldata:n,version:s.version,nonceDataAvailabilityMode:ln(s.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(s.feeDataAvailabilityMode)})}else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){const t=yt.compile(e.constructorCalldata);let n;if(Object.values(Ue.ETransactionVersion2).includes(e.version)){const r=e;n=Na({...r,salt:r.addressSalt,constructorCalldata:t,version:r.version})}else if(Object.values(Ue.ETransactionVersion3).includes(e.version)){const r=e;n=Na({...r,salt:r.addressSalt,compiledConstructorCalldata:t,version:r.version,nonceDataAvailabilityMode:ln(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(r.feeDataAvailabilityMode)})}else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(n)}async signDeclareTransaction(e){let t;if(Object.values(Ue.ETransactionVersion2).includes(e.version)){const n=e;t=Io({...n,version:n.version})}else if(Object.values(Ue.ETransactionVersion3).includes(e.version)){const n=e;t=Io({...n,version:n.version,nonceDataAvailabilityMode:ln(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(n.feeDataAvailabilityMode)})}else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return yg(e,this.pk)}},N4={};$t(N4,{UINT_128_MAX:()=>Pc,UINT_256_MAX:()=>hA,bnToUint256:()=>Ly,isUint256:()=>B4,uint256ToBN:()=>R4});function R4(e){return new Bn(e).toBigInt()}function B4(e){return Bn.is(e)}function Ly(e){return new Bn(e).toUint256HexString()}var k$=class{constructor(e=ZA()){W(this,"pk");this.pk=e instanceof Uint8Array?ur(e).padStart(64,"0"):un(ge(e)).padStart(64,"0")}async getPubKey(){return pt(ur(secp256k12.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(e,t){const n=No(e,t),r=secp256k12.sign(un(Rc(n)),this.pk);return this.formatEthSignature(r)}async signTransaction(e,t){const n=Oo(e,t.cairoVersion);let r;if(Object.values(Ue.ETransactionVersion2).includes(t.version)){const i=t;r=Oa({...i,senderAddress:i.walletAddress,compiledCalldata:n,version:i.version})}else if(Object.values(Ue.ETransactionVersion3).includes(t.version)){const i=t;r=Oa({...i,senderAddress:i.walletAddress,compiledCalldata:n,version:i.version,nonceDataAvailabilityMode:ln(i.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(i.feeDataAvailabilityMode)})}else throw Error("unsupported signTransaction version");const s=secp256k12.sign(un(Rc(r)),this.pk);return this.formatEthSignature(s)}async signDeployAccountTransaction(e){const t=yt.compile(e.constructorCalldata);let n;if(Object.values(Ue.ETransactionVersion2).includes(e.version)){const s=e;n=Na({...s,salt:s.addressSalt,constructorCalldata:t,version:s.version})}else if(Object.values(Ue.ETransactionVersion3).includes(e.version)){const s=e;n=Na({...s,salt:s.addressSalt,compiledConstructorCalldata:t,version:s.version,nonceDataAvailabilityMode:ln(s.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(s.feeDataAvailabilityMode)})}else throw Error("unsupported signDeployAccountTransaction version");const r=secp256k12.sign(un(Rc(n)),this.pk);return this.formatEthSignature(r)}async signDeclareTransaction(e){let t;if(Object.values(Ue.ETransactionVersion2).includes(e.version)){const r=e;t=Io({...r,version:r.version})}else if(Object.values(Ue.ETransactionVersion3).includes(e.version)){const r=e;t=Io({...r,version:r.version,nonceDataAvailabilityMode:ln(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(r.feeDataAvailabilityMode)})}else throw Error("unsupported signDeclareTransaction version");const n=secp256k12.sign(un(Rc(t)),this.pk);return this.formatEthSignature(n)}formatEthSignature(e){const t=Ly(e.r),n=Ly(e.s);return[ge(t.low),ge(t.high),ge(n.low),ge(n.high),ge(e.recovery)]}},D4=class{constructor(e,t,n="LedgerW",r=P4){W(this,"transporter");W(this,"_transporter");W(this,"accountID");W(this,"eip2645applicationName");W(this,"pathBuffer");W(this,"appVersion");W(this,"pubKey");W(this,"fullPubKey");it(t>=0,"Ledger account ID shall not be a negative number."),it(t<=V_,"Ledger account ID shall be < 2**31."),it(!!n,"Ledger application name shall not be empty."),this.transporter=e,this._transporter=this.transporter,this.accountID=t,this.pubKey="",this.fullPubKey="",this.eip2645applicationName=n,this.appVersion="",this.pathBuffer=r(this.accountID,this.eip2645applicationName)}async getPubKey(){return this.pubKey||await this.getPublicKeys(),this.pubKey}async getFullPubKey(){return this.fullPubKey||await this.getPublicKeys(),this.fullPubKey}async getAppVersion(){if(!this.appVersion){const e=await this._transporter.send(+"0x5a",0,0,0);this.appVersion=`${e[0]}.${e[1]}.${e[2]}`}return this.appVersion}async signMessage(e,t){const n=No(e,t);return this.signRaw(n)}async signTransaction(e,t){const n=Oo(e,t.cairoVersion);let r;if(Object.values(Nc).includes(t.version)){const s=t;r=Oa({...s,senderAddress:s.walletAddress,compiledCalldata:n,version:s.version})}else if(Object.values(Ue.ETransactionVersion3).includes(t.version)){const s=t;r=Oa({...s,senderAddress:s.walletAddress,compiledCalldata:n,version:s.version,nonceDataAvailabilityMode:ln(s.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(s.feeDataAvailabilityMode)})}else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){const t=yt.compile(e.constructorCalldata);let n;if(Object.values(Nc).includes(e.version)){const r=e;n=Na({...r,salt:r.addressSalt,constructorCalldata:t,version:r.version})}else if(Object.values(Ue.ETransactionVersion3).includes(e.version)){const r=e;n=Na({...r,salt:r.addressSalt,compiledConstructorCalldata:t,version:r.version,nonceDataAvailabilityMode:ln(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(r.feeDataAvailabilityMode)})}else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(n)}async signDeclareTransaction(e){let t;if(Object.values(Nc).includes(e.version)){const n=e;t=Io({...n,version:n.version})}else if(Object.values(Ue.ETransactionVersion3).includes(e.version)){const n=e;t=Io({...n,version:n.version,nonceDataAvailabilityMode:ln(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(n.feeDataAvailabilityMode)})}else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){pt(ur(await this._transporter.send(+"0x5a",2,0,0,Gt.from(this.pathBuffer))));const t=ge(BigInt(e)<<4n),n=Ia(t),r=Uint8Array.from(await this._transporter.send(+"0x5a",2,1,0,Gt.from(n))),s=BigInt(pt(ur(r.subarray(1,33)))),i=BigInt(pt(ur(r.subarray(33,65)))),o=r[65];return new Ls(s,i).addRecoveryBit(o)}async getPublicKeys(){const e=this.pathBuffer,t=Uint8Array.from(await this._transporter.send(+"0x5a",1,0,0,Gt.from(e)));this.pubKey=pt(ur(t.subarray(1,33))),this.fullPubKey=pt(ur(t.subarray(0,65)))}};function P4(e,t="LedgerW"){const n=new Uint8Array([128,0,10,85]),r=new Uint8Array([71,65,233,201]),s=t==="LedgerW"?new Uint8Array([43,206,231,219]):G_(t),i=new Uint8Array([0,0,0,0]),o=ge(e),u=pt(un(o).padStart(8,"0")),l=Ia(u),d=new Uint8Array([0,0,0,0]);return nr([n,r,s,i,l,d])}function Uy(e){const t=ge(pt(e.toString())),n=un(t).padStart(64,"0");return pt(n)}function mS(e){const t=Uy(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return K_(t,bn,H_-1n,"Starknet Address"),t}function L4(e){const t=un(mS(e)).toLowerCase().split(""),n=un(Y_(e)),r=y(n.padStart(64,"0"));for(let s=0;s<t.length;s+=2)r[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(r[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return pt(t.join(""))}function U4(e){return L4(e)===e}var C$=class extends D4{constructor(e,t,n="LedgerW",r=M4){super(e,t,n,r)}async signTransaction(e,t){const n=Oo(e,t.cairoVersion);if(Object.values(Nc).includes(t.version)){const r=t,s=Oa({...r,senderAddress:r.walletAddress,compiledCalldata:n,version:r.version}),i=await this.signTxV1(r,e);return it(kt(s)===i.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}if(Object.values(Ue.ETransactionVersion3).includes(t.version)){const r=t,s=Oa({...r,senderAddress:r.walletAddress,compiledCalldata:n,version:r.version,nonceDataAvailabilityMode:ln(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(r.feeDataAvailabilityMode)}),i=await this.signTxV3(r,e);return it(kt(s)===i.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}throw Error("unsupported signTransaction version")}async signDeployAccountTransaction(e){const t=yt.compile(e.constructorCalldata);let n;if(Object.values(Nc).includes(e.version)){const r=e;n=Na({...r,salt:r.addressSalt,constructorCalldata:t,version:r.version});const s=await this.signDeployAccountV1(r);return it(kt(n)===s.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),s.signature}if(Object.values(Ue.ETransactionVersion3).includes(e.version)){const r=e;n=Na({...r,salt:r.addressSalt,compiledConstructorCalldata:t,version:r.version,nonceDataAvailabilityMode:ln(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ln(r.feeDataAvailabilityMode)});const s=await this.signDeployAccountV3(r);return it(kt(n)===s.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),s.signature}throw Error("unsupported signDeployAccountTransaction version")}convertBnToLedger(e){return Ia(Uy(ge(e)))}decodeSignatureLedger(e){const t=BigInt(pt(ur(e.subarray(0,32)))),n=BigInt(pt(ur(e.subarray(33,65)))),r=BigInt(pt(ur(e.subarray(65,97)))),s=e[97],o=new Ls(n,r).addRecoveryBit(s);return{hash:t,signature:o}}encodeCall(e){const t=this.convertBnToLedger(e.contractAddress),n=Ia(Uy(Dc(e.entrypoint)));let r=new Uint8Array([]);if(e.calldata){const u=yt.compile(e.calldata);r=nr(u.map(l=>this.convertBnToLedger(l)))}const s=nr([t,n,r]),i=[],o=7*32;for(let u=0;u<s.length;u+=o)i.push(s.subarray(u,u+o));return i}async signTxV1(e,t){await this._transporter.send(+"0x5a",4,0,0,Gt.from(this.pathBuffer));const n=this.convertBnToLedger(e.walletAddress),r=this.convertBnToLedger(e.maxFee),s=this.convertBnToLedger(e.chainId),i=this.convertBnToLedger(e.nonce),o=nr([n,r,s,i]);await this._transporter.send(+"0x5a",4,1,0,Gt.from(o));const u=this.convertBnToLedger(t.length);await this._transporter.send(+"0x5a",4,2,0,Gt.from(u));let l=new Uint8Array(0);for(const d of t){const f=this.encodeCall(d);await this._transporter.send(+"0x5a",4,3,0,Gt.from(f[0])),f.length>1&&f.slice(1).forEach(async g=>{await this._transporter.send(+"0x5a",4,3,1,Gt.from(g))}),l=await this._transporter.send(+"0x5a",4,3,2)}return this.decodeSignatureLedger(l)}async signTxV3(e,t){it(e.paymasterData.length<=7,"Paymaster data includes more than 7 items."),it(e.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(+"0x5a",3,0,0,Gt.from(this.pathBuffer));const n=this.convertBnToLedger(e.walletAddress),r=this.convertBnToLedger(e.tip),s=this.convertBnToLedger(e.chainId),i=this.convertBnToLedger(e.nonce),o=this.convertBnToLedger(wh(e.nonceDataAvailabilityMode===Ue.EDataAvailabilityMode.L1?Ue.EDAMode.L1:Ue.EDAMode.L2,e.feeDataAvailabilityMode===Ue.EDataAvailabilityMode.L1?Ue.EDAMode.L1:Ue.EDAMode.L2)),u=this.convertBnToLedger(Eh(e.resourceBounds)),l=this.convertBnToLedger(vh(e.resourceBounds)),d=nr([n,r,u,l,s,i,o]);await this._transporter.send(+"0x5a",3,1,0,Gt.from(d));const f=nr(e.paymasterData.map(T=>this.convertBnToLedger(T)));await this._transporter.send(+"0x5a",3,2,0,Gt.from(f));const g=nr(e.paymasterData.map(T=>this.convertBnToLedger(T)));await this._transporter.send(+"0x5a",3,3,0,Gt.from(g));const _=this.convertBnToLedger(t.length);await this._transporter.send(+"0x5a",3,4,0,Gt.from(_));let b=new Uint8Array(0);for(const T of t){const I=this.encodeCall(T);await this._transporter.send(+"0x5a",3,5,0,Gt.from(I[0])),I.length>1&&I.slice(1).forEach(async k=>{await this._transporter.send(+"0x5a",3,5,1,Gt.from(k))}),b=await this._transporter.send(+"0x5a",3,5,2)}return this.decodeSignatureLedger(b)}async signDeployAccountV1(e){await this._transporter.send(+"0x5a",6,0,0,Gt.from(this.pathBuffer));const t=this.convertBnToLedger(e.contractAddress),n=this.convertBnToLedger(e.classHash),r=this.convertBnToLedger(e.addressSalt),s=this.convertBnToLedger(e.chainId),i=this.convertBnToLedger(e.nonce),o=nr([t,n,r,s,i]);await this._transporter.send(+"0x5a",6,1,0,Gt.from(o));const u=this.convertBnToLedger(e.maxFee);await this._transporter.send(+"0x5a",6,2,0,Gt.from(u));const l=yt.compile(e.constructorCalldata),d=this.convertBnToLedger(l.length);await this._transporter.send(+"0x5a",6,3,0,Gt.from(d));const f=nr(l.map(T=>this.convertBnToLedger(T))),g=[],_=7*32;for(let T=0;T<f.length;T+=_)g.push(f.subarray(T,T+_));let b=new Uint8Array(0);for(const T of g)b=await this._transporter.send(+"0x5a",6,4,0,Gt.from(T));return this.decodeSignatureLedger(b)}async signDeployAccountV3(e){await this._transporter.send(+"0x5a",5,0,0,Gt.from(this.pathBuffer));const t=this.convertBnToLedger(e.contractAddress),n=this.convertBnToLedger(e.chainId),r=this.convertBnToLedger(e.nonce),s=this.convertBnToLedger(wh(e.nonceDataAvailabilityMode===Ue.EDataAvailabilityMode.L1?Ue.EDAMode.L1:Ue.EDAMode.L2,e.feeDataAvailabilityMode===Ue.EDataAvailabilityMode.L1?Ue.EDAMode.L1:Ue.EDAMode.L2)),i=this.convertBnToLedger(e.classHash),o=this.convertBnToLedger(e.addressSalt),u=nr([t,n,r,s,i,o]);await this._transporter.send(+"0x5a",5,1,0,Gt.from(u));const l=this.convertBnToLedger(e.tip),d=this.convertBnToLedger(Eh(e.resourceBounds)),f=this.convertBnToLedger(vh(e.resourceBounds)),g=nr([l,d,f]);await this._transporter.send(+"0x5a",5,2,0,Gt.from(g));const _=nr(e.paymasterData.map(ee=>this.convertBnToLedger(ee)));await this._transporter.send(+"0x5a",5,3,0,Gt.from(_));const b=yt.compile(e.constructorCalldata),T=this.convertBnToLedger(b.length);await this._transporter.send(+"0x5a",5,4,0,Gt.from(T));const I=nr(b.map(ee=>this.convertBnToLedger(ee))),k=[],Z=7*32;for(let ee=0;ee<I.length;ee+=Z)k.push(I.subarray(ee,ee+Z));let Q=new Uint8Array(0);for(const ee of k)Q=await this._transporter.send(+"0x5a",5,5,0,Gt.from(ee));return this.decodeSignatureLedger(Q)}};function M4(e,t="LedgerW"){const n=new Uint8Array([Ol,0,10,85]),r=new Uint8Array([71|Ol,65,233,201]),s=t==="LedgerW"?new Uint8Array([43,206,231,219]):G_(t),i=nr([new Uint8Array([s[0]|Ol]),s.subarray(1)]),o=new Uint8Array([Ol,0,0,0]),u=ge(BigInt(e)|Yx),l=pt(un(u).padStart(8,"0")),d=Ia(l),f=new Uint8Array([0,0,0,0]);return nr([n,r,i,o,d,f])}var V4={};$t(V4,{getAbiEvents:()=>_S,isAbiEvent:()=>My,parseEvents:()=>bS,parseUDCEvent:()=>wS});function My(e){return e.type==="event"}function F4(e){return e.filter(t=>t.type==="event").reduce((t,n)=>{const r=n.name,s={...n};return s.name=r,{...t,[pt(sr(bi(r)).toString(16))]:s}},{})}function H4(e){const t=e.filter(s=>My(s)&&s.kind==="struct"),n=e.filter(s=>My(s)&&s.kind==="enum");return t.reduce((s,i)=>{let o=[],{name:u}=i,l=!1;const d=_=>_.type===u;for(;;){const _=n.find(T=>T.variants.some(d));if(Rn(_))break;const b=_.variants.find(d);o.unshift(b.name),b.kind==="flat"&&(l=!0),u=_.name}if(o.length===0)throw new Error("inconsistency in ABI events definition.");l&&(o=[o[o.length-1]]);const f=o.pop();let g={[pt(sr(bi(f)).toString(16))]:i};for(;o.length>0;)g={[pt(sr(bi(o.pop())).toString(16))]:g};return g={...g},yS(s,g)},{})}function _S(e){return ry(e)?H4(e):F4(e)}function yS(e,t){const n={...e};return Js(e)&&Js(t)&&Object.keys(t).forEach(r=>{Js(t[r])?r in e?n[r]=yS(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}function bS(e,t,n,r){return e.flat().reduce((i,o)=>{let u=t[o.keys.shift()??0];if(!u)return i;for(;!u.name;){const b=o.keys.shift();it(!!b,'Not enough data in "keys" property of this event.'),u=u[b]}const l={};l[u.name]={};const d=o.keys[Symbol.iterator](),f=o.data[Symbol.iterator](),g=u.members?.filter(b=>b.kind==="key")||u.keys,_=u.members?.filter(b=>b.kind==="data")||u.data;return g.forEach(b=>{l[u.name][b.name]=yh(d,b,n,r,l[u.name])}),_.forEach(b=>{l[u.name][b.name]=yh(f,b,n,r,l[u.name])}),"block_hash"in o&&(l.block_hash=o.block_hash),"block_number"in o&&(l.block_number=o.block_number),"transaction_hash"in o&&(l.transaction_hash=o.transaction_hash),i.push(l),i},[])}function wS(e){if(!e.events?.length)throw new Error("UDC emitted event is empty");const t=e.events.find(n=>Rl(n.from_address)===Rl(wo.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}var $4={};$t($4,{buildExecuteFromOutsideCallData:()=>xS,getOutsideCall:()=>Vy,getTypedData:()=>TS});function Vy(e){const t=e.calldata??[],n=Array.isArray(t)?t:yt.compile(t);return{to:e.contractAddress,selector:En(e.entrypoint),calldata:n}}function ES(e,t){const n=Vy(e);return t==="1"?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function vS(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,...t==="2"?{revision:"1"}:{}}}function TS(e,t,n,r,s){return s==="1"?{types:tA,primaryType:"OutsideExecution",domain:vS(e,s),message:{...t,nonce:n,calls_len:r.length,calls:r.map(i=>ES(i,s))}}:{types:nA,primaryType:"OutsideExecution",domain:vS(e,s),message:{Caller:t.caller,Nonce:n,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:r.map(i=>ES(i,s))}}}function xS(e){const t=e.outsideExecution,n=Zl(e.signature);return yt.compile({outside_execution:t,signature:n})}var j4={};$t(j4,{supportsInterface:()=>Fy});async function Fy(e,t,n){const r={contractAddress:ge(t),entrypoint:"supports_interface",calldata:[ge(n)]};try{const s=await e.callContract(r);return BigInt(s[0])!==0n}catch{return!1}}var Z4=class extends C4{constructor(t,n,r,s,i=Ue.ETransactionVersion.V2){super(t);W(this,"signer");W(this,"address");W(this,"cairoVersion");W(this,"transactionVersion");W(this,"deploySelf",this.deployAccount);this.address=n.toLowerCase(),this.signer=wn(r)||r instanceof Uint8Array?new O4(r):r,s&&(this.cairoVersion=s.toString()),this.transactionVersion=i}getPreferredVersion(t,n){return this.transactionVersion===Ue.ETransactionVersion.V3?n:this.transactionVersion===Ue.ETransactionVersion.V2?t:Ue.ETransactionVersion.V3}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return kt(t??await this.getNonce())}catch{return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:n}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=n}return this.cairoVersion}async estimateFee(t,n={}){return this.estimateInvokeFee(t,n)}async estimateInvokeFee(t,n={}){const{nonce:r,blockIdentifier:s,version:i,skipValidate:o=!0}=n,u=Array.isArray(t)?t:[t],l=kt(r??await this.getNonce()),d=na(this.getPreferredVersion(Ue.ETransactionVersion.F1,Ue.ETransactionVersion.F3),Ah(i)),f=await this.getChainId(),g={...Pn(n),walletAddress:this.address,nonce:l,maxFee:bn,version:d,chainId:f,cairoVersion:await this.getCairoVersion(),skipValidate:o},_=await this.buildInvocation(u,g);return super.getInvokeEstimateFee({..._},{...Pn(n),version:d,nonce:l},s,n.skipValidate)}async estimateDeclareFee(t,n={}){const{blockIdentifier:r,nonce:s,version:i,skipValidate:o=!0}=n,u=kt(s??await this.getNonce()),l=na(dr(t.contract)?this.getPreferredVersion(Ue.ETransactionVersion.F2,Ue.ETransactionVersion.F3):Ue.ETransactionVersion.F1,Ah(i)),d=await this.getChainId(),f=await this.buildDeclarePayload(t,{...Pn(n),nonce:u,chainId:d,version:l,walletAddress:this.address,maxFee:bn,cairoVersion:void 0,skipValidate:o});return super.getDeclareEstimateFee(f,{...Pn(n),version:l,nonce:u},r,n.skipValidate)}async estimateAccountDeployFee({classHash:t,addressSalt:n=0,constructorCalldata:r=[],contractAddress:s},i={}){const{blockIdentifier:o,version:u,skipValidate:l=!0}=i,d=na(this.getPreferredVersion(Ue.ETransactionVersion.F1,Ue.ETransactionVersion.F3),Ah(u)),f=bn,g=await this.getChainId(),_=await this.buildAccountDeployPayload({classHash:t,addressSalt:n,constructorCalldata:r,contractAddress:s},{...Pn(i),nonce:f,chainId:g,version:d,walletAddress:this.address,maxFee:bn,cairoVersion:void 0,skipValidate:l});return super.getDeployAccountEstimateFee({..._},{...Pn(i),version:d,nonce:f},o,i.skipValidate)}async estimateDeployFee(t,n={}){const r=this.buildUDCContractPayload(t);return this.estimateInvokeFee(r,n)}async estimateFeeBulk(t,n={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:r,blockIdentifier:s,version:i,skipValidate:o}=n,u=await this.accountInvocationsFactory(t,{...Pn(n),versions:[Ue.ETransactionVersion.F1,na(this.getPreferredVersion(Ue.ETransactionVersion.F2,Ue.ETransactionVersion.F3),i)],nonce:r,blockIdentifier:s,skipValidate:o});return super.getEstimateFeeBulk(u,{blockIdentifier:s,skipValidate:o})}async simulateTransaction(t,n={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:r,blockIdentifier:s,skipValidate:i=!0,skipExecute:o,version:u}=n,l=await this.accountInvocationsFactory(t,{...Pn(n),versions:[Ue.ETransactionVersion.V1,na(this.getPreferredVersion(Ue.ETransactionVersion.V2,Ue.ETransactionVersion.V3),u)],nonce:r,blockIdentifier:s,skipValidate:i});return super.getSimulateTransaction(l,{blockIdentifier:s,skipValidate:i,skipExecute:o})}async execute(t,n,r={}){const s=n===void 0||Array.isArray(n)?r:n,i=Array.isArray(t)?t:[t],o=kt(s.nonce??await this.getNonce()),u=na(this.getPreferredVersion(Ue.ETransactionVersion.V1,Ue.ETransactionVersion.V3),s.version),l=await this.getUniversalSuggestedFee(u,{type:rn.INVOKE,payload:t},{...s,version:u}),d=await this.getChainId(),f={...Pn(s),resourceBounds:l.resourceBounds,walletAddress:this.address,nonce:o,maxFee:l.maxFee,version:u,chainId:d,cairoVersion:await this.getCairoVersion()},g=await this.signer.signTransaction(i,f),_=Oo(i,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:_,signature:g},{...Pn(s),resourceBounds:l.resourceBounds,nonce:o,maxFee:l.maxFee,version:u})}async declareIfNot(t,n={}){const r=Kl(t);try{await this.getClassByHash(r.classHash)}catch{return this.declare(t,n)}return{transaction_hash:"",class_hash:r.classHash}}async declare(t,n={}){const r=Kl(t),{nonce:s,version:i}=n,o=na(dr(t.contract)?this.getPreferredVersion(Ue.ETransactionVersion.V2,Ue.ETransactionVersion.V3):Ue.ETransactionVersion.V1,i),u=await this.getUniversalSuggestedFee(o,{type:rn.DECLARE,payload:r},{...n,version:o}),l={...Pn(n),resourceBounds:u.resourceBounds,maxFee:u.maxFee,nonce:kt(s??await this.getNonce()),version:o,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},d=await this.buildDeclarePayload(r,l);return this.declareContract(d,l)}async deploy(t,n={}){const{calls:r,addresses:s}=Ey(t,this.address);return{...await this.execute(r,void 0,n),contract_address:s}}async deployContract(t,n={}){const r=await this.deploy(t,n),s=await this.waitForTransaction(r.transaction_hash);return wS(s)}async declareAndDeploy(t,n={}){const{constructorCalldata:r,salt:s,unique:i}=t;let o=await this.declareIfNot(t,n);if(o.transaction_hash!==""){const l=await this.waitForTransaction(o.transaction_hash);o={...o,...l}}const u=await this.deployContract({classHash:o.class_hash,salt:s,unique:i,constructorCalldata:r},n);return{declare:{...o},deploy:u}}async deployAccount({classHash:t,constructorCalldata:n=[],addressSalt:r=0,contractAddress:s},i={}){const o=na(this.getPreferredVersion(Ue.ETransactionVersion.V1,Ue.ETransactionVersion.V3),i.version),u=bn,l=await this.getChainId(),d=yt.compile(n),f=s??xh(r,t,d,0),g=await this.getUniversalSuggestedFee(o,{type:rn.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:d,addressSalt:r,contractAddress:f}},i),_=await this.signer.signDeployAccountTransaction({...Pn(i),classHash:t,constructorCalldata:d,contractAddress:f,addressSalt:r,chainId:l,resourceBounds:g.resourceBounds,maxFee:g.maxFee,version:o,nonce:u});return this.deployAccountContract({classHash:t,addressSalt:r,constructorCalldata:n,signature:_},{...Pn(i),nonce:u,resourceBounds:g.resourceBounds,maxFee:g.maxFee,version:o})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return No(t,this.address)}async verifyMessageHash(t,n,r,s){return this.verifyMessageInStarknet(t,n,this.address,r,s)}async verifyMessage(t,n,r,s){return this.verifyMessageInStarknet(t,n,this.address,r,s)}async getSnip9Version(){return await Fy(this,this.address,Gx)?"2":await Fy(this,this.address,qx)?"1":"0"}async isValidSnip9Nonce(t){try{const n={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[ge(t)]},r=await this.callContract(n);return BigInt(r[0])!==0n}catch(n){throw new Error(`Failed to check if nonce is valid: ${n}`)}}async getSnip9Nonce(){const t=_y();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,n,r,s){if(!Er(t.caller)&&t.caller!=="ANY_CALLER")throw new Error(`The caller ${t.caller} is not valid.`);const i=Er(t.caller)?t.caller:Wx,o=Array.isArray(n)?n:[n],u=r??await this.getSnip9Version();if(!u)throw new Error("This account is not handling outside transactions.");const l=s?ge(s):await this.getSnip9Nonce(),d=TS(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},l,o,u),f=await this.signMessage(d);return{outsideExecution:{caller:i,nonce:l,execute_after:t.execute_after,execute_before:t.execute_before,calls:o.map(Vy)},signature:f,signerAddress:this.address,version:u}}async executeFromOutside(t,n){const s=(Array.isArray(t)?t:[t]).map(i=>{let o;if(i.version==="1")o="execute_from_outside";else if(i.version==="2")o="execute_from_outside_v2";else throw new Error("Unsupported OutsideExecution version");return{contractAddress:ge(i.signerAddress),entrypoint:o,calldata:xS(i)}});return this.execute(s,n)}async getUniversalSuggestedFee(t,{type:n,payload:r},s){let i=0,o=zl(bn);return t===Ue.ETransactionVersion.V3?o=s.resourceBounds??(await this.getSuggestedFee({type:n,payload:r},s)).resourceBounds:i=s.maxFee??(await this.getSuggestedFee({type:n,payload:r},s)).suggestedMaxFee,{maxFee:i,resourceBounds:o}}async getSuggestedFee({type:t,payload:n},r){switch(t){case rn.INVOKE:return this.estimateInvokeFee(n,r);case rn.DECLARE:return this.estimateDeclareFee(n,r);case rn.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(n,r);case rn.DEPLOY:return this.estimateDeployFee(n,r);default:return{gas_consumed:0n,gas_price:0n,overall_fee:bn,unit:"FRI",suggestedMaxFee:bn,resourceBounds:zl(bn),data_gas_consumed:0n,data_gas_price:0n}}}async buildInvocation(t,n){const r=Oo(t,await this.getCairoVersion()),s=n.skipValidate?[]:await this.signer.signTransaction(t,n);return{...Pn(n),contractAddress:this.address,calldata:r,signature:s}}async buildDeclarePayload(t,n){const{classHash:r,contract:s,compiledClassHash:i}=Kl(t),o=WA(s);if(Rn(i)&&(n.version===Ue.ETransactionVersion3.F3||n.version===Ue.ETransactionVersion3.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const u=n.skipValidate?[]:await this.signer.signDeclareTransaction({...n,...Pn(n),classHash:r,compiledClassHash:i,senderAddress:n.walletAddress});return{senderAddress:n.walletAddress,signature:u,contract:o,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:n=0,constructorCalldata:r=[],contractAddress:s},i){const o=yt.compile(r),u=s??xh(n,t,o,0),l=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...Pn(i),classHash:t,contractAddress:u,addressSalt:n,constructorCalldata:o});return{...Pn(i),classHash:t,addressSalt:n,constructorCalldata:o,signature:l}}buildUDCContractPayload(t){return[].concat(t).map(r=>{const{classHash:s,salt:i="0",unique:o=!0,constructorCalldata:u=[]}=r,l=yt.compile(u);return{contractAddress:wo.ADDRESS,entrypoint:wo.ENTRYPOINT,calldata:[s,i,q_(o),l.length,...l]}})}async accountInvocationsFactory(t,n){const{nonce:r,blockIdentifier:s,skipValidate:i=!0}=n,o=await this.getNonceSafe(r),u=await this.getChainId(),l=n.versions.map(g=>na(g)),d="payload"in t[0]?t[0].payload:t[0],f=t[0].type===rn.DEPLOY_ACCOUNT?await this.getCairoVersion(d.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(g,_)=>{const b="payload"in g?g.payload:g,T={...Pn(n),walletAddress:this.address,nonce:kt(Number(o)+_),maxFee:bn,chainId:u,cairoVersion:f,version:"",skipValidate:i},I={type:g.type,nonce:kt(Number(o)+_),blockIdentifier:s,version:""};if(g.type===rn.INVOKE){const k=Sh(l[1]);T.version=k,I.version=k;const Z=await this.buildInvocation([].concat(b),T);return{...I,...Z,...T}}if(g.type===rn.DEPLOY){const k=Sh(l[1]);T.version=k,I.version=k;const Z=this.buildUDCContractPayload(b),Q=await this.buildInvocation(Z,T);return{...I,...Q,...T,type:rn.INVOKE}}if(g.type===rn.DECLARE){const k=dr(b.contract)?l[1]:l[0];T.version=k,I.version=k;const Z=await this.buildDeclarePayload(b,T);return{...I,...Z,...T}}if(g.type===rn.DEPLOY_ACCOUNT){const k=Sh(l[1]);T.version=k,I.version=k;const Z=await this.buildAccountDeployPayload(b,T);return{...I,...Z,...T}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${g}`)}))}async getStarkName(t=this.address,n){return super.getStarkName(t,n)}},I$=class extends null{},z4={};$t(z4,{addDeclareTransaction:()=>OS,addInvokeTransaction:()=>IS,addStarknetChain:()=>kS,deploymentData:()=>W4,getPermissions:()=>AS,onAccountChange:()=>RS,onNetworkChanged:()=>BS,requestAccounts:()=>Oh,requestChainId:()=>K4,signMessage:()=>NS,supportedSpecs:()=>q4,switchStarknetChain:()=>CS,watchAsset:()=>SS});function Oh(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function AS(e){return e.request({type:"wallet_getPermissions"})}function SS(e,t){return e.request({type:"wallet_watchAsset",params:t})}function kS(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function CS(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function K4(e){return e.request({type:"wallet_requestChainId"})}function W4(e){return e.request({type:"wallet_deploymentData"})}function IS(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function OS(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function NS(e,t){return e.request({type:"wallet_signTypedData",params:t})}function q4(e){return e.request({type:"wallet_supportedSpecs"})}function RS(e,t){e.on("accountsChanged",t)}function BS(e,t){e.on("networkChanged",t)}var O$=class xb extends Z4{constructor(n,r,s,i=""){super(n,i,"",s);W(this,"walletProvider");this.walletProvider=r,this.walletProvider.on("accountsChanged",o=>{o&&(this.address=o[0].toLowerCase())}),this.walletProvider.on("networkChanged",o=>{o&&this.channel.setChainId(o)}),i.length||(console.warn("@deprecated Use static method WalletAccount.connect or WalletAccount.connectSilent instead. Constructor {@link WalletAccount.(format:2)}."),Oh(this.walletProvider).then(([o])=>{this.address=o.toLowerCase()}))}onAccountChange(n){RS(this.walletProvider,n)}onNetworkChanged(n){BS(this.walletProvider,n)}requestAccounts(n=!1){return Oh(this.walletProvider,n)}getPermissions(){return AS(this.walletProvider)}switchStarknetChain(n){return CS(this.walletProvider,n)}watchAsset(n){return SS(this.walletProvider,n)}addStarknetChain(n){return kS(this.walletProvider,n)}execute(n){const s={calls:[].concat(n).map(i=>{const{contractAddress:o,entrypoint:u,calldata:l}=i;return{contract_address:o,entry_point:u,calldata:l}})};return IS(this.walletProvider,s)}declare(n){const r=Kl(n),s=n.contract,i={...s,abi:Mr(s.abi)};if(!r.compiledClassHash)throw Error("compiledClassHash is required");const o={compiled_class_hash:r.compiledClassHash,contract_class:i};return OS(this.walletProvider,o)}async deploy(n){const{calls:r,addresses:s}=Ey(n,this.address);return{...await this.execute(r),contract_address:s}}signMessage(n){return NS(this.walletProvider,n)}static async connect(n,r,s,i=!1){const[o]=await Oh(r,i);return new xb(n,r,s,o)}static async connectSilent(n,r,s){return xb.connect(n,r,s,!0)}},Hy=e=>{const t=["blockIdentifier","parseRequest","parseResponse","formatResponse","maxFee","nonce","signature","addressSalt"],n=e[e.length-1];return typeof n=="object"&&t.some(r=>r in n)?{args:e,options:e.pop()}:{args:e}};function DS(e,t){return async function(...n){const r=Hy(n);return e.call(t.name,r.args,{parseRequest:!0,parseResponse:!0,...r.options})}}function G4(e,t){return async function(...n){const r=Hy(n);return e.invoke(t.name,r.args,{parseRequest:!0,...r.options})}}function PS(e,t){return t.stateMutability==="view"||t.state_mutability==="view"?DS(e,t):G4(e,t)}function Y4(e,t){return function(...n){return e.populate(t.name,n)}}function X4(e,t){return function(...n){return e.estimate(t.name,n)}}function Yl(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var LS=class{constructor(e,t,n=I4){W(this,"abi");W(this,"address");W(this,"providerOrAccount");W(this,"deployTransactionHash");W(this,"structs");W(this,"events");W(this,"functions");W(this,"callStatic");W(this,"populateTransaction");W(this,"estimateFee");W(this,"callData");this.address=t&&t.toLowerCase(),this.providerOrAccount=n,this.callData=new yt(e),this.structs=yt.getAbiStruct(e),this.events=_S(e);const r=mA(e);this.abi=r.getLegacyFormat();const s={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(i=>{if(i.type!=="function")return;const o=i.name;this[o]||Object.defineProperty(this,o,{...s,value:PS(this,i)}),this.functions[o]||Object.defineProperty(this.functions,o,{...s,value:PS(this,i)}),this.callStatic[o]||Object.defineProperty(this.callStatic,o,{...s,value:DS(this,i)}),this.populateTransaction[o]||Object.defineProperty(this.populateTransaction,o,{...s,value:Y4(this,i)}),this.estimateFee[o]||Object.defineProperty(this.estimateFee,o,{...s,value:X4(this,i)})})}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e,t=[],{parseRequest:n=!0,parseResponse:r=!0,formatResponse:s=void 0,blockIdentifier:i=void 0}={}){it(this.address!==null,"contract is not connected to an address");const o=Yl(t,()=>n?(this.callData.validate(ka.CALL,e,t),this.callData.compile(e,t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:o,entrypoint:e},i).then(u=>r?s?this.callData.format(e,u,s):this.callData.parse(e,u):u)}invoke(e,t=[],{parseRequest:n=!0,maxFee:r,nonce:s,signature:i}={}){it(this.address!==null,"contract is not connected to an address");const o=Yl(t,()=>n?(this.callData.validate(ka.INVOKE,e,t),this.callData.compile(e,t)):(console.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),u={contractAddress:this.address,calldata:o,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(u,void 0,{maxFee:r,nonce:s});if(!s)throw new Error("Nonce is required when invoking a function without an account");return console.warn(`Invoking ${e} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...u,signature:i},{nonce:s})}async estimate(e,t=[]){it(this.address!==null,"contract is not connected to an address"),Yl(t,()=>!1)||this.callData.validate(ka.INVOKE,e,t);const n=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(n);throw Error("Contract must be connected to the account contract to estimate")}populate(e,t=[]){const n=Yl(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:n}}parseEvents(e){let t;return e.match({success:n=>{const r=n.events?.map(s=>({block_hash:n.block_hash,block_number:n.block_number,transaction_hash:n.transaction_hash,...s})).filter(s=>Rl(s.from_address)===Rl(this.address),[])||[];t=bS(r,this.events,this.structs,yt.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),t}isCairo1(){return fA.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}},N$=class{constructor(){W(this,"functions");W(this,"callStatic");W(this,"populateTransaction");W(this,"estimateFee")}},R$=class{constructor(e){W(this,"compiledContract");W(this,"account");W(this,"abi");W(this,"classHash");W(this,"casm");W(this,"compiledClassHash");W(this,"CallData");this.compiledContract=e.compiledContract,this.account=e.account,this.casm=e.casm,this.abi=e.abi??e.compiledContract.abi,this.classHash=e.classHash,this.compiledClassHash=e.compiledClassHash,this.CallData=new yt(this.abi)}async deploy(...e){const{args:t,options:n={parseRequest:!0}}=Hy(e),r=Yl(t,()=>n.parseRequest?(this.CallData.validate(ka.DEPLOY,"constructor",t),this.CallData.compile("constructor",t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t)),{deploy:{contract_address:s,transaction_hash:i}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:r,salt:n.addressSalt});it(!!s,"Deployment of the contract failed");const o=new LS(this.compiledContract.abi,s,this.account);return o.deployTransactionHash=i,o}connect(e){return this.account=e,this}attach(e){return new LS(this.abi,e,this.account)}},B$=class{},D$=null,Rt;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},e.getValidEnumValues=s=>{const i=e.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),o={};for(const u of i)o[u]=s[u];return e.objectValues(o)},e.objectValues=s=>e.objectKeys(s).map(function(i){return s[i]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},e.find=(s,i)=>{for(const o of s)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Rt||(Rt={}));var $y;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})($y||($y={}));const qe=Rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ki=e=>{switch(typeof e){case"undefined":return qe.undefined;case"string":return qe.string;case"number":return isNaN(e)?qe.nan:qe.number;case"boolean":return qe.boolean;case"function":return qe.function;case"bigint":return qe.bigint;case"symbol":return qe.symbol;case"object":return Array.isArray(e)?qe.array:e===null?qe.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?qe.promise:typeof Map<"u"&&e instanceof Map?qe.map:typeof Set<"u"&&e instanceof Set?qe.set:typeof Date<"u"&&e instanceof Date?qe.date:qe.object;default:return qe.unknown}},Me=Rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),J4=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class $r extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let u=r,l=0;for(;l<o.path.length;){const d=o.path[l];l===o.path.length-1?(u[d]=u[d]||{_errors:[]},u[d]._errors.push(n(o))):u[d]=u[d]||{_errors:[]},u=u[d],l++}}};return s(this),r}static assert(t){if(!(t instanceof $r))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}$r.create=e=>new $r(e);const Hc=(e,t)=>{let n;switch(e.code){case Me.invalid_type:e.received===qe.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Rt.jsonStringifyReplacer)}`;break;case Me.unrecognized_keys:n=`Unrecognized key(s) in object: ${Rt.joinValues(e.keys,", ")}`;break;case Me.invalid_union:n="Invalid input";break;case Me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Rt.joinValues(e.options)}`;break;case Me.invalid_enum_value:n=`Invalid enum value. Expected ${Rt.joinValues(e.options)}, received '${e.received}'`;break;case Me.invalid_arguments:n="Invalid function arguments";break;case Me.invalid_return_type:n="Invalid function return type";break;case Me.invalid_date:n="Invalid date";break;case Me.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Rt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Me.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Me.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Me.custom:n="Invalid input";break;case Me.invalid_intersection_types:n="Intersection results could not be merged";break;case Me.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Me.not_finite:n="Number must be finite";break;default:n=t.defaultError,Rt.assertNever(e)}return{message:n}};let US=Hc;function Q4(e){US=e}function Nh(){return US}const Rh=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let u="";const l=r.filter(d=>!!d).slice().reverse();for(const d of l)u=d(o,{data:t,defaultError:u}).message;return{...s,path:i,message:u}},e5=[];function ze(e,t){const n=Nh(),r=Rh({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Hc?void 0:Hc].filter(s=>!!s)});e.common.issues.push(r)}class rr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return ct;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return rr.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ct;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const ct=Object.freeze({status:"aborted"}),$c=e=>({status:"dirty",value:e}),fr=e=>({status:"valid",value:e}),jy=e=>e.status==="aborted",Zy=e=>e.status==="dirty",Xl=e=>e.status==="valid",Jl=e=>typeof Promise<"u"&&e instanceof Promise;function Bh(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function MS(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n}typeof SuppressedError=="function"&&SuppressedError;var nt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(nt||(nt={}));var Ql,ed;class ia{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VS=(e,t)=>{if(Xl(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new $r(e.common.issues);return this._error=n,this._error}}};function bt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(o,u)=>{var l,d;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:(l=f??r)!==null&&l!==void 0?l:u.defaultError}:o.code!=="invalid_type"?{message:u.defaultError}:{message:(d=f??n)!==null&&d!==void 0?d:u.defaultError}},description:s}}class Et{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return ki(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:ki(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new rr,ctx:{common:t.parent.common,data:t.data,parsedType:ki(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Jl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const s={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ki(t)},i=this._parseSync({data:t,path:s.path,parent:s});return VS(s,i)}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ki(t)},s=this._parse({data:t,path:r.path,parent:r}),i=await(Jl(s)?s:Promise.resolve(s));return VS(r,i)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=t(s),u=()=>i.addIssue({code:Me.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(u(),!1)):o?!0:(u(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new ws({schema:this,typeName:ot.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return ca.create(this,this._def)}nullable(){return Ni.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return bs.create(this,this._def)}promise(){return Kc.create(this,this._def)}or(t){return sd.create([this,t],this._def)}and(t){return ad.create(this,t,this._def)}transform(t){return new ws({...bt(this._def),schema:this,typeName:ot.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new ld({...bt(this._def),innerType:this,defaultValue:n,typeName:ot.ZodDefault})}brand(){return new Wy({typeName:ot.ZodBranded,type:this,...bt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new dd({...bt(this._def),innerType:this,catchValue:n,typeName:ot.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return fd.create(this,t)}readonly(){return hd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const t5=/^c[^\s-]{8,}$/i,n5=/^[0-9a-z]+$/,r5=/^[0-9A-HJKMNP-TV-Z]{26}$/,s5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,a5=/^[a-z0-9_-]{21}$/i,i5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,o5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,c5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zy;const u5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,l5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,d5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,FS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",f5=new RegExp(`^${FS}$`);function HS(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function h5(e){return new RegExp(`^${HS(e)}$`)}function $S(e){let t=`${FS}T${HS(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function p5(e,t){return!!((t==="v4"||!t)&&u5.test(e)||(t==="v6"||!t)&&l5.test(e))}class ys extends Et{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==qe.string){const i=this._getOrReturnCtx(t);return ze(i,{code:Me.invalid_type,expected:qe.string,received:i.parsedType}),ct}const r=new rr;let s;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,u=t.data.length<i.value;(o||u)&&(s=this._getOrReturnCtx(t,s),o?ze(s,{code:Me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&ze(s,{code:Me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")o5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"email",code:Me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")zy||(zy=new RegExp(c5,"u")),zy.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"emoji",code:Me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")s5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"uuid",code:Me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")a5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"nanoid",code:Me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")t5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"cuid",code:Me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")n5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"cuid2",code:Me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")r5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"ulid",code:Me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),ze(s,{validation:"url",code:Me.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"regex",code:Me.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?$S(i).test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?f5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?h5(i).test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?i5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"duration",code:Me.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?p5(t.data,i.version)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"ip",code:Me.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?d5.test(t.data)||(s=this._getOrReturnCtx(t,s),ze(s,{validation:"base64",code:Me.invalid_string,message:i.message}),r.dirty()):Rt.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:Me.invalid_string,...nt.errToObj(r)})}_addCheck(t){return new ys({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...nt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...nt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...nt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...nt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...nt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...nt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...nt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...nt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...nt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...nt.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(n=t?.offset)!==null&&n!==void 0?n:!1,local:(r=t?.local)!==null&&r!==void 0?r:!1,...nt.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...nt.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...nt.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...nt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n?.position,...nt.errToObj(n?.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...nt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...nt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...nt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...nt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...nt.errToObj(n)})}nonempty(t){return this.min(1,nt.errToObj(t))}trim(){return new ys({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ys({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ys({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ys.create=e=>{var t;return new ys({checks:[],typeName:ot.ZodString,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...bt(e)})};function g5(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(e.toFixed(s).replace(".","")),o=parseInt(t.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Ci extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==qe.number){const i=this._getOrReturnCtx(t);return ze(i,{code:Me.invalid_type,expected:qe.number,received:i.parsedType}),ct}let r;const s=new rr;for(const i of this._def.checks)i.kind==="int"?Rt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),ze(r,{code:Me.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),ze(r,{code:Me.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),ze(r,{code:Me.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?g5(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),ze(r,{code:Me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),ze(r,{code:Me.not_finite,message:i.message}),s.dirty()):Rt.assertNever(i);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,nt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,nt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,nt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,nt.toString(n))}setLimit(t,n,r,s){return new Ci({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:nt.toString(s)}]})}_addCheck(t){return new Ci({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:nt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:nt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:nt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Rt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Ci.create=e=>new Ci({checks:[],typeName:ot.ZodNumber,coerce:e?.coerce||!1,...bt(e)});class Ii extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==qe.bigint){const i=this._getOrReturnCtx(t);return ze(i,{code:Me.invalid_type,expected:qe.bigint,received:i.parsedType}),ct}let r;const s=new rr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),ze(r,{code:Me.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),ze(r,{code:Me.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),ze(r,{code:Me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Rt.assertNever(i);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,nt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,nt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,nt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,nt.toString(n))}setLimit(t,n,r,s){return new Ii({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:nt.toString(s)}]})}_addCheck(t){return new Ii({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:nt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ii.create=e=>{var t;return new Ii({checks:[],typeName:ot.ZodBigInt,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...bt(e)})};class td extends Et{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==qe.boolean){const r=this._getOrReturnCtx(t);return ze(r,{code:Me.invalid_type,expected:qe.boolean,received:r.parsedType}),ct}return fr(t.data)}}td.create=e=>new td({typeName:ot.ZodBoolean,coerce:e?.coerce||!1,...bt(e)});class Ro extends Et{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==qe.date){const i=this._getOrReturnCtx(t);return ze(i,{code:Me.invalid_type,expected:qe.date,received:i.parsedType}),ct}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return ze(i,{code:Me.invalid_date}),ct}const r=new rr;let s;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(s=this._getOrReturnCtx(t,s),ze(s,{code:Me.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Rt.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ro({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:nt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:nt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Ro.create=e=>new Ro({checks:[],coerce:e?.coerce||!1,typeName:ot.ZodDate,...bt(e)});class Dh extends Et{_parse(t){if(this._getType(t)!==qe.symbol){const r=this._getOrReturnCtx(t);return ze(r,{code:Me.invalid_type,expected:qe.symbol,received:r.parsedType}),ct}return fr(t.data)}}Dh.create=e=>new Dh({typeName:ot.ZodSymbol,...bt(e)});class nd extends Et{_parse(t){if(this._getType(t)!==qe.undefined){const r=this._getOrReturnCtx(t);return ze(r,{code:Me.invalid_type,expected:qe.undefined,received:r.parsedType}),ct}return fr(t.data)}}nd.create=e=>new nd({typeName:ot.ZodUndefined,...bt(e)});class rd extends Et{_parse(t){if(this._getType(t)!==qe.null){const r=this._getOrReturnCtx(t);return ze(r,{code:Me.invalid_type,expected:qe.null,received:r.parsedType}),ct}return fr(t.data)}}rd.create=e=>new rd({typeName:ot.ZodNull,...bt(e)});class jc extends Et{constructor(){super(...arguments),this._any=!0}_parse(t){return fr(t.data)}}jc.create=e=>new jc({typeName:ot.ZodAny,...bt(e)});class Bo extends Et{constructor(){super(...arguments),this._unknown=!0}_parse(t){return fr(t.data)}}Bo.create=e=>new Bo({typeName:ot.ZodUnknown,...bt(e)});class Ra extends Et{_parse(t){const n=this._getOrReturnCtx(t);return ze(n,{code:Me.invalid_type,expected:qe.never,received:n.parsedType}),ct}}Ra.create=e=>new Ra({typeName:ot.ZodNever,...bt(e)});class Ph extends Et{_parse(t){if(this._getType(t)!==qe.undefined){const r=this._getOrReturnCtx(t);return ze(r,{code:Me.invalid_type,expected:qe.void,received:r.parsedType}),ct}return fr(t.data)}}Ph.create=e=>new Ph({typeName:ot.ZodVoid,...bt(e)});class bs extends Et{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==qe.array)return ze(n,{code:Me.invalid_type,expected:qe.array,received:n.parsedType}),ct;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,u=n.data.length<s.exactLength.value;(o||u)&&(ze(n,{code:o?Me.too_big:Me.too_small,minimum:u?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ze(n,{code:Me.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ze(n,{code:Me.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,u)=>s.type._parseAsync(new ia(n,o,n.path,u)))).then(o=>rr.mergeArray(r,o));const i=[...n.data].map((o,u)=>s.type._parseSync(new ia(n,o,n.path,u)));return rr.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new bs({...this._def,minLength:{value:t,message:nt.toString(n)}})}max(t,n){return new bs({...this._def,maxLength:{value:t,message:nt.toString(n)}})}length(t,n){return new bs({...this._def,exactLength:{value:t,message:nt.toString(n)}})}nonempty(t){return this.min(1,t)}}bs.create=(e,t)=>new bs({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ot.ZodArray,...bt(t)});function Zc(e){if(e instanceof dn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=ca.create(Zc(r))}return new dn({...e._def,shape:()=>t})}else return e instanceof bs?new bs({...e._def,type:Zc(e.element)}):e instanceof ca?ca.create(Zc(e.unwrap())):e instanceof Ni?Ni.create(Zc(e.unwrap())):e instanceof oa?oa.create(e.items.map(t=>Zc(t))):e}class dn extends Et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Rt.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==qe.object){const d=this._getOrReturnCtx(t);return ze(d,{code:Me.invalid_type,expected:qe.object,received:d.parsedType}),ct}const{status:r,ctx:s}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ra&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||u.push(d);const l=[];for(const d of o){const f=i[d],g=s.data[d];l.push({key:{status:"valid",value:d},value:f._parse(new ia(s,g,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Ra){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of u)l.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(d==="strict")u.length>0&&(ze(s,{code:Me.unrecognized_keys,keys:u}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of u){const g=s.data[f];l.push({key:{status:"valid",value:f},value:d._parse(new ia(s,g,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of l){const g=await f.key,_=await f.value;d.push({key:g,value:_,alwaysSet:f.alwaysSet})}return d}).then(d=>rr.mergeObjectSync(r,d)):rr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return nt.errToObj,new dn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var s,i,o,u;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(u=nt.errToObj(t).message)!==null&&u!==void 0?u:l}:{message:l}}}:{}})}strip(){return new dn({...this._def,unknownKeys:"strip"})}passthrough(){return new dn({...this._def,unknownKeys:"passthrough"})}extend(t){return new dn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new dn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ot.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new dn({...this._def,catchall:t})}pick(t){const n={};return Rt.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new dn({...this._def,shape:()=>n})}omit(t){const n={};return Rt.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new dn({...this._def,shape:()=>n})}deepPartial(){return Zc(this)}partial(t){const n={};return Rt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}),new dn({...this._def,shape:()=>n})}required(t){const n={};return Rt.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ca;)i=i._def.innerType;n[r]=i}}),new dn({...this._def,shape:()=>n})}keyof(){return jS(Rt.objectKeys(this.shape))}}dn.create=(e,t)=>new dn({shape:()=>e,unknownKeys:"strip",catchall:Ra.create(),typeName:ot.ZodObject,...bt(t)}),dn.strictCreate=(e,t)=>new dn({shape:()=>e,unknownKeys:"strict",catchall:Ra.create(),typeName:ot.ZodObject,...bt(t)}),dn.lazycreate=(e,t)=>new dn({shape:e,unknownKeys:"strip",catchall:Ra.create(),typeName:ot.ZodObject,...bt(t)});class sd extends Et{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const o=i.map(u=>new $r(u.ctx.common.issues));return ze(n,{code:Me.invalid_union,unionErrors:o}),ct}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=l._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const u=o.map(l=>new $r(l));return ze(n,{code:Me.invalid_union,unionErrors:u}),ct}}get options(){return this._def.options}}sd.create=(e,t)=>new sd({options:e,typeName:ot.ZodUnion,...bt(t)});const Ba=e=>e instanceof od?Ba(e.schema):e instanceof ws?Ba(e.innerType()):e instanceof cd?[e.value]:e instanceof Oi?e.options:e instanceof ud?Rt.objectValues(e.enum):e instanceof ld?Ba(e._def.innerType):e instanceof nd?[void 0]:e instanceof rd?[null]:e instanceof ca?[void 0,...Ba(e.unwrap())]:e instanceof Ni?[null,...Ba(e.unwrap())]:e instanceof Wy||e instanceof hd?Ba(e.unwrap()):e instanceof dd?Ba(e._def.innerType):[];class Lh extends Et{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==qe.object)return ze(n,{code:Me.invalid_type,expected:qe.object,received:n.parsedType}),ct;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ze(n,{code:Me.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ct)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const s=new Map;for(const i of n){const o=Ba(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const u of o){if(s.has(u))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(u)}`);s.set(u,i)}}return new Lh({typeName:ot.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:s,...bt(r)})}}function Ky(e,t){const n=ki(e),r=ki(t);if(e===t)return{valid:!0,data:e};if(n===qe.object&&r===qe.object){const s=Rt.objectKeys(t),i=Rt.objectKeys(e).filter(u=>s.indexOf(u)!==-1),o={...e,...t};for(const u of i){const l=Ky(e[u],t[u]);if(!l.valid)return{valid:!1};o[u]=l.data}return{valid:!0,data:o}}else if(n===qe.array&&r===qe.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const o=e[i],u=t[i],l=Ky(o,u);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===qe.date&&r===qe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ad extends Et{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(i,o)=>{if(jy(i)||jy(o))return ct;const u=Ky(i.value,o.value);return u.valid?((Zy(i)||Zy(o))&&n.dirty(),{status:n.value,value:u.data}):(ze(r,{code:Me.invalid_intersection_types}),ct)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ad.create=(e,t,n)=>new ad({left:e,right:t,typeName:ot.ZodIntersection,...bt(n)});class oa extends Et{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==qe.array)return ze(r,{code:Me.invalid_type,expected:qe.array,received:r.parsedType}),ct;if(r.data.length<this._def.items.length)return ze(r,{code:Me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ct;!this._def.rest&&r.data.length>this._def.items.length&&(ze(r,{code:Me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,u)=>{const l=this._def.items[u]||this._def.rest;return l?l._parse(new ia(r,o,r.path,u)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>rr.mergeArray(n,o)):rr.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new oa({...this._def,rest:t})}}oa.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new oa({items:e,typeName:ot.ZodTuple,rest:null,...bt(t)})};class id extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==qe.object)return ze(r,{code:Me.invalid_type,expected:qe.object,received:r.parsedType}),ct;const s=[],i=this._def.keyType,o=this._def.valueType;for(const u in r.data)s.push({key:i._parse(new ia(r,u,r.path,u)),value:o._parse(new ia(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?rr.mergeObjectAsync(n,s):rr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Et?new id({keyType:t,valueType:n,typeName:ot.ZodRecord,...bt(r)}):new id({keyType:ys.create(),valueType:t,typeName:ot.ZodRecord,...bt(n)})}}class Uh extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==qe.map)return ze(r,{code:Me.invalid_type,expected:qe.map,received:r.parsedType}),ct;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([u,l],d)=>({key:s._parse(new ia(r,u,r.path,[d,"key"])),value:i._parse(new ia(r,l,r.path,[d,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const l of o){const d=await l.key,f=await l.value;if(d.status==="aborted"||f.status==="aborted")return ct;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(d.value,f.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const l of o){const d=l.key,f=l.value;if(d.status==="aborted"||f.status==="aborted")return ct;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(d.value,f.value)}return{status:n.value,value:u}}}}Uh.create=(e,t,n)=>new Uh({valueType:t,keyType:e,typeName:ot.ZodMap,...bt(n)});class Do extends Et{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==qe.set)return ze(r,{code:Me.invalid_type,expected:qe.set,received:r.parsedType}),ct;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ze(r,{code:Me.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ze(r,{code:Me.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const d=new Set;for(const f of l){if(f.status==="aborted")return ct;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const u=[...r.data.values()].map((l,d)=>i._parse(new ia(r,l,r.path,d)));return r.common.async?Promise.all(u).then(l=>o(l)):o(u)}min(t,n){return new Do({...this._def,minSize:{value:t,message:nt.toString(n)}})}max(t,n){return new Do({...this._def,maxSize:{value:t,message:nt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Do.create=(e,t)=>new Do({valueType:e,minSize:null,maxSize:null,typeName:ot.ZodSet,...bt(t)});class zc extends Et{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==qe.function)return ze(n,{code:Me.invalid_type,expected:qe.function,received:n.parsedType}),ct;function r(u,l){return Rh({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Nh(),Hc].filter(d=>!!d),issueData:{code:Me.invalid_arguments,argumentsError:l}})}function s(u,l){return Rh({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Nh(),Hc].filter(d=>!!d),issueData:{code:Me.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Kc){const u=this;return fr(async function(...l){const d=new $r([]),f=await u._def.args.parseAsync(l,i).catch(b=>{throw d.addIssue(r(l,b)),d}),g=await Reflect.apply(o,this,f);return await u._def.returns._def.type.parseAsync(g,i).catch(b=>{throw d.addIssue(s(g,b)),d})})}else{const u=this;return fr(function(...l){const d=u._def.args.safeParse(l,i);if(!d.success)throw new $r([r(l,d.error)]);const f=Reflect.apply(o,this,d.data),g=u._def.returns.safeParse(f,i);if(!g.success)throw new $r([s(f,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new zc({...this._def,args:oa.create(t).rest(Bo.create())})}returns(t){return new zc({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new zc({args:t||oa.create([]).rest(Bo.create()),returns:n||Bo.create(),typeName:ot.ZodFunction,...bt(r)})}}class od extends Et{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}od.create=(e,t)=>new od({getter:e,typeName:ot.ZodLazy,...bt(t)});class cd extends Et{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return ze(n,{received:n.data,code:Me.invalid_literal,expected:this._def.value}),ct}return{status:"valid",value:t.data}}get value(){return this._def.value}}cd.create=(e,t)=>new cd({value:e,typeName:ot.ZodLiteral,...bt(t)});function jS(e,t){return new Oi({values:e,typeName:ot.ZodEnum,...bt(t)})}class Oi extends Et{constructor(){super(...arguments),Ql.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return ze(n,{expected:Rt.joinValues(r),received:n.parsedType,code:Me.invalid_type}),ct}if(Bh(this,Ql,"f")||MS(this,Ql,new Set(this._def.values),"f"),!Bh(this,Ql,"f").has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return ze(n,{received:n.data,code:Me.invalid_enum_value,options:r}),ct}return fr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Oi.create(t,{...this._def,...n})}exclude(t,n=this._def){return Oi.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Ql=new WeakMap,Oi.create=jS;class ud extends Et{constructor(){super(...arguments),ed.set(this,void 0)}_parse(t){const n=Rt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==qe.string&&r.parsedType!==qe.number){const s=Rt.objectValues(n);return ze(r,{expected:Rt.joinValues(s),received:r.parsedType,code:Me.invalid_type}),ct}if(Bh(this,ed,"f")||MS(this,ed,new Set(Rt.getValidEnumValues(this._def.values)),"f"),!Bh(this,ed,"f").has(t.data)){const s=Rt.objectValues(n);return ze(r,{received:r.data,code:Me.invalid_enum_value,options:s}),ct}return fr(t.data)}get enum(){return this._def.values}}ed=new WeakMap,ud.create=(e,t)=>new ud({values:e,typeName:ot.ZodNativeEnum,...bt(t)});class Kc extends Et{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==qe.promise&&n.common.async===!1)return ze(n,{code:Me.invalid_type,expected:qe.promise,received:n.parsedType}),ct;const r=n.parsedType===qe.promise?n.data:Promise.resolve(n.data);return fr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Kc.create=(e,t)=>new Kc({type:e,typeName:ot.ZodPromise,...bt(t)});class ws extends Et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ot.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,i={addIssue:o=>{ze(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async u=>{if(n.value==="aborted")return ct;const l=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return l.status==="aborted"?ct:l.status==="dirty"||n.value==="dirty"?$c(l.value):l});{if(n.value==="aborted")return ct;const u=this._def.schema._parseSync({data:o,path:r.path,parent:r});return u.status==="aborted"?ct:u.status==="dirty"||n.value==="dirty"?$c(u.value):u}}if(s.type==="refinement"){const o=u=>{const l=s.refinement(u,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?ct:(u.status==="dirty"&&n.dirty(),o(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?ct:(u.status==="dirty"&&n.dirty(),o(u.value).then(()=>({status:n.value,value:u.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xl(o))return o;const u=s.transform(o.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Xl(o)?Promise.resolve(s.transform(o.value,i)).then(u=>({status:n.value,value:u})):o);Rt.assertNever(s)}}ws.create=(e,t,n)=>new ws({schema:e,typeName:ot.ZodEffects,effect:t,...bt(n)}),ws.createWithPreprocess=(e,t,n)=>new ws({schema:t,effect:{type:"preprocess",transform:e},typeName:ot.ZodEffects,...bt(n)});class ca extends Et{_parse(t){return this._getType(t)===qe.undefined?fr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ca.create=(e,t)=>new ca({innerType:e,typeName:ot.ZodOptional,...bt(t)});class Ni extends Et{_parse(t){return this._getType(t)===qe.null?fr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ni.create=(e,t)=>new Ni({innerType:e,typeName:ot.ZodNullable,...bt(t)});class ld extends Et{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===qe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ld.create=(e,t)=>new ld({innerType:e,typeName:ot.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...bt(t)});class dd extends Et{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Jl(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $r(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new $r(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}dd.create=(e,t)=>new dd({innerType:e,typeName:ot.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...bt(t)});class Mh extends Et{_parse(t){if(this._getType(t)!==qe.nan){const r=this._getOrReturnCtx(t);return ze(r,{code:Me.invalid_type,expected:qe.nan,received:r.parsedType}),ct}return{status:"valid",value:t.data}}}Mh.create=e=>new Mh({typeName:ot.ZodNaN,...bt(e)});const m5=Symbol("zod_brand");class Wy extends Et{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class fd extends Et{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ct:i.status==="dirty"?(n.dirty(),$c(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ct:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new fd({in:t,out:n,typeName:ot.ZodPipeline})}}class hd extends Et{_parse(t){const n=this._def.innerType._parse(t),r=s=>(Xl(s)&&(s.value=Object.freeze(s.value)),s);return Jl(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}hd.create=(e,t)=>new hd({innerType:e,typeName:ot.ZodReadonly,...bt(t)});function ZS(e,t={},n){return e?jc.create().superRefine((r,s)=>{var i,o;if(!e(r)){const u=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t,l=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,d=typeof u=="string"?{message:u}:u;s.addIssue({code:"custom",...d,fatal:l})}}):jc.create()}const _5={object:dn.lazycreate};var ot;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ot||(ot={}));const y5=(e,t={message:`Input not instance of ${e.name}`})=>ZS(n=>n instanceof e,t),zS=ys.create,KS=Ci.create,b5=Mh.create,w5=Ii.create,WS=td.create,E5=Ro.create,v5=Dh.create,T5=nd.create,x5=rd.create,A5=jc.create,S5=Bo.create,k5=Ra.create,C5=Ph.create,I5=bs.create,O5=dn.create,N5=dn.strictCreate,R5=sd.create,B5=Lh.create,D5=ad.create,P5=oa.create,L5=id.create,U5=Uh.create,M5=Do.create,V5=zc.create,F5=od.create,H5=cd.create,$5=Oi.create,j5=ud.create,Z5=Kc.create,qS=ws.create,z5=ca.create,K5=Ni.create,W5=ws.createWithPreprocess,q5=fd.create;var vt=Object.freeze({__proto__:null,defaultErrorMap:Hc,setErrorMap:Q4,getErrorMap:Nh,makeIssue:Rh,EMPTY_PATH:e5,addIssueToContext:ze,ParseStatus:rr,INVALID:ct,DIRTY:$c,OK:fr,isAborted:jy,isDirty:Zy,isValid:Xl,isAsync:Jl,get util(){return Rt},get objectUtil(){return $y},ZodParsedType:qe,getParsedType:ki,ZodType:Et,datetimeRegex:$S,ZodString:ys,ZodNumber:Ci,ZodBigInt:Ii,ZodBoolean:td,ZodDate:Ro,ZodSymbol:Dh,ZodUndefined:nd,ZodNull:rd,ZodAny:jc,ZodUnknown:Bo,ZodNever:Ra,ZodVoid:Ph,ZodArray:bs,ZodObject:dn,ZodUnion:sd,ZodDiscriminatedUnion:Lh,ZodIntersection:ad,ZodTuple:oa,ZodRecord:id,ZodMap:Uh,ZodSet:Do,ZodFunction:zc,ZodLazy:od,ZodLiteral:cd,ZodEnum:Oi,ZodNativeEnum:ud,ZodPromise:Kc,ZodEffects:ws,ZodTransformer:ws,ZodOptional:ca,ZodNullable:Ni,ZodDefault:ld,ZodCatch:dd,ZodNaN:Mh,BRAND:m5,ZodBranded:Wy,ZodPipeline:fd,ZodReadonly:hd,custom:ZS,Schema:Et,ZodSchema:Et,late:_5,get ZodFirstPartyTypeKind(){return ot},coerce:{string:e=>ys.create({...e,coerce:!0}),number:e=>Ci.create({...e,coerce:!0}),boolean:e=>td.create({...e,coerce:!0}),bigint:e=>Ii.create({...e,coerce:!0}),date:e=>Ro.create({...e,coerce:!0})},any:A5,array:I5,bigint:w5,boolean:WS,date:E5,discriminatedUnion:B5,effect:qS,enum:$5,function:V5,instanceof:y5,intersection:D5,lazy:F5,literal:H5,map:U5,nan:b5,nativeEnum:j5,never:k5,null:x5,nullable:K5,number:KS,object:O5,oboolean:()=>WS().optional(),onumber:()=>KS().optional(),optional:z5,ostring:()=>zS().optional(),pipeline:q5,preprocess:W5,promise:Z5,record:L5,set:M5,strictObject:N5,string:zS,symbol:v5,transformer:qS,tuple:P5,undefined:T5,union:R5,unknown:S5,void:C5,NEVER:ct,ZodIssueCode:Me,quotelessJson:J4,ZodError:$r});const G5=vt.string().refine(e=>{if(e.toLowerCase()===e)return!0;try{return U4(e)&&QS(e)}catch{}return!1},()=>({message:"Invalid address (checksum error)"})),F$=vt.string().refine(e=>{try{return mS(e)}catch{}return!1},()=>({message:"Invalid address (validation error)"})),Vh=vt.string().regex(/^0x[0-9a-fA-F]+$/,"Invalid address"),Y5=Vh.min(50,"Address must at least be 50 characters long").max(66,"Address must at most be 66 characters long"),H$=Vh.length(66,"Address must be 66 characters long"),Fh=Y5.pipe(G5).transform(e=>`0x${(e.startsWith("0x")?e.slice(2):e).padStart(64,"0")}`),X5=Fh.or(vt.literal("")).transform(e=>e===""?void 0:e).optional(),$$=Vh.transform(e=>`0x${e.replace(/^0x/,"").toLowerCase().padStart(64,"0")}`),GS=e=>a.string().refine(t=>{if(t.toLowerCase()===t)return!0;try{return m(t)&&QS(t)}catch{}return!1},()=>({message:e("validation.address.invalidChecksum")})),J5=e=>a.string().refine(t=>{try{return h(t)}catch{}return!1},()=>({message:e("validation.address.validationError")})),Hh=e=>a.string().regex(/^0x[0-9a-fA-F]+$/,e("validation.address.invalidFormat")),YS=e=>Hh(e).min(50,e("validation.address.tooShort")).max(66,e("validation.address.tooLong")),Q5=e=>Hh(e).length(66,e("validation.address.exactLength")),XS=e=>{const t=YS(e),n=GS(e);return t.pipe(n).transform(r=>`0x${(r.startsWith("0x")?r.slice(2):r).padStart(64,"0")}`)},e8=e=>XS(e).or(a.literal("")).transform(t=>t===""?void 0:t).optional(),t8=e=>Hh(e).transform(t=>`0x${t.replace(/^0x/,"").toLowerCase().padStart(64,"0")}`),j$=e=>({validChecksumAddressSchema:GS(e),validateAddressRangeSchema:J5(e),addressSchemaBase:Hh(e),addressSchemaLooseLength:YS(e),addressSchemaStrictLength:Q5(e),addressSchema:XS(e),addressOrEmptyUndefinedSchema:e8(e),addressSchemaArgentBackend:t8(e)}),Z$=e=>Fh.safeParse(e).success,n8=null,JS=e=>p(e),z$=e=>{if(!e)return!1;try{const t=L(e);return n8(t)}catch{return!1}},K$=e=>{const t=JS(e),n=t.slice(0,2),r=t.slice(2,6),s=t.slice(-4);return`${n}${r}\u2026${s}`},W$=e=>{const t=JS(e),n=t.slice(0,2),r=t.slice(2).match(/.{1,4}/g)||[];return`${n} ${r.join(" ")}`},QS=e=>!/^0x[0-9a-f]{63,64}$/.test(e),r8=(e,t)=>{try{return!e||!t?!1:c.hexToDecimalString(e)===c.hexToDecimalString(t)}catch{}return!1},q$=e=>{try{return c.toBigInt(Vh.parse(e))===x.ZERO}catch{}return!1},G$=(e,t)=>!!(t!=null&&t.some(n=>r8(n,e))),Y$=(0,kx.A)(e=>{const t=e.slice(0,6),n=e.slice(-4);return`${t}\u2026${n}`}),X$=(0,kx.A)((e,t)=>{if(e.length<t)return e;const n=Math.floor((t-1)/2),r=e.slice(0,n),s=e.slice(-n);return`${r}\u2026${s}`});async function s8(e){const t=Fh.safeParse(e.options.address);t.success&&e.type==="ERC20"&&Mt({type:"REQUEST_TOKEN",data:{address:t.data,symbol:e.options.symbol,decimals:e.options.decimals,name:e.options.name}});const{exists:n,actionHash:r}=await wt("REQUEST_TOKEN_RES",1e3);if(n)return!0;if(!r)throw Error("Unexpected error: actionHash is undefined");Mt({type:"OPEN_UI"});const s=await Promise.race([wt("APPROVE_REQUEST_TOKEN",11*60*1e3,i=>i.data.actionHash===r),wt("REJECT_REQUEST_TOKEN",10*60*1e3,i=>i.data.actionHash===r).then(()=>"error").catch(()=>(Mt({type:"REJECT_REQUEST_TOKEN",data:{actionHash:r}}),"timeout"))]);if(s==="error")throw new ts({code:Ur.UserAborted});if(s==="timeout")throw new ts({code:Ur.Unknown});return!0}async function a8(e){Mt({type:"CONNECT_DAPP",data:{silent:e?.silent_mode}});const t=await Promise.race([wt("CONNECT_DAPP_RES",10*60*1e3),wt("REJECT_PREAUTHORIZATION",10*60*1e3).then(()=>"USER_ABORTED")]);if(!t)throw Error("No wallet account (should not be possible)");if(t==="USER_ABORTED")throw Error("User aborted");const{address:n}=t;return[n]}async function i8(e){const t=nh.X7.safeParse(e.calls);if(!t.success)throw Error(`Invalid transaction: ${t.error.message}`);Mt({type:"EXECUTE_TRANSACTION",data:{transactions:t.data}});const{actionHash:n}=await wt("EXECUTE_TRANSACTION_RES",1e3);Mt({type:"OPEN_UI"});const r=await Promise.race([wt("TRANSACTION_SUBMITTED",11*60*1e3,s=>s.data.actionHash===n),wt("TRANSACTION_FAILED",10*60*1e3,s=>s.data.actionHash===n).then(()=>"error").catch(()=>(Mt({type:"TRANSACTION_FAILED",data:{actionHash:n}}),"timeout"))]);if(r==="error")throw new ts({code:Ur.UserAborted});if(r==="timeout")throw new ts({code:Ur.Unknown});return{transaction_hash:r.transactionResult.transactionHash}}async function o8({chainId:e}){Mt({type:"REQUEST_SWITCH_CUSTOM_NETWORK",data:{chainId:e}});const t=await Promise.race([wt("REQUEST_SWITCH_CUSTOM_NETWORK_RES",1e3),wt("REQUEST_SWITCH_CUSTOM_NETWORK_REJ",1e3)]);if("error"in t)throw Error(t.error);const{actionHash:n,exists:r,isCurrentNetwork:s}=t;if(!r)return!1;if(s)return!0;if(Mt({type:"OPEN_UI"}),!n)throw Error("Unexpected error: actionHash is undefined");const i=await Promise.race([wt("APPROVE_REQUEST_SWITCH_CUSTOM_NETWORK",11*60*1e3,o=>o.data.actionHash===n),wt("REJECT_REQUEST_SWITCH_CUSTOM_NETWORK",10*60*1e3,o=>o.data.actionHash===n).then(()=>"error").catch(()=>(Mt({type:"REJECT_REQUEST_SWITCH_CUSTOM_NETWORK",data:{actionHash:n}}),"timeout"))]);if(i==="error")throw new ts({code:Ur.UserAborted});if(i==="timeout")throw new ts({code:Ur.Unknown});return!0}const pd="0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",$h="0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",J$="0x053c91253bc9682c04929ca02ed00b3e423f6710d2ee7e0d5ebb06f3ecf368a8",Q$="0x042b8F0484674cA266AC5D08e4aC6A3fE65bd3129795DEF2dCA5c34ecC5F96d2",ek="0x033434ad846cdd5f23eb73ff09fe6fddd568284a0fb7d1be20ee482f044dabe2",e7="0x61dac032f228abef9c6626f995015233097ae253a7f72d68552db02f2971b8f",t7="0x4ee23ad83fb55c1e3fac26e2cd951c60abf3ddc851caa9a7fbb9f5eddb2091",n7="0x057c2f22f0209a819e6c60f78ad7d3690f82ade9c0c68caea492151698934ede",r7="0x0545d680a2b4909f886371b2ac820745491f55ac7f0e81b3c4668a81e2a656f0",tk="0x05754af3760f3356da99aea5c3ec39ccac7783d925a19666ebbeca58ff0087f4",c8=[{mainnet:"https://starknet-mainnet.public.blastapi.io",sepolia:"https://starknet-sepolia.public.blastapi.io"},{mainnet:"https://rpc.starknet.lava.build",sepolia:"https://rpc.starknet-sepolia.lava.build"}];async function u8(e){const{chain_id:t,chain_name:n,id:r,block_explorer_url:s,native_currency:i,rpc_urls:o}=nh.qd.parse(e);Mt({type:"REQUEST_ADD_CUSTOM_NETWORK",data:{id:r,name:n,chainId:t,rpcUrl:o?.[0],explorerUrl:s?.[0],possibleFeeTokenAddresses:[i?.options.address??pd]}});const u=await Promise.race([wt("REQUEST_ADD_CUSTOM_NETWORK_RES",1e3),wt("REQUEST_ADD_CUSTOM_NETWORK_REJ",1e3)]);if("error"in u)throw Error(u.error);const{exists:l,actionHash:d}=u;if(l)return!0;if(!d)throw Error("Unexpected error: actionHash is undefined");Mt({type:"OPEN_UI"});const f=await Promise.race([wt("APPROVE_REQUEST_ADD_CUSTOM_NETWORK",11*60*1e3,g=>g.data.actionHash===d),wt("REJECT_REQUEST_ADD_CUSTOM_NETWORK",10*60*1e3,g=>g.data.actionHash===d).then(()=>"error").catch(()=>(Mt({type:"REJECT_REQUEST_ADD_CUSTOM_NETWORK",data:{actionHash:d}}),"timeout"))]);if(f==="error")throw new ts({code:Ur.UserAborted});if(f==="timeout")throw new ts({code:Ur.Unknown});return!0}async function l8(e){const{contract_class:t,compiled_class_hash:n}=e;if(!t.abi)throw new Error("Missing ABI");Mt({type:"REQUEST_DECLARE_CONTRACT",data:{payload:{contract:Bv.stringify(t),compiledClassHash:n}}});const{actionHash:r}=await wt("REQUEST_DECLARE_CONTRACT_RES",1e3);Mt({type:"OPEN_UI"});const s=await Promise.race([wt("DECLARE_CONTRACT_ACTION_SUBMITTED",21*60*1e3,i=>i.data.actionHash===r),wt("DECLARE_CONTRACT_ACTION_FAILED",20*60*1e3,i=>i.data.actionHash===r).then(()=>"error").catch(()=>"timeout")]);if(s==="error")throw new ts({code:Ur.UserAborted});if(s==="timeout")throw new ts({code:Ur.Unknown});return{transaction_hash:s.txHash,class_hash:s.classHash}}const i7="0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",o7="0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",c7="0x1a736d6ed154502257f02b1ccdf4d9d1089f80811cd6acad48e6b6a9d1f2003",Po="0x036078334509b514626504edc9fb252328d1a240e4e948bef8d0c08dff45927f",u7="0x737ee2f87ce571a58c6c8da558ec18a07ceb64a6172d5ec46171fbc80077a48",nk="0x6e150953b26271a740bf2b6e9bca17cc52c68d765f761295de51ceb8526ee72",l7="0x4d07e40e93398ed3c76981e72dd1fd22557a78ce36c0515f679e27f0bb5bc5f";function d8(e){var t=[];if(e.length===0)return"";if(typeof e[0]!="string")throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var s=e[r];if(typeof s!="string")throw new TypeError("Url must be a string. Received "+s);s!==""&&(r>0&&(s=s.replace(/^[\/]+/,"")),r<e.length-1?s=s.replace(/[\/]+$/,""):s=s.replace(/[\/]+$/,"/"),t.push(s))}var i=t.join("/");i=i.replace(/\/(\?|&|#[^!])/g,"$1");var o=i.split("?");return i=o.shift()+(o.length>0?"?":"")+o.join("&"),i}function f8(){var e;return typeof arguments[0]=="object"?e=arguments[0]:e=[].slice.call(arguments),d8(e)}const h8=vt.enum(["mainnet-alpha","sepolia-alpha"]),p8=vt.enum(["mainnet","sepolia"]);function g8(e){return h8.safeParse(e).success}function d7(e){return p8.safeParse(e).success}function f7(e,t,n){return isEqualAddress(e,t.accountClassHash?.plugin)?"plugin":isEqualAddress(e,t.accountClassHash?.betterMulticall)?"betterMulticall":getArgentAccountClassHashes("multisig").find(s=>isEqualAddress(e,s))?"multisig":n&&n==="smart"&&isEqualAddress(e,t.accountClassHash?.smart)?"smart":"standard"}function h7(e){switch(e){case constants.StarknetChainId.SN_MAIN:return"mainnet-alpha";case constants.StarknetChainId.SN_SEPOLIA:return"sepolia-alpha";default:throw new Error(`Unknown chainId: ${e}`)}}function m8(){const e="prod";if(!e)throw new Error("ARGENT_X_ENVIRONMENT not set");switch(e.toLowerCase()){case"integration":return"integration";case"prod":case"staging":return"mainnet-alpha";case"hydrogen":case"dev":case"test":return"sepolia-alpha";default:throw new Error(`Unknown ARGENTX_ENVIRONMENT: ${e}`)}}function _8(e){const t=m8(),n=e.find(r=>r.id===t);if(!n)throw new Error(`Unknown default network: ${t}`);return n}function jh(e){return g8(e.id)}function p7(e){const t=Math.floor(Math.random()*PUBLIC_RPC_NODES.length),n=PUBLIC_RPC_NODES[t];if(!n)throw new Error(`No random node found for network: ${e.id}`);return n}function y8(e){if(!jh)throw new Error(`Not an Argent network: ${e.id}`);const t=HT(e.id);if(!t)throw new Error(`No nodes found for network: ${e.id}`);return c8.map(r=>r[t])}function g7(){const e="prod";if(!e)throw new Error("ARGENT_X_ENVIRONMENT not set");return e.toLowerCase()==="prod"||e.toLowerCase()==="staging"}const m7=[{id:"integration",name:"Integration",chainId:"SN_SEPOLIA",rpcUrl:"https://cloud-dev.argent-api.com/v1/starknet/sepolia/rpc/v0.7",accountClassHash:{standard:Po,smart:Po},possibleFeeTokenAddresses:[$h,pd],explorerUrl:"https://integration.starkscan.co",readonly:!0}],_7=[{id:"mainnet-alpha",status:"unknown"},{id:"sepolia-alpha",status:"unknown"},{id:"localhost",status:"unknown"}],qy=[{id:"mainnet-alpha",name:"Mainnet",chainId:"SN_MAIN",rpcUrl:"https://cloud.argent-api.com/v1/starknet/mainnet/rpc/v0.7",explorerUrl:"https://voyager.online",l1ExplorerUrl:"https://etherscan.io",accountClassHash:{standard:Po,multisig:nk,standardCairo0:ek,smart:Po},multicallAddress:tk,possibleFeeTokenAddresses:[$h,pd],readonly:!0},{id:"sepolia-alpha",name:"Sepolia",chainId:"SN_SEPOLIA",rpcUrl:f8("https://cloud.argent-api.com/v1","starknet/sepolia/rpc/v0.7"),explorerUrl:"https://sepolia.voyager.online",l1ExplorerUrl:"https://sepolia.etherscan.io",accountClassHash:{standard:Po,standardCairo0:ek,multisig:nk,smart:Po},multicallAddress:tk,possibleFeeTokenAddresses:[$h,pd],readonly:!0},{id:"localhost",chainId:"SN_SEPOLIA",rpcUrl:"http://localhost:5050",explorerUrl:"http://localhost:4000/testnet/",name:"Devnet",possibleFeeTokenAddresses:[$h,pd],accountClassHash:{standard:Po}}],y7=_8(qy),b7=qy.filter(({readonly:e})=>!e),w7=qy.filter(({readonly:e})=>!!e),Da=/^0x[a-f0-9]+$/i,b8=vt.object({id:vt.string().min(2).max(31)}),w8=vt.enum(["red","amber","green","unknown"]),E8=vt.string().transform(e=>e.toUpperCase()).pipe(vt.enum([dm.NetworkName.SN_MAIN,dm.StarknetChainId.SN_MAIN.toUpperCase()])),rk=vt.string().min(2,"ChainId must be at least 2 characters").max(31,"ChainId cannot be longer than 31 characters").regex(/^[a-zA-Z0-9_]+$/,{message:"chain id must be hexadecimal string, uppercase alphanumeric or underscore, like 'SN_ABCXYZ'"}),v8=rk.refine(e=>!E8.safeParse(e).success,{message:"Chain ID is reserved"}),v7=b8.extend({name:vt.string().min(2).max(128),chainId:rk,rpcUrl:vt.string().url("RPC url must be a valid URL"),possibleFeeTokenAddresses:vt.array(Fh).nonempty(),accountImplementation:vt.optional(vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"})),accountClassHash:vt.union([vt.object({standard:vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"}).optional(),standardCairo0:vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"}).optional(),plugin:vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"}).optional(),multisig:vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"}).optional(),betterMulticall:vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"}).optional(),argent5MinuteEscapeTestingAccount:vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"}).optional(),smart:vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"}).optional(),imported:vt.string().regex(Da,{message:"Account class hash must match the following: /^0x[a-f0-9]+$/i"}).optional()}),vt.undefined()]),explorerUrl:vt.optional(vt.string().url("explorer url must be a valid URL")),faucetUrl:vt.optional(vt.string().url("faucet url must be a valid URL")),l1ExplorerUrl:vt.optional(vt.string().url("l1 explorer url must be a valid URL")),blockExplorerUrl:vt.optional(vt.string().url("block explorer url must be a valid URL")),multicallAddress:X5,readonly:vt.optional(vt.boolean())}).extend({chainId:v8}),T7=vt.object({id:vt.string(),status:w8});async function T8(){if(!await L_())throw new Error("Not preauthorized");Mt({type:"REQUEST_SELECTED_NETWORK"});const t=await Promise.race([wt("REQUEST_SELECTED_NETWORK_RES",10*60*1e3),wt("REQUEST_SELECTED_NETWORK_REJ",10*60*1e3).catch(()=>"timeout")]);if(t==="timeout")throw new Error("Timeout");if("error"in t)throw Error(t.error);return jh(t.network)?sl.encodeShortString(t.network.chainId):(await $T(t.network)).getChainId()}async function x8(){return await L_()?[et.ACCOUNTS]:[]}const sk=e=>`0x${e.toString(16)}`,A8=e=>e.every(t=>typeof t=="string");async function S8(){const e=await D_.accountMessaging.getAccountDeploymentPayload.query();if(!e)throw new Error("Deployment data not found");const{version:t,classHash:n,constructorCalldata:r,addressSalt:s,contractAddress:i}=e;if(!n||!r||!s||!i)throw new Error("Deployment data not found");if(!A8(r))throw new Error("Constructor calldata is not an array of hex strings");const o=sk(BigInt(s)),u=r.map(l=>sk(BigInt(l)));if(!t)throw new Error("Account's Cairo Version not found");return{address:i,class_hash:n,salt:o,calldata:u,version:Number(t)}}function k8(){return Promise.resolve(["0.7.0"])}async function C8(e){const n={wallet_addStarknetChain:u8,wallet_switchStarknetChain:o8,wallet_watchAsset:s8,wallet_requestAccounts:a8,wallet_getPermissions:x8,wallet_requestChainId:T8,wallet_deploymentData:S8,wallet_addDeclareTransaction:l8,wallet_addInvokeTransaction:i8,wallet_signTypedData:P_,wallet_supportedSpecs:k8,wallet_supportedWalletApi:async()=>{throw new Error("Not implemented")}}[e.type];if(n)return"params"in e?n(e.params):n();throw new Error(`Unknown request type: ${e.type}`)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Lo(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function gd(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function hr(...e){const t=i=>i,n=(i,o)=>u=>i(o(u)),r=e.map(i=>i.encode).reduceRight(n,t),s=e.map(i=>i.decode).reduce(n,t);return{encode:r,decode:s}}function vr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Tr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function md(e,t="="){if(typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let s of n)if(typeof s!="string")throw new Error(`padding.decode: non-string input=${s}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function ak(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Gy(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const s=[],i=Array.from(e);for(i.forEach(o=>{if(o<0||o>=t)throw new Error(`Wrong integer: ${o}`)});;){let o=0,u=!0;for(let l=r;l<i.length;l++){const d=i[l],f=t*o+d;if(!Number.isSafeInteger(f)||t*o/t!==o||f-d!==t*o)throw new Error("convertRadix: carry overflow");o=f%n;const g=Math.floor(f/n);if(i[l]=g,!Number.isSafeInteger(g)||g*n+o!==f)throw new Error("convertRadix: carry overflow");if(u)g?u=!1:r=l;else continue}if(s.push(o),u)break}for(let o=0;o<e.length-1&&e[o]===0;o++)s.push(0);return s.reverse()}const ik=(e,t)=>t?ik(t,e%t):e,Zh=(e,t)=>e+(t-ik(e,t));function zh(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Zh(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Zh(t,n)}`);let s=0,i=0;const o=2**n-1,u=[];for(const l of e){if(l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(s=s<<t|l,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)u.push((s>>i-n&o)>>>0);s&=2**i-1}if(s=s<<n-i&o,!r&&i>=t)throw new Error("Excess padding");if(!r&&s)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&u.push(s>>>0),u}function ok(e){return{encode:t=>{if(!gd(t))throw new Error("radix.encode input should be Uint8Array");return Gy(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(Gy(t,e,2**8))}}}function jr(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Zh(8,e)>32||Zh(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!gd(n))throw new Error("radix2.encode input should be Uint8Array");return zh(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(zh(n,e,8,t))}}}function ck(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function uk(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(n){if(!gd(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),s=new Uint8Array(n.length+e);return s.set(n),s.set(r,n.length),s},decode(n){if(!gd(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),s=t(r).slice(0,e),i=n.slice(-e);for(let o=0;o<e;o++)if(s[o]!==i[o])throw new Error("Invalid checksum");return r}}}const x7={alphabet:vr,chain:hr,checksum:uk,convertRadix:Gy,convertRadix2:zh,radix:ok,radix2:jr,join:Tr,padding:md},I8=hr(jr(4),vr("0123456789ABCDEF"),Tr("")),O8=hr(jr(5),vr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),md(5),Tr("")),A7=hr(jr(5),vr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Tr("")),S7=hr(jr(5),vr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),md(5),Tr("")),k7=hr(jr(5),vr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Tr("")),C7=hr(jr(5),vr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Tr(""),ak(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Yy=hr(jr(6),vr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),md(6),Tr("")),I7=hr(jr(6),vr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Tr("")),N8=hr(jr(6),vr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),md(6),Tr("")),O7=hr(jr(6),vr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Tr("")),Kh=(e=>hr(ok(58),vr(e),Tr("")))("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),R7=null,B7=null,lk=[0,2,3,5,6,7,9,10,11],R8={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Kh.encode(r).padStart(lk[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),s=lk.indexOf(r.length),i=Kh.decode(r);for(let o=0;o<i.length-s;o++)if(i[o]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-s)))}return Uint8Array.from(t)}},D7=e=>hr(uk(4,t=>e(e(t))),Kh),P7=null,Xy=hr(vr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Tr("")),dk=null;function _d(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<dk.length;r++)(t>>r&1)===1&&(n^=dk[r]);return n}function fk(e,t,n=1){const r=e.length;let s=1;for(let i=0;i<r;i++){const o=e.charCodeAt(i);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);s=_d(s)^o>>5}s=_d(s);for(let i=0;i<r;i++)s=_d(s)^e.charCodeAt(i)&31;for(let i of t)s=_d(s)^i;for(let i=0;i<6;i++)s=_d(s);return s^=n,Xy.encode(zh([s%2**30],30,5,!1))}function L7(e){const t=e==="bech32"?1:734539939,n=jr(5),r=n.decode,s=n.encode,i=ck(r);function o(g,_,b=90){if(typeof g!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof g}`);if(_ instanceof Uint8Array&&(_=Array.from(_)),!Array.isArray(_)||_.length&&typeof _[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof _}`);if(g.length===0)throw new TypeError(`Invalid prefix length ${g.length}`);const T=g.length+7+_.length;if(b!==!1&&T>b)throw new TypeError(`Length ${T} exceeds limit ${b}`);const I=g.toLowerCase(),k=fk(I,_,t);return`${I}1${Xy.encode(_)}${k}`}function u(g,_=90){if(typeof g!="string")throw new Error(`bech32.decode input should be string, not ${typeof g}`);if(g.length<8||_!==!1&&g.length>_)throw new TypeError(`Wrong string length: ${g.length} (${g}). Expected (8..${_})`);const b=g.toLowerCase();if(g!==b&&g!==g.toUpperCase())throw new Error("String must be lowercase or uppercase");const T=b.lastIndexOf("1");if(T===0||T===-1)throw new Error('Letter "1" must be present between prefix and data only');const I=b.slice(0,T),k=b.slice(T+1);if(k.length<6)throw new Error("Data must be at least 6 characters long");const Z=Xy.decode(k).slice(0,-6),Q=fk(I,Z,t);if(!k.endsWith(Q))throw new Error(`Invalid checksum in ${g}: expected "${Q}"`);return{prefix:I,words:Z}}const l=ck(u);function d(g){const{prefix:_,words:b}=u(g,!1);return{prefix:_,words:b,bytes:r(b)}}function f(g,_){return o(g,s(_))}return{encode:o,decode:u,encodeFromBytes:f,decodeToBytes:d,decodeUnsafe:l,fromWords:r,fromWordsUnsafe:i,toWords:s}}const U7=null,M7=null,Wh={utf8:{encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},hex:hr(jr(4),vr("0123456789abcdef"),Tr(""),ak(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),base16:I8,base32:O8,base64:Yy,base64url:N8,base58:Kh,base58xmr:R8},hk="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",H7=(e,t)=>{if(typeof e!="string"||!Wh.hasOwnProperty(e))throw new TypeError(hk);if(!gd(t))throw new TypeError("bytesToString() expects Uint8Array");return Wh[e].encode(t)},$7=null,j7=(e,t)=>{if(!Wh.hasOwnProperty(e))throw new TypeError(hk);if(typeof t!="string")throw new TypeError("stringToBytes() expects string");return Wh[e].decode(t)},Z7=null;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pk=BigInt(0),qh=BigInt(1),B8=BigInt(2);function ua(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const D8=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ri(e){if(!ua(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=D8[e[n]];return t}function P8(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Gh(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const Pa={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function gk(e){if(e>=Pa._0&&e<=Pa._9)return e-Pa._0;if(e>=Pa._A&&e<=Pa._F)return e-(Pa._A-10);if(e>=Pa._a&&e<=Pa._f)return e-(Pa._a-10)}function Bi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=gk(e.charCodeAt(i)),u=gk(e.charCodeAt(i+1));if(o===void 0||u===void 0){const l=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[s]=o*16+u}return r}function pr(e){return Gh(Ri(e))}function Jy(e){if(!ua(e))throw new Error("Uint8Array expected");return Gh(Ri(Uint8Array.from(e).reverse()))}function Wc(e,t){return Bi(e.toString(16).padStart(t*2,"0"))}function Qy(e,t){return Wc(e,t).reverse()}function e0(e){return Bi(P8(e))}function rs(e,t,n){let r;if(typeof t=="string")try{r=Bi(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(ua(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r}function qc(...e){let t=0;for(let s=0;s<e.length;s++){const i=e[s];if(!ua(i))throw new Error("Uint8Array expected");t+=i.length}let n=new Uint8Array(t),r=0;for(let s=0;s<e.length;s++){const i=e[s];n.set(i,r),r+=i.length}return n}function z7(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function K7(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function W7(e){let t;for(t=0;e>pk;e>>=qh,t+=1);return t}function q7(e,t){return e>>BigInt(t)&qh}const G7=(e,t,n)=>e|(n?qh:pk)<<BigInt(t),Yh=e=>(B8<<BigInt(e-1))-qh,t0=e=>new Uint8Array(e),mk=e=>Uint8Array.from(e);function _k(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=t0(e),s=t0(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},u=(...g)=>n(s,r,...g),l=(g=t0())=>{s=u(mk([0]),g),r=u(),g.length!==0&&(s=u(mk([1]),g),r=u())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const _=[];for(;g<t;){r=u();const b=r.slice();_.push(b),g+=r.length}return qc(..._)};return(g,_)=>{o(),l(g);let b;for(;!(b=_(d()));)l();return o(),b}}const L8={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ua(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function yd(e,t,n={}){const r=(s,i,o)=>{const u=L8[i];if(typeof u!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=e[s];if(!(o&&l===void 0)&&!u(l,e))throw new Error(`Invalid param ${String(s)}=${l} (${typeof l}), expected ${i}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}function bd(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function U8(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function M8(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Xh(e,...t){if(!M8(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function yk(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");bd(e.outputLen),bd(e.blockLen)}function Uo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function n0(e,t){Xh(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Y7={number:bd,bool:U8,bytes:Xh,hash:yk,exists:Uo,output:n0},X7=null,Jh=BigInt(2**32-1),r0=BigInt(32);function bk(e,t=!1){return t?{h:Number(e&Jh),l:Number(e>>r0&Jh)}:{h:Number(e>>r0&Jh)|0,l:Number(e&Jh)|0}}function wk(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=bk(e[s],t);[n[s],r[s]]=[i,o]}return[n,r]}const V8=(e,t)=>BigInt(e>>>0)<<r0|BigInt(t>>>0),F8=(e,t,n)=>e>>>n,H8=(e,t,n)=>e<<32-n|t>>>n,$8=(e,t,n)=>e>>>n|t<<32-n,j8=(e,t,n)=>e<<32-n|t>>>n,Z8=(e,t,n)=>e<<64-n|t>>>n-32,z8=(e,t,n)=>e>>>n-32|t<<64-n,K8=(e,t)=>t,W8=(e,t)=>e,Ek=(e,t,n)=>e<<n|t>>>32-n,vk=(e,t,n)=>t<<n|e>>>32-n,Tk=(e,t,n)=>t<<n-32|e>>>64-n,xk=(e,t,n)=>e<<n-32|t>>>64-n;function q8(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const sj={fromBig:bk,split:wk,toBig:V8,shrSH:F8,shrSL:H8,rotrSH:$8,rotrSL:j8,rotrBH:Z8,rotrBL:z8,rotr32H:K8,rotr32L:W8,rotlSH:Ek,rotlSL:vk,rotlBH:Tk,rotlBL:xk,add:q8,add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,add5H:(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,add5L:(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0)},aj=null,s0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ij=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),G8=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));function a0(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const i0=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),la=(e,t)=>e<<32-t|e>>>t;if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");const Y8=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function cj(e){if(!a0(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Y8[e[n]];return t}const La={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ak(e){if(e>=La._0&&e<=La._9)return e-La._0;if(e>=La._A&&e<=La._F)return e-(La._A-10);if(e>=La._a&&e<=La._f)return e-(La._a-10)}function uj(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Ak(e.charCodeAt(i)),u=Ak(e.charCodeAt(i+1));if(o===void 0||u===void 0){const l=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[s]=o*16+u}return r}const X8=async()=>{};async function lj(e,t,n){let r=Date.now();for(let s=0;s<e;s++){n(s);const i=Date.now()-r;i>=0&&i<t||(await X8(),r+=i)}}function Sk(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Gc(e){if(typeof e=="string"&&(e=Sk(e)),!a0(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function J8(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];if(!a0(s))throw new Error("Uint8Array expected");t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}class o0{clone(){return this._cloneInto()}}const Q8={}.toString;function dj(e,t){if(t!==void 0&&Q8.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function kk(e){const t=r=>e().update(Gc(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function fj(e){const t=(r,s)=>e(s).update(Gc(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function hj(e){const t=(r,s)=>e(s).update(Gc(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function eU(e=32){if(s0&&typeof s0.getRandomValues=="function")return s0.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const[Ck,Ik,Ok]=[[],[],[]],tU=BigInt(0),wd=BigInt(1),nU=BigInt(2),rU=BigInt(7),sU=BigInt(256),aU=BigInt(113);for(let e=0,t=wd,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Ck.push(2*(5*r+n)),Ik.push((e+1)*(e+2)/2%64);let s=tU;for(let i=0;i<7;i++)t=(t<<wd^(t>>rU)*aU)%sU,t&nU&&(s^=wd<<(wd<<BigInt(i))-wd);Ok.push(s)}const[iU,oU]=wk(Ok,!0),Nk=(e,t,n)=>n>32?Tk(e,t,n):Ek(e,t,n),Rk=(e,t,n)=>n>32?xk(e,t,n):vk(e,t,n);function cU(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const u=(o+8)%10,l=(o+2)%10,d=n[l],f=n[l+1],g=Nk(d,f,1)^n[u],_=Rk(d,f,1)^n[u+1];for(let b=0;b<50;b+=10)e[o+b]^=g,e[o+b+1]^=_}let s=e[2],i=e[3];for(let o=0;o<24;o++){const u=Ik[o],l=Nk(s,i,u),d=Rk(s,i,u),f=Ck[o];s=e[f],i=e[f+1],e[f]=l,e[f+1]=d}for(let o=0;o<50;o+=10){for(let u=0;u<10;u++)n[u]=e[o+u];for(let u=0;u<10;u++)e[o+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=iU[r],e[1]^=oU[r]}n.fill(0)}class Qh extends o0{constructor(t,n,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,bd(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=G8(this.state)}keccak(){cU(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Uo(this);const{blockLen:n,state:r}=this;t=Gc(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let u=0;u<o;u++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Uo(this,!1),Xh(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return bd(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(n0(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Qh(n,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const uU=(e,t,n)=>kk(()=>new Qh(t,e,n)),pj=null,gj=null,mj=null,_j=null,yj=null,lU=uU(1,136,256/8),bj=null,wj=null,Ej=(e,t,n)=>wrapXOFConstructorWithOpts((r={})=>new Qh(t,e,r.dkLen===void 0?n:r.dkLen,!0)),vj=null,Tj=null;function dU(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),u=Number(n&i),l=r?4:0,d=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+d,u,r)}class fU extends o0{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=i0(this.buffer)}update(t){Uo(this);const{view:n,buffer:r,blockLen:s}=this;t=Gc(t);const i=t.length;for(let o=0;o<i;){const u=Math.min(s-this.pos,i-o);if(u===s){const l=i0(t);for(;s<=i-o;o+=s)this.process(l,o);continue}r.set(t.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Uo(this),n0(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)n[g]=0;dU(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=i0(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=l/4,f=this.get();if(d>f.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)u.setUint32(4*g,f[g],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:u}=this;return t.length=s,t.pos=u,t.finished=i,t.destroyed=o,s%n&&t.buffer.set(r),t}}const hU=(e,t,n)=>e&t^~e&n,pU=(e,t,n)=>e&t^e&n^t&n,gU=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Di=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pi=new Uint32Array(64);class Bk extends fU{constructor(){super(64,32,8,!1),this.A=Di[0]|0,this.B=Di[1]|0,this.C=Di[2]|0,this.D=Di[3]|0,this.E=Di[4]|0,this.F=Di[5]|0,this.G=Di[6]|0,this.H=Di[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:o,G:u,H:l}=this;return[t,n,r,s,i,o,u,l]}set(t,n,r,s,i,o,u,l){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=u|0,this.H=l|0}process(t,n){for(let g=0;g<16;g++,n+=4)Pi[g]=t.getUint32(n,!1);for(let g=16;g<64;g++){const _=Pi[g-15],b=Pi[g-2],T=la(_,7)^la(_,18)^_>>>3,I=la(b,17)^la(b,19)^b>>>10;Pi[g]=I+Pi[g-7]+T+Pi[g-16]|0}let{A:r,B:s,C:i,D:o,E:u,F:l,G:d,H:f}=this;for(let g=0;g<64;g++){const _=la(u,6)^la(u,11)^la(u,25),b=f+_+hU(u,l,d)+gU[g]+Pi[g]|0,I=(la(r,2)^la(r,13)^la(r,22))+pU(r,s,i)|0;f=d,d=l,l=u,u=o+b|0,o=i,i=s,s=r,r=b+I|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,u=u+this.E|0,l=l+this.F|0,d=d+this.G|0,f=f+this.H|0,this.set(r,s,i,o,u,l,d,f)}roundClean(){Pi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class xj extends Bk{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const c0=kk(()=>new Bk),Aj=null;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ln=BigInt(0),Wt=BigInt(1),Li=BigInt(2),mU=BigInt(3),u0=BigInt(4),Dk=BigInt(5),Pk=BigInt(8),_U=BigInt(9),yU=BigInt(16);function Jn(e,t){const n=e%t;return n>=Ln?n:t+n}function bU(e,t,n){if(n<=Ln||t<Ln)throw new Error("Expected power/modulo > 0");if(n===Wt)return Ln;let r=Wt;for(;t>Ln;)t&Wt&&(r=r*e%n),e=e*e%n,t>>=Wt;return r}function Sj(e,t,n){let r=e;for(;t-- >Ln;)r*=r,r%=n;return r}function Ed(e,t){if(e===Ln||t<=Ln)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Jn(e,t),r=t,s=Ln,i=Wt,o=Wt,u=Ln;for(;n!==Ln;){const d=r/n,f=r%n,g=s-o*d,_=i-u*d;r=n,n=f,s=o,i=u,o=g,u=_}if(r!==Wt)throw new Error("invert: does not exist");return Jn(s,t)}function wU(e){const t=(e-Wt)/Li;let n,r,s;for(n=e-Wt,r=0;n%Li===Ln;n/=Li,r++);for(s=Li;s<e&&bU(s,t,e)!==e-Wt;s++);if(r===1){const o=(e+Wt)/u0;return function(l,d){const f=l.pow(d,o);if(!l.eql(l.sqr(f),d))throw new Error("Cannot find square root");return f}}const i=(n+Wt)/Li;return function(u,l){if(u.pow(l,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let d=r,f=u.pow(u.mul(u.ONE,s),n),g=u.pow(l,i),_=u.pow(l,n);for(;!u.eql(_,u.ONE);){if(u.eql(_,u.ZERO))return u.ZERO;let b=1;for(let I=u.sqr(_);b<d&&!u.eql(I,u.ONE);b++)I=u.sqr(I);const T=u.pow(f,Wt<<BigInt(d-b-1));f=u.sqr(T),g=u.mul(g,T),_=u.mul(_,f),d=b}return g}}function EU(e){if(e%u0===mU){const t=(e+Wt)/u0;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(e%Pk===Dk){const t=(e-Dk)/Pk;return function(r,s){const i=r.mul(s,Li),o=r.pow(i,t),u=r.mul(s,o),l=r.mul(r.mul(u,Li),o),d=r.mul(u,r.sub(l,r.ONE));if(!r.eql(r.sqr(d),s))throw new Error("Cannot find square root");return d}}return e%yU,wU(e)}const kj=(e,t)=>(Jn(e,t)&Wt)===Wt,vU=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ep(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=vU.reduce((r,s)=>(r[s]="function",r),t);return yd(e,n)}function Lk(e,t,n){if(n<Ln)throw new Error("Expected power > 0");if(n===Ln)return e.ONE;if(n===Wt)return t;let r=e.ONE,s=t;for(;n>Ln;)n&Wt&&(r=e.mul(r,s)),s=e.sqr(s),n>>=Wt;return r}function TU(e,t){const n=new Array(t.length),r=t.reduce((i,o,u)=>e.is0(o)?i:(n[u]=i,e.mul(i,o)),e.ONE),s=e.inv(r);return t.reduceRight((i,o,u)=>e.is0(o)?i:(n[u]=e.mul(i,n[u]),e.mul(i,o)),s),n}function Cj(e,t,n){return e.mul(t,typeof n=="bigint"?Ed(n,e.ORDER):e.inv(n))}function Ij(e){const t=(e.ORDER-Wt)/Li;return n=>{const r=e.pow(n,t);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}}function l0(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Uk(e,t,n=!1,r={}){if(e<=Ln)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=l0(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=EU(e),u=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:Yh(s),ZERO:Ln,ONE:Wt,create:l=>Jn(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Ln<=l&&l<e},is0:l=>l===Ln,isOdd:l=>(l&Wt)===Wt,neg:l=>Jn(-l,e),eql:(l,d)=>l===d,sqr:l=>Jn(l*l,e),add:(l,d)=>Jn(l+d,e),sub:(l,d)=>Jn(l-d,e),mul:(l,d)=>Jn(l*d,e),pow:(l,d)=>Lk(u,l,d),div:(l,d)=>Jn(l*Ed(d,e),e),sqrN:l=>l*l,addN:(l,d)=>l+d,subN:(l,d)=>l-d,mulN:(l,d)=>l*d,inv:l=>Ed(l,e),sqrt:r.sqrt||(l=>o(u,l)),invertBatch:l=>TU(u,l),cmov:(l,d,f)=>f?d:l,toBytes:l=>n?Qy(l,i):Wc(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return n?Jy(l):pr(l)}});return Object.freeze(u)}function Oj(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)}function Nj(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n}function Rj(e,t,n=!1){e=ensureBytes("privateHash",e);const r=e.length,s=l0(t).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);const i=n?bytesToNumberLE(e):bytesToNumberBE(e);return Jn(i,t-Wt)+Wt}function Mk(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Vk(e){const t=Mk(e);return t+Math.ceil(t/2)}function xU(e,t,n=!1){const r=e.length,s=Mk(t),i=Vk(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?pr(e):Jy(e),u=Jn(o,t-Wt)+Wt;return n?Qy(u,s):Wc(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fk(e){const{Fp:t,mds:n,reversePartialPowIdx:r,roundConstants:s}=e,{roundsFull:i,roundsPartial:o,sboxPower:u,t:l}=e;ep(t);for(const T of["t","roundsFull","roundsPartial"])if(typeof e[T]!="number"||!Number.isSafeInteger(e[T]))throw new Error(`Poseidon: invalid param ${T}=${e[T]} (${typeof e[T]})`);if(!Array.isArray(n)||n.length!==l)throw new Error("Poseidon: wrong MDS matrix");const d=n.map(T=>{if(!Array.isArray(T)||T.length!==l)throw new Error(`Poseidon MDS matrix row: ${T}`);return T.map(I=>{if(typeof I!="bigint")throw new Error(`Poseidon MDS matrix value=${I}`);return t.create(I)})});if(r!==void 0&&typeof r!="boolean")throw new Error(`Poseidon: invalid param reversePartialPowIdx=${r}`);if(i%2!==0)throw new Error(`Poseidon roundsFull is not even: ${i}`);const f=i+o;if(!Array.isArray(s)||s.length!==f)throw new Error("Poseidon: wrong round constants");const g=s.map(T=>{if(!Array.isArray(T)||T.length!==l)throw new Error(`Poseidon wrong round constants: ${T}`);return T.map(I=>{if(typeof I!="bigint"||!t.isValid(I))throw new Error(`Poseidon wrong round constant=${I}`);return t.create(I)})});if(!u||![3,5,7].includes(u))throw new Error(`Poseidon wrong sboxPower=${u}`);const _=BigInt(u);let b=T=>Lk(t,T,_);return u===3?b=T=>t.mul(t.sqrN(T),T):u===5&&(b=T=>t.mul(t.sqrN(t.sqrN(T)),T)),Object.freeze({...e,rounds:f,sboxFn:b,roundConstants:g,mds:d})}function AU(e,t){if(typeof t!="number")throw new Error("poseidonSplitConstants: wrong t");if(!Array.isArray(e)||e.length%t)throw new Error("poseidonSplitConstants: wrong rc");const n=[];let r=[];for(let s=0;s<e.length;s++)r.push(e[s]),r.length===t&&(n.push(r),r=[]);return n}function Hk(e){const t=Fk(e),{Fp:n,mds:r,roundConstants:s,rounds:i,roundsPartial:o,sboxFn:u,t:l}=t,d=t.roundsFull/2,f=t.reversePartialPowIdx?l-1:0,g=(b,T,I)=>(b=b.map((k,Z)=>n.add(k,s[I][Z])),T?b=b.map(k=>u(k)):b[f]=u(b[f]),b=r.map(k=>k.reduce((Z,Q,ee)=>n.add(Z,n.mulN(Q,b[ee])),n.ZERO)),b),_=function(T){if(!Array.isArray(T)||T.length!==l)throw new Error(`Poseidon: wrong values (expected array of bigints with length ${l})`);T=T.map(k=>{if(typeof k!="bigint")throw new Error(`Poseidon: wrong value=${k} (${typeof k})`);return n.create(k)});let I=0;for(let k=0;k<d;k++)T=g(T,!0,I++);for(let k=0;k<o;k++)T=g(T,!1,I++);for(let k=0;k<d;k++)T=g(T,!0,I++);if(I!==i)throw new Error(`Poseidon: wrong number of rounds: last round=${I}, total=${i}`);return T};return _.roundConstants=s,_}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SU=BigInt(0),d0=BigInt(1);function kU(e,t){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=e.ZERO,u=s;for(;i>SU;)i&d0&&(o=o.add(u)),u=u.double(),i>>=d0;return o},precomputeWindow(s,i){const{windows:o,windowSize:u}=r(i),l=[];let d=s,f=d;for(let g=0;g<o;g++){f=d,l.push(f);for(let _=1;_<u;_++)f=f.add(d),l.push(f);d=f.double()}return l},wNAF(s,i,o){const{windows:u,windowSize:l}=r(s);let d=e.ZERO,f=e.BASE;const g=BigInt(2**s-1),_=2**s,b=BigInt(s);for(let T=0;T<u;T++){const I=T*l;let k=Number(o&g);o>>=b,k>l&&(k-=_,o+=d0);const Z=I,Q=I+Math.abs(k)-1,ee=T%2!==0,re=k<0;k===0?f=f.add(n(ee,i[Z])):d=d.add(n(re,i[Q]))}return{p:d,f}},wNAFCached(s,i,o,u){const l=s._WINDOW_SIZE||1;let d=i.get(s);return d||(d=this.precomputeWindow(s,l),l!==1&&i.set(s,u(d))),this.wNAF(l,d,o)}}}function $k(e){return ep(e.Fp),yd(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...l0(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function CU(e){const t=$k(e);yd(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{Ph:IU,aT:OU}=B,Ua={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Ua;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:IU(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Ua,n=typeof e=="string"?OU(e):e;if(!ua(n))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Ua._parseInt(n.subarray(2)),{d:o,l:u}=Ua._parseInt(i);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(e){const t=d=>Number.parseInt(d[0],16)&8?"00"+d:d,n=d=>{const f=d.toString(16);return f.length&1?`0${f}`:f},r=t(n(e.s)),s=t(n(e.r)),i=r.length/2,o=s.length/2,u=n(i),l=n(o);return`30${n(o+i+4)}02${l}${s}02${u}${r}`}},Es=BigInt(0),pn=BigInt(1),Ui=BigInt(2),tp=BigInt(3),jk=BigInt(4);function Zk(e){const t=CU(e),{Fp:n}=t,r=t.toBytes||((T,I,k)=>{const Z=I.toAffine();return qc(Uint8Array.from([4]),n.toBytes(Z.x),n.toBytes(Z.y))}),s=t.fromBytes||(T=>{const I=T.subarray(1),k=n.fromBytes(I.subarray(0,n.BYTES)),Z=n.fromBytes(I.subarray(n.BYTES,2*n.BYTES));return{x:k,y:Z}});function i(T){const{a:I,b:k}=t,Z=n.sqr(T),Q=n.mul(Z,T);return n.add(n.add(Q,n.mul(T,I)),k)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(T){return typeof T=="bigint"&&Es<T&&T<t.n}function u(T){if(!o(T))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(T){const{allowedPrivateKeyLengths:I,nByteLength:k,wrapPrivateKey:Z,n:Q}=t;if(I&&typeof T!="bigint"){if(ua(T)&&(T=Ri(T)),typeof T!="string"||!I.includes(T.length))throw new Error("Invalid key");T=T.padStart(k*2,"0")}let ee;try{ee=typeof T=="bigint"?T:pr(rs("private key",T,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof T}`)}return Z&&(ee=Jn(ee,Q)),u(ee),ee}const d=new Map;function f(T){if(!(T instanceof g))throw new Error("ProjectivePoint expected")}class g{constructor(I,k,Z){if(this.px=I,this.py=k,this.pz=Z,I==null||!n.isValid(I))throw new Error("x required");if(k==null||!n.isValid(k))throw new Error("y required");if(Z==null||!n.isValid(Z))throw new Error("z required")}static fromAffine(I){const{x:k,y:Z}=I||{};if(!I||!n.isValid(k)||!n.isValid(Z))throw new Error("invalid affine point");if(I instanceof g)throw new Error("projective point not allowed");const Q=ee=>n.eql(ee,n.ZERO);return Q(k)&&Q(Z)?g.ZERO:new g(k,Z,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const k=n.invertBatch(I.map(Z=>Z.pz));return I.map((Z,Q)=>Z.toAffine(k[Q])).map(g.fromAffine)}static fromHex(I){const k=g.fromAffine(s(rs("pointHex",I)));return k.assertValidity(),k}static fromPrivateKey(I){return g.BASE.multiply(l(I))}_setWindowSize(I){this._WINDOW_SIZE=I,d.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:I,y:k}=this.toAffine();if(!n.isValid(I)||!n.isValid(k))throw new Error("bad point: x or y not FE");const Z=n.sqr(k),Q=i(I);if(!n.eql(Z,Q))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:I}=this.toAffine();if(n.isOdd)return!n.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){f(I);const{px:k,py:Z,pz:Q}=this,{px:ee,py:re,pz:Se}=I,me=n.eql(n.mul(k,Se),n.mul(ee,Q)),oe=n.eql(n.mul(Z,Se),n.mul(re,Q));return me&&oe}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:I,b:k}=t,Z=n.mul(k,tp),{px:Q,py:ee,pz:re}=this;let Se=n.ZERO,me=n.ZERO,oe=n.ZERO,Ee=n.mul(Q,Q),Ie=n.mul(ee,ee),Ne=n.mul(re,re),_e=n.mul(Q,ee);return _e=n.add(_e,_e),oe=n.mul(Q,re),oe=n.add(oe,oe),Se=n.mul(I,oe),me=n.mul(Z,Ne),me=n.add(Se,me),Se=n.sub(Ie,me),me=n.add(Ie,me),me=n.mul(Se,me),Se=n.mul(_e,Se),oe=n.mul(Z,oe),Ne=n.mul(I,Ne),_e=n.sub(Ee,Ne),_e=n.mul(I,_e),_e=n.add(_e,oe),oe=n.add(Ee,Ee),Ee=n.add(oe,Ee),Ee=n.add(Ee,Ne),Ee=n.mul(Ee,_e),me=n.add(me,Ee),Ne=n.mul(ee,re),Ne=n.add(Ne,Ne),Ee=n.mul(Ne,_e),Se=n.sub(Se,Ee),oe=n.mul(Ne,Ie),oe=n.add(oe,oe),oe=n.add(oe,oe),new g(Se,me,oe)}add(I){f(I);const{px:k,py:Z,pz:Q}=this,{px:ee,py:re,pz:Se}=I;let me=n.ZERO,oe=n.ZERO,Ee=n.ZERO;const Ie=t.a,Ne=n.mul(t.b,tp);let _e=n.mul(k,ee),Ve=n.mul(Z,re),Qe=n.mul(Q,Se),le=n.add(k,Z),ce=n.add(ee,re);le=n.mul(le,ce),ce=n.add(_e,Ve),le=n.sub(le,ce),ce=n.add(k,Q);let ye=n.add(ee,Se);return ce=n.mul(ce,ye),ye=n.add(_e,Qe),ce=n.sub(ce,ye),ye=n.add(Z,Q),me=n.add(re,Se),ye=n.mul(ye,me),me=n.add(Ve,Qe),ye=n.sub(ye,me),Ee=n.mul(Ie,ce),me=n.mul(Ne,Qe),Ee=n.add(me,Ee),me=n.sub(Ve,Ee),Ee=n.add(Ve,Ee),oe=n.mul(me,Ee),Ve=n.add(_e,_e),Ve=n.add(Ve,_e),Qe=n.mul(Ie,Qe),ce=n.mul(Ne,ce),Ve=n.add(Ve,Qe),Qe=n.sub(_e,Qe),Qe=n.mul(Ie,Qe),ce=n.add(ce,Qe),_e=n.mul(Ve,ce),oe=n.add(oe,_e),_e=n.mul(ye,ce),me=n.mul(le,me),me=n.sub(me,_e),_e=n.mul(le,Ve),Ee=n.mul(ye,Ee),Ee=n.add(Ee,_e),new g(me,oe,Ee)}subtract(I){return this.add(I.negate())}is0(){return this.equals(g.ZERO)}wNAF(I){return b.wNAFCached(this,d,I,k=>{const Z=n.invertBatch(k.map(Q=>Q.pz));return k.map((Q,ee)=>Q.toAffine(Z[ee])).map(g.fromAffine)})}multiplyUnsafe(I){const k=g.ZERO;if(I===Es)return k;if(u(I),I===pn)return this;const{endo:Z}=t;if(!Z)return b.unsafeLadder(this,I);let{k1neg:Q,k1:ee,k2neg:re,k2:Se}=Z.splitScalar(I),me=k,oe=k,Ee=this;for(;ee>Es||Se>Es;)ee&pn&&(me=me.add(Ee)),Se&pn&&(oe=oe.add(Ee)),Ee=Ee.double(),ee>>=pn,Se>>=pn;return Q&&(me=me.negate()),re&&(oe=oe.negate()),oe=new g(n.mul(oe.px,Z.beta),oe.py,oe.pz),me.add(oe)}multiply(I){u(I);let k=I,Z,Q;const{endo:ee}=t;if(ee){const{k1neg:re,k1:Se,k2neg:me,k2:oe}=ee.splitScalar(k);let{p:Ee,f:Ie}=this.wNAF(Se),{p:Ne,f:_e}=this.wNAF(oe);Ee=b.constTimeNegate(re,Ee),Ne=b.constTimeNegate(me,Ne),Ne=new g(n.mul(Ne.px,ee.beta),Ne.py,Ne.pz),Z=Ee.add(Ne),Q=Ie.add(_e)}else{const{p:re,f:Se}=this.wNAF(k);Z=re,Q=Se}return g.normalizeZ([Z,Q])[0]}multiplyAndAddUnsafe(I,k,Z){const Q=g.BASE,ee=(Se,me)=>me===Es||me===pn||!Se.equals(Q)?Se.multiplyUnsafe(me):Se.multiply(me),re=ee(this,k).add(ee(I,Z));return re.is0()?void 0:re}toAffine(I){const{px:k,py:Z,pz:Q}=this,ee=this.is0();I==null&&(I=ee?n.ONE:n.inv(Q));const re=n.mul(k,I),Se=n.mul(Z,I),me=n.mul(Q,I);if(ee)return{x:n.ZERO,y:n.ZERO};if(!n.eql(me,n.ONE))throw new Error("invZ was invalid");return{x:re,y:Se}}isTorsionFree(){const{h:I,isTorsionFree:k}=t;if(I===pn)return!0;if(k)return k(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:k}=t;return I===pn?this:k?k(g,this):this.multiplyUnsafe(t.h)}toRawBytes(I=!0){return this.assertValidity(),r(g,this,I)}toHex(I=!0){return Ri(this.toRawBytes(I))}}g.BASE=new g(t.Gx,t.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const _=t.nBitLength,b=kU(g,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:g,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function NU(e){const t=$k(e);return yd(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function zk(e){const t=NU(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function o(ce){return Es<ce&&ce<n.ORDER}function u(ce){return Jn(ce,r)}function l(ce){return Ed(ce,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:f,weierstrassEquation:g,isWithinCurveOrder:_}=Zk({...t,toBytes(ce,ye,De){const Ke=ye.toAffine(),Ge=n.toBytes(Ke.x),gt=qc;return De?gt(Uint8Array.from([ye.hasEvenY()?2:3]),Ge):gt(Uint8Array.from([4]),Ge,n.toBytes(Ke.y))},fromBytes(ce){const ye=ce.length,De=ce[0],Ke=ce.subarray(1);if(ye===s&&(De===2||De===3)){const Ge=pr(Ke);if(!o(Ge))throw new Error("Point is not on curve");const gt=g(Ge);let Nt=n.sqrt(gt);const Xt=(Nt&pn)===pn;return(De&1)===1!==Xt&&(Nt=n.neg(Nt)),{x:Ge,y:Nt}}else if(ye===i&&De===4){const Ge=n.fromBytes(Ke.subarray(0,n.BYTES)),gt=n.fromBytes(Ke.subarray(n.BYTES,2*n.BYTES));return{x:Ge,y:gt}}else throw new Error(`Point of length ${ye} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),b=ce=>Ri(Wc(ce,t.nByteLength));function T(ce){const ye=r>>pn;return ce>ye}function I(ce){return T(ce)?u(-ce):ce}const k=(ce,ye,De)=>pr(ce.slice(ye,De));class Z{constructor(ye,De,Ke){this.r=ye,this.s=De,this.recovery=Ke,this.assertValidity()}static fromCompact(ye){const De=t.nByteLength;return ye=rs("compactSignature",ye,De*2),new Z(k(ye,0,De),k(ye,De,2*De))}static fromDER(ye){const{r:De,s:Ke}=Ua.toSig(rs("DER",ye));return new Z(De,Ke)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ye){return new Z(this.r,this.s,ye)}recoverPublicKey(ye){const{r:De,s:Ke,recovery:Ge}=this,gt=oe(rs("msgHash",ye));if(Ge==null||![0,1,2,3].includes(Ge))throw new Error("recovery id invalid");const Nt=Ge===2||Ge===3?De+t.n:De;if(Nt>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Xt=Ge&1?"03":"02",vn=d.fromHex(Xt+b(Nt)),fn=l(Nt),Kr=u(-gt*fn),Sr=u(Ke*fn),is=d.BASE.multiplyAndAddUnsafe(vn,Kr,Sr);if(!is)throw new Error("point at infinify");return is.assertValidity(),is}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new Z(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Bi(this.toDERHex())}toDERHex(){return Ua.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bi(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}const Q={isValidPrivateKey(ce){try{return f(ce),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const ce=Vk(t.n);return xU(t.randomBytes(ce),t.n)},precompute(ce=8,ye=d.BASE){return ye._setWindowSize(ce),ye.multiply(BigInt(3)),ye}};function ee(ce,ye=!0){return d.fromPrivateKey(ce).toRawBytes(ye)}function re(ce){const ye=ua(ce),De=typeof ce=="string",Ke=(ye||De)&&ce.length;return ye?Ke===s||Ke===i:De?Ke===2*s||Ke===2*i:ce instanceof d}function Se(ce,ye,De=!0){if(re(ce))throw new Error("first arg must be private key");if(!re(ye))throw new Error("second arg must be public key");return d.fromHex(ye).multiply(f(ce)).toRawBytes(De)}const me=t.bits2int||function(ce){const ye=pr(ce),De=ce.length*8-t.nBitLength;return De>0?ye>>BigInt(De):ye},oe=t.bits2int_modN||function(ce){return u(me(ce))},Ee=Yh(t.nBitLength);function Ie(ce){if(typeof ce!="bigint")throw new Error("bigint expected");if(!(Es<=ce&&ce<Ee))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Wc(ce,t.nByteLength)}function Ne(ce,ye,De=_e){if(["recovered","canonical"].some(kr=>kr in De))throw new Error("sign() legacy options not supported");const{hash:Ke,randomBytes:Ge}=t;let{lowS:gt,prehash:Nt,extraEntropy:Xt}=De;gt==null&&(gt=!0),ce=rs("msgHash",ce),Nt&&(ce=rs("prehashed msgHash",Ke(ce)));const vn=oe(ce),fn=f(ye),Kr=[Ie(fn),Ie(vn)];if(Xt!=null){const kr=Xt===!0?Ge(n.BYTES):Xt;Kr.push(rs("extraEntropy",kr))}const Sr=qc(...Kr),is=vn;function Is(kr){const ha=me(kr);if(!_(ha))return;const ji=l(ha),Kn=d.BASE.multiply(ha).toAffine(),os=u(Kn.x);if(os===Es)return;const Os=u(ji*u(is+os*fn));if(Os===Es)return;let Hd=(Kn.x===os?0:2)|Number(Kn.y&pn),_I=Os;return gt&&T(Os)&&(_I=I(Os),Hd^=1),new Z(os,_I,Hd)}return{seed:Sr,k2sig:Is}}const _e={lowS:t.lowS,prehash:!1},Ve={lowS:t.lowS,prehash:!1};function Qe(ce,ye,De=_e){const{seed:Ke,k2sig:Ge}=Ne(ce,ye,De),gt=t;return _k(gt.hash.outputLen,gt.nByteLength,gt.hmac)(Ke,Ge)}d.BASE._setWindowSize(8);function le(ce,ye,De,Ke=Ve){const Ge=ce;if(ye=rs("msgHash",ye),De=rs("publicKey",De),"strict"in Ke)throw new Error("options.strict was renamed to lowS");const{lowS:gt,prehash:Nt}=Ke;let Xt,vn;try{if(typeof Ge=="string"||ua(Ge))try{Xt=Z.fromDER(Ge)}catch(Kn){if(!(Kn instanceof Ua.Err))throw Kn;Xt=Z.fromCompact(Ge)}else if(typeof Ge=="object"&&typeof Ge.r=="bigint"&&typeof Ge.s=="bigint"){const{r:Kn,s:os}=Ge;Xt=new Z(Kn,os)}else throw new Error("PARSE");vn=d.fromHex(De)}catch(Kn){if(Kn.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(gt&&Xt.hasHighS())return!1;Nt&&(ye=t.hash(ye));const{r:fn,s:Kr}=Xt,Sr=oe(ye),is=l(Kr),Is=u(Sr*is),kr=u(fn*is),ha=d.BASE.multiplyAndAddUnsafe(vn,Is,kr)?.toAffine();return ha?u(ha.x)===fn:!1}return{CURVE:t,getPublicKey:ee,getSharedSecret:Se,sign:Qe,verify:le,ProjectivePoint:d,Signature:Z,utils:Q}}function Kk(e,t){const n=e.ORDER;let r=Es;for(let T=n-pn;T%Ui===Es;T/=Ui)r+=pn;const s=r,i=Ui<<s-pn-pn,o=i*Ui,u=(n-pn)/o,l=(u-pn)/Ui,d=o-pn,f=i,g=e.pow(t,u),_=e.pow(t,(u+pn)/Ui);let b=(T,I)=>{let k=g,Z=e.pow(I,d),Q=e.sqr(Z);Q=e.mul(Q,I);let ee=e.mul(T,Q);ee=e.pow(ee,l),ee=e.mul(ee,Z),Z=e.mul(ee,I),Q=e.mul(ee,T);let re=e.mul(Q,Z);ee=e.pow(re,f);let Se=e.eql(ee,e.ONE);Z=e.mul(Q,_),ee=e.mul(re,k),Q=e.cmov(Z,Q,Se),re=e.cmov(ee,re,Se);for(let me=s;me>pn;me--){let oe=me-Ui;oe=Ui<<oe-pn;let Ee=e.pow(re,oe);const Ie=e.eql(Ee,e.ONE);Z=e.mul(Q,k),k=e.mul(k,k),Ee=e.mul(re,k),Q=e.cmov(Z,Q,Ie),re=e.cmov(Ee,re,Ie)}return{isValid:Se,value:Q}};if(e.ORDER%jk===tp){const T=(e.ORDER-tp)/jk,I=e.sqrt(e.neg(t));b=(k,Z)=>{let Q=e.sqr(Z);const ee=e.mul(k,Z);Q=e.mul(Q,ee);let re=e.pow(Q,T);re=e.mul(re,ee);const Se=e.mul(re,I),me=e.mul(e.sqr(re),Z),oe=e.eql(me,k);let Ee=e.cmov(Se,re,oe);return{isValid:oe,value:Ee}}}return b}function RU(e,t){if(ep(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=Kk(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,u,l,d,f,g;s=e.sqr(r),s=e.mul(s,t.Z),i=e.sqr(s),i=e.add(i,s),o=e.add(i,e.ONE),o=e.mul(o,t.B),u=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),u=e.mul(u,t.A),i=e.sqr(o),d=e.sqr(u),l=e.mul(d,t.A),i=e.add(i,l),i=e.mul(i,o),d=e.mul(d,u),l=e.mul(d,t.B),i=e.add(i,l),f=e.mul(s,o);const{isValid:_,value:b}=n(i,d);g=e.mul(s,r),g=e.mul(g,b),f=e.cmov(f,o,_),g=e.cmov(g,b,_);const T=e.isOdd(r)===e.isOdd(g);return g=e.cmov(e.neg(g),g,T),f=e.div(f,u),{x:f,y:g}}}class Wk extends o0{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,yk(t);const r=Gc(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Uo(this),this.iHash.update(t),this}digestInto(t){Uo(this),Xh(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qk=(e,t,n)=>new Wk(e,t).update(n).digest();qk.create=(e,t)=>new Wk(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gk(e){return{hash:e,hmac:(t,...n)=>qk(e,t,J8(...n)),randomBytes:eU}}function Bj(e,t){const n=r=>weierstrass({...e,...Gk(r)});return Object.freeze({...n(t),create:n})}const vd=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),Mo=BigInt("0x800000000000000000000000000000000000000000000000000000000000000"),Yk=252;function Xk(e){for(;e[0]===0;)e=e.subarray(1);const t=e.length*8-Yk,n=pr(e);return t>0?n>>BigInt(t):n}function Jk(e){return typeof e=="string"&&(e=p0(e),e.length&1&&(e="0"+e)),Bi(e)}const Vo=zk({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:Uk(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:vd,nBitLength:Yk,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...Gk(c0),bits2int:Xk,bits2int_modN:e=>{const t=pr(e).toString(16);return t.length===63&&(e=Jk(t+"0")),Jn(Xk(e),vd)}}),BU=Vo;function Yc(e){return rs("",typeof e=="string"?Jk(e):e)}function f0(e){return Ri(Yc(e)).padStart(64,"0")}function Qk(e,t=!1){return Vo.getPublicKey(f0(e),t)}function DU(e,t){return Vo.getSharedSecret(f0(e),t)}function eC(e){const{r:t,s:n}=e;if(t<0n||t>=Mo)throw new Error(`Signature.r should be [1, ${Mo})`);const r=Ed(n,vd);if(r<0n||r>=Mo)throw new Error(`inv(Signature.s) should be [1, ${Mo})`)}function tC(e){const t=Yc(e);if(pr(t)>=Mo)throw new Error(`msgHash should be [0, ${Mo})`);return t}function Td(e,t,n){const r=Vo.sign(tC(e),f0(t),n);return eC(r),r}function PU(e,t,n){if(!(e instanceof np)){const r=Yc(e);try{e=np.fromDER(r)}catch(s){if(!(s instanceof Ua.Err))throw s;e=np.fromCompact(r)}}return eC(e),Vo.verify(e,tC(t),Yc(n))}const{CURVE:LU,ProjectivePoint:Xc,Signature:np,utils:h0}=Vo;function nC(e){return`0x${Ri(e.subarray(1)).replace(/^0+/gm,"")}`}function p0(e){return e.replace(/^0x/i,"")}function rC(e){const t=Yc(e),n=2n**256n,r=n-Jn(n,vd);for(let s=0;;s++){const i=m0(qc(t,e0(BigInt(s))));if(i<r)return Jn(i,vd).toString(16);if(s===1e5)throw new Error("grindKey is broken: tried 100k vals")}}function g0(e){return nC(Qk(e,!0))}function UU(e){if(e=p0(e),e.length!==130)throw new Error("Wrong ethereum signature");return rC(e.substring(0,64))}const MU=2n**31n-1n,rp=e=>Number(e&MU);function VU(e,t,n,r){const s=rp(m0(e)),i=rp(m0(t)),o=Gh(p0(n));return`m/2645'/${s}'/${i}'/${rp(o)}'/${rp(o>>31n)}'/${r}`}const xd=[new Xc(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new Xc(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new Xc(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new Xc(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new Xc(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function sC(e,t){const n=[];let r=e;for(let s=0;s<248;s++)n.push(r),r=r.double();r=t;for(let s=0;s<4;s++)n.push(r),r=r.double();return n}const FU=sC(xd[1],xd[2]),HU=sC(xd[3],xd[4]);function $U(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"){if(!Number.isSafeInteger(e))throw new Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=pr(Yc(e));if(!(0n<=t&&t<Vo.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}function aC(e,t,n){let r=$U(t);for(let s=0;s<252;s++){const i=n[s];if(i.equals(e))throw new Error("Same point");(r&1n)!==0n&&(e=e.add(i)),r>>=1n}return e}function Ad(e,t){let n=xd[0];return n=aC(n,e,FU),n=aC(n,t,HU),nC(n.toRawBytes(!0))}const jU=(e,t=Ad)=>[0,...e,e.length].reduce((n,r)=>t(n,r)),ZU=Yh(250),Jc=e=>pr(lU(e))&ZU,m0=e=>pr(c0(e)),iC=Uk(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function _0(e,t,n){const r=e.fromBytes(c0(Sk(`${t}${n}`)));return e.create(r)}function oC(e,t,n,r=0){const s=[],i=[];for(let o=0;o<n;o++)s.push(_0(e,`${t}x`,r*n+o)),i.push(_0(e,`${t}y`,r*n+o));if(new Set([...s,...i]).size!==2*n)throw new Error("X and Y values are not distinct");return s.map(o=>i.map(u=>e.inv(e.sub(o,u))))}const zU=[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt));function y0(e,t){if(ep(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw new Error(`Wrong poseidon opts: ${e}`);const n=e.rate+e.capacity,r=e.roundsFull+e.roundsPartial,s=[];for(let o=0;o<r;o++){const u=[];for(let l=0;l<n;l++)u.push(_0(e.Fp,"Hades",n*o+l));s.push(u)}const i=Hk({...e,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:s});return i.m=n,i.rate=e.rate,i.capacity=e.capacity,i}function KU(e,t=0){const n=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw new Error(`Wrong mdsAttempt=${t}`);return y0(e,oC(e.Fp,"HadesMDS",n,t))}const Sd=y0({Fp:iC,rate:2,capacity:1,roundsFull:8,roundsPartial:83},zU);function b0(e,t,n=Sd){return n([e,t,2n])[0]}function WU(e,t,n=Sd){return e0(b0(pr(e),pr(t),n))}function qU(e,t=Sd){return t([e,0n,1n])[0]}function Ma(e,t=Sd){const{m:n,rate:r}=t;if(!Array.isArray(e))throw new Error("bigint array expected in values");const s=Array.from(e);for(s.push(1n);s.length%r!==0;)s.push(0n);let i=new Array(n).fill(0n);for(let o=0;o<s.length;o+=r){for(let u=0;u<r;u++)i[u]+=s[o+u];i=t(i)}return i[0]}function kd(e){return GU.test(e)}var GU=/^-?[0-9]+$/;function cC(e){return YU.test(e)}var YU=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function XU(e,t){var n=parseFloat(e),r=String(n),s=lC(e),i=lC(r);if(s===i)return!0;if(t?.approx===!0){var o=14;if(!kd(e)&&i.length>=o&&s.startsWith(i.substring(0,o)))return!0}return!1}var Qc=function(e){return e.underflow="underflow",e.overflow="overflow",e.truncate_integer="truncate_integer",e.truncate_float="truncate_float",e}({});function uC(e){if(!XU(e,{approx:!1})){if(kd(e))return Qc.truncate_integer;var t=parseFloat(e);return isFinite(t)?t===0?Qc.underflow:Qc.truncate_float:Qc.overflow}}function Dj(e,t){var n=parseFloat(e),r=uC(e);if(t?.approx===!0?r&&r!==Qc.truncate_float:r){var s=r.replace(/_\w+$/,"");throw new Error("Cannot safely convert to number: "+"the value '".concat(e,"' would ").concat(s," and become ").concat(n))}return n}function lC(e){return e.replace(JU,"").replace(eM,"").replace(tM,"").replace(QU,"")}var JU=/[eE][+-]?\d+$/,QU=/^-?(0*)?/,eM=/\./,tM=/0+$/;function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function nM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fC(r.key),r)}}function rM(e,t,n){return t&&dC(e.prototype,t),n&&dC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sM(e,t,n){return t=fC(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fC(e){var t=aM(e,"string");return eu(t)==="symbol"?t:String(t)}function aM(e,t){if(eu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(eu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hC=function(){function e(t){if(nM(this,e),sM(this,"isLosslessNumber",!0),!cC(t))throw new Error('Invalid number (value: "'+t+'")');this.value=t}return rM(e,[{key:"valueOf",value:function(){var n=uC(this.value);if(n===void 0||n===Qc.truncate_float)return parseFloat(this.value);if(kd(this.value))return BigInt(this.value);throw new Error("Cannot safely convert to number: "+"the value '".concat(this.value,"' would ").concat(n," and become ").concat(parseFloat(this.value)))}},{key:"toString",value:function(){return this.value}}]),e}();function iM(e){return e&&eu(e)==="object"&&e.isLosslessNumber===!0||!1}function Pj(e){if(extractSignificantDigits(e+"").length>15)throw new Error("Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself "+"(value: ".concat(e,")"));if(isNaN(e))throw new Error("Invalid number: NaN");if(!isFinite(e))throw new Error("Invalid number: "+e);return new hC(String(e))}function oM(e){return new hC(e)}function cM(e){return kd(e)?BigInt(e):parseFloat(e)}function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}function uM(e,t){return E0({"":e},"",e,t)}function E0(e,t,n,r){return Array.isArray(n)?r.call(e,t,dM(n,r)):n&&w0(n)==="object"&&!iM(n)?r.call(e,t,lM(n,r)):r.call(e,t,n)}function lM(e,t){return Object.keys(e).forEach(function(n){var r=E0(e,n,e[n],t);r!==void 0?e[n]=r:delete e[n]}),e}function dM(e,t){for(var n=0;n<e.length;n++)e[n]=E0(e,n+"",e[n],t);return e}function v0(e){"@babel/helpers - typeof";return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v0(e)}function T0(e){return gM(e)||pM(e)||hM(e)||fM()}function fM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hM(e,t){if(e){if(typeof e=="string")return x0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x0(e,t)}}function pM(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gM(e){if(Array.isArray(e))return x0(e)}function x0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pC(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oM,r=0,s=u();return T(s),k(),t?uM(s,t):s;function i(){if(e.charCodeAt(r)===EM){r++,d();for(var le={},ce=!0;r<e.length&&e.charCodeAt(r)!==mC;){ce?ce=!1:(_(),d());var ye=r,De=f();De===void 0&&ee(),d(),b();var Ke=u();Ke===void 0&&Ie(),Object.prototype.hasOwnProperty.call(le,De)&&!A0(Ke,le[De])&&re(De,ye+1),le[De]=Ke}return e.charCodeAt(r)!==mC&&Se(),r++,le}}function o(){if(e.charCodeAt(r)===vM){r++,d();for(var le=[],ce=!0;r<e.length&&e.charCodeAt(r)!==_C;){ce?ce=!1:_();var ye=u();I(ye),le.push(ye)}return e.charCodeAt(r)!==_C&&me(),r++,le}}function u(){var le,ce,ye,De,Ke,Ge;d();var gt=(le=(ce=(ye=(De=(Ke=(Ge=f())!==null&&Ge!==void 0?Ge:g())!==null&&Ke!==void 0?Ke:i())!==null&&De!==void 0?De:o())!==null&&ye!==void 0?ye:l("true",!0))!==null&&ce!==void 0?ce:l("false",!1))!==null&&le!==void 0?le:l("null",null);return d(),gt}function l(le,ce){if(e.slice(r,r+le.length)===le)return r+=le.length,ce}function d(){for(;mM(e.charCodeAt(r));)r++}function f(){if(e.charCodeAt(r)===S0){r++;for(var le="";r<e.length&&e.charCodeAt(r)!==S0;){if(e.charCodeAt(r)===wM){var ce=e[r+1],ye=bM[ce];ye!==void 0?(le+=ye,r++):ce==="u"?sp(e.charCodeAt(r+2))&&sp(e.charCodeAt(r+3))&&sp(e.charCodeAt(r+4))&&sp(e.charCodeAt(r+5))?(le+=String.fromCharCode(parseInt(e.slice(r+2,r+6),16)),r+=5):Ne(r):Ee(r)}else yM(e.charCodeAt(r))?le+=e[r]:oe(e[r]);r++}return Q(),r++,le}}function g(){var le=r;if(e.charCodeAt(r)===yC&&(r++,Z(le)),e.charCodeAt(r)===k0)r++;else if(_M(e.charCodeAt(r)))for(r++;ap(e.charCodeAt(r));)r++;if(e.charCodeAt(r)===OM)for(r++,Z(le);ap(e.charCodeAt(r));)r++;if(e.charCodeAt(r)===PM||e.charCodeAt(r)===DM)for(r++,(e.charCodeAt(r)===yC||e.charCodeAt(r)===kM)&&r++,Z(le);ap(e.charCodeAt(r));)r++;if(r>le)return n(e.slice(le,r))}function _(){if(e.charCodeAt(r)!==IM)throw new SyntaxError("Comma ',' expected after value ".concat(Qe()));r++}function b(){if(e.charCodeAt(r)!==NM)throw new SyntaxError("Colon ':' expected after property name ".concat(Qe()));r++}function T(le){if(le===void 0)throw new SyntaxError("JSON value expected ".concat(Qe()))}function I(le){if(le===void 0)throw new SyntaxError("Array item expected ".concat(Qe()))}function k(){if(r<e.length)throw new SyntaxError("Expected end of input ".concat(Qe()))}function Z(le){if(!ap(e.charCodeAt(r))){var ce=e.slice(le,r);throw new SyntaxError("Invalid number '".concat(ce,"', expecting a digit ").concat(Qe()))}}function Q(){if(e.charCodeAt(r)!==S0)throw new SyntaxError(`End of string '"' expected `.concat(Qe()))}function ee(){throw new SyntaxError("Quoted object key expected ".concat(Qe()))}function re(le,ce){throw new SyntaxError("Duplicate key '".concat(le,"' encountered at position ").concat(ce))}function Se(){throw new SyntaxError("Quoted object key or end of object '}' expected ".concat(Qe()))}function me(){throw new SyntaxError("Array item or end of array ']' expected ".concat(Qe()))}function oe(le){throw new SyntaxError("Invalid character '".concat(le,"' ").concat(_e()))}function Ee(le){var ce=e.slice(le,le+2);throw new SyntaxError("Invalid escape character '".concat(ce,"' ").concat(_e()))}function Ie(){throw new SyntaxError("Object value expected after ':' ".concat(_e()))}function Ne(le){for(var ce=le+2;/\w/.test(e[ce]);)ce++;var ye=e.slice(le,ce);throw new SyntaxError("Invalid unicode character '".concat(ye,"' ").concat(_e()))}function _e(){return"at position ".concat(r)}function Ve(){return r<e.length?"but got '".concat(e[r],"'"):"but reached end of input"}function Qe(){return Ve()+" "+_e()}}function mM(e){return e===TM||e===xM||e===AM||e===SM}function sp(e){return e>=k0&&e<=C0||e>=RM&&e<=LM||e>=BM&&e<=UM}function ap(e){return e>=k0&&e<=C0}function _M(e){return e>=CM&&e<=C0}function yM(e){return e>=32&&e<=1114111}function A0(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(function(r,s){return A0(r,t[s])});if(gC(e)&&gC(t)){var n=T0(new Set([].concat(T0(Object.keys(e)),T0(Object.keys(t)))));return n.every(function(r){return A0(e[r],t[r])})}return!1}function gC(e){return v0(e)==="object"&&e!==null}var bM={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},wM=92,EM=123,mC=125,vM=91,_C=93,TM=32,xM=10,AM=9,SM=13,S0=34,kM=43,yC=45,k0=48,CM=49,C0=57,IM=44,OM=46,NM=58,RM=65,BM=97,DM=69,PM=101,LM=70,UM=102;function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function bC(e,t,n,r){var s=MM(n),i=typeof t=="function"?t.call({"":e},"",e):e;return o(i,"");function o(f,g){if(Array.isArray(r)){var _=r.find(function(T){return T.test(f)});if(_){var b=_.stringify(f);if(typeof b!="string"||!cC(b))throw new Error("Invalid JSON number: output of a number stringifier must be a string containing a JSON number "+"(output: ".concat(b,")"));return b}}if(typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f===null||f instanceof Date||f instanceof Boolean||f instanceof Number||f instanceof String)return JSON.stringify(f);if(f&&f.isLosslessNumber||typeof f=="bigint")return f.toString();if(Array.isArray(f))return u(f,g);if(f&&ip(f)==="object")return l(f,g)}function u(f,g){if(f.length===0)return"[]";for(var _=s?g+s:void 0,b=s?`[
`:"[",T=0;T<f.length;T++){var I=typeof t=="function"?t.call(f,String(T),f[T]):f[T];s&&(b+=_),typeof I<"u"&&typeof I!="function"?b+=o(I,_):b+="null",T<f.length-1&&(b+=s?`,
`:",")}return b+=s?`
`+g+"]":"]",b}function l(f,g){if(typeof f.toJSON=="function")return bC(f.toJSON(),t,n,void 0);var _=Array.isArray(t)?t.map(String):Object.keys(f);if(_.length===0)return"{}";var b=s?g+s:void 0,T=!0,I=s?`{
`:"{";return _.forEach(function(k){var Z=typeof t=="function"?t.call(f,k,f[k]):f[k];if(d(k,Z)){T?T=!1:I+=s?`,
`:",";var Q=JSON.stringify(k);I+=s?b+Q+": ":Q+":",I+=o(Z,b)}}),I+=s?`
`+g+"}":"}",I}function d(f,g){return typeof g<"u"&&typeof g!="function"&&ip(g)!=="symbol"}}function MM(e){if(typeof e=="number")return" ".repeat(e);if(typeof e=="string"&&e!=="")return e}var VM=je(29969),wC=je(62797),FM=Object.defineProperty,Un=(e,t)=>{for(var n in t)FM(e,n,{get:t[n],enumerable:!0})},HM={};Un(HM,{ADDR_BOUND:()=>B0,API_VERSION:()=>DC,BN_FEE_TRANSACTION_VERSION_1:()=>NC,BN_FEE_TRANSACTION_VERSION_2:()=>RC,BN_TRANSACTION_VERSION_1:()=>N0,BN_TRANSACTION_VERSION_2:()=>R0,BaseUrl:()=>LC,HEX_STR_TRANSACTION_VERSION_1:()=>IC,HEX_STR_TRANSACTION_VERSION_2:()=>OC,IS_BROWSER:()=>EC,MASK_250:()=>BC,MAX_STORAGE_ITEM_SIZE:()=>PC,NetworkName:()=>D0,RPC_DEFAULT_VERSION:()=>VC,RPC_NODES:()=>FC,StarknetChainId:()=>UC,TEXT_TO_FELT_MAX_LEN:()=>O0,TransactionHashPrefix:()=>MC,UDC:()=>Fo,ZERO:()=>xr});var $M={};Un($M,{IS_BROWSER:()=>EC,addHexPrefix:()=>Qn,arrayBufferToString:()=>vC,atobUniversal:()=>TC,btoaUniversal:()=>xC,buf2hex:()=>AC,calcByteLength:()=>kC,padLeft:()=>SC,pascalToSnake:()=>KM,removeHexPrefix:()=>Va,sanitizeBytes:()=>CC,sanitizeHex:()=>zM,stringToArrayBuffer:()=>jM,utf8ToArray:()=>tu});var EC=typeof window<"u",I0="0";function vC(e){return new Uint8Array(e).reduce((t,n)=>t+String.fromCharCode(n),"")}function tu(e){return new TextEncoder().encode(e)}function jM(e){return tu(e)}function TC(e){return Yy.decode(e)}function xC(e){return Yy.encode(new Uint8Array(e))}function AC(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function Va(e){return e.replace(/^0x/i,"")}function Qn(e){return`0x${Va(e)}`}function ZM(e,t,n,r=I0){const s=t-e.length;let i=e;if(s>0){const o=r.repeat(s);i=n?o+e:e+o}return i}function SC(e,t,n=I0){return ZM(e,t,!0,n)}function kC(e,t=8){const{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function CC(e,t=8,n=I0){return SC(e,kC(e,t),n)}function zM(e){return e=Va(e),e=CC(e,2),e&&(e=Qn(e)),e}var KM=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e,O0=31,IC="0x1",OC="0x2",N0=1n,R0=2n,NC=2n**128n+N0,RC=2n**128n+R0,xr=0n,BC=2n**250n-1n,DC=xr,PC=256n,B0=2n**251n-PC,LC=(e=>(e.SN_MAIN="https://alpha-mainnet.starknet.io",e.SN_GOERLI="https://alpha4.starknet.io",e.SN_SEPOLIA="https://alpha-sepolia.starknet.io",e))(LC||{}),D0=(e=>(e.SN_MAIN="SN_MAIN",e.SN_GOERLI="SN_GOERLI",e.SN_SEPOLIA="SN_SEPOLIA",e))(D0||{}),UC=(e=>(e.SN_MAIN="0x534e5f4d41494e",e.SN_GOERLI="0x534e5f474f45524c49",e.SN_SEPOLIA="0x534e5f5345504f4c4941",e))(UC||{}),MC=(e=>(e.DECLARE="0x6465636c617265",e.DEPLOY="0x6465706c6f79",e.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",e.INVOKE="0x696e766f6b65",e.L1_HANDLER="0x6c315f68616e646c6572",e))(MC||{}),Fo={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},VC="v0_5",FC={SN_GOERLI:["https://starknet-testnet.public.blastapi.io/rpc/","https://free-rpc.nethermind.io/goerli-juno/"],SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/","https://free-rpc.nethermind.io/mainnet-juno/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/","https://free-rpc.nethermind.io/sepolia-juno/"]},WM={};Un(WM,{BlockStatus:()=>qC,BlockTag:()=>U0,EntryPointType:()=>jC,Literal:()=>L0,RPC:()=>Zr,SIMULATION_FLAG:()=>HC,Sequencer:()=>XM,TransactionExecutionStatus:()=>WC,TransactionFinalityStatus:()=>KC,TransactionStatus:()=>zC,TransactionType:()=>ZC,TypedDataRevision:()=>M0,Uint:()=>P0,ValidateType:()=>$C});var HC=(e=>(e.SKIP_VALIDATE="SKIP_VALIDATE",e.SKIP_EXECUTE="SKIP_EXECUTE",e))(HC||{}),$C=(e=>(e.DEPLOY="DEPLOY",e.CALL="CALL",e.INVOKE="INVOKE",e))($C||{}),P0=(e=>(e.u8="core::integer::u8",e.u16="core::integer::u16",e.u32="core::integer::u32",e.u64="core::integer::u64",e.u128="core::integer::u128",e.u256="core::integer::u256",e))(P0||{}),L0=(e=>(e.ClassHash="core::starknet::class_hash::ClassHash",e.ContractAddress="core::starknet::contract_address::ContractAddress",e))(L0||{}),jC=(e=>(e.EXTERNAL="EXTERNAL",e.L1_HANDLER="L1_HANDLER",e.CONSTRUCTOR="CONSTRUCTOR",e))(jC||{}),ZC=(e=>(e.DECLARE="DECLARE",e.DEPLOY="DEPLOY",e.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.INVOKE="INVOKE_FUNCTION",e))(ZC||{}),zC=(e=>(e.NOT_RECEIVED="NOT_RECEIVED",e.RECEIVED="RECEIVED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.REJECTED="REJECTED",e.REVERTED="REVERTED",e))(zC||{}),KC=(e=>(e.NOT_RECEIVED="NOT_RECEIVED",e.RECEIVED="RECEIVED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(KC||{}),WC=(e=>(e.REJECTED="REJECTED",e.REVERTED="REVERTED",e.SUCCEEDED="SUCCEEDED",e))(WC||{}),qC=(e=>(e.PENDING="PENDING",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.REJECTED="REJECTED",e))(qC||{}),U0=(e=>(e.pending="pending",e.latest="latest",e))(U0||{}),M0=(e=>(e.Active="1",e.Legacy="0",e))(M0||{}),Zr={};Un(Zr,{EBlockTag:()=>e2,EDataAvailabilityMode:()=>t2,ESimulationFlag:()=>YC,ETransactionExecutionStatus:()=>QC,ETransactionFinalityStatus:()=>JC,ETransactionStatus:()=>XC,ETransactionType:()=>GC,Errors:()=>GM,JRPC:()=>qM,SPEC:()=>YM});var qM={},GM={},YM={},GC=(e=>(e.DECLARE="DECLARE",e.DEPLOY="DEPLOY",e.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.INVOKE="INVOKE",e.L1_HANDLER="L1_HANDLER",e))(GC||{}),YC=(e=>(e.SKIP_VALIDATE="SKIP_VALIDATE",e.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",e))(YC||{}),XC=(e=>(e.RECEIVED="RECEIVED",e.REJECTED="REJECTED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(XC||{}),JC=(e=>(e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(JC||{}),QC=(e=>(e.SUCCEEDED="SUCCEEDED",e.REVERTED="REVERTED",e))(QC||{}),e2=(e=>(e.LATEST="latest",e.PENDING="pending",e))(e2||{}),t2=(e=>(e.L1="L1",e.L2="L2",e))(t2||{}),XM={};function Yt(e,t){if(!e)throw new Error(t||"Assertion failure")}var JM={};Un(JM,{assertInRange:()=>s2,bigNumberishArrayToDecimalStringArray:()=>a2,bigNumberishArrayToHexadecimalStringArray:()=>i2,cleanHex:()=>Cd,getDecimalString:()=>o2,getHexString:()=>F0,getHexStringArray:()=>H0,hexToBytes:()=>c2,hexToDecimalString:()=>r2,isBigInt:()=>op,isHex:()=>vs,isStringWholeNumber:()=>nu,toBigInt:()=>ft,toCairoBool:()=>$0,toHex:()=>Ze,toHexString:()=>V0,toStorageKey:()=>n2});function vs(e){return/^0x[0-9a-f]*$/i.test(e)}function ft(e){return BigInt(e)}function op(e){return typeof e=="bigint"}function Ze(e){return Qn(ft(e).toString(16))}var V0=Ze;function n2(e){return Qn(ft(e).toString(16).padStart(64,"0"))}function r2(e){return BigInt(Qn(e)).toString(10)}var Cd=e=>e.toLowerCase().replace(/^(0x)0+/,"$1");function s2(e,t,n,r=""){const s=r===""?"invalid length":`invalid ${r} length`,i=BigInt(e),o=BigInt(t),u=BigInt(n);Yt(i>=o&&i<=u,`Message not signable, ${s}.`)}function a2(e){return e.map(t=>ft(t).toString(10))}function i2(e){return e.map(t=>Ze(t))}var nu=e=>/^\d+$/.test(e);function o2(e){if(vs(e))return r2(e);if(nu(e))return e;throw new Error(`${e} need to be hex-string or whole-number-string`)}function F0(e){if(vs(e))return e;if(nu(e))return V0(e);throw new Error(`${e} need to be hex-string or whole-number-string`)}function H0(e){return e.map(t=>F0(t))}var $0=e=>(+e).toString();function c2(e){if(!vs(e))throw new Error(`${e} need to be a hex-string`);let t=Va(e);return t.length%2!==0&&(t=`0${t}`),Bi(t)}var QM={};Un(QM,{getSelector:()=>cp,getSelectorFromName:()=>Ts,keccakBn:()=>j0,starknetKeccak:()=>Z0});function j0(e){const t=Va(Ze(BigInt(e))),n=t.length%2===0?t:`0${t}`;return Qn(Jc(c2(Qn(n))).toString(16))}function eV(e){return Qn(Jc(tu(e)).toString(16))}function Z0(e){return BigInt(eV(e))&BC}function Ts(e){return Ze(Z0(e))}function cp(e){return vs(e)?e:nu(e)?V0(e):Ts(e)}var tV={};Un(tV,{decodeShortString:()=>W0,encodeShortString:()=>Fa,isASCII:()=>z0,isDecimalString:()=>u2,isLongText:()=>K0,isShortString:()=>Id,isShortText:()=>nV,isText:()=>Od,splitLongString:()=>up});function z0(e){return/^[\x00-\x7F]*$/.test(e)}function Id(e){return e.length<=O0}function u2(e){return/^[0-9]*$/i.test(e)}function Od(e){return typeof e=="string"&&!vs(e)&&!nu(e)}var nV=e=>Od(e)&&Id(e),K0=e=>Od(e)&&!Id(e);function up(e){const t=RegExp(`[^]{1,${O0}}`,"g");return e.match(t)||[]}function Fa(e){if(!z0(e))throw new Error(`${e} is not an ASCII string`);if(!Id(e))throw new Error(`${e} is too long`);return Qn(e.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function W0(e){if(!z0(e))throw new Error(`${e} is not an ASCII string`);if(vs(e))return Va(e).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(u2(e))return W0("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}var l2={};Un(l2,{felt:()=>Ar,getAbiContractVersion:()=>gp,getArrayType:()=>ru,isCairo1Abi:()=>p2,isCairo1Type:()=>Hi,isLen:()=>Ho,isTypeArray:()=>Mi,isTypeBool:()=>pp,isTypeContractAddress:()=>aV,isTypeEnum:()=>$o,isTypeEthAddress:()=>h2,isTypeFelt:()=>dp,isTypeLiteral:()=>X0,isTypeNamedTuple:()=>f2,isTypeOption:()=>fp,isTypeResult:()=>hp,isTypeStruct:()=>Nd,isTypeTuple:()=>Vi,isTypeUint:()=>Y0,isTypeUint256:()=>Fi,tuple:()=>iV,uint256:()=>J0});var rV={};Un(rV,{UINT_128_MAX:()=>q0,UINT_256_MAX:()=>d2,bnToUint256:()=>sV,isUint256:()=>G0,uint256ToBN:()=>lp});var q0=(1n<<128n)-1n,d2=(1n<<256n)-1n;function lp(e){return(ft(e.high)<<128n)+ft(e.low)}function G0(e){return ft(e)<=d2}function sV(e){const t=ft(e);if(!G0(t))throw new Error("Number is too large");return{low:Qn((t&q0).toString(16)),high:Qn((t>>128n).toString(16))}}var Ho=e=>/_len$/.test(e),dp=e=>e==="felt"||e==="core::felt252",Mi=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),Vi=e=>/^\(.*\)$/i.test(e),f2=e=>/\(.*\)/i.test(e)&&e.includes(":"),Nd=(e,t)=>e in t,$o=(e,t)=>e in t,fp=e=>e.startsWith("core::option::Option::"),hp=e=>e.startsWith("core::result::Result::"),Y0=e=>Object.values(P0).includes(e),X0=e=>Object.values(L0).includes(e),Fi=e=>e==="core::integer::u256",pp=e=>e==="core::bool",aV=e=>e==="core::starknet::contract_address::ContractAddress",h2=e=>e==="core::starknet::eth_address::EthAddress",Hi=e=>e.includes("::"),ru=e=>Hi(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function p2(e){const{cairo:t}=gp(e);if(t===void 0)throw Error("Unable to determine Cairo version");return t==="1"}function gp(e){if(e.find(r=>r.type==="interface"))return{cairo:"1",compiler:"2"};const t=e.find(r=>r.type==="function"&&(r.inputs.length||r.outputs.length));if(!t)return{cairo:void 0,compiler:void 0};const n=t.inputs.length?t.inputs:t.outputs;return Hi(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var J0=e=>{const t=BigInt(e);if(!G0(t))throw new Error("Number is too large");return{low:(t&q0).toString(10),high:(t>>128n).toString(10)}},iV=(...e)=>({...e});function Ar(e){if(op(e)||typeof e=="number"&&Number.isInteger(e))return e.toString();if(Od(e)){if(!Id(e))throw new Error(`${e} is a long string > 31 chars, felt can store short strings, split it to array of short strings`);const t=Fa(e);return BigInt(t).toString()}if(typeof e=="string"&&vs(e))return BigInt(e).toString();if(typeof e=="string"&&nu(e))return e;if(typeof e=="boolean")return`${+e}`;throw new Error(`${e} can't be computed by felt()`)}var g2=class{constructor(e){W(this,"variant");const t=Object.values(e);if(t.length===0)throw new Error("This Enum must have at least 1 variant");if(t.filter(r=>typeof r<"u").length!==1)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){const t=Object.entries(this.variant).find(n=>typeof n[1]<"u");if(!(typeof t>"u"))return t[1]}activeVariant(){const t=Object.entries(this.variant).find(n=>typeof n[1]<"u");return typeof t>"u"?"":t[0]}},m2=(e=>(e[e.Some=0]="Some",e[e.None=1]="None",e))(m2||{}),Q0=class{constructor(e,t){W(this,"Some");W(this,"None");if(!(e in m2))throw new Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(e===0){if(typeof t>"u")throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){if(!this.None)return this.Some}isSome(){return!(typeof this.Some>"u")}isNone(){return this.None===!0}},_2=(e=>(e[e.Ok=0]="Ok",e[e.Err=1]="Err",e))(_2||{}),eb=class{constructor(e,t){W(this,"Ok");W(this,"Err");if(!(e in _2))throw new Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");e===0?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(typeof this.Ok<"u")return this.Ok;if(typeof this.Err<"u")return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!(typeof this.Ok>"u")}isErr(){return!(typeof this.Err>"u")}},tb={isBN:(e,t,n)=>{if(!op(e[n]))throw new Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)},unknown:(e,t,n)=>{throw new Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)}};function mp(e,t,n){return Object.entries(e).reduce((r,[s,i])=>{const o=n??t[s];if(!(s in t)&&!n)return r[s]=i,r;if(o==="string"){if(Array.isArray(e[s])){const u=mp(e[s],e[s].map(l=>o));return r[s]=Object.values(u).join(""),r}return tb.isBN(e,t,s),r[s]=W0(i),r}if(o==="number")return tb.isBN(e,t,s),r[s]=Number(i),r;if(typeof o=="function")return r[s]=o(i),r;if(Array.isArray(o)){const u=mp(e[s],o,o[0]);return r[s]=Object.values(u),r}return typeof o=="object"?(r[s]=mp(e[s],o),r):(tb.unknown(e,t,s),r)},{})}var oV=class{constructor(e){W(this,"abi");this.abi=e}methodInputsLength(e){return e.inputs.reduce((t,n)=>Ho(n.name)?t:t+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},cV=class{constructor(e){W(this,"abi");this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){return this.abi.find(n=>n.type==="interface").items.find(n=>n.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>e.type==="interface"?e.items:e)}};function y2(e){const t=uV(e);if(t===0||t===1)return new oV(e);if(t===2)return new cV(e);throw Error(`Unsupported ABI version ${t}`)}function uV(e){return e.find(t=>t.type==="interface")?2:p2(e)?1:0}function b2(e,t,n){return e==="constructor"&&!n&&!t.length}function lV(e){const t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}function w2(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let n="",r=0;for(;r<e.length;){if(e[r]==="("){let s=1;const i=r;for(r++;s;)e[r]===")"&&s--,e[r]==="("&&s++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}function dV(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=w2(t);let s=r.split(",").map(i=>n.length?i.replace(" ",n.shift()):i);return f2(e)&&(s=s.reduce((i,o)=>i.concat(lV(o)),[])),s}function fV(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=w2(t);return r.split(",").map(i=>n.length?i.replace(" ",n.shift()):i)}function nb(e){return Hi(e)?fV(e):dV(e)}function hV(e){return Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`)}function pV(e,t,n,r){const s=(f,g)=>{if(Mi(g))return o(f,g);if($o(g,r)){const _=r[g];return l(f,_)}if(Vi(g))return u(f,g);if(h2(g))return f;if(Fi(g)){const _=f;if(typeof _!="object")return _;if(!("low"in _&&"high"in _))throw hV(g);return{low:_.low,high:_.high}}if(Nd(g,n)){const _=n[g].members;return i(f,_)}return f},i=(f,g)=>g.reduce((b,T)=>{const I=k=>Object.defineProperty(b,T.name,{enumerable:!0,value:k??f[T.name]});if(f[T.name]==="undefined"&&(Hi(T.type)||!Ho(T.name)))throw Error(`Your object needs a property with key : ${T.name} .`);return I(s(f[T.name],T.type)),b},{});function o(f,g){const _=ru(g);return typeof f=="string"?f:f.map(b=>s(b,_))}function u(f,g){return nb(g).reduce((T,I,k)=>{const Z=Object.keys(f),Q=re=>Object.defineProperty(T,k.toString(),{enumerable:!0,value:re??f[Z[k]]}),ee=I?.type?I.type:I;return Q(s(f[Z[k]],ee)),T},{})}const l=(f,g)=>{if(hp(g.name)){const I=f,k=g.name.substring(g.name.indexOf("<")+1,g.name.lastIndexOf(",")),Z=g.name.substring(g.name.indexOf(",")+1,g.name.lastIndexOf(">"));return I.isOk()?new eb(0,s(f.unwrap(),k)):new eb(1,s(f.unwrap(),Z))}if(fp(g.name)){const I=f,k=g.name.substring(g.name.indexOf("<")+1,g.name.lastIndexOf(">"));return I.isSome()?new Q0(0,s(I.unwrap(),k)):new Q0(1,{})}const _=f,T=Object.entries(_.variant).map(I=>{if(typeof I[1]>"u")return I;const k=g.type.substring(g.type.lastIndexOf("<")+1,g.type.lastIndexOf(">"));return k==="()"?I:[I[0],s(_.unwrap(),k)]});return new g2(Object.fromEntries(T))};return t.reduce((f,g)=>{const _=b=>Object.defineProperty(f,g.name,{enumerable:!0,value:b});return Ho(g.name)&&!Hi(g.type)||_(s(e[g.name],g.type)),f},{})}function _p(e,t){switch(!0){case Fi(e):const n=J0(t);return[Ar(n.low),Ar(n.high)];default:return Ar(t)}}function gV(e,t){const n=nb(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${r} 
      expected: ${n}`);return n.map((s,i)=>({element:r[i],type:s.type??s}))}function E2(e){if(typeof e=="object"){const{low:n,high:r}=e;return[Ar(n),Ar(r)]}const t=J0(e);return[Ar(t.low),Ar(t.high)]}function da(e,t,n,r){if(e===void 0)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){const s=[];s.push(Ar(e.length));const i=ru(t);return e.reduce((o,u)=>o.concat(da(u,i,n,r)),s)}if(n[t]&&n[t].members.length){if(Fi(t))return E2(e);if(t==="core::starknet::eth_address::EthAddress")return _p(t,e);const{members:s}=n[t],i=e;return s.reduce((o,u)=>o.concat(da(i[u.name],u.type,n,r)),[])}if(Vi(t))return gV(e,t).reduce((i,o)=>{const u=da(o.element,o.type,n,r);return i.concat(u)},[]);if(Fi(t))return E2(e);if($o(t,r)){const{variants:s}=r[t];if(fp(t)){const g=e;if(g.isSome()){const _=s.find(I=>I.name==="Some");if(typeof _>"u")throw Error("Error in abi : Option has no 'Some' variant.");const b=_.type;if(b==="()")return"0";const T=da(g.unwrap(),b,n,r);return Array.isArray(T)?["0",...T]:["0",T]}return"1"}if(hp(t)){const g=e;if(g.isOk()){const I=s.find(Q=>Q.name==="Ok");if(typeof I>"u")throw Error("Error in abi : Result has no 'Ok' variant.");const k=I.type;if(k==="()")return"0";const Z=da(g.unwrap(),k,n,r);return Array.isArray(Z)?["0",...Z]:["0",Z]}const _=s.find(I=>I.name==="Err");if(typeof _>"u")throw Error("Error in abi : Result has no 'Err' variant.");const b=_.type;if(b==="()")return"1";const T=da(g.unwrap(),b,n,r);return Array.isArray(T)?["1",...T]:["1",T]}const i=e,o=i.activeVariant(),u=s.find(g=>g.name===o);if(typeof u>"u")throw Error(`Not find in abi : Enum has no '${o}' variant.`);const l=u.type,d=s.findIndex(g=>g.name===o);if(l==="()")return d.toString();const f=da(i.unwrap(),l,n,r);return Array.isArray(f)?[d.toString(),...f]:[d.toString(),f]}if(typeof e=="object")throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return _p(t,e)}function mV(e,t,n,r){const{name:s,type:i}=t;let{value:o}=e.next();switch(!0){case Mi(i):if(!Array.isArray(o)&&!Od(o))throw Error(`ABI expected parameter ${s} to be array or long string, got ${o}`);return typeof o=="string"&&(o=up(o)),da(o,t.type,n,r);case i==="core::starknet::eth_address::EthAddress":return _p(i,o);case(Nd(i,n)||Vi(i)||Fi(i)):return da(o,i,n,r);case $o(i,r):return da(o,i,n,r);default:return _p(i,o)}}function rb(e,t){let n;switch(!0){case pp(e):return n=t.next().value,!!BigInt(n);case Fi(e):const r=t.next().value,s=t.next().value;return lp({low:r,high:s});case e==="core::starknet::eth_address::EthAddress":return n=t.next().value,BigInt(n);default:return n=t.next().value,BigInt(n)}}function Ha(e,t,n,r){if(t.type==="()")return{};if(Fi(t.type)){const s=e.next().value,i=e.next().value;return lp({low:s,high:i})}if(Mi(t.type)){const s=[],i={name:"",type:ru(t.type)},o=BigInt(e.next().value);for(;s.length<o;)s.push(Ha(e,i,n,r));return s}if(n&&t.type in n&&n[t.type])return t.type==="core::starknet::eth_address::EthAddress"?rb(t.type,e):n[t.type].members.reduce((s,i)=>(s[i.name]=Ha(e,i,n,r),s),{});if(r&&t.type in r&&r[t.type]){const s=Number(e.next().value),i=r[t.type].variants.reduce((u,l,d)=>d===s?(u[l.name]=Ha(e,{name:"",type:l.type},n,r),u):(u[l.name]=void 0,u),{});if(t.type.startsWith("core::option::Option")){const u=s===0?i.Some:void 0;return new Q0(s,u)}if(t.type.startsWith("core::result::Result")){let u;return s===0?u=i.Ok:u=i.Err,new eb(s,u)}return new g2(i)}if(Vi(t.type))return nb(t.type).reduce((i,o,u)=>{const l=o?.name?o.name:u,d=o?.type?o.type:o,f={name:l,type:d};return i[l]=Ha(e,f,n,r),i},{});if(Mi(t.type)){const s=[],i={name:"",type:ru(t.type)},o=BigInt(e.next().value);for(;s.length<o;)s.push(Ha(e,i,n,r));return s}return rb(t.type,e)}function yp(e,t,n,r,s){const{name:i,type:o}=t;let u;switch(!0){case Ho(i):return u=e.next().value,BigInt(u);case(n&&o in n||Vi(o)):return Ha(e,t,n,r);case(r&&$o(o,r)):return Ha(e,t,n,r);case Mi(o):if(Hi(o))return Ha(e,t,n,r);const l=[];if(s&&s[`${i}_len`]){const d=s[`${i}_len`];for(;l.length<d;)l.push(Ha(e,{name:i,type:t.type.replace("*","")},n,r))}return l;default:return rb(o,e)}}var v2=(e,t)=>{if(Yt(typeof e=="string"||typeof e=="number"||typeof e=="bigint",`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),typeof e=="string"&&!vs(e))return;const n=BigInt(e.toString(10));Yt(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},sb=(e,t)=>{typeof e=="number"&&Yt(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),Yt(typeof e=="string"||typeof e=="number"||typeof e=="bigint"||typeof e=="object"&&"low"in e&&"high"in e,`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`);const n=typeof e=="object"?lp(e):ft(e);switch(t.type){case"core::integer::u8":Yt(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case"core::integer::u16":Yt(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case"core::integer::u32":Yt(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case"core::integer::u64":Yt(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case"core::integer::u128":Yt(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case"core::integer::u256":Yt(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} 0 - 2^256-1`);break;case"core::starknet::class_hash::ClassHash":Yt(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case"core::starknet::contract_address::ContractAddress":Yt(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;default:break}},T2=(e,t)=>{Yt(typeof e=="boolean",`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},x2=(e,t,n)=>{if(t.type==="core::integer::u256"){sb(e,t);return}if(t.type==="core::starknet::eth_address::EthAddress"){Yt(typeof e!="object",`EthAddress type is waiting a BigNumberish. Got ${e}`);const r=BigInt(e.toString(10));Yt(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}Yt(typeof e=="object"&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as js object (not array)`),n[t.type].members.forEach(({name:r})=>{Yt(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},A2=(e,t)=>{Yt(typeof e=="object"&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(fp(t.type)&&r.includes("isSome")&&r.includes("isNone"))&&!(hp(t.type)&&r.includes("isOk")&&r.includes("isErr"))&&!(r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received ${e}, is not an Enum.`)},S2=(e,t)=>{Yt(typeof e=="object"&&!Array.isArray(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},k2=(e,t,n,r)=>{const s=ru(t.type);if(!(dp(s)&&K0(e)))switch(Yt(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case dp(s):e.forEach(i=>v2(i,t));break;case Vi(s):e.forEach(i=>S2(i,{name:t.name,type:s}));break;case Mi(s):e.forEach(i=>k2(i,{name:"",type:s},n,r));break;case Nd(s,n):e.forEach(i=>x2(i,{name:t.name,type:s},n));break;case $o(s,r):e.forEach(i=>A2(i,{name:t.name,type:s}));break;case(Y0(s)||X0(s)):e.forEach(i=>sb(i,t));break;case pp(s):e.forEach(i=>T2(i,t));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}};function C2(e,t,n,r){e.inputs.reduce((s,i)=>{const o=t[s];switch(!0){case Ho(i.name):return s;case dp(i.type):v2(o,i);break;case(Y0(i.type)||X0(i.type)):sb(o,i);break;case pp(i.type):T2(o,i);break;case Mi(i.type):k2(o,i,n,r);break;case Nd(i.type,n):x2(o,i,n);break;case $o(i.type,r):A2(o,i);break;case Vi(i.type):S2(o,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${o}`)}return s+1},0)}var Lt=class{constructor(e){W(this,"abi");W(this,"parser");W(this,"structs");W(this,"enums");this.structs=Lt.getAbiStruct(e),this.enums=Lt.getAbiEnum(e),this.parser=y2(e),this.abi=this.parser.getLegacyFormat()}validate(e,t,n=[]){if(e!=="DEPLOY"){const i=this.abi.filter(o=>{if(o.type!=="function")return!1;const u=o.stateMutability==="view"||o.state_mutability==="view";return e==="INVOKE"?!u:u}).map(o=>o.name);Yt(i.includes(t),`${e==="INVOKE"?"invocable":"viewable"} method not found in abi`)}const r=this.abi.find(i=>e==="DEPLOY"?i.name===t&&i.type==="constructor":i.name===t&&i.type==="function");if(b2(t,n,r))return;const s=this.parser.methodInputsLength(r);if(n.length!==s)throw Error(`Invalid number of arguments, expected ${s} arguments, but got ${n.length}`);C2(r,n,this.structs,this.enums)}compile(e,t){const n=this.abi.find(o=>o.name===e);if(b2(e,t,n))return[];let r;if(Array.isArray(t))r=t;else{const o=pV(t,n.inputs,this.structs,this.enums);r=Object.values(o),C2(n,r,this.structs,this.enums)}const s=r[Symbol.iterator](),i=n.inputs.reduce((o,u)=>Ho(u.name)&&!Hi(u.type)?o:o.concat(mV(s,u,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){const t=r=>{const s=(o,u=".")=>{const l=Array.isArray(o)?[o.length.toString(),...o]:o;return Object.entries(l).flatMap(([d,f])=>{let g=f;d==="entrypoint"?g=Ts(g):K0(g)&&(g=up(g));const _=Array.isArray(l)&&d==="0"?"$$len":d;if(op(g))return[[`${u}${_}`,Ar(g)]];if(Object(g)===g){const b=Object.getOwnPropertyNames(Object.getPrototypeOf(g)),T=[...Object.getOwnPropertyNames(g),...b];if(T.includes("isSome")&&T.includes("isNone")){const I=g,k=I.isSome()?0:1;return I.isSome()?s({0:k,1:I.unwrap()},`${u}${_}.`):[[`${u}${_}`,Ar(k)]]}if(T.includes("isOk")&&T.includes("isErr")){const I=g,k=I.isOk()?0:1;return s({0:k,1:I.unwrap()},`${u}${_}.`)}if(T.includes("variant")&&T.includes("activeVariant")){const I=g,k=I.activeVariant(),Q=Object.keys(I.variant).findIndex(ee=>ee===k);return typeof I.unwrap()=="object"&&Object.keys(I.unwrap()).length===0?[[`${u}${_}`,Ar(Q)]]:s({0:Q,1:I.unwrap()},`${u}${_}.`)}return s(g,`${u}${_}.`)}return[[`${u}${_}`,Ar(g)]]})};return Object.fromEntries(s(r))};let n;if(Array.isArray(e)){const r={...e},s=t(r);n=Object.values(s)}else{const r=t(e);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(e,t){const{outputs:n}=this.abi.find(i=>i.name===e),r=t.flat()[Symbol.iterator](),s=n.flat().reduce((i,o,u)=>{const l=o.name??u;return i[l]=yp(r,o,this.structs,this.enums,i),i[l]&&i[`${l}_len`]&&delete i[`${l}_len`],i},{});return Object.keys(s).length===1&&0 in s?s[0]:s}format(e,t,n){const r=this.parse(e,t);return mp(r,n)}static getAbiStruct(e){return e.filter(t=>t.type==="struct").reduce((t,n)=>({...t,[n.name]:n}),{})}static getAbiEnum(e){const t=e.filter(n=>n.type==="enum").reduce((n,r)=>({...n,[r.name]:r}),{});return delete t["core::bool"],t}static toCalldata(e=[]){return Lt.compile(e)}static toHex(e=[]){return Lt.compile(e).map(n=>Ze(n))}decodeParameters(e,t){const n=Array.isArray(e)?e:[e],r=t.flat()[Symbol.iterator](),s=n.map(i=>yp(r,{name:"",type:i},this.structs,this.enums));return s.length===1?s[0]:s}},_V={};Un(_V,{calculateContractAddressFromHash:()=>wp,calculateDeclareTransactionHash:()=>P2,calculateDeployAccountTransactionHash:()=>L2,calculateDeployTransactionHash:()=>wV,calculateTransactionHash:()=>U2,calculateTransactionHashCommon:()=>Dd,computeCompiledClassHash:()=>F2,computeContractClassHash:()=>$2,computeHashOnElements:()=>ss,computeLegacyContractClassHash:()=>V2,computePedersenHash:()=>Bd,computePedersenHashOnElements:()=>B2,computePoseidonHash:()=>R2,computePoseidonHashOnElements:()=>D2,computeSierraContractClassHash:()=>H2,default:()=>M2,feeTransactionVersion:()=>su,feeTransactionVersion_2:()=>bp,formatSpaces:()=>Pd,getSelector:()=>cp,getSelectorFromName:()=>Ts,getVersionsByType:()=>ab,keccakBn:()=>j0,poseidon:()=>S,starknetKeccak:()=>Z0,transactionVersion:()=>jo,transactionVersion_2:()=>Rd});var I2={};Un(I2,{starkCurve:()=>j,weierstrass:()=>F});var O2={};Un(O2,{parse:()=>$i,parseAlwaysAsBig:()=>N2,stringify:()=>xs,stringifyAlwaysAsBig:()=>bV});var yV=e=>{if(!kd(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},$i=e=>pC(String(e),void 0,yV),N2=e=>pC(String(e),void 0,cM),xs=(e,t,n,r)=>bC(e,t,n,r),bV=xs,jo=N0,Rd=R0,su=NC,bp=RC;function ab(e){return e==="fee"?{v1:su,v2:bp}:{v1:jo,v2:Rd}}function Bd(e,t){return Ad(BigInt(e),BigInt(t))}function R2(e,t){return Ze(b0(BigInt(e),BigInt(t)))}function ss(e){return[...e,e.length].reduce((t,n)=>Ad(BigInt(t),BigInt(n)),0).toString()}var B2=ss;function D2(e){return Ze(Ma(e.map(t=>BigInt(t))))}function Dd(e,t,n,r,s,i,o,u=[]){const l=ss(s),d=[e,t,n,r,l,i,o,...u];return ss(d)}function wV(e,t,n,r,s="constructor"){return Dd("0x6465706c6f79",n,e,Ts(s),t,0,r)}function P2(e,t,n,r,s,i,o){return Dd("0x6465636c617265",n,t,0,[e],r,s,[i,...o?[o]:[]])}function L2(e,t,n,r,s,i,o,u){const l=[t,r,...n];return Dd("0x6465706c6f795f6163636f756e74",s,e,0,l,i,o,[u])}function U2(e,t,n,r,s,i){return Dd("0x696e766f6b65",t,e,0,n,r,s,[i])}function wp(e,t,n,r){const s=Lt.compile(n),i=ss(s),o=Ar("0x535441524b4e45545f434f4e54524143545f41444452455353"),u=ss([o,r,e,t,i]);return Ze(BigInt(u)%B0)}function EV(e,t){return e==="attributes"||e==="accessible_scopes"?Array.isArray(t)&&t.length===0?void 0:t:e==="debug_info"?null:t===null?void 0:t}function Pd(e){let t=!1;const n=[];for(const r of e)r==='"'&&!(n.length>0&&n.slice(-1)[0]==="\\")&&(t=!t),t?n.push(r):n.push(r===":"?": ":r===","?", ":r);return n.join("")}function M2(e){const{abi:t,program:n}=e,s=Pd(xs({abi:t,program:n},EV));return Qn(Jc(tu(s)).toString(16))}function V2(e){const t=typeof e=="string"?$i(e):e,n=Ze(DC),r=ss(t.entry_points_by_type.EXTERNAL.flatMap(d=>[d.selector,d.offset])),s=ss(t.entry_points_by_type.L1_HANDLER.flatMap(d=>[d.selector,d.offset])),i=ss(t.entry_points_by_type.CONSTRUCTOR.flatMap(d=>[d.selector,d.offset])),o=ss(t.program.builtins.map(d=>Fa(d))),u=M2(t),l=ss(t.program.data);return ss([n,r,s,i,o,u,l])}function vV(e){return Ma(e.flatMap(t=>BigInt(Fa(t))))}function ib(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.offset),vV(n.builtins)]);return Ma(t)}function F2(e){const n=BigInt(Fa("COMPILED_CLASS_V1")),r=ib(e.entry_points_by_type.EXTERNAL),s=ib(e.entry_points_by_type.L1_HANDLER),i=ib(e.entry_points_by_type.CONSTRUCTOR),o=Ma(e.bytecode.map(u=>BigInt(u)));return Ze(Ma([n,r,s,i,o]))}function ob(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.function_idx)]);return Ma(t)}function TV(e){const t=Pd(xs(e.abi,null));return BigInt(Qn(Jc(tu(t)).toString(16)))}function H2(e){const n=BigInt(Fa("CONTRACT_CLASS_V0.1.0")),r=ob(e.entry_points_by_type.EXTERNAL),s=ob(e.entry_points_by_type.L1_HANDLER),i=ob(e.entry_points_by_type.CONSTRUCTOR),o=TV(e),u=Ma(e.sierra_program.map(l=>BigInt(l)));return Ze(Ma([n,r,s,i,o,u]))}function $2(e){const t=typeof e=="string"?$i(e):e;return"sierra_program"in t?H2(t):V2(t)}var xV={};Un(xV,{compressProgram:()=>cb,decompressProgram:()=>Ep,estimatedFeeToMaxFee:()=>Zo,formatSignature:()=>vp,makeAddress:()=>AV,randomAddress:()=>ub,signatureToDecimalArray:()=>au,signatureToHexArray:()=>iu});function cb(e){const t=typeof e=="string"?e:xs(e),n=Ef(t);return xC(n)}function Ep(e){if(Array.isArray(e))return e;const t=vC(vf(TC(e)));return $i(t)}function ub(){const e=h0.randomPrivateKey();return g0(e)}function AV(e){return Qn(e).toLowerCase()}function vp(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(t=>Ze(t));try{const{r:t,s:n}=e;return[Ze(t),Ze(n)]}catch{throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function au(e){return a2(vp(e))}function iu(e){return i2(vp(e))}function Zo(e,t=.5){const n=Math.round((1+t)*100);return ft(e)*ft(n)/100n}function zr(e){return"sierra_program"in(typeof e=="string"?$i(e):e)}function lb(e){const t={...e};if(zr(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=F2(e.casm)),!t.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??$2(e.contract),!t.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}function Lj(e){if(zr(e))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const t=e;return{...t,program:Ep(t.program)}}var j2=typeof window<"u"&&window.fetch||typeof global<"u"&&global.fetch||VM,SV={};Un(SV,{createSierraContractClass:()=>Z2,parseContract:()=>db,wait:()=>Tp});function Tp(e){return new Promise(t=>{setTimeout(t,e)})}function Z2(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=Pd(xs(e.abi)),t.sierra_program=Pd(xs(e.sierra_program)),t.sierra_program=cb(t.sierra_program),t}function db(e){const t=typeof e=="string"?$i(e):e;return zr(e)?Z2(t):{...t,..."program"in t&&{program:cb(t.program)}}}var kV=class{parseGetBlockResponse(e){return{timestamp:e.timestamp,block_hash:"block_hash"in e?e.block_hash:"",block_number:"block_number"in e?e.block_number:-1,new_root:"new_root"in e?e.new_root:"",parent_hash:e.parent_hash,status:"status"in e?e.status:"PENDING",transactions:e.transactions}}parseGetTransactionResponse(e){return{calldata:"calldata"in e?e.calldata:[],contract_address:"contract_address"in e?e.contract_address:"",sender_address:"sender_address"in e?e.sender_address:"",max_fee:"max_fee"in e?e.max_fee:"",nonce:"nonce"in e?e.nonce:"",signature:"signature"in e?e.signature:[],transaction_hash:e.transaction_hash,version:e.version}}parseFeeEstimateResponse(e){return{overall_fee:ft(e[0].overall_fee),gas_consumed:ft(e[0].gas_consumed),gas_price:ft(e[0].gas_price)}}parseFeeEstimateBulkResponse(e){return e.map(t=>({overall_fee:ft(t.overall_fee),gas_consumed:ft(t.gas_consumed),gas_price:ft(t.gas_price)}))}parseCallContractResponse(e){return{result:e}}parseSimulateTransactionResponse(e){return e.map(t=>({...t,suggestedMaxFee:Zo(BigInt(t.fee_estimation.overall_fee))}))}parseContractClassResponse(e){return{...e,abi:typeof e.abi=="string"?JSON.parse(e.abi):e.abi}}};function CV(e,t=e.constructor){const{captureStackTrace:n}=Error;n&&n(e,t)}function IV(e,t){const{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}var OV=class extends Error{constructor(t){super(t);W(this,"name");Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),IV(this,new.target.prototype),CV(this)}},zo=class extends OV{},NV=class extends zo{constructor(e,t){super(e),this.errorCode=t}},RV=class extends zo{constructor(e,t){super(e),this.errorCode=t}},BV={};Un(BV,{StarknetIdContract:()=>G2,getStarknetIdContract:()=>pb,useDecoded:()=>W2,useEncoded:()=>q2});var fa="abcdefghijklmnopqrstuvwxyz0123456789-",ou=BigInt(fa.length+1),zn="\u8FD9\u6765",z2=BigInt(fa.length),fb=BigInt(zn.length),K2=BigInt(zn.length+1);function hb(e){let t=0;for(;e.endsWith(zn[zn.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function W2(e){let t="";return e.forEach(n=>{for(;n!==xr;){const i=n%ou;if(n/=ou,i===BigInt(fa.length)){const o=n/K2;if(o===xr){const u=n%K2;n=o,u===xr?t+=fa[0]:t+=zn[Number(u)-1]}else{const u=n%fb;t+=zn[Number(u)],n/=fb}}else t+=fa[Number(i)]}const[r,s]=hb(t);s&&(t=r+(s%2===0?zn[zn.length-1].repeat(s/2-1)+zn[0]+fa[1]:zn[zn.length-1].repeat((s-1)/2+1))),t+="."}),t&&t.concat("stark")}function q2(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(zn[0]+fa[1])){const[r,s]=hb(e.substring(0,e.length-2));e=r+zn[zn.length-1].repeat(2*(s+1))}else{const[r,s]=hb(e);s&&(e=r+zn[zn.length-1].repeat(1+2*(s-1)))}for(let r=0;r<e.length;r+=1){const s=e[r],i=fa.indexOf(s),o=BigInt(fa.indexOf(s));if(i!==-1)r===e.length-1&&e[r]===fa[0]?(t+=n*z2,n*=ou,n*=ou):(t+=n*o,n*=ou);else if(zn.indexOf(s)!==-1){t+=n*z2,n*=ou;const u=(r===e.length-1?1:0)+zn.indexOf(s);t+=n*BigInt(u),n*=fb}}return t}var G2=(e=>(e.MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",e.TESTNET="0x3bab268e932d2cecd1946f100ae67ce3dff9fd234119ea2f6da57d16d29fce",e))(G2||{});function pb(e){switch(e){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f474f45524c49":return"0x3bab268e932d2cecd1946f100ae67ce3dff9fd234119ea2f6da57d16d29fce";default:throw new Error("Starknet.id is not yet deployed on this network")}}async function gb(e,t,n){const r=await e.getChainId(),s=n??pb(r);try{const o=(await e.callContract({contractAddress:s,entrypoint:"address_to_domain",calldata:Lt.compile({address:t})})).result.map(l=>BigInt(l)).slice(1),u=W2(o);if(!u)throw Error("Starkname not found");return u}catch(i){throw i instanceof Error&&i.message==="Starkname not found"?i:Error("Could not get stark name")}}async function mb(e,t,n){const r=await e.getChainId(),s=n??pb(r);try{return(await e.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:Lt.compile({domain:[q2(t.replace(".stark","")).toString(10)]})})).result[0]}catch{throw Error("Could not get address from stark name")}}var DV=Object.values(U0),gn=class{constructor(e){W(this,"hash",null);W(this,"number",null);W(this,"tag",null);W(this,"valueOf",()=>this.number);W(this,"toString",()=>this.hash);this.setIdentifier(e)}setIdentifier(e){typeof e=="string"&&vs(e)?this.hash=e:typeof e=="bigint"?this.hash=Ze(e):typeof e=="number"?this.number=e:typeof e=="string"&&DV.includes(e)?this.tag=e:this.tag="pending"}get queryIdentifier(){return this.number!==null?`blockNumber=${this.number}`:this.hash!==null?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return this.number!==null?{block_number:this.number}:this.hash!==null?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}get sequencerIdentifier(){return this.hash!==null?{blockHash:this.hash}:{blockNumber:this.number??this.tag}}},Y2=(e,t=!1,n=VC)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");const r=FC[e??"SN_GOERLI"],s=Math.floor(Math.random()*r.length);return`${r[s]}${n}`},_b={headers:{"Content-Type":"application/json"},blockIdentifier:"pending",retries:200},Ld=class{constructor(e){W(this,"nodeUrl");W(this,"headers");W(this,"responseParser",new kV);W(this,"retries");W(this,"blockIdentifier");W(this,"chainId");W(this,"getBlockHashAndNumber",this.getBlockLatestAccepted);W(this,"getStateUpdate",this.getBlockStateUpdate);W(this,"traceBlockTransactions",this.getBlockTransactionsTraces);W(this,"getTransactionCount",this.getBlockTransactionCount);W(this,"traceTransaction",this.getTransactionTrace);W(this,"getSimulateTransaction",this.simulateTransaction);const{nodeUrl:t,retries:n,headers:r,blockIdentifier:s,chainId:i,rpcVersion:o}=e||{};Object.values(D0).includes(t)?this.nodeUrl=Y2(t,e?.default,o):t?this.nodeUrl=t:this.nodeUrl=Y2(void 0,e?.default,o),this.retries=n||_b.retries,this.headers={..._b.headers,...r},this.blockIdentifier=s||_b.blockIdentifier,this.chainId=i}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return j2(this.nodeUrl,{method:"POST",body:xs(r),headers:this.headers})}errorHandler(e,t,n,r){if(n){const{code:s,message:i,data:o}=n;throw new zo(`RPC: ${e} with params ${xs(t)}
 ${s}: ${i}: ${xs(o)}`)}if(r instanceof zo)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{const n=await this.fetch(e,t),{error:r,result:s}=await n.json();return this.errorHandler(e,t,r),s}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async getNonceForAddress(e,t=this.blockIdentifier){const n=Ze(e),r=new gn(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}async getBlock(e=this.blockIdentifier){return this.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}async getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}async getBlockWithTxHashes(e=this.blockIdentifier){const t=new gn(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}async getBlockWithTxs(e=this.blockIdentifier){const t=new gn(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}async getBlockStateUpdate(e=this.blockIdentifier){const t=new gn(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}async getBlockTransactionsTraces(e=this.blockIdentifier){const t=new gn(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}async getBlockTransactionCount(e=this.blockIdentifier){const t=new gn(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}async getPendingTransactions(){const{transactions:e}=await this.getBlock("pending");return Promise.all(e.map(t=>this.getTransactionByHash(t)))}async getTransaction(e){return this.getTransactionByHash(e).then(this.responseParser.parseGetTransactionResponse)}async getTransactionByHash(e){const t=Ze(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}async getTransactionByBlockIdAndIndex(e,t){const n=new gn(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}async getTransactionReceipt(e){const t=Ze(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}async getTransactionTrace(e){const t=Ze(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}async getTransactionStatus(e){const t=Ze(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}async simulateTransaction(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!1,skipFeeCharge:r=!0}){const s=new gn(t).identifier,i=[];return n&&i.push(Zr.ESimulationFlag.SKIP_VALIDATE),r&&i.push(Zr.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:e.map(o=>this.buildTransaction(o)),simulation_flags:i}).then(this.responseParser.parseSimulateTransactionResponse)}async waitForTransaction(e,t){const n=Ze(e);let{retries:r}=this,s=!1,i=!1;const o=t?.retryInterval??5e3,u=t?.errorStates??[Zr.ETransactionStatus.REJECTED],l=t?.successStates??[Zr.ETransactionExecutionStatus.SUCCEEDED,Zr.ETransactionStatus.ACCEPTED_ON_L2,Zr.ETransactionStatus.ACCEPTED_ON_L1];let d;for(;!s;){await Tp(o);try{d=await this.getTransactionStatus(n);const g=d.execution_status,_=d.finality_status;if(!_)throw new Error("waiting for transaction status");if(u.includes(g)||u.includes(_)){const b=`${g}: ${_}`,T=new Error(b);throw T.response=d,i=!0,T}else(l.includes(g)||l.includes(_))&&(s=!0)}catch(g){if(g instanceof Error&&i)throw g;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Tp(o)}return f}async getStorageAt(e,t,n=this.blockIdentifier){const r=Ze(e),s=n2(t),i=new gn(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:s,block_id:i})}async getClassHashAt(e,t=this.blockIdentifier){const n=Ze(e),r=new gn(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}async getClassByHash(e){return this.getClass(e)}async getClass(e,t=this.blockIdentifier){const n=Ze(e),r=new gn(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r}).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t=this.blockIdentifier){const n=Ze(e),r=new gn(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n}).then(this.responseParser.parseContractClassResponse)}async getCode(e,t){throw new Error("RPC does not implement getCode function")}async getContractVersion(e,t,{blockIdentifier:n=this.blockIdentifier,compiler:r=!0}={}){let s;if(e)s=await this.getClassAt(e,n);else if(t)s=await this.getClass(t,n);else throw Error("getContractVersion require contractAddress or classHash");return zr(s)?r?{cairo:"1",compiler:gp(s.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,n=this.blockIdentifier){return this.getInvokeEstimateFee(e,t,n)}async getInvokeEstimateFee(e,t,n=this.blockIdentifier){const r=new gn(n).identifier,s=this.buildTransaction({type:"INVOKE_FUNCTION",...e,...t},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:r}).then(this.responseParser.parseFeeEstimateResponse)}async getDeclareEstimateFee(e,t,n=this.blockIdentifier){const r=new gn(n).identifier,s=this.buildTransaction({type:"DECLARE",...e,...t},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:r}).then(this.responseParser.parseFeeEstimateResponse)}async getDeployAccountEstimateFee(e,t,n=this.blockIdentifier){const r=new gn(n).identifier,s=this.buildTransaction({type:"DEPLOY_ACCOUNT",...e,...t},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[s],block_id:r}).then(this.responseParser.parseFeeEstimateResponse)}async getEstimateFeeBulk(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!1}){n&&console.warn("getEstimateFeeBulk RPC does not support skipValidate");const r=new gn(t).identifier;return this.fetchEndpoint("starknet_estimateFee",{request:e.map(s=>this.buildTransaction(s,"fee")),block_id:r}).then(this.responseParser.parseFeeEstimateBulkResponse)}async invokeFunction(e,t){return this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:Lt.toHex(e.calldata),type:Zr.ETransactionType.INVOKE,max_fee:Ze(t.maxFee||0),version:"0x1",signature:iu(e.signature),nonce:Ze(t.nonce)}})}async declareContract({contract:e,signature:t,senderAddress:n,compiledClassHash:r},s){return zr(e)?this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Zr.ETransactionType.DECLARE,contract_class:{sierra_program:Ep(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:OC,max_fee:Ze(s.maxFee||0),signature:iu(t),sender_address:n,nonce:Ze(s.nonce)}}):this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Zr.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:IC,max_fee:Ze(s.maxFee||0),signature:iu(t),sender_address:n,nonce:Ze(s.nonce)}})}async deployAccountContract({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},s){return this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:Lt.toHex(t||[]),class_hash:Ze(e),contract_address_salt:Ze(n||0),type:Zr.ETransactionType.DEPLOY_ACCOUNT,max_fee:Ze(s.maxFee||0),version:Ze(s.version||0),signature:iu(r),nonce:Ze(s.nonce)}})}async callContract(e,t=this.blockIdentifier){const n=new gn(t).identifier,r=await this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:Ts(e.entrypoint),calldata:Lt.toHex(e.calldata)},block_id:n});return this.responseParser.parseCallContractResponse(r)}async estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:s,payload:i}=e,o={from_address:Ze(n),to_address:Ze(r),entry_point_selector:cp(s),payload:H0(i)},u=new gn(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:u})}async getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}async getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}async getStarkName(e,t){return gb(this,e,t)}async getAddressFromStarkName(e,t){return mb(this,e,t)}buildTransaction(e,t){const n=ab(t),r={signature:iu(e.signature),nonce:Ze(e.nonce),max_fee:Ze(e.maxFee||0)};if(e.type==="INVOKE_FUNCTION")return{type:Zr.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:Lt.toHex(e.calldata),version:Ze(e.version||n.v1),...r};if(e.type==="DECLARE")return zr(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:Ep(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:Ze(e.version||n.v2),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:Ze(e.version||n.v1),...r};if(e.type==="DEPLOY_ACCOUNT")return{type:e.type,constructor_calldata:Lt.toHex(e.constructorCalldata||[]),class_hash:Ze(e.classHash),contract_address_salt:Ze(e.addressSalt||0),version:Ze(e.version||n.v1),...r};throw Error("RPC buildTransaction received unknown TransactionType")}},PV=class{},LV=class extends PV{parseGetBlockResponse(e){return{...e,new_root:e.state_root,parent_hash:e.parent_block_hash,transactions:Object.values(e.transactions).map(t=>"transaction_hash"in t&&t.transaction_hash).filter(Boolean)}}parseGetTransactionResponse(e){if(e.status==="NOT_RECEIVED"&&e.finality_status==="NOT_RECEIVED")throw new zo;return{...e,calldata:"calldata"in e.transaction?e.transaction.calldata:[],contract_class:"contract_class"in e.transaction?e.transaction.contract_class:void 0,entry_point_selector:"entry_point_selector"in e.transaction?e.transaction.entry_point_selector:void 0,max_fee:"max_fee"in e.transaction?e.transaction.max_fee:void 0,nonce:e.transaction.nonce,sender_address:"sender_address"in e.transaction?e.transaction.sender_address:void 0,signature:"signature"in e.transaction?e.transaction.signature:void 0,transaction_hash:"transaction_hash"in e.transaction?e.transaction.transaction_hash:void 0,version:"version"in e.transaction?e.transaction.version:void 0}}parseGetTransactionReceiptResponse(e){return{...e,messages_sent:e.l2_to_l1_messages,..."revert_error"in e&&{revert_reason:e.revert_error}}}parseFeeEstimateResponse(e){if("overall_fee"in e){let t={};try{t={gas_consumed:ft(e.gas_usage),gas_price:ft(e.gas_price)}}catch{}return{overall_fee:ft(e.overall_fee),...t}}return{overall_fee:ft(e.amount)}}parseFeeEstimateBulkResponse(e){return[].concat(e).map(t=>{if("overall_fee"in t){let n={};try{n={gas_consumed:ft(t.gas_usage),gas_price:ft(t.gas_price)}}catch{}return{overall_fee:ft(t.overall_fee),...n}}return{overall_fee:ft(t.amount)}})}parseSimulateTransactionResponse(e){const t="overall_fee"in e.fee_estimation?e.fee_estimation.overall_fee:e.fee_estimation.amount;return[{transaction_trace:e.trace,fee_estimation:e.fee_estimation,suggestedMaxFee:Zo(BigInt(t))}]}parseCallContractResponse(e){return{result:e.result}}parseInvokeFunctionResponse(e){return{transaction_hash:e.transaction_hash}}parseDeployContractResponse(e){return{transaction_hash:e.transaction_hash,contract_address:e.address}}parseDeclareContractResponse(e){return{transaction_hash:e.transaction_hash,class_hash:e.class_hash}}parseGetStateUpdateResponse(e){const t=Object.entries(e.state_diff.nonces).map(([r,s])=>({contract_address:r,nonce:s})),n=Object.entries(e.state_diff.storage_diffs).map(([r,s])=>({address:r,storage_entries:s}));return{...e,state_diff:{...e.state_diff,storage_diffs:n,nonces:t}}}parseContractClassResponse(e){const t=zr(e)?e:db(e);return{...t,abi:typeof t.abi=="string"?JSON.parse(t.abi):t.abi}}},UV=/^(?:\w+:)?\/\/(\S+)$/,MV=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,VV=/^[^\s.]+\.\S{2,}$/;function FV(e){if(!e||typeof e!="string")return!1;const t=e.match(UV);if(!t)return!1;const n=t[1];return n?!!(MV.test(n)||VV.test(n)):!1}function Ud(e,t,n){return FV(n)?n:wC(e,n??t)}function HV(e){return e===void 0||Object.keys(e).length===0||Object.keys(e).length===1&&Object.entries(e).every(([t,n])=>t==="blockIdentifier"&&n===null)}var X2={network:"SN_GOERLI",blockIdentifier:"pending"},xp=class{constructor(e=X2){W(this,"baseUrl");W(this,"feederGatewayUrl");W(this,"gatewayUrl");W(this,"headers");W(this,"blockIdentifier");W(this,"chainId");W(this,"responseParser",new LV);"network"in e?(this.baseUrl=xp.getNetworkFromName(e.network),this.feederGatewayUrl=Ud(this.baseUrl,"feeder_gateway"),this.gatewayUrl=Ud(this.baseUrl,"gateway")):(this.baseUrl=e.baseUrl,this.feederGatewayUrl=Ud(this.baseUrl,"feeder_gateway",e.feederGatewayUrl),this.gatewayUrl=Ud(this.baseUrl,"gateway",e.gatewayUrl)),this.chainId=e?.chainId??xp.getChainIdFromBaseUrl(this.baseUrl),this.headers=e.headers,this.blockIdentifier=e?.blockIdentifier||X2.blockIdentifier}static getNetworkFromName(e){switch(e){case"SN_MAIN":case"0x534e5f4d41494e":return"https://alpha-mainnet.starknet.io";case"SN_GOERLI":case"0x534e5f474f45524c49":return"https://alpha4.starknet.io";default:throw new Error("Could not detect base url from NetworkName")}}static getChainIdFromBaseUrl(e){try{return new URL(e).host.includes("mainnet.starknet.io")?"0x534e5f4d41494e":"0x534e5f474f45524c49"}catch{return console.error(`Could not parse baseUrl: ${e}`),"0x534e5f474f45524c49"}}getFetchUrl(e){return["add_transaction"].includes(e)?this.gatewayUrl:this.feederGatewayUrl}getFetchMethod(e){return["add_transaction","call_contract","estimate_fee","estimate_message_fee","estimate_fee_bulk","simulate_transaction"].includes(e)?"POST":"GET"}getQueryString(e){return HV(e)?"":`?${Object.entries(e).map(([n,r])=>n==="blockIdentifier"?`${new gn(r).queryIdentifier}`:`${n}=${r}`).join("&")}`}getHeaders(e){return e==="POST"?{"Content-Type":"application/json",...this.headers}:this.headers}async fetchEndpoint(e,...[t,n]){const r=this.getFetchUrl(e),s=this.getFetchMethod(e),i=this.getQueryString(t),o=wC(r,e,i);return this.fetch(o,{method:s,body:n})}async fetch(e,t){const n=Ud(this.baseUrl,"",e),r=t?.method??"GET",s=this.getHeaders(r),i=xs(t?.body);try{const o=await j2(n,{method:r,body:i,headers:s}),u=await o.text();if(!o.ok){let d;try{d=$i(u)}catch{throw new RV(o.statusText,o.status)}throw new NV(d.message,d.code)}return(t?.parseAlwaysAsBigInt?N2:$i)(u)}catch(o){throw o instanceof Error&&!(o instanceof zo)?Error(`Could not ${r} from endpoint \`${n}\`: ${o.message}`):o}}async getChainId(){return Promise.resolve(this.chainId)}async callContract({contractAddress:e,entrypoint:t,calldata:n=[]},r=this.blockIdentifier){return this.fetchEndpoint("call_contract",{blockIdentifier:r},{contract_address:e,entry_point_selector:Ts(t),calldata:Lt.compile(n)}).then(this.responseParser.parseCallContractResponse)}async getBlock(e=this.blockIdentifier){return this.fetchEndpoint("get_block",{blockIdentifier:e}).then(this.responseParser.parseGetBlockResponse)}async getNonceForAddress(e,t=this.blockIdentifier){return this.fetchEndpoint("get_nonce",{contractAddress:e,blockIdentifier:t})}async getStorageAt(e,t,n=this.blockIdentifier){const r=ft(t).toString(10);return this.fetchEndpoint("get_storage_at",{blockIdentifier:n,contractAddress:e,key:r})}async getTransaction(e){const t=Ze(e);return this.fetchEndpoint("get_transaction",{transactionHash:t}).then(n=>{if(Object.values(n).length===1)throw new zo(n.status);return this.responseParser.parseGetTransactionResponse(n)})}async getTransactionReceipt(e){const t=Ze(e);return this.fetchEndpoint("get_transaction_receipt",{transactionHash:t}).then(this.responseParser.parseGetTransactionReceiptResponse)}async getClassAt(e,t=this.blockIdentifier){return this.fetchEndpoint("get_full_contract",{blockIdentifier:t,contractAddress:e}).then(this.responseParser.parseContractClassResponse)}async getClassHashAt(e,t=this.blockIdentifier){return this.fetchEndpoint("get_class_hash_at",{blockIdentifier:t,contractAddress:e})}async getClassByHash(e,t=this.blockIdentifier){return this.fetchEndpoint("get_class_by_hash",{classHash:e,blockIdentifier:t}).then(this.responseParser.parseContractClassResponse)}async getCompiledClassByClassHash(e,t=this.blockIdentifier){return this.fetchEndpoint("get_compiled_class_by_class_hash",{classHash:e,blockIdentifier:t})}async getContractVersion(e,t,{blockIdentifier:n=this.blockIdentifier,compiler:r=!0}={}){let s;if(e)s=await this.getClassAt(e,n);else if(t)s=await this.getClassByHash(t,n);else throw Error("getContractVersion requires contractAddress or classHash");return zr(s)?r?{cairo:"1",compiler:gp(s.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async invokeFunction(e,t){return this.fetchEndpoint("add_transaction",void 0,{type:"INVOKE_FUNCTION",sender_address:e.contractAddress,calldata:Lt.compile(e.calldata??[]),signature:au(e.signature),nonce:Ze(t.nonce),max_fee:Ze(t.maxFee||0),version:"0x1"}).then(this.responseParser.parseInvokeFunctionResponse)}async deployAccountContract({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},s){return this.fetchEndpoint("add_transaction",void 0,{type:"DEPLOY_ACCOUNT",contract_address_salt:n??ub(),constructor_calldata:Lt.compile(t??[]),class_hash:Ze(e),max_fee:Ze(s.maxFee||0),version:Ze(s.version||0),nonce:Ze(s.nonce),signature:au(r)}).then(this.responseParser.parseDeployContractResponse)}async declareContract({senderAddress:e,contract:t,signature:n,compiledClassHash:r},s){return zr(t)?this.fetchEndpoint("add_transaction",void 0,{type:"DECLARE",sender_address:e,compiled_class_hash:r,contract_class:t,nonce:Ze(s.nonce),signature:au(n),max_fee:Ze(s.maxFee||0),version:Ze(Rd)}).then(this.responseParser.parseDeclareContractResponse):this.fetchEndpoint("add_transaction",void 0,{type:"DECLARE",contract_class:t,nonce:Ze(s.nonce),signature:au(n),sender_address:e,max_fee:Ze(s.maxFee||0),version:Ze(jo)}).then(this.responseParser.parseDeclareContractResponse)}async getEstimateFee(e,t,n=this.blockIdentifier,r=!1){return this.getInvokeEstimateFee(e,t,n,r)}async getInvokeEstimateFee(e,t,n=this.blockIdentifier,r=!1){const s=this.buildTransaction({type:"INVOKE_FUNCTION",...e,...t},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:n,skipValidate:r},s).then(this.responseParser.parseFeeEstimateResponse)}async getDeclareEstimateFee(e,t,n=this.blockIdentifier,r=!1){const s=this.buildTransaction({type:"DECLARE",...e,...t},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:n,skipValidate:r},s).then(this.responseParser.parseFeeEstimateResponse)}async getDeployAccountEstimateFee(e,t,n=this.blockIdentifier,r=!1){const s=this.buildTransaction({type:"DEPLOY_ACCOUNT",...e,...t},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:n,skipValidate:r},s).then(this.responseParser.parseFeeEstimateResponse)}async getEstimateFeeBulk(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!1}){const r=e.map(s=>this.buildTransaction(s,"fee"));return this.fetchEndpoint("estimate_fee_bulk",{blockIdentifier:t,skipValidate:n},r).then(this.responseParser.parseFeeEstimateBulkResponse)}async getCode(e,t=this.blockIdentifier){return this.fetchEndpoint("get_code",{contractAddress:e,blockIdentifier:t})}async waitForTransaction(e,t){let n,r=!1,s=0;const i=t?.retryInterval??5e3,o=t?.errorStates??["REJECTED","NOT_RECEIVED","REVERTED"],u=t?.successStates??["SUCCEEDED","ACCEPTED_ON_L1","ACCEPTED_ON_L2"];for(;!r;)if(await Tp(i),n=await this.getTransactionStatus(e),n.finality_status==="NOT_RECEIVED"&&s<3)s+=1;else if(u.includes(n.finality_status)||u.includes(n.execution_status))r=!0;else if(o.includes(n.finality_status)||o.includes(n.execution_status)){let d;n.tx_failure_reason?d=`${n.tx_status}: ${n.tx_failure_reason.code}
${n.tx_failure_reason.error_message}`:n.tx_revert_reason?d=`${n.tx_status}: ${n.tx_revert_reason}`:d=n.tx_status;const f=new Error(d);throw f.response=n,f}return await this.getTransactionReceipt(e)}async getTransactionStatus(e){const t=Ze(e);return this.fetchEndpoint("get_transaction_status",{transactionHash:t})}async getContractAddresses(){return this.fetchEndpoint("get_contract_addresses")}async getTransactionTrace(e){const t=Ze(e);return this.fetchEndpoint("get_transaction_trace",{transactionHash:t})}async estimateMessageFee({from_address:e,to_address:t,entry_point_selector:n,payload:r},s=this.blockIdentifier){const i={from_address:o2(e),to_address:F0(t),entry_point_selector:cp(n),payload:H0(r)};return this.fetchEndpoint("estimate_message_fee",{blockIdentifier:s},i)}async getSimulateTransaction(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!1,skipExecute:r=!1}){e.length>1&&console.warn("Sequencer simulate process only first element from invocations list"),r&&console.warn("Sequencer can't skip account __execute__");const s=this.buildTransaction(e[0]);return this.fetchEndpoint("simulate_transaction",{blockIdentifier:t,skipValidate:n??!1},s).then(this.responseParser.parseSimulateTransactionResponse)}async getStateUpdate(e=this.blockIdentifier){const t=new gn(e).sequencerIdentifier;return this.fetchEndpoint("get_state_update",{...t}).then(this.responseParser.parseGetStateUpdateResponse)}async getBlockTraces(e=this.blockIdentifier){const t=new gn(e).sequencerIdentifier;return this.fetchEndpoint("get_block_traces",{...t})}async getStarkName(e,t){return gb(this,e,t)}async getAddressFromStarkName(e,t){return mb(this,e,t)}buildTransaction(e,t){const n=ab(t),r={signature:au(e.signature),nonce:Ze(e.nonce)};if(e.type==="INVOKE_FUNCTION")return{type:e.type,sender_address:e.contractAddress,calldata:Lt.compile(e.calldata??[]),version:Ze(e.version||n.v1),...r};if(e.type==="DECLARE")return zr(e.contract)?{type:e.type,contract_class:e.contract,compiled_class_hash:e.compiledClassHash,sender_address:e.senderAddress,version:Ze(e.version||n.v2),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:Ze(e.version||n.v1),...r};if(e.type==="DEPLOY_ACCOUNT")return{type:e.type,constructor_calldata:Lt.compile(e.constructorCalldata||[]),class_hash:Ze(e.classHash),contract_address_salt:Ze(e.addressSalt||0),version:Ze(e.version||n.v1),...r};throw Error("Sequencer buildTransaction received unknown TransactionType")}},Ap=class{constructor(e){W(this,"provider");e instanceof Ap?this.provider=e.provider:e instanceof Ld||e instanceof xp?this.provider=e:e&&"rpc"in e?this.provider=new Ld(e.rpc):e&&"sequencer"in e?this.provider=new xp(e.sequencer):this.provider=new Ld}async getChainId(){return this.provider.getChainId()}async getBlock(e){return this.provider.getBlock(e)}async getClassAt(e,t){return this.provider.getClassAt(e,t)}async getClassHashAt(e,t){return this.provider.getClassHashAt(e,t)}getClassByHash(e){return this.provider.getClassByHash(e)}async getEstimateFee(e,t,n){return this.provider.getEstimateFee(e,t,n)}async getInvokeEstimateFee(e,t,n,r){return this.provider.getInvokeEstimateFee(e,t,n,r)}async getEstimateFeeBulk(e,t){return this.provider.getEstimateFeeBulk(e,t)}async getNonceForAddress(e,t){return this.provider.getNonceForAddress(e,t)}async getStorageAt(e,t,n){return this.provider.getStorageAt(e,t,n)}async getTransaction(e){return this.provider.getTransaction(e)}async getTransactionReceipt(e){return this.provider.getTransactionReceipt(e)}async callContract(e,t){return this.provider.callContract(e,t)}async invokeFunction(e,t){return this.provider.invokeFunction(e,t)}async deployAccountContract(e,t){return this.provider.deployAccountContract(e,t)}async declareContract(e,t){return this.provider.declareContract(e,t)}async getDeclareEstimateFee(e,t,n,r){return this.provider.getDeclareEstimateFee(e,t,n,r)}getDeployAccountEstimateFee(e,t,n,r){return this.provider.getDeployAccountEstimateFee(e,t,n,r)}async getCode(e,t){return this.provider.getCode(e,t)}async waitForTransaction(e,t){return this.provider.waitForTransaction(e,t)}async getSimulateTransaction(e,t){return this.provider.getSimulateTransaction(e,t)}async getStateUpdate(e){return this.provider.getStateUpdate(e)}async getStarkName(e,t){return gb(this,e,t)}async getAddressFromStarkName(e,t){return mb(this,e,t)}async getContractVersion(e,t,n){return this.provider.getContractVersion(e,t,n)}},Uj=class{},$V={};Un($V,{fromCallsToExecuteCalldata:()=>yb,fromCallsToExecuteCalldataWithNonce:()=>jV,fromCallsToExecuteCalldata_cairo1:()=>Q2,getExecuteCalldata:()=>Sp,transformCallsToMulticallArrays:()=>J2,transformCallsToMulticallArrays_cairo1:()=>ZV});var J2=e=>{const t=[],n=[];return e.forEach(r=>{const s=Lt.compile(r.calldata||[]);t.push({to:ft(r.contractAddress).toString(10),selector:ft(Ts(r.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:s.length.toString()}),n.push(...s)}),{callArray:t,calldata:Lt.compile({calldata:n})}},yb=e=>{const{callArray:t,calldata:n}=J2(e);return[...Lt.compile({callArray:t}),...n]},jV=(e,t)=>[...yb(e),ft(t).toString()],ZV=e=>e.map(n=>({to:ft(n.contractAddress).toString(10),selector:ft(Ts(n.entrypoint)).toString(10),calldata:Lt.compile(n.calldata||[])})),Q2=e=>{const t=e.map(n=>({contractAddress:n.contractAddress,entrypoint:n.entrypoint,calldata:Array.isArray(n.calldata)&&"__compiled__"in n.calldata?n.calldata:Lt.compile(n.calldata)}));return Lt.compile({orderCalls:t})},Sp=(e,t="0")=>t==="1"?Q2(e):yb(e),zV={};Un(zV,{TypedDataRevision:()=>M0,byteArrayFromString:()=>tI,encodeData:()=>oI,encodeType:()=>aI,encodeValue:()=>Md,getDependencies:()=>bb,getMessageHash:()=>wb,getStructHash:()=>Vd,getTypeHash:()=>iI,isMerkleTreeType:()=>sI,prepareSelector:()=>rI});var KV={};Un(KV,{MerkleTree:()=>cu,proofMerklePath:()=>eI});var cu=class{constructor(e,t=Bd){W(this,"leaves");W(this,"branches",[]);W(this,"root");W(this,"hashMethod");this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(e){if(e.length===1)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const t=[];for(let n=0;n<e.length;n+=2)n+1===e.length?t.push(cu.hash(e[n],"0x0",this.hashMethod)):t.push(cu.hash(e[n],e[n+1],this.hashMethod));return this.build(t)}static hash(e,t,n=Bd){const[r,s]=[BigInt(e),BigInt(t)].sort((i,o)=>i>=o?1:-1);return n(r,s)}getProof(e,t=this.leaves,n=[]){const r=t.indexOf(e);if(r===-1)throw new Error("leaf not found");if(t.length===1)return n;const s=r%2===0,i=(s?t[r+1]:t[r-1])??"0x0",o=[...n,i],u=this.leaves.length===t.length?-1:this.branches.findIndex(d=>d.length===t.length),l=this.branches[u+1]??[this.root];return this.getProof(cu.hash(s?e:i,s?i:e,this.hashMethod),l,o)}};function eI(e,t,n,r=Bd){if(n.length===0)return e===t;const[s,...i]=n;return eI(e,cu.hash(t,s,r),i,r)}var WV={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},as={1:{domain:"StarknetDomain",hashMethod:D2,hashMerkleMethod:R2,escapeTypeString:e=>`"${e}"`,presetTypes:WV},0:{domain:"StarkNetDomain",hashMethod:B2,hashMerkleMethod:Bd,escapeTypeString:e=>e,presetTypes:{}}};function tI(e){const t=up(e),n=t[t.length-1],r=t.map(Fa),[s,i]=n===void 0||n.length===31?["0x00",0]:[r.pop(),n.length];return{data:r.length===0?["0x00"]:r,pending_word:s,pending_word_len:i}}function nI({types:e,domain:t}){if(as[1].domain in e&&t.revision==="1")return"1";if(as[0].domain in e&&(t.revision??"0")==="0")return"0"}function kp(e){try{return Ze(e)}catch{if(typeof e=="string")return Ze(Fa(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function qV(e){const t=e;return!!(t.message&&t.primaryType&&t.types&&nI(t))}function rI(e){return vs(e)?e:Ts(e)}function sI(e){return e.type==="merkletree"}function bb(e,t,n=[],r="",s="0"){return t[t.length-1]==="*"?t=t.slice(0,-1):s==="1"&&(t==="enum"?t=r:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),n.includes(t)||!e[t]?n:[t,...e[t].reduce((i,o)=>[...i,...bb(e,o.type,i,o.contains,s).filter(u=>!i.includes(u))],[])]}function GV(e,t){if(t.parent&&t.key){const r=e[t.parent].find(i=>i.name===t.key);if(!sI(r))throw new Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}function aI(e,t,n="0"){const[r,...s]=bb(e,t,void 0,void 0,n),i=r?[r,...s.sort()]:[],o=as[n].escapeTypeString;return i.map(u=>{const l=e[u].map(d=>{const f=d.type==="enum"&&n==="1"?d.contains:d.type,g=f.match(/^\(.*\)$/)?`(${f.slice(1,-1).split(",").map(_=>_&&o(_)).join(",")})`:o(f);return`${o(d.name)}:${g}`});return`${o(u)}(${l})`}).join("")}function iI(e,t,n="0"){return Ts(aI(e,t,n))}function Md(e,t,n,r={},s="0"){if(e[t])return[t,Vd(e,t,n,s)];if(as[s].presetTypes[t])return[t,Vd(as[s].presetTypes,t,n,s)];if(t.endsWith("*")){const i=n.map(o=>Md(e,t.slice(0,-1),o,void 0,s)[1]);return[t,as[s].hashMethod(i)]}switch(t){case"enum":{if(s==="1"){const[i,o]=Object.entries(n)[0],u=e[r.parent][0],l=e[u.contains],d=l.find(_=>_.name===i),f=l.indexOf(d),g=d.type.slice(1,-1).split(",").map((_,b)=>{if(!_)return _;const T=o[b];return Md(e,_,T,void 0,s)[1]});return[t,as[s].hashMethod([f,...g])]}return[t,kp(n)]}case"merkletree":{const i=GV(e,r),o=n.map(l=>Md(e,i,l,void 0,s)[1]),{root:u}=new cu(o,as[s].hashMerkleMethod);return["felt",u]}case"selector":return["felt",rI(n)];case"string":{if(s==="1"){const i=tI(n),o=[i.data.length,...i.data,i.pending_word,i.pending_word_len];return[t,as[s].hashMethod(o)]}return[t,kp(n)]}case"felt":case"bool":case"u128":case"i128":case"ContractAddress":case"ClassHash":case"timestamp":case"shortstring":return[t,kp(n)];default:{if(s==="1")throw new Error(`Unsupported type: ${t}`);return[t,kp(n)]}}}function oI(e,t,n,r="0"){const s=e[t]??as[r].presetTypes[t],[i,o]=s.reduce(([u,l],d)=>{if(n[d.name]===void 0||n[d.name]===null&&d.type!=="enum")throw new Error(`Cannot encode data: missing data for '${d.name}'`);const f=n[d.name],g={parent:t,key:d.name},[_,b]=Md(e,d.type,f,g,r);return[[...u,_],[...l,b]]},[["felt"],[iI(e,t,r)]]);return[i,o]}function Vd(e,t,n,r="0"){return as[r].hashMethod(oI(e,t,n,r)[1])}function wb(e,t){if(!qV(e))throw new Error("Typed data does not match JSON schema");const n=nI(e),{domain:r,hashMethod:s}=as[n],i=[Fa("StarkNet Message"),Vd(e.types,r,e.domain,n),t,Vd(e.types,e.primaryType,e.message,n)];return s(i)}var YV=class{constructor(e=h0.randomPrivateKey()){W(this,"pk");this.pk=e instanceof Uint8Array?AC(e):Ze(e)}async getPubKey(){return g0(this.pk)}async signMessage(e,t){const n=wb(e,t);return Td(n,this.pk)}async signTransaction(e,t,n){if(n&&n.length!==e.length)throw new Error("ABI must be provided for each transaction or no transaction");const r=Sp(e,t.cairoVersion),s=U2(t.walletAddress,t.version,r,t.maxFee,t.chainId,t.nonce);return Td(s,this.pk)}async signDeployAccountTransaction({classHash:e,contractAddress:t,constructorCalldata:n,addressSalt:r,maxFee:s,version:i,chainId:o,nonce:u}){const l=L2(t,e,Lt.compile(n),r,i,s,o,u);return Td(l,this.pk)}async signDeclareTransaction({classHash:e,senderAddress:t,chainId:n,maxFee:r,version:s,nonce:i,compiledClassHash:o}){const u=P2(e,t,s,r,n,i,o);return Td(u,this.pk)}};function XV(e){if(!e.events)throw new Error("UDC emitted event is empty");const t=e.events.find(n=>Cd(n.from_address)===Cd(Fo.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}var JV=class extends Ap{constructor(t,n,r,s){super(t);W(this,"signer");W(this,"address");W(this,"cairoVersion");W(this,"deploySelf",this.deployAccount);this.address=n.toLowerCase(),this.signer=typeof r=="string"||r instanceof Uint8Array?new YV(r):r,s&&(this.cairoVersion=s.toString())}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return ft(t??await this.getNonce())}catch{return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:n}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=n}return this.cairoVersion}async estimateFee(t,n){return this.estimateInvokeFee(t,n)}async estimateInvokeFee(t,{nonce:n,blockIdentifier:r,skipValidate:s}={}){const i=Array.isArray(t)?t:[t],o=ft(n??await this.getNonce()),u=ft(su),l=await this.getChainId(),d={walletAddress:this.address,nonce:o,maxFee:xr,version:u,chainId:l,cairoVersion:await this.getCairoVersion()},f=await this.buildInvocation(i,d),g=await super.getInvokeEstimateFee({...f},{version:u,nonce:o},r,s),_=Zo(g.overall_fee);return{...g,suggestedMaxFee:_}}async estimateDeclareFee({contract:t,classHash:n,casm:r,compiledClassHash:s},{blockIdentifier:i,nonce:o,skipValidate:u}={}){const l=ft(o??await this.getNonce()),d=zr(t)?bp:su,f=await this.getChainId(),g=await this.buildDeclarePayload({classHash:n,contract:t,casm:r,compiledClassHash:s},{nonce:l,chainId:f,version:d,walletAddress:this.address,maxFee:xr,cairoVersion:void 0}),_=await super.getDeclareEstimateFee(g,{version:d,nonce:l},i,u),b=Zo(_.overall_fee);return{..._,suggestedMaxFee:b}}async estimateAccountDeployFee({classHash:t,addressSalt:n=0,constructorCalldata:r=[],contractAddress:s},{blockIdentifier:i,skipValidate:o}={}){const u=ft(su),l=xr,d=await this.getChainId(),f=await this.buildAccountDeployPayload({classHash:t,addressSalt:n,constructorCalldata:r,contractAddress:s},{nonce:l,chainId:d,version:u,walletAddress:this.address,maxFee:xr,cairoVersion:void 0}),g=await super.getDeployAccountEstimateFee({...f},{version:u,nonce:l},i,o),_=Zo(g.overall_fee);return{...g,suggestedMaxFee:_}}async estimateDeployFee(t,n){const r=this.buildUDCContractPayload(t);return this.estimateInvokeFee(r,n)}async estimateFeeBulk(t,{nonce:n,blockIdentifier:r,skipValidate:s}={}){const i=await this.accountInvocationsFactory(t,{versions:[su,bp],nonce:n,blockIdentifier:r}),o=await super.getEstimateFeeBulk(i,{blockIdentifier:r,skipValidate:s});return[].concat(o).map(u=>{const l=Zo(u.overall_fee);return{...u,suggestedMaxFee:l}})}async buildInvocation(t,n){const r=Sp(t,await this.getCairoVersion()),s=await this.signer.signTransaction(t,n);return{contractAddress:this.address,calldata:r,signature:s}}async execute(t,n=void 0,r={}){const s=Array.isArray(t)?t:[t],i=ft(r.nonce??await this.getNonce()),o=r.maxFee??await this.getSuggestedMaxFee({type:"INVOKE_FUNCTION",payload:t},r),u=ft(jo),l=await this.getChainId(),d={walletAddress:this.address,nonce:i,maxFee:o,version:u,chainId:l,cairoVersion:await this.getCairoVersion()},f=await this.signer.signTransaction(s,d,n),g=Sp(s,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:g,signature:f},{nonce:i,maxFee:o,version:u})}async declareIfNot(t,n={}){const r=lb(t);try{await this.getClassByHash(r.classHash)}catch{return this.declare(t,n)}return{transaction_hash:"",class_hash:r.classHash}}async declare(t,n={}){const r=lb(t),s={};s.nonce=ft(n.nonce??await this.getNonce()),s.maxFee=n.maxFee??await this.getSuggestedMaxFee({type:"DECLARE",payload:r},n),s.version=zr(t.contract)?Rd:jo,s.chainId=await this.getChainId();const i=await this.buildDeclarePayload(r,{...s,walletAddress:this.address,cairoVersion:void 0});return this.declareContract(i,s)}async deploy(t,n){const r=[].concat(t).map(u=>{const{classHash:l,salt:d,unique:f=!0,constructorCalldata:g=[]}=u,_=Lt.compile(g),b=d??ub();return{call:{contractAddress:Fo.ADDRESS,entrypoint:Fo.ENTRYPOINT,calldata:[l,b,$0(f),_.length,..._]},address:wp(f?Ad(this.address,b):b,l,_,f?Fo.ADDRESS:0)}}),s=r.map(u=>u.call),i=r.map(u=>u.address);return{...await this.execute(s,void 0,n),contract_address:i}}async deployContract(t,n){const r=await this.deploy(t,n),s=await this.waitForTransaction(r.transaction_hash);return XV(s)}async declareAndDeploy(t,n){const{constructorCalldata:r,salt:s,unique:i}=t;let o=await this.declareIfNot(t,n);if(o.transaction_hash!==""){const l=await this.waitForTransaction(o.transaction_hash);o={...o,...l}}const u=await this.deployContract({classHash:o.class_hash,salt:s,unique:i,constructorCalldata:r},n);return{declare:{...o},deploy:u}}async deployAccount({classHash:t,constructorCalldata:n=[],addressSalt:r=0,contractAddress:s},i={}){const o=ft(jo),u=xr,l=await this.getChainId(),d=Lt.compile(n),f=s??wp(r,t,d,0),g=i.maxFee??await this.getSuggestedMaxFee({type:"DEPLOY_ACCOUNT",payload:{classHash:t,constructorCalldata:d,addressSalt:r,contractAddress:f}},i),_=await this.signer.signDeployAccountTransaction({classHash:t,constructorCalldata:d,contractAddress:f,addressSalt:r,chainId:l,maxFee:g,version:o,nonce:u});return this.deployAccountContract({classHash:t,addressSalt:r,constructorCalldata:n,signature:_},{nonce:u,maxFee:g,version:o})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return wb(t,this.address)}async verifyMessageHash(t,n){try{return await this.callContract({contractAddress:this.address,entrypoint:"isValidSignature",calldata:Lt.compile({hash:ft(t).toString(),signature:vp(n)})}),!0}catch{return!1}}async verifyMessage(t,n){const r=await this.hashMessage(t);return this.verifyMessageHash(r,n)}async getSuggestedMaxFee({type:t,payload:n},r){let s;switch(t){case"INVOKE_FUNCTION":s=await this.estimateInvokeFee(n,r);break;case"DECLARE":s=await this.estimateDeclareFee(n,r);break;case"DEPLOY_ACCOUNT":s=await this.estimateAccountDeployFee(n,r);break;case"DEPLOY":s=await this.estimateDeployFee(n,r);break;default:s={suggestedMaxFee:xr,overall_fee:xr};break}return s.suggestedMaxFee}async buildDeclarePayload(t,{nonce:n,chainId:r,version:s,walletAddress:i,maxFee:o}){const{classHash:u,contract:l,compiledClassHash:d}=lb(t),f=db(l),g=await this.signer.signDeclareTransaction({classHash:u,compiledClassHash:d,senderAddress:i,chainId:r,maxFee:o,version:s,nonce:n});return{senderAddress:i,signature:g,contract:f,compiledClassHash:d}}async buildAccountDeployPayload({classHash:t,addressSalt:n=0,constructorCalldata:r=[],contractAddress:s},{nonce:i,chainId:o,version:u,maxFee:l}){const d=Lt.compile(r),f=s??wp(n,t,d,0),g=await this.signer.signDeployAccountTransaction({classHash:t,contractAddress:f,chainId:o,maxFee:l,version:u,nonce:i,addressSalt:n,constructorCalldata:d});return{classHash:t,addressSalt:n,constructorCalldata:d,signature:g}}buildUDCContractPayload(t){return[].concat(t).map(r=>{const{classHash:s,salt:i="0",unique:o=!0,constructorCalldata:u=[]}=r,l=Lt.compile(u);return{contractAddress:Fo.ADDRESS,entrypoint:Fo.ENTRYPOINT,calldata:[s,i,$0(o),l.length,...l]}})}async simulateTransaction(t,{nonce:n,blockIdentifier:r,skipValidate:s,skipExecute:i}={}){const o=await this.accountInvocationsFactory(t,{versions:[jo,Rd],nonce:n,blockIdentifier:r});return super.getSimulateTransaction(o,{blockIdentifier:r,skipValidate:s,skipExecute:i})}async accountInvocationsFactory(t,{versions:n,nonce:r,blockIdentifier:s}){const i=n[0],o=await this.getNonceSafe(r),u=await this.getChainId(),l="payload"in t[0]?t[0].payload:t[0],d=t[0].type==="DEPLOY_ACCOUNT"?await this.getCairoVersion(l.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(f,g)=>{const _="payload"in f?f.payload:f,b={walletAddress:this.address,nonce:ft(Number(o)+g),maxFee:xr,version:i,chainId:u,cairoVersion:d},T={type:f.type,version:i,nonce:ft(Number(o)+g),blockIdentifier:s};if(f.type==="INVOKE_FUNCTION"){const I=await this.buildInvocation([].concat(_),b);return{...T,...I}}if(f.type==="DECLARE"){b.version=zr(_.contract)?ft(n[1]):ft(n[0]);const I=await this.buildDeclarePayload(_,b);return{...T,...I,version:b.version}}if(f.type==="DEPLOY_ACCOUNT"){const I=await this.buildAccountDeployPayload(_,b);return{...T,...I}}if(f.type==="DEPLOY"){const I=this.buildUDCContractPayload(_),k=await this.buildInvocation(I,b);return{...T,...k,type:"INVOKE_FUNCTION"}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${f}`)}))}async getStarkName(t=this.address,n){return super.getStarkName(t,n)}},Mj=class{},cI=new Ap({rpc:{default:!0}}),Vj=class extends null{},QV={};Un(QV,{getAbiEvents:()=>uI,parseEvents:()=>lI});function uI(e){return e.filter(t=>t.type==="event"&&(t.size||t.kind!=="enum")).reduce((t,n)=>{const r=n.name.slice(n.name.lastIndexOf(":")+1),s={...n};return s.name=r,{...t,[Qn(Jc(tu(r)).toString(16))]:s}},{})}function lI(e,t,n,r){return e.flat().reduce((i,o)=>{const u=t[o.keys[0]];if(!u)return i;const l={};l[u.name]={},o.keys.shift();const d=o.keys[Symbol.iterator](),f=o.data[Symbol.iterator](),g=u.members?.filter(b=>b.kind==="key")||u.keys,_=u.members?.filter(b=>b.kind==="data")||u.data;return g.forEach(b=>{l[u.name][b.name]=yp(d,b,n,r,l[u.name])}),_.forEach(b=>{l[u.name][b.name]=yp(f,b,n,r,l[u.name])}),i.push(l),i},[])}var Eb=e=>{const t=["blockIdentifier","parseRequest","parseResponse","formatResponse","maxFee","nonce","signature","addressSalt"],n=e[e.length-1];return typeof n=="object"&&t.some(r=>r in n)?{args:e,options:e.pop()}:{args:e}};function dI(e,t){return async function(...n){const r=Eb(n);return e.call(t.name,r.args,{parseRequest:!0,parseResponse:!0,...r.options})}}function eF(e,t){return async function(...n){const r=Eb(n);return e.invoke(t.name,r.args,{parseRequest:!0,...r.options})}}function fI(e,t){return t.stateMutability==="view"||t.state_mutability==="view"?dI(e,t):eF(e,t)}function tF(e,t){return function(...n){return e.populate(t.name,n)}}function nF(e,t){return function(...n){return e.estimate(t.name,n)}}function Fd(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var hI=class{constructor(e,t,n=cI){W(this,"abi");W(this,"address");W(this,"providerOrAccount");W(this,"deployTransactionHash");W(this,"structs");W(this,"events");W(this,"functions");W(this,"callStatic");W(this,"populateTransaction");W(this,"estimateFee");W(this,"callData");this.address=t&&t.toLowerCase(),this.providerOrAccount=n,this.callData=new Lt(e),this.structs=Lt.getAbiStruct(e),this.events=uI(e);const r=y2(e);this.abi=r.getLegacyFormat();const s={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(i=>{if(i.type!=="function")return;const o=i.name;this[o]||Object.defineProperty(this,o,{...s,value:fI(this,i)}),this.functions[o]||Object.defineProperty(this.functions,o,{...s,value:fI(this,i)}),this.callStatic[o]||Object.defineProperty(this.callStatic,o,{...s,value:dI(this,i)}),this.populateTransaction[o]||Object.defineProperty(this.populateTransaction,o,{...s,value:tF(this,i)}),this.estimateFee[o]||Object.defineProperty(this.estimateFee,o,{...s,value:nF(this,i)})})}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e,t=[],{parseRequest:n=!0,parseResponse:r=!0,formatResponse:s=void 0,blockIdentifier:i=void 0}={}){Yt(this.address!==null,"contract is not connected to an address");const o=Fd(t,()=>n?(this.callData.validate("CALL",e,t),this.callData.compile(e,t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:o,entrypoint:e},i).then(u=>r?s?this.callData.format(e,u.result,s):this.callData.parse(e,u.result):u.result)}invoke(e,t=[],{parseRequest:n=!0,maxFee:r,nonce:s,signature:i}={}){Yt(this.address!==null,"contract is not connected to an address");const o=Fd(t,()=>n?(this.callData.validate("INVOKE",e,t),this.callData.compile(e,t)):(console.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),u={contractAddress:this.address,calldata:o,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(u,void 0,{maxFee:r,nonce:s});if(!s)throw new Error("Nonce is required when invoking a function without an account");return console.warn(`Invoking ${e} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...u,signature:i},{nonce:s})}async estimate(e,t=[]){Yt(this.address!==null,"contract is not connected to an address"),Fd(t,()=>!1)||this.callData.validate("INVOKE",e,t);const n=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(n);throw Error("Contract must be connected to the account contract to estimate")}populate(e,t=[]){const n=Fd(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:n}}parseEvents(e){return lI(e.events?.filter(t=>Cd(t.from_address)===Cd(this.address),[])||[],this.events,this.structs,Lt.getAbiEnum(this.abi))}isCairo1(){return l2.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv1(e){return this}typedv2(e){return this}},Fj=class{constructor(){W(this,"functions");W(this,"callStatic");W(this,"populateTransaction");W(this,"estimateFee")}},Hj=class{constructor(e){W(this,"compiledContract");W(this,"account");W(this,"abi");W(this,"classHash");W(this,"casm");W(this,"compiledClassHash");W(this,"CallData");this.compiledContract=e.compiledContract,this.account=e.account,this.casm=e.casm,this.abi=e.abi??e.compiledContract.abi,this.classHash=e.classHash,this.compiledClassHash=e.compiledClassHash,this.CallData=new Lt(this.abi)}async deploy(...e){const{args:t,options:n={parseRequest:!0}}=Eb(e),r=Fd(t,()=>n.parseRequest?(this.CallData.validate("DEPLOY","constructor",t),this.CallData.compile("constructor",t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t)),{deploy:{contract_address:s,transaction_hash:i}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:r,salt:n.addressSalt});Yt(!!s,"Deployment of the contract failed");const o=new hI(this.compiledContract.abi,s,this.account);return o.deployTransactionHash=i,o}connect(e){return this.account=e,this}attach(e){return new hI(this.abi,e,this.account)}};function rF(e){return Qn(Va(Ze(e)).padStart(64,"0"))}function sF(e){s2(e,xr,B0-1n,"Starknet Address");const t=rF(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return t}function aF(e){const t=Va(sF(e)).toLowerCase().split(""),n=Va(j0(e)),r=hexToBytes2(n.padStart(64,"0"));for(let s=0;s<t.length;s+=2)r[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(r[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return Qn(t.join(""))}function $j(e){return aF(e)===e}var jj=null;class iF extends JV{constructor(t,n){const r=I2.starkCurve.utils.randomPrivateKey();super(n||cI,t,r)}async execute(t,n,r){const[s,i]=await nh.Sc.execute.parseAsync([t,r]);Mt({type:"EXECUTE_TRANSACTION",data:{transactions:s,transactionsDetail:i}});const{actionHash:o}=await wt("EXECUTE_TRANSACTION_RES",1e3);Mt({type:"OPEN_UI"});const u=await Promise.race([wt("TRANSACTION_SUBMITTED",11*60*1e3,l=>l.data.actionHash===o),wt("TRANSACTION_FAILED",10*60*1e3,l=>l.data.actionHash===o).then(()=>"error").catch(()=>(Mt({type:"TRANSACTION_FAILED",data:{actionHash:o}}),"timeout"))]);if(u==="error")throw Error("User abort");if(u==="timeout")throw Error("User action timed out");return{transaction_hash:u.transactionResult.transactionHash}}async declare({contract:t,classHash:n,casm:r,compiledClassHash:s},i){Mt({type:"REQUEST_DECLARE_CONTRACT",data:{payload:{contract:t,classHash:n,casm:r,compiledClassHash:s}}});const{actionHash:o}=await wt("REQUEST_DECLARE_CONTRACT_RES",1e3);Mt({type:"OPEN_UI"});const u=await Promise.race([wt("DECLARE_CONTRACT_ACTION_SUBMITTED",11*60*1e3,l=>l.data.actionHash===o),wt("DECLARE_CONTRACT_ACTION_FAILED",10*60*1e3,l=>l.data.actionHash===o).then(()=>"error").catch(()=>"timeout")]);if(u==="error")throw Error("User abort");if(u==="timeout")throw Error("User action timed out");return{transaction_hash:u.txHash,class_hash:u.classHash}}async signMessage(t,n={skipDeploy:!1}){return P_({...t,skipDeploy:n.skipDeploy})}}var vb;(function(e){e.NO_NETWORK_OR_MULTICALL="Missing networkId or multicall",e.NOT_FOUND="Network not found"})(vb||(vb={}));class oF extends Sx{constructor(t){super(t,vb),this.name="NetworkError"}}function cF(e){switch(e){case"mainnet-alpha":case Cl.NetworkName.SN_MAIN:return Cl.StarknetChainId.SN_MAIN;case"sepolia-alpha":case Cl.NetworkName.SN_SEPOLIA:return Cl.StarknetChainId.SN_SEPOLIA;default:throw new oF({code:"NOT_FOUND",message:`Unknown networkId: ${e}`})}}function Zj(e){if(e==="mainnet"||e==="mainnet-alpha")return"mainnet";if(e==="sepolia"||e==="sepolia-alpha")return"sepolia";throw new Error("Invalid network id")}const uF=e=>new Promise(t=>setTimeout(t,e)),lF=e=>{const t=(Math.pow(2,e)-1)*1e3,n=.9+Math.random()*.2;return t*n};var dF=je(71428),fF=Math.floor,hF=Math.random;function pF(e,t){return e+fF(hF()*(t-e+1))}const gF=pF;function mF(e,t){var n=-1,r=e.length,s=r-1;for(t=t===void 0?r:t;++n<t;){var i=gF(n,s),o=e[i];e[i]=e[n],e[n]=o}return e.length=t,e}const pI=mF;function _F(e){return pI((0,dF.A)(e))}const yF=_F;var bF=je(30828);function wF(e,t){return(0,bF.A)(t,function(n){return e[n]})}const EF=wF;var vF=je(47686);function TF(e){return e==null?[]:EF(e,(0,vF.A)(e))}const xF=TF;function AF(e){return pI(xF(e))}const SF=AF;var kF=je(91689);function CF(e){var t=(0,kF.A)(e)?yF:SF;return t(e)}const IF=CF;class OF extends Ld{constructor(t){const{nodeUrls:n,randomise:r=!0,maxRetryCount:s=5,fetchImplementation:i,backoffImplementation:o=lF,...u}=t;if(!n.length)throw new Error("nodeUrls must contain at least one element");super({...u,nodeUrl:n[0]}),this.nodeUrls=r?IF(n):n,this.nodeIndex=r?Math.floor(Math.random()*n.length):0,this.maxRetryCount=s,this.fetchImplementation=i,this.backoffImplementation=o,this.getChainId()}async getChainId(){if(this.nodeUrls)return super.getChainId()}fetch(t,n){const r={jsonrpc:"2.0",method:t,...n&&{params:n},id:0};return this.fetchWithRetry({method:"POST",body:O2.stringify(r),headers:this.headers})}async fetchWithRetry(t,n=0){const r=this.nodeUrls?this.nodeUrls[this.nodeIndex]:this.nodeUrl;try{const s=this.fetchImplementation??fetch,i=this.nodeIndex,o=await s(r,t);if(!o.ok){if(i===this.nodeIndex&&(this.nodeIndex=(this.nodeIndex+1)%this.nodeUrls.length),o.status<500&&o.status!==429)return o;if(n++,n<this.maxRetryCount)return await uF(this.backoffImplementation(n)),this.fetchWithRetry(t,n)}return o}catch(s){throw console.error(s),s}}}const NF=se()(async(e,t)=>new Ld({nodeUrl:e,chainId:t,headers:await FT}),{normalizer:([e,t])=>`${e}::${t}`});async function RF(e){const t=sl.encodeShortString(e.chainId);return NF(e.rpcUrl,t)}class Cp extends Ap{constructor(t){super(t)}static async create(t){if(jh(t)){const n=y8(t),r=cF(t.id);return new Cp(new OF({nodeUrls:n,chainId:r}))}else{const n=await RF(t);return new Cp(n)}}async callContract(t,n){return super.callContract(t,n)}}const BF="5.24.2",uu=[],gI={id:"argentX",name:"Argent X",icon:"data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjQwIiBoZWlnaHQ9IjM2IiB2aWV3Qm94PSIwIDAgNDAgMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNC43NTgyIC0zLjk3MzY0ZS0wN0gxNC42MjM4QzE0LjI4NTEgLTMuOTczNjRlLTA3IDE0LjAxMzggMC4yODExNzggMTQuMDA2NCAwLjYzMDY4M0MxMy44MDE3IDEwLjQ1NDkgOC44MjIzNCAxOS43NzkyIDAuMjUxODkzIDI2LjM4MzdDLTAuMDIwMjA0NiAyNi41OTMzIC0wLjA4MjE5NDYgMjYuOTg3MiAwLjExNjczNCAyNy4yNzA5TDYuMDQ2MjMgMzUuNzM0QzYuMjQ3OTYgMzYuMDIyIDYuNjQwOTkgMzYuMDg3IDYuOTE3NjYgMzUuODc1NEMxMi4yNzY1IDMxLjc3MjggMTYuNTg2OSAyNi44MjM2IDE5LjY5MSAyMS4zMzhDMjIuNzk1MSAyNi44MjM2IDI3LjEwNTcgMzEuNzcyOCAzMi40NjQ2IDM1Ljg3NTRDMzIuNzQxIDM2LjA4NyAzMy4xMzQxIDM2LjAyMiAzMy4zMzYxIDM1LjczNEwzOS4yNjU2IDI3LjI3MDlDMzkuNDY0MiAyNi45ODcyIDM5LjQwMjIgMjYuNTkzMyAzOS4xMzA0IDI2LjM4MzdDMzAuNTU5NyAxOS43NzkyIDI1LjU4MDQgMTAuNDU0OSAyNS4zNzU5IDAuNjMwNjgzQzI1LjM2ODUgMC4yODExNzggMjUuMDk2OSAtMy45NzM2NGUtMDcgMjQuNzU4MiAtMy45NzM2NGUtMDdaIiBmaWxsPSIjRkY4NzVCIi8+Cjwvc3ZnPgo=",account:void 0,provider:void 0,selectedAddress:void 0,chainId:void 0,isConnected:!1,version:BF,request:C8,enable:async({starknetVersion:e="v5"}={})=>{const t=Promise.race([wt("CONNECT_DAPP_RES",6e5),wt("REJECT_PREAUTHORIZATION",6e5).then(()=>"USER_ABORTED")]);Mt({type:"CONNECT_DAPP"});const n=await t;if(!n)throw Error("No wallet account (should not be possible)");if(n==="USER_ABORTED")throw Error("User aborted");if(!window.starknet)throw Error("No starknet object detected");const r=window.starknet,{address:s,network:i}=n;if(e==="v5"){r.starknetJsVersion="v5";const o=await Cp.create(i);r.provider=o,r.account=new iF(s,o)}else throw new Error(`Unsupported starknet.js version: ${e}`);return r.selectedAddress=s,r.chainId=i.chainId,r.isConnected=!0,[s]},isPreauthorized:async()=>L_(),on:(e,t)=>{if(e==="accountsChanged")uu.push({type:e,handler:t});else if(e==="networkChanged")uu.push({type:e,handler:t});else throw G(e),new Error(`Unknwown event: ${e}`)},off:(e,t)=>{if(e!=="accountsChanged"&&e!=="networkChanged")throw G(e),new Error(`Unknwown event: ${e}`);const n=uu.findIndex(r=>r.type===e&&r.handler===t);n>=0&&uu.splice(n,1)}},DF=["starknet","starknet_argentX"];function mI(){DF.forEach(e=>{try{delete window[e]}catch{}try{Object.defineProperty(window,e,{value:gI,writable:!1})}catch{}try{window[e]=gI}catch{}})}function Ip(){mI(),setTimeout(mI,100)}Ip(),window.addEventListener("load",()=>Ip()),document.addEventListener("DOMContentLoaded",()=>Ip()),document.addEventListener("readystatechange",()=>Ip());const PF=async(e,t)=>{const n=window.starknet;if(!await D_.dappMessaging.connectDapp.mutate({origin:window.location.origin,silent:t}))return g6();const{address:s,network:i}=e,o=await $T(i);n.selectedAddress=s,n.chainId=i.chainId,n.provider=o,n.account=new OP(s,o);for(const u of uu)if(u.type==="accountsChanged")u.handler([s]);else if(u.type==="networkChanged"){const l=jh(i)?sl.encodeShortString(i.chainId):i.chainId;u.handler(l,[s])}else G(u)};window.addEventListener("message",async({data:e})=>{if(!window.starknet)return;const t=window.starknet;if(e.type==="CONNECT_ACCOUNT_RES"||e.type==="APPROVE_REQUEST_SWITCH_CUSTOM_NETWORK"){const n=e.type==="CONNECT_ACCOUNT_RES"?e.data:e.data.selectedAccount;n&&(n.address!==t.selectedAddress||n.network.chainId!==t.chainId)&&PF(n,!1)}else if(e.type==="DISCONNECT_ACCOUNT"){t.selectedAddress=void 0,t.account=void 0,t.isConnected=!1;for(const n of uu)n.type==="accountsChanged"?n.handler([]):n.type==="networkChanged"?n.handler(void 0):G(n)}})})()})()});VF();})();

//# sourceMappingURL=inpage.js.map